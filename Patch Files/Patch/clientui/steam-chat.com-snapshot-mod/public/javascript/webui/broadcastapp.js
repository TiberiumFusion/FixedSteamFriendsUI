










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
(self.webpackChunk_steam_friendsui=self.webpackChunk_steam_friendsui||[]).push([[7653],{32654:e=>{e.exports={BroadcastPlayerLite:"broadcastplayer_BroadcastPlayerLite_SAxf3",BroadcastPlayerLiteVideo:"broadcastplayer_BroadcastPlayerLiteVideo_yCd0z",BroadcastContext:"broadcastplayer_BroadcastContext_3TnYL",BroadcastPlaceholderImg:"broadcastplayer_BroadcastPlaceholderImg_3hxn9"}},31782:e=>{e.exports={GotSteamDialog:"gameactions_GotSteamDialog_2Qusm",DownloadSteamUrl:"gameactions_DownloadSteamUrl_10lP7",GameName:"gameactions_GameName_1_uzw",Buttons:"gameactions_Buttons_2_Obm",Button:"gameactions_Button_2nVaF",LeftButton:"gameactions_LeftButton_3WYyu",AnswerText:"gameactions_AnswerText_hCqVo",ActionText:"gameactions_ActionText_2s5Ns",Footer:"gameactions_Footer_3OKQs",Logo:"gameactions_Logo_2AEA_"}},15034:e=>{e.exports={"duration-app-launch":"800ms",BannerContainer:"deckverified_BannerContainer_29jK3",BannerHeader:"deckverified_BannerHeader_3yxJH",BannerContentDesktop:"deckverified_BannerContentDesktop_Cek1s",BannerContent:"deckverified_BannerContent_2dGPT",LearnMore:"deckverified_LearnMore_2gXzK",DeveloperBlockLinkDesktop:"deckverified_DeveloperBlockLinkDesktop_1lpfU",CategoryIcon:"deckverified_CategoryIcon_3qF71",LearnMoreCtn:"deckverified_LearnMoreCtn_2IcEu",LearnMorePC:"deckverified_LearnMorePC_CrSPf",DialogHeader:"deckverified_DialogHeader_ZEuE1",DialogTitle:"deckverified_DialogTitle_2WJTd",AppTitleCategory:"deckverified_AppTitleCategory_23sFZ",CompatibilityDetailsStillLearning:"deckverified_CompatibilityDetailsStillLearning_1WWwt",CompatibilityDetailsContainerDesktop:"deckverified_CompatibilityDetailsContainerDesktop_2ADsv",CompatibilityDetailsContainer:"deckverified_CompatibilityDetailsContainer_1-O8t",CompatibilityDetailsInterior_NoScroll:"deckverified_CompatibilityDetailsInterior_NoScroll_3oQPV",CompatibilityDetailsInterior_Scroll:"deckverified_CompatibilityDetailsInterior_Scroll_2uCLc",CompatibilityDetailsRow:"deckverified_CompatibilityDetailsRow_32fPp",CompatibilityDetailRatingSummary:"deckverified_CompatibilityDetailRatingSummary_mJGYS",Verified:"deckverified_Verified_ewmg-",Playable:"deckverified_Playable_1n8va",Unsupported:"deckverified_Unsupported_2Q0ld",CompatibilityDetailRatingDescription:"deckverified_CompatibilityDetailRatingDescription_3456E",CompatibilityDetailsSeparator:"deckverified_CompatibilityDetailsSeparator_2mwbd",CompatibilityDetailsResultIcon:"deckverified_CompatibilityDetailsResultIcon_-L3Xu",CompatabilityDetailsNoteContainer:"deckverified_CompatabilityDetailsNoteContainer_6_voo",CompatibilityNotes:"deckverified_CompatibilityNotes_1aoam",CompatibilityDetailsNoteRow:"deckverified_CompatibilityDetailsNoteRow_1Wu_j",DeveloperBlogYButton:"deckverified_DeveloperBlogYButton_3avWD",Divider:"deckverified_Divider_1ikdM",DeveloperComments_Anchor:"deckverified_DeveloperComments_Anchor__JTh9",DeveloperComments_Icon:"deckverified_DeveloperComments_Icon_2R6eC",DeveloperComments_LinkNoIcon:"deckverified_DeveloperComments_LinkNoIcon_1zjwW",DeveloperComments_LinkIcon:"deckverified_DeveloperComments_LinkIcon_3OZNU"}},25509:e=>{e.exports={AddToCartAnchorCtn:"addtocartbutton_AddToCartAnchorCtn_2ZqO4",Action:"addtocartbutton_Action_yoe6d",ActionOutOfStock:"addtocartbutton_ActionOutOfStock_3XwnF"}},15515:e=>{e.exports={DevSummaryCtn:"creatorhomeembed_DevSummaryCtn_1k0S-",LargeFormat:"creatorhomeembed_LargeFormat_1090T",CreatorDescCtn:"creatorhomeembed_CreatorDescCtn_3nKoQ",SmallFormat:"creatorhomeembed_SmallFormat_18tLe",DevSummaryWidgetCtn:"creatorhomeembed_DevSummaryWidgetCtn_A2B2V",DevSummaryBackground:"creatorhomeembed_DevSummaryBackground_1TsqA",DevSummaryContent:"creatorhomeembed_DevSummaryContent_23xa4",Avatar:"creatorhomeembed_Avatar_3Jepb",CreatorTitleCtn:"creatorhomeembed_CreatorTitleCtn_2T8Ub",CreatorNameName:"creatorhomeembed_CreatorNameName_8196l",CreatorTagline:"creatorhomeembed_CreatorTagline_NX5We",Title:"creatorhomeembed_Title_37vyV",Followers:"creatorhomeembed_Followers_2ZpFi",SocialFollowersCtn:"creatorhomeembed_SocialFollowersCtn_BT3Bj",FollowBtnCtn:"creatorhomeembed_FollowBtnCtn_2artm",FollowButton:"creatorhomeembed_FollowButton_1HwWX",FollowBtnText:"creatorhomeembed_FollowBtnText_1a5dj",SocialContainer:"creatorhomeembed_SocialContainer_1o1Ds",SocialImg:"creatorhomeembed_SocialImg_2v_K1",SocialLink:"creatorhomeembed_SocialLink_3eCVb",CuratorHoverCtn:"creatorhomeembed_CuratorHoverCtn_30j_R",AvatarLink:"creatorhomeembed_AvatarLink_1N0rY",MembersListLink:"creatorhomeembed_MembersListLink_3DO0N"}},74164:e=>{e.exports={DemoButton:"demobutton_DemoButton_3euSF",DisabledButton:"demobutton_DisabledButton_3Fsf5"}},39013:e=>{e.exports={"duration-app-launch":"800ms",HoverContentTransition:"gamehover_HoverContentTransition_3-pnC",Opening:"gamehover_Opening_3A24v",Open:"gamehover_Open_1rWYa",ItemHoverSource:"gamehover_ItemHoverSource_2ByoT",Selectable:"gamehover_Selectable_Hvshc",GameHoverCapsuleCtn:"gamehover_GameHoverCapsuleCtn_2jsr3",UseHidingBottomHalf:"gamehover_UseHidingBottomHalf_5hPHC",TrailerAnchorStoreLink:"gamehover_TrailerAnchorStoreLink_OxANH",TrailerCtn:"gamehover_TrailerCtn_1I27K",FullDivImage:"gamehover_FullDivImage_2jpCs",Transparent:"gamehover_Transparent_AZ9GL",Midline:"gamehover_Midline_Xwe3c",Price:"gamehover_Price_2Eh6G",CapsuleImageAnchorPoint:"gamehover_CapsuleImageAnchorPoint_1OMas",CapsuleImageCtn:"gamehover_CapsuleImageCtn_wm-2T",WithCornerShine:"gamehover_WithCornerShine_2kRKA",DemoButton:"gamehover_DemoButton_2V6ci",WishlistButton:"gamehover_WishlistButton_3notz",WishlistButtonText:"gamehover_WishlistButtonText_VI5mZ",WishlistLoadingText:"gamehover_WishlistLoadingText_7-s8T",WishlistButtonNotTop:"gamehover_WishlistButtonNotTop_3VcyY",BottomShelf:"gamehover_BottomShelf_oAqlZ",BottomShelfOffScreen:"gamehover_BottomShelfOffScreen_36zpR",TextContent:"gamehover_TextContent_2VvFL",GameTitle:"gamehover_GameTitle_405wj",TagRow:"gamehover_TagRow_2SWQM",Tags:"gamehover_Tags_fTGVi",Tag:"gamehover_Tag_1wO-t",PlatformDisplay:"gamehover_PlatformDisplay_2UG4_",ReviewsAndRelease:"gamehover_ReviewsAndRelease_1HFUC",ReleaseDate:"gamehover_ReleaseDate_35Bya",ReleasePrefix:"gamehover_ReleasePrefix_2ZKEX",ReviewScore:"gamehover_ReviewScore_3qvpp",ReviewScoreHeader:"gamehover_ReviewScoreHeader_2t-0j",ReviewScoreCount:"gamehover_ReviewScoreCount_1wXL_",ReviewScoreValue:"gamehover_ReviewScoreValue_3ZWs0",ReviewScoreDivider:"gamehover_ReviewScoreDivider_RjCBt",ReviewScoreNone:"gamehover_ReviewScoreNone_3TKyM",ReviewScoreLow:"gamehover_ReviewScoreLow_3nU5I",ReviewScoreMixed:"gamehover_ReviewScoreMixed_11Q2_",ReviewScoreHigh:"gamehover_ReviewScoreHigh_3wXHC",ReviewScorePercentage:"gamehover_ReviewScorePercentage_38dPa",ReviewScoreLabel:"gamehover_ReviewScoreLabel_2nuoO",GameHoverCreatorFollowButtonCtn:"gamehover_GameHoverCreatorFollowButtonCtn_1mQuB"}},45090:e=>{e.exports={"duration-app-launch":"800ms",SaleSection:"partnersaledisplay_SaleSection_1cOoC",CarouselDisplay:"partnersaledisplay_CarouselDisplay_mntHD",SaleSectionCtn:"partnersaledisplay_SaleSectionCtn_i2PTz",SaleHeaderContainer:"partnersaledisplay_SaleHeaderContainer_W4mvn",SaleSectionTabs:"partnersaledisplay_SaleSectionTabs_1FPIV",SaleViewAll:"partnersaledisplay_SaleViewAll_1bsBz",SaleSectionLoginPrompt:"partnersaledisplay_SaleSectionLoginPrompt_2-dSB",LoginButton:"partnersaledisplay_LoginButton_3h6sH",SaleOverlayCtn:"partnersaledisplay_SaleOverlayCtn_3GTIc",SaleOverlay:"partnersaledisplay_SaleOverlay_1sZo8",CarouselCapsuleBordered:"partnersaledisplay_CarouselCapsuleBordered_31OAy",CarouselCapsuleAnimated:"partnersaledisplay_CarouselCapsuleAnimated_3V1O5",AppSummaryWidgetCtn:"partnersaledisplay_AppSummaryWidgetCtn_2H8Bm",CarouselSalePageCapsule:"partnersaledisplay_CarouselSalePageCapsule_3r4Ny",SaleBroadcastCtn:"partnersaledisplay_SaleBroadcastCtn_1SFMh",SaleOuterContainer:"partnersaledisplay_SaleOuterContainer_150kd",CustomStyle_together:"partnersaledisplay_CustomStyle_together_1lAyg",SalePageLogoSet:"partnersaledisplay_SalePageLogoSet_JxIGH",SaleNewSizing:"partnersaledisplay_SaleNewSizing_1v-BV",SaleBackground:"partnersaledisplay_SaleBackground_2N8Se",SaleSectionTitleCtn:"partnersaledisplay_SaleSectionTitleCtn_bE2EA",SaleSectionSubtext:"partnersaledisplay_SaleSectionSubtext_17Fnl",SaleSectionContainer:"partnersaledisplay_SaleSectionContainer_W9_WA",vr_supported:"partnersaledisplay_vr_supported_1BDSJ",vr_required:"partnersaledisplay_vr_required_1P__h",preview_placeholder_section:"partnersaledisplay_preview_placeholder_section_3QLsj",LinkCapsule:"partnersaledisplay_LinkCapsule_2zVSa",fullscreen_bg:"partnersaledisplay_fullscreen_bg_j2ykT",fullscreen_bg_video:"partnersaledisplay_fullscreen_bg_video_3BU-y",SalePageBroadcastContextHover:"partnersaledisplay_SalePageBroadcastContextHover_hbVdl",AlbumCoverImage:"partnersaledisplay_AlbumCoverImage_2JfUA",AlbumTitle:"partnersaledisplay_AlbumTitle_keaMw",DesktopTabs:"partnersaledisplay_DesktopTabs_2utXv",SaleSectionTabsTab:"partnersaledisplay_SaleSectionTabsTab_3BgHm",SaleSectionTabContainer:"partnersaledisplay_SaleSectionTabContainer_1Svj0",SaleSectionTabsRow:"partnersaledisplay_SaleSectionTabsRow_30oGT",SaleTab:"partnersaledisplay_SaleTab_gc-rq",SaleTabLabel:"partnersaledisplay_SaleTabLabel_2mYMQ",SaleSectionTabListContainer:"partnersaledisplay_SaleSectionTabListContainer_2VZtq",MobileTabSelector:"partnersaledisplay_MobileTabSelector_2fm5T",Visible:"partnersaledisplay_Visible_2Jmo5",MobileTabSelectorButton:"partnersaledisplay_MobileTabSelectorButton_1t4-3",MobileTabSelectorShortcut:"partnersaledisplay_MobileTabSelectorShortcut_1P5tc",MobileTabSelectorDropDown:"partnersaledisplay_MobileTabSelectorDropDown_3KO7Y",MobileTabSelectorOption:"partnersaledisplay_MobileTabSelectorOption_GiTJl",TabContentsContainer:"partnersaledisplay_TabContentsContainer_2xJbu",HorizontalScrollInDragForceCursor:"partnersaledisplay_HorizontalScrollInDragForceCursor_nemO6",SaleBroadcastSection:"partnersaledisplay_SaleBroadcastSection_1u0IZ",CarouselPage:"partnersaledisplay_CarouselPage_Hlkuk",TabButtonsCtn:"partnersaledisplay_TabButtonsCtn_21-6t",TabButton:"partnersaledisplay_TabButton_1Gz4s",DefaultCreatorCtn:"partnersaledisplay_DefaultCreatorCtn_3KzJ1",EventSectionViewAllCtn:"partnersaledisplay_EventSectionViewAllCtn_1B6gV",SaleSectionBackgroundImageGroupEdit:"partnersaledisplay_SaleSectionBackgroundImageGroupEdit_2a4me"}},6933:e=>{e.exports={"duration-app-launch":"800ms",headerCapsuleImgWidth:"460",headerCapsuleImgHeight:"215",mainCapsuleImgWidth:"616",mainCapsuleImgHeight:"353",libraryAssetImgWidth:"300",libraryAssetImgHeight:"450",heroCapsuleImgWidth:"374",heroCapsuleImgHeight:"448",StoreSaleWidgetContainer:"salepreviewwidgets_StoreSaleWidgetContainer_2hhNO",LibraryAssetExpandedDisplay:"salepreviewwidgets_LibraryAssetExpandedDisplay_PZY_7",SaleItemDefaultCapsuleDisplay:"salepreviewwidgets_SaleItemDefaultCapsuleDisplay_37igg",MarketingMessage:"salepreviewwidgets_MarketingMessage_3_q87",StoreSaleWidgetRight:"salepreviewwidgets_StoreSaleWidgetRight_v9uRg",StoreSaleWidgetHalfLeft:"salepreviewwidgets_StoreSaleWidgetHalfLeft_111nf",StoreSaleWidgetTitle:"salepreviewwidgets_StoreSaleWidgetTitle_2ekpT",StoreSaleDiscountBox:"salepreviewwidgets_StoreSaleDiscountBox_cnkoF",StoreSaleWidgetLibraryAssetExtendedTop:"salepreviewwidgets_StoreSaleWidgetLibraryAssetExtendedTop_1uLNB",StoreSaleWidgetImage:"salepreviewwidgets_StoreSaleWidgetImage_yvqq8",CapsuleMicroTrailer:"salepreviewwidgets_CapsuleMicroTrailer_1M7n5",CapsulePlatform:"salepreviewwidgets_CapsulePlatform_2bCf9",StoreSaleWidgetContents:"salepreviewwidgets_StoreSaleWidgetContents_Agwfe",StoreMetaDataCtn:"salepreviewwidgets_StoreMetaDataCtn_2W2g3",StoreSaleItemRelease:"salepreviewwidgets_StoreSaleItemRelease_vCEpe",StoreSaleItemDev:"salepreviewwidgets_StoreSaleItemDev_3tIbO",StoreSaleItemReview:"salepreviewwidgets_StoreSaleItemReview_Kx5Nf",StoreSaleWidgetLeft:"salepreviewwidgets_StoreSaleWidgetLeft_3DkfN",TitleCtn:"salepreviewwidgets_TitleCtn_3rrH9",StoreSaleWidgetCrossCenterRight:"salepreviewwidgets_StoreSaleWidgetCrossCenterRight_oW0H1",CapsuleBottomBar:"salepreviewwidgets_CapsuleBottomBar_3lmdE",PlayNowButton:"salepreviewwidgets_PlayNowButton_38ePa",AddToLibraryButton:"salepreviewwidgets_AddToLibraryButton_1DrDh",StoreActionWidgetContainer:"salepreviewwidgets_StoreActionWidgetContainer_kW6m4",StoreSalePriceWidgetContainer:"salepreviewwidgets_StoreSalePriceWidgetContainer_2s-O5",StoreSaleWidgetBgTint:"salepreviewwidgets_StoreSaleWidgetBgTint_MvLJD",LibraryFallbackAssetImageContainer:"salepreviewwidgets_LibraryFallbackAssetImageContainer_1APLS",FallbackBackground:"salepreviewwidgets_FallbackBackground_3chRZ",SaleTagBlockCtn:"salepreviewwidgets_SaleTagBlockCtn_1ZqQL",StoreSaleWidgetCenter:"salepreviewwidgets_StoreSaleWidgetCenter_2asUT",StoreSaleWidgetReleaseAndTags:"salepreviewwidgets_StoreSaleWidgetReleaseAndTags_3wryh",Bundle:"salepreviewwidgets_Bundle_2GbhL",WidgetReleaseDateAndPlatformCtn:"salepreviewwidgets_WidgetReleaseDateAndPlatformCtn_3a6HR",SaleItemBrowserRow:"salepreviewwidgets_SaleItemBrowserRow_gASJ2",StoreSaleWidgetRelease:"salepreviewwidgets_StoreSaleWidgetRelease_1qvTF",StoreSaleWidgetTags:"salepreviewwidgets_StoreSaleWidgetTags_2bkP-",AppTag:"salepreviewwidgets_AppTag_3FJnZ",StoreSaleWidgetShortDesc:"salepreviewwidgets_StoreSaleWidgetShortDesc_3AsE5",TagTitle:"salepreviewwidgets_TagTitle_v1i4W",TagBox:"salepreviewwidgets_TagBox_1lqaD",SaleItemFullCapsuleDisplay:"salepreviewwidgets_SaleItemFullCapsuleDisplay_2sVvR",Tag:"salepreviewwidgets_Tag_33yqk",BundleContentPreview:"salepreviewwidgets_BundleContentPreview_jQ5Ga",StoreSaleBroadcastWidgetRight:"salepreviewwidgets_StoreSaleBroadcastWidgetRight_9VjYX",StoreSalePriceActionWidgetContainer:"salepreviewwidgets_StoreSalePriceActionWidgetContainer_1JuIp",Discounted:"salepreviewwidgets_Discounted_1g0B-",WishList:"salepreviewwidgets_WishList_1djkd",Action:"salepreviewwidgets_Action_2zssE",SingleLineMode:"salepreviewwidgets_SingleLineMode_1ZlGJ",StoreSaleDiscountedPriceCtn:"salepreviewwidgets_StoreSaleDiscountedPriceCtn_3NhLu",StoreSalePriceBox:"salepreviewwidgets_StoreSalePriceBox_3j4dI",StoreSaleNewItem:"salepreviewwidgets_StoreSaleNewItem_2_KY_",StoreOriginalPrice:"salepreviewwidgets_StoreOriginalPrice_3fFFs",PrePurchase:"salepreviewwidgets_PrePurchase_2f7BM",NewItem:"salepreviewwidgets_NewItem_2xCT1",PurchaseOptionDetails:"salepreviewwidgets_PurchaseOptionDetails_17_yn",InGameHover:"salepreviewwidgets_InGameHover_axjdi",StoreSalePrepurchaseLabel:"salepreviewwidgets_StoreSalePrepurchaseLabel_1Fru-",SingleLineOriginalPrice:"salepreviewwidgets_SingleLineOriginalPrice_t7Gt8",BaseDiscount:"salepreviewwidgets_BaseDiscount_3mInD",StoreSalePriceButton:"salepreviewwidgets_StoreSalePriceButton_1BejQ",OuterCapsuleContainer:"salepreviewwidgets_OuterCapsuleContainer_1dKR2",BottomBarPriceInfo:"salepreviewwidgets_BottomBarPriceInfo_1X3j2",CapsuleContainer:"salepreviewwidgets_CapsuleContainer_22Acx",EventRow:"salepreviewwidgets_EventRow_1UMFn",Muted:"salepreviewwidgets_Muted_1HVwz",BottomCreatorRow:"salepreviewwidgets_BottomCreatorRow_1JrUu",CreatorLogo:"salepreviewwidgets_CreatorLogo_3Krfu",CreatorName:"salepreviewwidgets_CreatorName_Fmi-a",AddToCartButton:"salepreviewwidgets_AddToCartButton_2iWMR",AddToWishlistButton:"salepreviewwidgets_AddToWishlistButton_2YfaL",HeaderCapsuleImageContainer:"salepreviewwidgets_HeaderCapsuleImageContainer_2oW_y",MainCapsuleImageContainer:"salepreviewwidgets_MainCapsuleImageContainer_1vpxH",HeroCapsuleImageContainer:"salepreviewwidgets_HeroCapsuleImageContainer_vnhlb",DiscoveryQueueCtn:"salepreviewwidgets_DiscoveryQueueCtn_2uX2G",VerticalCapsule:"salepreviewwidgets_VerticalCapsule_3sy8X",ForceLibrarySizing:"salepreviewwidgets_ForceLibrarySizing_25KI3",CapsuleImage:"salepreviewwidgets_CapsuleImage_2eQ4m",LinkCapsuleImage:"salepreviewwidgets_LinkCapsuleImage_2xO8H",CapsuleParentInfo:"salepreviewwidgets_CapsuleParentInfo_2erfW",ParentType:"salepreviewwidgets_ParentType_3FCPP",Banner:"salepreviewwidgets_Banner_2gxv9",Blue:"salepreviewwidgets_Blue_2o-5t",LinesImg:"salepreviewwidgets_LinesImg_3LecB",CapsuleDecorators:"salepreviewwidgets_CapsuleDecorators_1xNQc",BundleContentsCtnTransition:"salepreviewwidgets_BundleContentsCtnTransition_24KNc",Expanding:"salepreviewwidgets_Expanding_38KIq",Expanded:"salepreviewwidgets_Expanded_hPc1l",Collapsing:"salepreviewwidgets_Collapsing_2NmI1",BundleContentsCtn:"salepreviewwidgets_BundleContentsCtn_34acu",BundleContentsTitle:"salepreviewwidgets_BundleContentsTitle_hhdk8",BundleShowButton:"salepreviewwidgets_BundleShowButton_2Vu78",ShowContentsButton:"salepreviewwidgets_ShowContentsButton_-VlK4",ShowContentsSection:"salepreviewwidgets_ShowContentsSection_fsPeL",BundleContentItem:"salepreviewwidgets_BundleContentItem_2sdNO",StoreSaleWidgetOuterContainer:"salepreviewwidgets_StoreSaleWidgetOuterContainer_1_P15",ContentsCount:"salepreviewwidgets_ContentsCount_353Lz",PreviewCtn:"salepreviewwidgets_PreviewCtn_1NM53",PreviewItem:"salepreviewwidgets_PreviewItem_2yhQb",DeckCompatIcon:"salepreviewwidgets_DeckCompatIcon_1Nju8",PreviewImg:"salepreviewwidgets_PreviewImg_1jx70",DemoLayoutPopup:"salepreviewwidgets_DemoLayoutPopup_2tmp2",FreeWeekendBar:"salepreviewwidgets_FreeWeekendBar_2SCof",FreeWeekendLabel:"salepreviewwidgets_FreeWeekendLabel_21B6L",RecommendationReason:"salepreviewwidgets_RecommendationReason_3Q_ta",LocalizationSpan:"salepreviewwidgets_LocalizationSpan_3bCSm",CapsuleName:"salepreviewwidgets_CapsuleName_31P1R",DiscountIconCtn:"salepreviewwidgets_DiscountIconCtn_3Qt9S",MaxActionButtonWidth:"salepreviewwidgets_MaxActionButtonWidth_3GOwB"}},82149:e=>{e.exports={bordered_live_stream_icon:"liveicon_bordered_live_stream_icon_2R1rY"}},95623:e=>{e.exports={Link:"salebanner_Link_-HlDB",Banner:"salebanner_Banner_2bT8i",Big:"salebanner_Big_sGy-b",Mobile:"salebanner_Mobile_mhii5"}},49434:e=>{e.exports={PopupScreenshotModal:"screenshotpopout_PopupScreenshotModal_yloqx",PopupScreenshotContainer:"screenshotpopout_PopupScreenshotContainer_1wwvw",PopupScreenshot:"screenshotpopout_PopupScreenshot_31XZu",ButtonCtn:"screenshotpopout_ButtonCtn_3Mysp",ButtonIcon:"screenshotpopout_ButtonIcon_1tCO1",Disabled:"screenshotpopout_Disabled_1a_f8"}},20516:e=>{e.exports={CompatIcon:"deckcompaticons_CompatIcon_3cEK5"}},48036:e=>{e.exports={ErrorDiv:"image_ErrorDiv_2FXME"}},83279:e=>{e.exports={PreviewCtn:"expandableimage_PreviewCtn_16Skn",SVG:"expandableimage_SVG_3Mns5"}},73280:e=>{e.exports={LinkRegionDragBox:"linkregionbox_LinkRegionDragBox_Rtlc-",EdgeDown:"linkregionbox_EdgeDown_i9zrH",LinkRegionGridBox:"linkregionbox_LinkRegionGridBox_1Ob4A",LinkRegionEdge:"linkregionbox_LinkRegionEdge_2stP4",TopLeft:"linkregionbox_TopLeft_Clgi-",Top:"linkregionbox_Top_2Z9Vy",TopRight:"linkregionbox_TopRight_2-8Db",Left:"linkregionbox_Left_3ZwUw",Middle:"linkregionbox_Middle_1Heco",LinkRegionDelete:"linkregionbox_LinkRegionDelete_3Hb3w",LinkRegionSettings:"linkregionbox_LinkRegionSettings_VazMl",Right:"linkregionbox_Right_3h5fK",BottomLeft:"linkregionbox_BottomLeft_2CQe0",Bottom:"linkregionbox_Bottom_sIHlK",BottomRight:"linkregionbox_BottomRight_3lnwj",topleft:"linkregionbox_topleft_3W096",top:"linkregionbox_top_1iRW1",topright:"linkregionbox_topright_1Yrl7",left:"linkregionbox_left_2iBrm",right:"linkregionbox_right_15t6A",bottomleft:"linkregionbox_bottomleft_3SdBc",bottom:"linkregionbox_bottom_2kzZ9",bottomright:"linkregionbox_bottomright_2AKXk",middle:"linkregionbox_middle_1CS75",LinkRegionButtonContainer:"linkregionbox_LinkRegionButtonContainer_1ZJ42",DialogButton:"linkregionbox_DialogButton_nN2Q1",LinkRegionInfo:"linkregionbox_LinkRegionInfo_3TiV7",LinkText:"linkregionbox_LinkText_2TAc2"}},90890:e=>{e.exports={Loading:"loadingspinner_Loading_24C5l",LoadingSpinnerAmin:"loadingspinner_LoadingSpinnerAmin_15h2O",Small:"loadingspinner_Small_2FPxE",Medium:"loadingspinner_Medium_2FfWb",Large:"loadingspinner_Large_30IMo"}},33264:e=>{e.exports={strMaxMobileWidth:"700px"}},6567:(e,t,a)=>{"use strict";a.d(t,{FF:()=>U,CBroadcastApp:()=>R});var o=a(34629),n=a(71757),s=a(99594),r=a(63696),i=a(18395),l=a(76130),c=a(234),d=a(92035),m=a(96274),p=a(31881),u=a(5729),h=a(55044);const g=({group:e,onClick:t})=>{const a=e.watching_broadcast_steamid;return r.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:t},r.createElement("div",{className:"ChatRoomListGroupItem_header"},r.createElement(u.I,{group:e,small:!0}),r.createElement("div",{className:"groupNameStatusContainer"},r.createElement("div",{className:"chatRoomName"},e.name),a&&r.createElement("div",{className:"chatRoomDetails"},(0,d.we)("#Broadcast_WatchParty_Viewers_NoneActive")))))};class _ extends r.Component{CreateWatchParty(e=!1){const{browserContext:t,ownerWindow:a,broadcastAccountId:o,initialFriend:s}=this.props;this.Close();const i=e&&s?[s.accountid]:[];!function(e,t,a,o){(0,l.HT)(r.createElement(m.zw,{browserContext:e,bHideChatNameEntry:!1,vecInvitePlayers:o,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:a},strTitle:(0,d.we)("#Broadcast_CreateWatchParty")}),t,"CreateChatDialog",{strTitle:(0,d.we)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600},(0,n.h8)(t))}(t,a||window,o,i)}WatchAlone(){this.Close()}UpgradeExisting(e){const{broadcastAccountId:t,browserContext:a,broadcastChannelID:o,broadcastTabId:n}=this.props;this.Close(),o?e.SetChatRoomGroupWatchingBroadcast(void 0,o):e.SetChatRoomGroupWatchingBroadcast(t);const r=s.xm.UIStore.ShowAndOrActivateChatRoomGroup(a,e,!0);n&&s.xm.UIStore.CloseTabByID(n),this.props.bIsNewSteamTVDialog||r.ShowBroadcast()}Close(){const{closeModal:e}=this.props;e&&e()}render(){const{closeModal:e,initialFriend:t}=this.props,a=s.xm.ChatStore.currentChatRoomGroups.filter((e=>e.BCanIAssociateBroadcast())),o=t;return r.createElement("div",{className:"chatModalCover"},r.createElement(l.x_,{onEscKeypress:e},r.createElement(c.UC,{className:"watchPartyDialog"},r.createElement(c.nB,null,r.createElement("div",{className:"watchPartyPrompt"},(0,d.we)("#Broadcast_WatchPrompt")),r.createElement(c.xz,null,!this.props.bIsNewSteamTVDialog&&r.createElement(c.$n,{svgicon:i.Gv$,className:"watchHowButton",onClick:this.WatchAlone},(0,d.we)("#Broadcast_WatchAlone")),o&&r.createElement(c.$n,{className:"watchHowButton",onClick:()=>this.CreateWatchParty(!0)},r.createElement(h.gv,{friend:o,context:null,bLarge:!1}),(0,d.PP)("#Broadcast_WatchWith",r.createElement("span",{className:"highlight"}," ",o.display_name))),0!==a.length&&r.createElement(r.Fragment,null,r.createElement(c.JU,null,(0,d.we)("#Broadcast_WatchWithExistingWatchParty")),a.map((e=>r.createElement(g,{key:e.unique_id,group:e,onClick:()=>this.UpgradeExisting(e)})))),r.createElement(c.$n,{className:"watchHowButton newWatchGroup",svgicon:i.u9R,onClick:()=>this.CreateWatchParty(!1)},(0,d.we)("#Broadcast_LinkBroadcastToGroup_New")))),r.createElement(c.wi,null))))}}(0,o.Cg)([p.oI],_.prototype,"WatchAlone",null),(0,o.Cg)([p.oI],_.prototype,"Close",null);var S=a(89193),C=a(41230),v=a(7470),w=a(23868),b=a(63437),f=a.n(b),E=a(57883),y=a(82706),I=a(13249),D=a(52335),A=a(43666),B=a(73158),k=a(76496),T=a(75778),P=a(2712),L=a(73767),G=a(1923),N=a(4183);class R{constructor(){(0,S.Gn)(this)}m_fnLaunchChat;m_iTimeoutLogin=void 0;m_eLogonState=0;m_bLogonDialogVisisible=!1;m_steamID=void 0;m_reactRoot;Init(e){this.m_fnLaunchChat=e,this.m_steamID=N.GP.steamid,window.addEventListener("message",this.HandlePostMessage),this.m_reactRoot=v.H(document.getElementById("friendslist-container")),this.m_reactRoot.render(r.createElement(M,{app:this})),this.m_iTimeoutLogin=window.setTimeout((()=>{0==this.m_eLogonState&&(this.m_eLogonState=1)}),2500)}LaunchChat(){this.m_reactRoot.unmount(),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),(0,n.xT)(N.GP.steamid),this.m_fnLaunchChat()}GetLoginURL(){return`${N.TS.STORE_BASE_URL}login/?steamtv`}BIsPerformingLogonCheck(){return 0==this.m_eLogonState||1==this.m_eLogonState}BIsLogonDialogVisible(){return this.m_bLogonDialogVisisible}ShowLogonDialog(){this.m_bLogonDialogVisisible=!0}BReadyToRender(){return 0!=this.m_eLogonState}DismissLogonDialog(){this.m_bLogonDialogVisisible=!1}GetSteamIDWatched(){return this.m_steamID}ExtractOrigin(e){return e.replace(/^(https?:\/\/[^/]*).*$/,"$1")}HandlePostMessage(e){if(e.origin!=this.ExtractOrigin(N.TS.STORE_BASE_URL)&&e.origin!=this.ExtractOrigin(N.TS.CHAT_BASE_URL))return void console.warn(`Ignoring message from untrusted domain "${e.origin}"`);let t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()}}(0,o.Cg)([S.sH],R.prototype,"m_eLogonState",void 0),(0,o.Cg)([S.sH],R.prototype,"m_bLogonDialogVisisible",void 0),(0,o.Cg)([S.sH],R.prototype,"m_steamID",void 0),(0,o.Cg)([S.XI],R.prototype,"LaunchChat",null),(0,o.Cg)([S.XI.bound],R.prototype,"HandlePostMessage",null);let M=class extends r.Component{m_broadcastInfo=null;constructor(e){super(e),this.m_broadcastInfo=k.BroadcastWatchStore.StartInfo(this.props.app.GetSteamIDWatched()),this.state={bChatCollapsed:!1,bTheaterMode:!1}}componentWillUnmount(){this.m_broadcastInfo&&(k.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnShowLogin(){this.props.app.ShowLogonDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){this.setState({bTheaterMode:!this.state.bTheaterMode})}render(){const e=this.props.app;let t=this.m_broadcastInfo,a=W();return r.createElement(H,null,e.BReadyToRender()&&r.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},r.createElement(T.y,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastTab"},r.createElement("div",{className:"StandalonePlayerHeader"},r.createElement("div",{className:"STV_Logo"},r.createElement(i.P7C,null)),r.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},r.createElement(V,{onClick:this.OnShowLogin}),r.createElement(x,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),r.createElement(z,{steamID:e.GetSteamIDWatched(),watchLocation:a,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},r.createElement(Q,{app:e})))),r.createElement(F,{app:e}))}};function O(){const e=(0,N.Fd)("loyalty_webapi_token","application_config");return new B.D(N.TS.WEBAPI_BASE_URL,e)}function H(e){const{children:t}=e,a=r.useCallback((()=>s.xm?.CMInterface),[]),o=(0,p.bs)(r.useCallback((()=>new D.A),[])),n=(0,p.bs)(O);return r.createElement(G.s,null,r.createElement(N.ss,null,N.iA.logged_in?r.createElement(I.VQ,{useActiveCMInterface:a,useStorage:o},t):r.createElement(I.VQ,{useActiveSteamInterface:n,useStorage:o},t)))}(0,o.Cg)([p.oI],M.prototype,"OnShowLogin",null),(0,o.Cg)([p.oI],M.prototype,"ToggleChat",null),(0,o.Cg)([p.oI],M.prototype,"ToggleTheaterMode",null),M=(0,o.Cg)([C.PA],M);let F=(0,C.PA)((({app:e})=>e.BIsPerformingLogonCheck()?r.createElement("div",null,r.createElement("iframe",{style:{display:"none"},src:e.GetLoginURL()})):null));function V(e){return r.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},r.createElement(i.y_e,null),(0,d.we)("#Broadcast_WatchWithFriends"))}function x(e){return r.createElement("div",{className:"ToggleBroadcastChat",title:(0,d.we)("#Broadcast_ToggleChat"),onClick:e.onClick},r.createElement(i.K7s,{showChat:e.hideIcon}))}function W(){return N.TS.STEAM_TV?1:3}let U=class extends r.Component{m_broadcastInfo=null;constructor(e){super(e);let t=this.props.broadcastView.GetSteamID().ConvertTo64BitString();this.m_broadcastInfo=k.BroadcastWatchStore.StartInfo(t),this.state={bChatCollapsed:!1}}componentWillUnmount(){this.m_broadcastInfo&&(k.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnWatchWithFriends(){this.props.broadcastView.ShowWatchPromptDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){s.xm.UIStore.SetTheaterMode(!s.xm.UIStore.GetTheaterMode())}render(){const{broadcastView:e,popup:t,style:a}=this.props,o=e.GetSteamID().ConvertTo64BitString();let n=W();const s=e.m_bShowWatchPromptDialog?r.createElement(_,{closeModal:()=>e.HideWatchPromptDialog(),broadcastAccountId:e.GetSteamID().GetAccountID(),broadcastTabId:e.GetUniqueID(),initialFriend:e.m_watchPromptInitialFriend,browserContext:A.m,ownerWindow:t}):null;return r.createElement("div",{className:"BroadcastTab",style:a},r.createElement(T.y,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastTab_OverBackground"},r.createElement("div",{className:"BroadcastTabHeaderContainer"},r.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},r.createElement(V,{onClick:this.OnWatchWithFriends}),r.createElement(x,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),r.createElement(z,{steamID:o,watchLocation:n,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},s)))}};(0,o.Cg)([p.oI],U.prototype,"OnWatchWithFriends",null),(0,o.Cg)([p.oI],U.prototype,"ToggleChat",null),(0,o.Cg)([p.oI],U.prototype,"ToggleTheaterMode",null),U=(0,o.Cg)([C.PA],U);let z=class extends r.Component{m_strLocalSteamID="";m_refBroadcastContainer=r.createRef();m_elMainContent;constructor(e){super(e),(0,S.Gn)(this),this.state={info:null}}componentDidMount(){E.td.stream["76561198208088121"]&&"chinese"===N.TS.LANGUAGE?this.OnLocalStreamChange("76561198208088121"):E.td.stream["76561198207552741"]&&"russian"===N.TS.LANGUAGE&&this.OnLocalStreamChange("76561198207552741")}static getDerivedStateFromProps(e,t){if(!t.info||t.info.m_steamIDBroadcast!==e.steamID){t.info&&k.BroadcastWatchStore.StopInfo(t.info);return{info:k.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&k.BroadcastWatchStore.StopInfo(this.state.info)}OnLocalStreamChange(e){this.m_strLocalSteamID=e}SetMainContentRef(e){this.m_elMainContent=e}CalculateBroadcastSectionStyles(e){if(this.props.bHideChat)return{width:"100%",height:"100%"};let t,a;n.ZM&&(t=n.ZM.UIDisplayPrefs.nWatchPartyBroadcastHeightPercentage,a=n.ZM.UIDisplayPrefs.nWatchPartyBroadcastWidthPercentage);const o={};if(e){const e=t||66;if(o.height=`${e}%`,this.m_elMainContent){const{clientWidth:t,clientHeight:a}=this.m_elMainContent,n=9/16*t+50,s=(0,L.OQ)(e,1,n/a*100);o.height=`${s}%`}}else o.width=a?`${a}%`:"66%",o.minWidth=a?`${a}%`:"66%",o.maxWidth="calc( 100% - 316px )",o.overflowY="auto";return o}OnGrabberMouseDown(e){let t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})}HandleMouseMove(e){e.preventDefault(),e.stopPropagation();let t=this.m_refBroadcastContainer.current.getBoundingClientRect(),a=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect();const o=t.left,s=e.clientX,r=a.width,i=(0,L.OQ)((s-o)/r*100,1,100);n.ZM.SetUIDisplayPref("nWatchPartyBroadcastWidthPercentage",i)}UnregisterDragEvents(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})}render(){let{steamID:e,children:t}=this.props,a=this.m_strLocalSteamID||e,o=this.state.info.m_bIsOnline,n=null;const i=this.CalculateBroadcastSectionStyles(!1);i.flexGrow=this.props.bHideChat?1:null,E.td.bValid&&(n=r.createElement(j,{info:E.td}));const l=new R,c=r.createElement("div",{className:"LoginDiv"},r.createElement("a",{onClick:()=>l.ShowLogonDialog(),className:f().ChatLoginButton,href:"#"},(0,d.we)("#BroadcastChat_Login")),r.createElement(Q,{app:l})),m=k.BroadcastWatchStore.GetBroadcast(a)?k.BroadcastWatchStore.GetBroadcast(a).m_ulBroadcastID:"0";return r.createElement("div",{className:"BroadcastContainer"},r.createElement("div",{className:"BroadcastContainerSection",ref:this.m_refBroadcastContainer,style:i},r.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},o&&r.createElement(y.default,{key:a,steamIDBroadcast:a,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!o&&n,r.createElement("div",{className:"videoContainerSizer"})),t,r.createElement("div",{className:"BroadcastDetailsSection"},r.createElement(y.BroadcastDetails,{steamID:a,onLocalStreamChange:this.OnLocalStreamChange,bVerticalBroadcastChat:!0}))),!this.props.bHideChat&&r.createElement("div",{className:"BroadcastChatDivider horizontal",onMouseDown:this.OnGrabberMouseDown}),r.createElement("div",{className:"BroadcastChatDiv",style:{display:this.props.bHideChat?"none":"flex",flexDirection:"column",width:"100%",minWidth:"300px"}},r.createElement(w.I,{emoticonStore:s.xm?s.xm.ChatStore.EmoticonStore:null,broadcastID:m,steamID:a,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}),N.iA&&N.iA.logged_in?null:c))}};function j(e){let t=`url( "${N.TS.CHAT_BASE_URL+e.info.offlineImage}" )`;return r.createElement("div",{style:{backgroundImage:t},className:"BroadcastOffline"})}(0,o.Cg)([S.sH],z.prototype,"m_strLocalSteamID",void 0),(0,o.Cg)([p.oI],z.prototype,"OnLocalStreamChange",null),(0,o.Cg)([p.oI],z.prototype,"SetMainContentRef",null),(0,o.Cg)([p.oI],z.prototype,"OnGrabberMouseDown",null),(0,o.Cg)([p.oI],z.prototype,"HandleMouseMove",null),(0,o.Cg)([p.oI],z.prototype,"UnregisterDragEvents",null),z=(0,o.Cg)([C.PA],z);class X extends r.Component{Dismiss(){this.props.app.DismissLogonDialog()}render(){return r.createElement(P.x_,{onEscKeypress:this.Dismiss},r.createElement(c.UC,{className:"SteamTVLoginDialog"},r.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))}}(0,o.Cg)([p.oI],X.prototype,"Dismiss",null);let Q=class extends r.Component{render(){if(!this.props.app.BIsLogonDialogVisible())return null;let e=r.createElement(X,{app:this.props.app});return r.createElement("div",{className:"FullModalOverlay"},r.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),r.createElement("div",{className:"ModalOverlayContent active"},e))}};Q=(0,o.Cg)([C.PA],Q)},65116:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var o=a(34629),n=a(63696),s=a(6567),r=a(41230),i=a(52312);let l=class extends n.Component{render(){let e=this.props.broadcastView;if(!(e&&e instanceof i.w))return null;let t={};return this.props.isActive||(t.display="none"),n.createElement(s.FF,{style:t,broadcastView:e,popup:this.props.popup})}};l=(0,o.Cg)([r.PA],l);const c=l},48235:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(63696),n=a(82706),s=a(41704);const r=o.forwardRef((function({steamID:e,localSteamID:t,watchLocation:a,bWebRTC:r,style:i,onRequestClose:l,actions:c,onTheaterMode:d,onLocalStreamChange:m,bVerticalBroadcastChat:p},u){const h=t||e;return o.createElement("div",{ref:u,style:{display:"flex",flexDirection:"column",...i}},o.createElement("div",{className:"BroadcastSection"},o.createElement(n.default,{key:h,steamIDBroadcast:h,watchLocation:a,bWebRTC:r,onRequestClose:l,actions:c,onTheaterMode:d,onOpenLinkInNewWindow:s.EP}),o.createElement("div",{className:"videoContainerSizer"})),o.createElement("div",{className:"BroadcastDetailsSection"},o.createElement(n.BroadcastDetails,{steamID:h,onLocalStreamChange:m,bVerticalBroadcastChat:p})))}))},82706:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BroadcastDetails:()=>Do,LinkOverlay:()=>Bo,default:()=>go});var o=a(34629),n=a(89193),s=a(41230),r=a(63696),i=a(18501),l=a(20667),c=a(76496),d=a(19155),m=a(31881),p=a(63680);class u extends r.Component{m_elCanvas;m_Context;m_schUpdate=new p.LU;m_bSetupComplete=!1;componentDidMount(){0==this.props.updateRate&&this.updateCanvas()}componentWillUnmount(){this.m_schUpdate.Cancel()}componentDidUpdate(){this.updateCanvas()}BindCanvasRef(e){this.m_elCanvas=e}updateCanvas(){if(null==this.props.elementRef||null==this.m_elCanvas||this.m_bSetupComplete)return;let e=this.props.scaleFactor||[1,1],t=this.props.elementRef,a=this.props.updateRate;this.m_Context=this.m_elCanvas.getContext("2d");let o=Math.floor(this.m_elCanvas.clientWidth/this.props.reductionFactor),n=Math.floor(this.m_elCanvas.clientHeight/this.props.reductionFactor);this.m_elCanvas.width=o,this.m_elCanvas.height=n,this.props.blurAmount>0&&(this.m_Context.filter="blur("+this.props.blurAmount+"px)");let s=()=>{this.m_Context.drawImage(t,0,0,o*e[0],n*e[1]),a>0&&this.m_schUpdate.Schedule(a,s)};s(),this.m_bSetupComplete=!0}render(){return r.createElement("canvas",{id:this.props.id,className:this.props.className,ref:this.BindCanvasRef,width:this.props.width,height:this.props.height})}}(0,o.Cg)([m.oI],u.prototype,"BindCanvasRef",null),(0,o.Cg)([m.oI],u.prototype,"updateCanvas",null);var h=a(88987),g=a(75778),_=a(26712),S=a(4183),C=a(43471),v=a(47058);function w(e,t){return(0,C.p)(e,function(e){return[e?.jsondata?.read_more_link?(0,_.wm)(e.jsondata.read_more_link).toLocaleLowerCase():void 0]}(t))}function b(e,t){return e=w(e,t)?(S.TS.IN_CLIENT?"steam://openurl_external/":"")+(0,C.E)(e):(0,_.NT)(e)}var f=a(74211),E=a(79641),y=a(2991),I=a(90260),D=a(47110),A=a(18395),B=a(75223),k=a(92035);r.createContext({bShowCompatInfo:!1});const T=e=>{const t=(a=e.category,P[a]||A.WX$);var a;return r.createElement("div",{className:(0,D.A)(B.SteamDeckCompatInfo,e.className)},r.createElement(A.lRD,null),r.createElement(t,{className:B.SteamDeckCompatIcon}))},P={1:A.jIP,2:A.aVR,3:A.o5Q,0:A.WX$};var L=a(72370),G=a(13692),N=a(73544),R=a(97567),M=a(39013),O=a.n(M),H=a(6933),F=a.n(H);function V(e){const{appInfo:t}=e,a=(0,r.useRef)({include_trailers:!0}),[o]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),a.current);if(!o)return null;const n=o.GetMicroTrailer();return n?r.createElement("video",{className:F().CapsuleMicroTrailer,loop:!0,muted:!0,autoPlay:!0,key:"mtv-"+n.strMP4URL},r.createElement("source",{src:n.strWebMURL,type:"video/webm"}),!S.TS.IN_CLIENT&&r.createElement("source",{src:n.strMP4URL,type:"video/mp4"})):!o.GetParentAppID()||1!=o.GetAppType()&&12!=o.GetAppType()?null:r.createElement(V,{appInfo:{id:o.GetParentAppID(),type:"game"}})}function x(e){const{item:t,strClassName:a,bMinimizePlatforms:o}=e,[n]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),{include_platforms:!0});if(!n)return null;const s=n.GetPlatforms();if(o){let e=s.windows&&r.createElement("span",{title:(0,k.we)("#Platform_Windows")},r.createElement(A.Xz0,null));return(0,S.Pr)()&&s.mac?e=r.createElement("span",{title:(0,k.we)("#Platform_Mac")},r.createElement(A.kPc,null)):((0,S.CI)()||(0,S.Hn)()||(0,S.rf)())&&s.steamos_linux&&(e=r.createElement("span",{title:(0,k.we)("#Platform_Linux")},r.createElement(A.Qte,null))),e?r.createElement("span",{className:(0,D.A)(F().CapsulePlatform,a)},e):null}return r.createElement("span",{className:(0,D.A)(F().CapsulePlatform,a)},s.windows&&r.createElement("span",{title:(0,k.we)("#Platform_Windows")},r.createElement(A.Xz0,null)),s.mac&&r.createElement("span",{title:(0,k.we)("#Platform_Mac")},r.createElement(A.kPc,null)),s.steamos_linux&&r.createElement("span",{title:(0,k.we)("#Platform_Linux")},r.createElement(A.Qte,null)),s.vr_support?.vrhmd&&r.createElement("span",{title:(0,k.we)("#Platform_VR")},r.createElement(A.VR,null)))}var W=a(83957),U=a.n(W),z=a(10776),j=a(6885),X=a(61889),Q=a(50301);var q;function Z(e){switch(e){case"primary":return q.k_ePrimary;case"featured":return q.k_eFeatured;case"default_featured":return q.k_eDefaultFeatured;default:return q.k_eGeneral}}!function(e){e[e.k_ePrimary=3]="k_ePrimary",e[e.k_eFeatured=2]="k_eFeatured",e[e.k_eDefaultFeatured=1]="k_eDefaultFeatured",e[e.k_eGeneral=0]="k_eGeneral"}(q||(q={}));class K{constructor(){(0,n.Gn)(this)}accountid;steamid;hub_popular;popular;relay_broadcast_id;rowversion;thumbnail_http_address;nAppIDVOD;title=void 0;viewer_count=void 0;whitelist_rank;gamedata_subtitle=void 0;store_title;left_panel;right_panel;snr;broadcast_chat_visibility;default_selection_priority=q.k_eGeneral;current_selection_priority=q.k_eGeneral}(0,o.Cg)([n.sH],K.prototype,"title",void 0),(0,o.Cg)([n.sH],K.prototype,"viewer_count",void 0),(0,o.Cg)([n.sH],K.prototype,"gamedata_subtitle",void 0),(0,o.Cg)([n.sH],K.prototype,"current_selection_priority",void 0);function Y(e){return Boolean(e&&e.thumbnail_http_address)}class J{constructor(){(0,n.Gn)(this)}static s_GlobalStore;m_inFlightRequests=new Map;m_lookupKeyToEmbedStreamDef=new Map;m_lookupStreams=new Map;m_playReadyStream=new Map;m_bMapHasStartedVideo=new Map;m_mapBroadcastChecked=new Map;m_pageChatStatus="hide";m_streamChatStatus="hide";m_bUserChatExpanded=void 0;m_bUserPreferenceHideBroadcastByDefault=void 0;m_bCollapsed=void 0;m_setStreamChangedListeners=new Set;m_bUseFakeData=!1;m_onLoadContextCall=new Map;BHasStreams(e){const t=this.GetStreams(e);return Boolean(t&&t.length>0)}AddCallbackOnNewContext(e,t,a){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),{name:t,fnCallback:a})}ClearCallbackOnNewContext(e){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),null)}GetPlayReadyStream(e){let t=this.GetStreamsLookupKeyFromDef(e);return this.m_playReadyStream.get(t)}BIsEmbeddedBroadcastHiddenByDefaultUserSettings(){return Boolean(this.m_bUserPreferenceHideBroadcastByDefault)}BIsEmbeddedStreamCollapsed(){return Boolean(this.m_bCollapsed)}SetEmbeddedStreamCollapsed(e){this.m_bCollapsed!=e&&(this.m_bCollapsed=e)}GetConcurrentStreams(e){const t=this.GetStreams(e);return t?t.filter((e=>Y(e))).length:0}GetChatVisibility(){return"remove"===this.m_pageChatStatus||"remove"===this.m_streamChatStatus?"remove":void 0!==this.m_bUserChatExpanded?this.m_bUserChatExpanded?"show":"hide":"show"===this.m_pageChatStatus?"show":"hide"===this.m_pageChatStatus||"hide"===this.m_streamChatStatus?"hide":"show"}ToggleChatVisibility(){const e=this.GetChatVisibility();"remove"!==e&&(this.m_bUserChatExpanded="hide"===e)}DebugDumpContextAndAvailableContext(e){console.log("Requested context",this.GetStreamsLookupKeyFromDef(e)),console.log("Available context count: ",this.m_lookupStreams.size),this.m_lookupStreams.forEach(((e,t)=>{console.log(t,e.length)}))}GetStreams(e){const t=this.GetStreamsLookupKeyFromDef(e);return this.m_lookupStreams.get(t)}GetBroadcastURL(e){let t=null;return t=e.steamid?new z.b(e.steamid):z.b.InitFromAccountID(e.accountid),S.TS.COMMUNITY_BASE_URL+"broadcast/watch/"+t.ConvertTo64BitString()}BIsAppStreaming(e){let t=!1;return this.m_lookupStreams.forEach((a=>{t||(t=Boolean(a)&&a.some((t=>c.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID===e)))})),t}GetStreamsForAppID(e){const t=new Array;return this.m_lookupStreams.forEach((a=>{a?.forEach((a=>{c.BroadcastWatchStore.GetOrCreateBroadcastInfo(a.steamid).m_nAppID===e&&t.push(a)}))})),t}AddStreamChangedListener(e){this.m_setStreamChangedListeners.add(e)}RemoveStreamChangedListener(e){this.m_setStreamChangedListeners.delete(e)}async LoadBIsEmbeddedBroadcastHidden(e){if(void 0===this.m_bUserPreferenceHideBroadcastByDefault){let t=(0,S.Tc)("broadcastuser","application_config");if(!t)try{let a=S.TS.STORE_BASE_URL+"broadcast/ajaxgetuserbroadcastpreferences",o=await U().get(a,{params:{},cancelToken:e.token});t=o.data}catch(e){console.log("LoadBIsEmbeddedBroadcastHidden: "+(0,Q.H)(e).strErrorMsg),t={bHideStoreBroadcast:!1}}(0,n.h5)((()=>{this.m_bUserPreferenceHideBroadcastByDefault=t.bHideStoreBroadcast,this.m_bCollapsed=t.bHideStoreBroadcast}))}return this.m_bUserPreferenceHideBroadcastByDefault}async SetupEmbeddableVOD(e,t){this.m_bUseFakeData=!1,this.m_streamChatStatus="remove",await d.A.Get().QueueAppRequest(e.nAppIDVOD,{include_assets:!0,include_trailers:!0});const a=d.A.Get().GetApp(e.nAppIDVOD),o=new K;if(o.accountid=0,o.nAppIDVOD=e.nAppIDVOD,o.default_selection_priority=q.k_ePrimary,o.current_selection_priority=q.k_ePrimary,o.thumbnail_http_address=a?.GetAssets().GetHeaderURL()||"",o.title=a?.GetName()||"",this.GetStreams(e).unshift(o),t){const t=this.GetStreamsLookupKeyFromDef(e);this.m_playReadyStream.set(t,o)}}async HintLoadEmbeddablePreviewStreams(e){let t=null,a={eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0};try{return t=await U().get(S.TS.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpreview",{params:a}),this.HandleHintLoadBroadcastResponse(e,t.data)}catch(e){let t=(0,Q.H)(e);console.error("HintLoadEmbeddablePreviewStreams hit error loading: "+t.strErrorMsg,t)}return[]}async HintLoadEmbeddableStreams(e){let t=this.MapEmbeddableStreamToRequest(e),a=this.GetStreamsLookupKeyFromParam(t);if(!this.m_inFlightRequests.has(a)){this.m_lookupKeyToEmbedStreamDef.set(a,e);const o=this.InternalHintLoadEmbeddableStreams(e,t);this.m_inFlightRequests.set(a,o)}return this.m_inFlightRequests.get(a)}ValidateBroadcastPageStreamers(e){const t=e;return!!(t&&"number"==typeof t.success&&t.filtered&&Array.isArray(t.filtered)&&t.broadcast_chat_visibility)&&(0==t.filtered.length||"string"==typeof t.filtered[0].accountid)}async InternalHintLoadEmbeddableStreams(e,t){let a=(0,S.Tc)("broadcast_available_for_page","application_config");if(this.ValidateBroadcastPageStreamers(a))return this.HandleHintLoadBroadcastResponse(e,a);try{let a=null;return a=await U().get(S.TS.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpage",{params:t}),this.HandleHintLoadBroadcastResponse(e,a.data)}catch(e){let t=(0,Q.H)(e);console.error("HintLoadEmbeddableStreams hit error loading: "+t.strErrorMsg,t)}return[]}async HandleHintLoadBroadcastResponse(e,t){this.m_bUseFakeData=!1,e.bIsPreview&&(t?.filtered?.length>0?this.ExtractBroadcastPrioritiesFromPartnerEventForPreview(e.event,t.filtered):(t={filtered:[{}],success:1,total_count:1,err_msg:"",broadcast_chat_visibility:"hide"},this.m_bUseFakeData=!0)),t.broadcast_chat_visibility&&(this.m_pageChatStatus=t.broadcast_chat_visibility);const a=new Array;(0,n.h5)((()=>{t.filtered.forEach((e=>{if(!e.steamid){const t=z.b.InitFromAccountID(e.accountid);e.steamid=t.ConvertTo64BitString()}const t=c.BroadcastWatchStore.GetOrCreateBroadcastInfo(e.steamid),o=e.appid?Number(e.appid):c.fO;t.m_nAppID=o,t.m_strAppId=""+o,void 0===e.current_selection_priority&&(e.current_selection_priority=e.default_selection_priority),o!=c.fO&&a.push(o)}))}));const o=this.GetStreamsLookupKeyFromDef(e);if(this.m_lookupStreams.set(o,t.filtered),this.m_onLoadContextCall.has(o)){const e=this.m_onLoadContextCall.get(o);e?("dev"==S.TS.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller using callback to "+e.name),e.fnCallback()):"dev"==S.TS.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller, however callback is since cleared")}const s=this.GetStreams(e);return await this.AutoStartVideoStream(e,s),s}ExtractBroadcastPrioritiesFromPartnerEventForPreview(e,t){const a=Array.from(e.jsondata.broadcast_whitelist??[]),o=Array.from(e.jsondata.broadcast_priority??[]),n=new Map;for(let e=0;e<a.length&&!(e>=o.length);e++)n.set(a[e],Z(o[e]));t.forEach((e=>{const t=Number(e.accountid);n.has(t)&&(e.current_selection_priority=n.get(t))}))}async AutoStartVideoStream(e,t){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.get(a))return null;if(this.m_bUseFakeData){if(!this.m_playReadyStream.get(a)){const e={accountid:0,thumbnail_http_address:"",default_selection_priority:q.k_eGeneral,current_selection_priority:q.k_eGeneral};this.m_playReadyStream.set(a,e)}return this.m_playReadyStream}return this.PlayFromAvailableStreams(e,t)}async PlayFromAvailableStreams(e,t,a=!1){const o=new Set;for(;;){const n=t.filter((e=>!(o.has(e)||a&&e.nAppIDVOD))),s=this.GetAutoStartStream(n);if(!s)return null;if(await this.AttemptToPlayStream(e,s))return s;o.add(s)}}async AttemptToPlayStream(e,t){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.set(a,!0),this.m_mapBroadcastChecked.has(t.accountid)||this.m_mapBroadcastChecked.set(t.accountid,this.InternalAttemptToPlayStream(e,t)),t.nAppIDVOD)this.m_playReadyStream.set(a,t);else{const o=await this.m_mapBroadcastChecked.get(t.accountid);if(1!=o?.success)return null;t.steamid=o.steamid,this.m_playReadyStream.set(a,t),this.GetConcurrentStreams(e)>1?this.m_streamChatStatus="hide":this.m_streamChatStatus=t.broadcast_chat_visibility,this.m_setStreamChangedListeners.forEach((e=>e(t)));!async function(e,t,a){if(e>0&&7!=e&&a){let o=new URLSearchParams;o.append("page_action",""+t),o.append("snr",a),U().post(S.TS.STORE_BASE_URL+"ajaxreportproductaction/"+e+"/",o)}}(c.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID,1,t.snr)}return t}async InternalAttemptToPlayStream(e,t){this.GetStreamsLookupKeyFromDef(e);let a=null;try{const e=S.TS.STORE_BASE_URL+"broadcast/ajaxcheckbroadcast";let o={broadcastaccountid:t.accountid,viewer_token:c.BroadcastWatchStore.GetViewerToken(),origin:self.origin};return a=await U().get(e,{params:o}),a.data}catch(e){let t=(0,Q.H)(e);console.error("Broadcast.AttemptToPlayStream: "+t.strErrorMsg,t)}return null}GetAutoStartStream(e){if(!e)return null;const t=e.filter((e=>Y(e))),a=t.reduce(((e,t)=>Math.max(e,$(t))),0),o=t.filter((e=>$(e)===a));if(0===o.length)return null;return o[Math.floor(Math.random()*o.length)]}MapEmbeddableStreamToRequest(e){return{appid:e.appid,promotionName:e.bIsPreview?"preview":e.promotionName,clanid:e.clanid?e.clanid:e.event?e.event.clanSteamID.GetAccountID():void 0,listid:e.listid,subid:e.subid,bundleid:e.bundleid,eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0,test:false,cc:S.TS.COUNTRY,l:S.TS.LANGUAGE,hubtype:e.event?.GetContentHubType(),hubcategory:e.event?.GetContentHubCategory(),hubtagid:e.event?.GetContentHubTag(),tabuniqueid:e.tabuniqueid,tabfilter:e.tabfilter,rt_now_override_test:j.HD.BHasTimeOverride()?j.HD.GetTimeNowWithOverride():void 0}}GetStreamsLookupKeyFromDef(e){return this.GetStreamsLookupKeyFromParam(this.MapEmbeddableStreamToRequest(e))}GetStreamsLookupKeyFromParam(e){return JSON.stringify(e)}static Get(){return J.s_GlobalStore||(J.s_GlobalStore=new J,"dev"==S.TS.WEB_UNIVERSE&&(window.g_BroadcastEmbeddableStore=J.s_GlobalStore),J.s_GlobalStore.Init()),J.s_GlobalStore}Init(){}}function $(e){return e.current_selection_priority||q.k_eGeneral}(0,o.Cg)([n.sH],J.prototype,"m_lookupStreams",void 0),(0,o.Cg)([n.sH],J.prototype,"m_playReadyStream",void 0),(0,o.Cg)([n.sH],J.prototype,"m_pageChatStatus",void 0),(0,o.Cg)([n.sH],J.prototype,"m_streamChatStatus",void 0),(0,o.Cg)([n.sH],J.prototype,"m_bUserChatExpanded",void 0),(0,o.Cg)([n.sH],J.prototype,"m_bUserPreferenceHideBroadcastByDefault",void 0),(0,o.Cg)([n.sH],J.prototype,"m_bCollapsed",void 0),(0,o.Cg)([n.XI],J.prototype,"HintLoadEmbeddablePreviewStreams",null),(0,o.Cg)([n.XI],J.prototype,"AttemptToPlayStream",null);new X.T;var ee,te=a(16299),ae=a(37478);!function(e){e[e.AnyController=0]="AnyController",e[e.XboxController=1]="XboxController",e[e.Ps3Controller=2]="Ps3Controller",e[e.Ps4Controller=3]="Ps4Controller",e[e.Ps5Controller=4]="Ps5Controller",e[e.SwitchController=5]="SwitchController",e[e.SteamController=6]="SteamController",e[e.SteamDeckNeptune=7]="SteamDeckNeptune",e[e.SteamDeckGalileo=8]="SteamDeckGalileo"}(ee||(ee={}));const oe={any_controller:ee.AnyController,xbox_controller:ee.XboxController,ps3_controller:ee.Ps3Controller,ps4_controller:ee.Ps4Controller,ps5_controller:ee.Ps5Controller,switch_controller:ee.SwitchController,steam_controller:ee.SteamController,steam_deck_neptune:ee.SteamDeckNeptune,steam_deck_galileo:ee.SteamDeckGalileo},ne="unUserdataVersion";class se{m_setWishList=new Set;m_wishlistInOrder=Array();m_setOwnedPackages=new Set;m_setOwnedApps=new Set;m_setFollowedApps=new Set;m_setExcludedTagsIds=new Set;m_setExcludedContentDescriptors=new Set;m_setRecommendedApps=new Set;m_recAppInOrder=new Array;m_mapIgnoredApps=new Map;m_mapIgnoredPackages=new Map;m_setCuratorsFollowed=new Set;m_setCuratorsIgnored=new Set;m_bShowFilteredUserReviewScores=!0;m_setPreferredPlatforms=new Set;m_bAllowAppImpressions=!1;m_primaryLanguage=-1;m_secondaryLanguages=new Set;m_setRecommendedTags=new Set;m_mapRecommendingCuratorsForApp=new Map;m_setPackagesInCart=new Set;m_setAppsInCart=new Set;m_nCartLineItemCount=0;m_rgHardwareUsed=new Set;m_bIsLoaded=!1;m_promise;m_bAjaxInFlight=!1;BIsLoaded(){return this.m_bIsLoaded}GetWishlistGamesInUserOrder(){return this.m_wishlistInOrder}GetWishlistGameCount(){return this.m_setWishList.size}GetRecommendedGamesInIRPriorityOrder(){return this.m_recAppInOrder}GetFollowedCuratorCount(){return this.m_setCuratorsFollowed.size}GetFollowedCuratorsAccountID(){return Array.from(this.m_setCuratorsFollowed)}GetPackagesInCartCount(){return this.m_setPackagesInCart.size}GetAppInCartCount(){return this.m_setAppsInCart.size}GetCartLineItemCount(){return this.m_nCartLineItemCount}GetIgnoredAppsCount(){return this.m_mapIgnoredApps.size}BIsFollowingCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsFollowed.has(t)}BIsFollowingCreator(e){return this.BIsFollowingCurator(e)}BIsIgnoringCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsIgnored.has(t)}get ExcludedContentDescriptor(){return Array.from(this.m_setExcludedContentDescriptors)}BExcludesTag(e){return e.some((e=>this.m_setExcludedTagsIds.has(Number(e.tagid))))}BExcludeTagIDs(e){return e.some((e=>this.m_setExcludedTagsIds.has(e)))}GetExcludedTagsSortedByID(){return Array.from(this.m_setExcludedTagsIds).sort()}BExcludesContentDescriptor(e){return e.some((e=>this.m_setExcludedContentDescriptors.has(e)))}BIncludesContentDescriptor(e){return!this.m_setExcludedContentDescriptors.has(e)}BIsGameWishlisted(e){return this.m_setWishList.has(Number(e))}BIsGameRecommended(e){return this.m_setRecommendedApps.has(Number(e))}BIsGameIgnored(e){return this.m_mapIgnoredApps&&this.m_mapIgnoredApps.has(e)}BIsPackageIgnored(e){return this.m_mapIgnoredPackages?.has(e)}BIsGameOwned(e){return this.m_setOwnedApps.has(Number(e))}BOwnsApp(e){return Boolean(e)&&this.m_setOwnedApps.has(Number(e))}BFollowsApp(e){return this.m_setFollowedApps.has(Number(e))}BOwnsPackage(e){return this.m_setOwnedPackages.has(Number(e))}BHasUsedHardware(e){return this.m_rgHardwareUsed.has(e)}BShowFilteredUserReviewScores(){return this.m_bShowFilteredUserReviewScores}BAppImpressionsAllowed(){return this.m_bAllowAppImpressions}GetPrimaryLanguage(){return this.m_primaryLanguage}GetSecondaryLanguages(){return this.m_secondaryLanguages}BIsAnyLanguageEnabled(e){return null==this.m_primaryLanguage||(this.m_primaryLanguage<=-1||31<=this.m_primaryLanguage||e.some((e=>this.m_primaryLanguage===e||this.m_secondaryLanguages.has(e))))}GetRecommendedTags(){return this.m_setRecommendedTags}BIsAjaxInFlight(){return this.m_bAjaxInFlight}BIsAppRecommendedBySomeCurator(e){return this.m_mapRecommendingCuratorsForApp.has(e)}GetRecommendingCuratorsForApp(e){return this.m_mapRecommendingCuratorsForApp.get(e)}GetOwnedApps(){return this.m_setOwnedApps}GetWishlistedApps(){return this.m_setWishList}async HintLoad(){return this.m_promise||(this.m_promise=this.InternalLoad()),this.m_promise}async InternalLoad(){let e=window.localStorage.getItem(ne)||"0",t={v:"0"==e?void 0:e,id:""+S.iA.accountid,cc:""+S.TS.COUNTRY,origin:self.origin},a=S.TS.STORE_BASE_URL+"dynamicstore/userdata/";try{let e=await U().get(a,{params:t,withCredentials:!0});e&&200==e.status&&(0,n.h5)((()=>{if(this.m_bIsLoaded=!0,e.data.rgCurators){this.m_setCuratorsFollowed=new Set;for(const t in e.data.rgCurators)this.m_setCuratorsFollowed.add(Number(t))}if(e.data.rgCuratorsIgnored&&(this.m_setCuratorsIgnored=new Set(e.data.rgCuratorsIgnored.map((e=>Number(e))))),e.data.rgWishlist&&(this.m_wishlistInOrder=e.data.rgWishlist.map((e=>Number(e))),this.m_setWishList=new Set(e.data.rgWishlist.map((e=>Number(e))))),e.data.rgFollowedApps&&(this.m_setFollowedApps=new Set(e.data.rgFollowedApps.map((e=>Number(e))))),e.data.rgOwnedApps&&(this.m_setOwnedApps=new Set(e.data.rgOwnedApps.map((e=>Number(e))))),e.data.rgOwnedPackages&&(this.m_setOwnedPackages=new Set(e.data.rgOwnedPackages.map((e=>Number(e))))),e.data.rgIgnoredApps){const t=e.data.rgIgnoredApps;this.m_mapIgnoredApps=new Map;for(const e in t)this.m_mapIgnoredApps.set(Number(e),Number(t[e]))}if(e.data.rgIgnoredPackages){const t=e.data.rgIgnoredPackages;this.m_mapIgnoredPackages=new Map;for(const e in t)this.m_mapIgnoredPackages.set(Number(e),Number(t[e]))}if(e.data.rgExcludedTags&&(this.m_setExcludedTagsIds=new Set(e.data.rgExcludedTags.map((e=>Number(e.tagid))))),e.data.rgExcludedContentDescriptorIDs&&(this.m_setExcludedContentDescriptors=new Set(e.data.rgExcludedContentDescriptorIDs.map((e=>Number(e))))),e.data.rgRecommendedApps&&(this.m_recAppInOrder=e.data.rgRecommendedApps.map((e=>Number(e))),this.m_setRecommendedApps=new Set(e.data.rgRecommendedApps.map((e=>Number(e))))),e.data.rgPreferredPlatforms&&(this.m_setPreferredPlatforms=new Set(e.data.rgPreferredPlatforms)),e.data.bAllowAppImpressions&&(this.m_bAllowAppImpressions=e.data.bAllowAppImpressions),this.m_bShowFilteredUserReviewScores=!!e.data.bShowFilteredUserReviewScores,void 0!==e.data.rgPrimaryLanguage&&(this.m_primaryLanguage=e.data.rgPrimaryLanguage),e.data.rgSecondaryLanguages&&(this.m_secondaryLanguages=new Set(e.data.rgSecondaryLanguages)),e.data.rgRecommendedTags&&(this.m_setRecommendedTags=new Set(e.data.rgRecommendedTags.map((e=>e.tagid)))),e.data.rgAppsInCart&&(this.m_setAppsInCart=new Set(e.data.rgAppsInCart)),e.data.rgPackagesInCart&&(this.m_setPackagesInCart=new Set(e.data.rgPackagesInCart)),e.data.nCartLineItemCount&&(this.m_nCartLineItemCount=e.data.nCartLineItemCount),e.data.rgCurations)for(const t of Object.keys(e.data.rgCurations)){const a=[];for(const o of Object.keys(e.data.rgCurations[t]))0===e.data.rgCurations[t][o]&&a.push(Number(o));this.m_mapRecommendingCuratorsForApp.set(Number(t),a)}if(e.data.rgHardwareUsed)for(const t of e.data.rgHardwareUsed){const e=oe[t];e&&this.m_rgHardwareUsed.add(e)}}))}catch(e){let t=(0,Q.H)(e);console.error("CDynamicStore.InternalLoad",t.strErrorMsg,t)}return this}async UpdateFollowOrIgnoreCurator(e,t,a){let o=S.TS.STORE_BASE_URL+"curators/"+(t?"ajaxfollow/":"ajaxignore/");const n=e.GetAccountID(),s=new FormData;s.append("clanid",""+n),s.append("sessionid",S.TS.SESSIONID),s.append(t?"follow":"ignore",a?"1":"0");let r=await U().post(o,s,{withCredentials:!0});if(r&&200==r.status){this.InvalidateCache();const e=t?this.m_setCuratorsFollowed:this.m_setCuratorsIgnored;a?e.add(n):e.delete(n)}return r.data}async UpdateAppIgnore(e,t,a,o=0){let s=S.TS.STORE_BASE_URL+"recommended/ignorerecommendation";const r=new FormData;r.append("sessionid",S.TS.SESSIONID),r.append("appid",""+e),r.append("remove",t?"0":"1"),r.append("snr",a),r.append("ignore_reason",""+o);try{this.m_bAjaxInFlight=!0;let a=await U().post(s,r,{withCredentials:!0});return a&&200==a.status&&(0,n.h5)((()=>{this.InvalidateCache(),t?this.m_mapIgnoredApps.set(e,o):this.m_mapIgnoredApps.delete(e)})),this.m_bAjaxInFlight=!1,a.data}catch(e){let t=(0,Q.H)(e);console.error("UpdateAppIgnore",t.strErrorMsg,t)}return this.m_bAjaxInFlight=!1,{success:2}}async UpdateGameWishlist(e,t,a,o){let n=S.TS.STORE_BASE_URL+"api/"+(t?"addtowishlist":"removefromwishlist");const s=new FormData;s.append("appid",""+e),s.append("sessionid",S.TS.SESSIONID),a&&s.append("snr",a),this.m_bAjaxInFlight=!0;let r=await U().post(n,s,{withCredentials:!0,cancelToken:o?o.token:void 0});if(this.m_bAjaxInFlight=!1,o&&o.token.reason)return{success:52};if(r.data.success=1==r.data.success?1:2,1==r.data.success)if(this.InvalidateCache(),e=Number(e),t)this.m_setWishList.has(e)||this.m_wishlistInOrder.push(e),this.m_setWishList.add(e);else{if(this.m_setWishList.has(e)){const t=this.m_wishlistInOrder.findIndex((t=>t==e));-1!=t&&this.m_wishlistInOrder.splice(t,1)}this.m_setWishList.delete(e)}return r.data}async AddToCart(e,t,a,o,n,s,r){if(void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart){let e;return n&&(e=ae.A.ParseSNR(n)),window.AddItemToCart(t,s,e),!0}const i=new FormData;i.append("action","add_to_cart"),s?i.append("bundleid",s.toString()):i.append("subid",""+t),n&&i.append("snr",n),i.append("sessionid",S.TS.SESSIONID),i.append("quantity","1");const l=(0,te.uX)(e);e.preventDefault();try{await U().post(a,i,{withCredentials:!0}),this.InvalidateCache(),r?.fnSetURL?r.fnSetURL(o):l.location.href=o}catch(e){return console.log("HandleOnAddToCart",e),!1}return!0}async AddLicenseForFreeGame(e){if(this.BOwnsApp(e))return 1;try{const t=new FormData;t.append("sessionid",S.TS.SESSIONID),t.append("appid",""+e),t.append("cc",S.TS.COUNTRY);let a=S.TS.STORE_BASE_URL+"actions/addappformastersubscription",o=await U().post(a,t,{withCredentials:!0});if(this.InvalidateCache(),!o.data.success||1!==o.data.success)return o.data.success?o.data.success:2;this.m_setOwnedApps.add(Number(e))}catch(e){let t=(0,Q.H)(e);return console.log("AddLicense request failed:",t.strErrorMsg,t),2}return 1}async UpdateFollowingApp(e,t){try{const a=S.TS.STORE_BASE_URL+"explore/followgame",o=new FormData;o.append("appid",""+e),o.append("sessionid",S.TS.SESSIONID),t||o.append("unfollow","1");const n=await U().post(a,o,{withCredentials:!0});if(!n.data)return 2;this.InvalidateCache(),t?this.m_setFollowedApps.add(Number(e)):this.m_setFollowedApps.delete(Number(e))}catch(e){return console.log("Follow game request failed"),2}return 1}BHasPlatformPreferenceSet(){return this.m_setPreferredPlatforms.size>0&&this.m_setPreferredPlatforms.size<3}BIsPreferredPlatform(e){return this.m_setPreferredPlatforms.has(e)}InvalidateCache(){window.localStorage.setItem(ne,(Number.parseInt(window.localStorage.getItem(ne)||"0")+1).toString())}static s_globalSingletonStore;static Get(){return se.s_globalSingletonStore||(se.s_globalSingletonStore=new se,"dev"==S.TS.WEB_UNIVERSE&&(window.DUS=se.s_globalSingletonStore)),se.s_globalSingletonStore}constructor(){(0,n.Gn)(this)}}function re(){const[e,t]=(0,r.useState)(!se.Get().BIsLoaded());return(0,r.useEffect)((()=>{e&&se.Get().HintLoad().finally((()=>t(!se.Get().BIsLoaded())))}),[e]),[e,se.Get()]}(0,o.Cg)([n.sH],se.prototype,"m_setWishList",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setOwnedPackages",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setOwnedApps",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setFollowedApps",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setExcludedTagsIds",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setExcludedContentDescriptors",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setRecommendedApps",void 0),(0,o.Cg)([n.sH],se.prototype,"m_mapIgnoredApps",void 0),(0,o.Cg)([n.sH],se.prototype,"m_mapIgnoredPackages",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setCuratorsFollowed",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setCuratorsIgnored",void 0),(0,o.Cg)([n.sH],se.prototype,"m_bShowFilteredUserReviewScores",void 0),(0,o.Cg)([n.sH],se.prototype,"m_primaryLanguage",void 0),(0,o.Cg)([n.sH],se.prototype,"m_secondaryLanguages",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setRecommendedTags",void 0),(0,o.Cg)([n.sH],se.prototype,"m_mapRecommendingCuratorsForApp",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setPackagesInCart",void 0),(0,o.Cg)([n.sH],se.prototype,"m_setAppsInCart",void 0),(0,o.Cg)([n.sH],se.prototype,"m_nCartLineItemCount",void 0),(0,o.Cg)([n.sH],se.prototype,"m_rgHardwareUsed",void 0),(0,o.Cg)([n.sH],se.prototype,"m_bAjaxInFlight",void 0),(0,o.Cg)([n.EW],se.prototype,"ExcludedContentDescriptor",null),(0,o.Cg)([n.XI],se.prototype,"UpdateAppIgnore",null);var ie=a(82149);function le(){return r.createElement("div",{className:ie.bordered_live_stream_icon},(0,k.we)("#home_page_live_broadcast"))}const ce=(0,s.PA)((function(e){const{appids:t,hide_status_banners:a}=e,o=t.every((e=>se.Get().BOwnsApp(e))),n=t.every((e=>se.Get().BIsGameWishlisted(e))),s=t.some((e=>{const t=d.A.Get().GetApp(e);return t&&function(e,t){if(t||e){const a=t||e;return a&&J.Get().BIsAppStreaming(a)}return!1}(e,t?.GetParentAppID())})),i=o&&!a,l=n&&!a;return r.createElement("div",{className:(0,D.A)(F().CapsuleDecorators,"CapsuleDecorators")},i&&r.createElement("span",{className:(0,D.A)(F().Banner,F().Blue)},r.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUNDNzBFNTUyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUNDNzBFNTYyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Q0M3MEU1MzIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0M3MEU1NDIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv3vUKAAAAAlSURBVHjaYvz//z8DsYARpFhISAivjnfv3jGSp3jUGeQ4AyDAADZHNe2nyOBrAAAAAElFTkSuQmCC",className:F().LinesImg}),(0,k.we)("#Sale_InLibrary")),l&&r.createElement("span",{className:F().Banner},r.createElement(A.qnF,{className:F().LinesImg}),(0,k.we)("#Sale_OnWishlist")),s&&r.createElement(le,null))}));const de={include_assets:!0,include_release:!0,include_platforms:!0,include_tag_count:20,include_basic_info:!0,include_trailers:!0,include_reviews:!0,include_screenshots:!0,include_supported_languages:!0};function me(e){return"game"===e||"dlc"===e||"software"===e||"music"===e||"application"===e||"demo"===e||"hardware"===e||"mod"===e||"video"==e||"beta"===e||"advertising"===e}var pe=a(30478);const ue=r.createContext({AddImpression:()=>{console.log("Impression Tracking not enabled")},BIsValid:()=>!1});var he=a(64488),ge=a(64679);function _e(e){const{appID:t,feature:a,depth:o,children:n}=e,s=(0,pe.ru)(a,o),i=r.useContext(ue),[l,c]=r.useState(void 0),d=r.useCallback((e=>{e.isIntersecting&&c((e=>e?.appID==t&&e.snr==s?e:{appID:t,snr:s}))}),[t,s]);(0,r.useEffect)((()=>{l&&i.AddImpression(l.appID,l.snr)}),[i,l]);const m=(0,he.BL)(d),p=t&&(!l||l.appID!=t&&l.snr!=s),u=(0,ge.Ue)(n.ref,p?m:void 0);return r.cloneElement(n,{ref:u})}function Se(e){return"bundle"==e?"bundle":"sub"==e?"sub":me(e)?"app":null}const Ce=e=>{const{appid:t}=e,a=r.createElement("div",{className:"ImpressionTrackedElement"},e.children);return t?r.createElement(_e,{appID:t},a):a};class ve{static instance_count=0}class we{m_mapAppResults=new Map;m_mapAppCallbackList=new Map;m_mapAppResultsPromises=new Map;GetCompatabilityResultForApp(e){return this.m_mapAppResults.get(e)}BHasCompatabilityResultForApp(e){return this.m_mapAppResults.has(e)}GetCallbackForAppList(e){return this.m_mapAppCallbackList.has(e)||this.m_mapAppCallbackList.set(e,new p.lu),this.m_mapAppCallbackList.get(e)}AddCompatabilityResult(e){this.m_mapAppResults.set(e.appid,e),this.GetCallbackForAppList(e.appid).Dispatch(e)}async LoadAppCompabitilityResult(e){return!!this.m_mapAppResults.has(e)||(this.m_mapAppResultsPromises.has(e)||this.m_mapAppResultsPromises.set(e,this.InternalLoadAppCompatability(e)),this.m_mapAppResultsPromises.get(e))}async InternalLoadAppCompatability(e){let t=null;try{const a={nAppID:e,l:S.TS.LANGUAGE,cc:S.TS.COUNTRY};let o=S.TS.STORE_BASE_URL+"saleaction/ajaxgetdeckappcompatibilityreport";const n=await U().get(o,{params:a,withCredentials:!0});if(200==n?.status&&1==n.data?.success&&n.data?.results)return this.AddCompatabilityResult(n.data.results),!0;t=(0,Q.H)(n)}catch(e){t=(0,Q.H)(e)}return console.error("CDeckVerifiedDetailsStore.InternalLoadAppCompatability failed: "+t?.strErrorMsg,t),!1}static s_Singleton;static Get(){return we.s_Singleton||(we.s_Singleton=new we,"dev"!=S.TS.WEB_UNIVERSE&&"beta"!=S.TS.WEB_UNIVERSE||(window.g_DeckVerifiedDetailStores=we.s_Singleton)),we.s_Singleton}constructor(){if(document.getElementById("application_config")){let e=(0,S.Tc)("deckcompatibility","application_config");we.ValidateCompatabilityResult(e)&&(this.AddCompatabilityResult(e),"dev"==S.TS.WEB_UNIVERSE&&console.log("CDeckCompatibilityDetailsStore compatability loaded: ",e))}}static ValidateCompatabilityResult(e){const t=e;return t&&"number"==typeof t.appid&&"number"==typeof t.resolved_category&&"object"==typeof t.resolved_items}}(0,o.Cg)([m.oI],we.prototype,"LoadAppCompabitilityResult",null);var be=a(234),fe=a(2712),Ee=a(15034),ye=a.n(Ee),Ie=a(2071),De=a(99962),Ae=a(63369);function Be(e){const{results:t,appName:a,buttonProps:o,autoFocus:n,onOpenBlogPost:s}=e,[i,l]=r.useState(!1),c=r.useCallback((()=>i),[i]),d=r.useRef(),m=(0,S.Qn)();if(r.useEffect((()=>{l(d?.current?.scrollHeight>d?.current?.clientHeight)}),[]),!t)return null;const p=()=>{s?s():window.location.href=t.steam_deck_blog_url};let u=o??{},h=null;t.steam_deck_blog_url&&(u.onOptionsActionDescription=(0,k.we)("#SteamDeckVerified_ViewDeveloperPost"),u.onOptionsButton=p,h=r.createElement(ke,{blogURL:t.steam_deck_blog_url}));const g=-1!==t.resolved_items?.findIndex((e=>1==e.display_type));return t.resolved_items?.length?r.createElement(E.Z,{className:m?ye().CompatibilityDetailsContainer:ye().CompatibilityDetailsContainerDesktop,...u},r.createElement("div",null,r.createElement("div",{className:ye().DialogHeader},r.createElement("div",{className:ye().DialogTitle},(0,k.we)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),r.createElement("div",{className:ye().AppTitleCategory},r.createElement(Me,{category:t.resolved_category}))),r.createElement(Oe,{category:t.resolved_category,appName:a})),h,r.createElement("div",{className:ye().CompatibilityDetailsSeparator}),r.createElement(Ie.Qg,{ref:d,className:c()?ye().CompatibilityDetailsInterior_Scroll:ye().CompatibilityDetailsInterior_NoScroll},r.createElement(E.Z,{autoFocus:n,focusableIfNoChildren:n||c(),noFocusRing:!0},t.resolved_items.filter((e=>1!==e.display_type)).map((e=>r.createElement("div",{key:e.loc_token+e.display_type,className:ye().CompatibilityDetailsRow},r.createElement(Te,{displaytype:e.display_type}),r.createElement("span",null,(0,k.we)(e.loc_token))))),g&&r.createElement("div",{className:ye().CompatibilityNotes},t.resolved_items.filter((e=>1==e.display_type)).map((e=>r.createElement("div",{key:e.loc_token+e.display_type,className:ye().CompatibilityDetailsNoteRow},r.createElement("span",null,(0,k.we)(e.loc_token))))))))):r.createElement(E.Z,{autoFocus:n,focusableIfNoChildren:n,noFocusRing:!0,className:ye().CompatibilityDetailsContainer,...u},r.createElement("div",null,r.createElement("div",{className:ye().DialogHeader},r.createElement("div",{className:ye().DialogTitle},(0,k.we)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),r.createElement("div",{className:ye().AppTitleCategory},r.createElement(Me,{category:t.resolved_category}))),r.createElement(Oe,{category:t.resolved_category,appName:a}),h))}function ke(e){const{blogURL:t}=e,a=(0,S.Qn)();return t?a?r.createElement("div",{className:ye().CompatibilityDetailRatingSummary},(0,k.we)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog"),r.createElement("div",{className:ye().DeveloperBlogYButton},r.createElement(De.$m,{button:Ae.g4.Y,type:De.wt.Knockout}))):r.createElement("div",{className:ye().CompatibilityDetailRatingSummary},(0,k.we)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog_Desktop"),r.createElement("a",{href:t,className:ye().DeveloperBlockLinkDesktop},(0,k.we)("#SteamDeckVerified_ViewDeveloperPost"))):null}function Te(e){const{displaytype:t}=e;switch(t){case 4:return r.createElement(A.o5Q,{className:ye().CompatibilityDetailsResultIcon});case 3:return r.createElement(A.aVR,{className:ye().CompatibilityDetailsResultIcon});case 2:return r.createElement(A.jIP,{className:ye().CompatibilityDetailsResultIcon});case 0:return r.createElement(A.WX$,{className:ye().CompatibilityDetailsResultIcon});case 1:return"dev"==S.TS.WEB_UNIVERSE&&console.error("deck verified banner shouldn't try to display the information display type for appid"),null}}var Pe=a(44714),Le=a(16218),Ge=a(76130);function Ne(e){const{storeItem:t}=e;if(0!==t.GetStoreItemType())return null;const a=t.GetPlatforms()?.steam_deck_compat_category||0;return r.createElement("div",{className:(0,D.A)(ye().LearnMoreCtn,"LearnMoreCtn")},r.createElement(T,{category:a}),r.createElement(f.Ii,{onClick:e=>{var a,o;e.preventDefault(),e.stopPropagation(),a=(0,te.uX)(e),o=t.GetAppID(),(0,Ge.pg)(r.createElement(Re,{nAppID:o}),a)}},r.createElement("span",{className:ye().LearnMorePC},(0,k.we)("#SteamDeckVerified_Store_CompatSectionHeader_Desktop"))))}function Re(e){const{nAppID:t,closeModal:a}=e,o=function(e){const[t,a]=r.useState(we.Get().GetCompatabilityResultForApp(e));return(0,m.hL)(we.Get().GetCallbackForAppList(e),a),r.useEffect((()=>{we.Get().BHasCompatabilityResultForApp(e)||we.Get().LoadAppCompabitilityResult(e).then((()=>a(we.Get().GetCompatabilityResultForApp(e))))}),[e]),t}(t);return r.createElement(fe.eV,{modalClassName:"DeckVerifiedModalDialog",closeModal:a,onCancel:a},r.createElement(be.nB,null,r.createElement(E.Z,{focusable:!1,"flow-children":"column"},Boolean(o)?r.createElement(Be,{results:o}):r.createElement(Pe.t,{size:"medium",position:"center",string:(0,k.we)("#Loading")}))))}function Me(e){const{category:t}=e;switch(t){case 3:return r.createElement(A.o5Q,{className:ye().CategoryIcon});case 2:return r.createElement(A.aVR,{className:ye().CategoryIcon});case 1:return r.createElement(A.jIP,{className:ye().CategoryIcon});case 0:return r.createElement(A.WX$,{className:ye().CategoryIcon})}}function Oe(e){const{category:t,appName:a,descriptionToken:o}=e;if(0==t)return r.createElement("div",{className:ye().CompatibilityDetailRatingSummary},a?(0,k.PP)("#SteamDeckVerified_DescriptionHeader_Unknown_WithAppName",r.createElement("b",null,(0,Le.EK)(a))):(0,k.we)("#SteamDeckVerified_DescriptionHeader_Unknown"));let n="",s=null;switch(t){case 3:n="#SteamDeckVerified_DescriptionHeader_Verified",s=ye().Verified;break;case 2:n="#SteamDeckVerified_DescriptionHeader_Playable",s=ye().Playable;break;case 1:n="#SteamDeckVerified_DescriptionHeader_Unsupported",s=ye().Unsupported}const i=r.createElement("span",{className:s},(0,k.we)(He(t))),l=r.createElement("span",{className:ye().CompatibilityDetailRatingSummary},(0,k.we)(o||n)),c=a?(0,k.PP)("#SteamDeckVerified_DescriptionHeader_WithAppName",r.createElement("b",null,(0,Le.EK)(a)),i,l):(0,k.PP)("#SteamDeckVerified_DescriptionHeader",i,l);return r.createElement("div",{className:ye().CompatibilityDetailRatingSummary},c)}function He(e){switch(e){case 3:return"#SteamDeckVerified_Category_Verified";case 2:return"#SteamDeckVerified_Category_Playable";case 1:return"#SteamDeckVerified_Category_Unsupported";default:return"#SteamDeckVerified_Category_Unknown"}}const Fe=(0,r.createContext)({}),Ve=()=>(0,r.useContext)(Fe);var xe=a(61416),We=a(66817),Ue=a(13249),ze=a(47578),je=a(51971),Xe=a(24774);const Qe={high_pending_orders:!1,inventory_available:!0};function qe(e){const t=(0,Ue.rW)(),a=(0,xe.I)({queryKey:[e?.GetID()||ze.sc,e?.GetStoreItemType()||"invalid"],queryFn:()=>async function(e,t){if(!e||1!==e.GetStoreItemType()||10!==e.GetAppType())return Qe;const a=We.w.Init(je.MV);a.Body().set_packageid(e.GetID()),a.Body().set_country_code(Xe.iA.country_code);const o=await je.Hh.CheckInventoryAvailableByPackage(t,a);if(1!==o.GetEResult())throw console.error("Received error from FetchPhysicalGoodsStock",o.GetEResult()),new Error(`Error from FetchPhysicalGoodsStock: ${o.GetEResult()}`);return o.Body().toObject()}(e,t),enabled:Boolean(e?.GetID()&&10===e.GetAppType())});return a.isLoading?null:a.data}var Ze=a(41704),Ke=a(25509),Ye=a.n(Ke);function Je(e){const{info:t,className:a}=e,o=(0,pe.n9)(),[n]=(0,R.G6)(t.id,(0,N.SW)(t.type),{}),s=qe(n);(0,r.useEffect)((()=>{se.Get().HintLoad()}),[]);const i=(0,r.useCallback)((()=>{(0,Ze.Id)(window,`steam://run/${n?.GetAppIDToRun()}`)}),[n]);if(!n||8==n.GetAppType())return null;const c=n.GetBestPurchaseOption(),d=n.BIsFree()||"0"==n.GetBestPurchasePriceFormatted()||n.GetBestPurchaseOption().discount_pct>=100;if(1==n.GetStoreItemType())if(10==n.GetAppType()){if(!s)return r.createElement(Pe.t,{size:"small",position:"center"});if(!s.inventory_available)return r.createElement("div",{className:(0,D.A)(Ye().ActionOutOfStock,a)},r.createElement("span",null," ",(0,k.we)("#Sale_ReserveExhausted")))}else if(d&&n.GetIncludedAppIDs().length>1)return null;if(0==n.GetStoreItemType()){if(n.BIsComingSoon()&&!c?.packageid)return null;const e=se.Get().BOwnsApp(n.GetAppID());if(e&&10===n.GetAppType())return null;if(!e&&c?.is_free_to_keep){if(S.TS.IN_CLIENT||"store"!=(0,S.yK)()){const e=(0,l.wJ)(`${S.TS.IN_CLIENT?"steam://openurl/":""}${n.GetStorePageURL()}`,o);return r.createElement("div",{onClick:t=>(0,Ze.Id)(t,e),className:(0,D.A)(Ye().Action,a)},r.createElement("span",null,(0,k.we)("#EventDisplay_CallToAction_VisitStore")))}{const e=(0,l.wJ)(`${S.TS.STORE_BASE_URL}freelicense/addfreelicense`,o);return r.createElement("form",{action:e,method:"POST"},r.createElement("input",{type:"hidden",name:"subid",value:c.packageid}),r.createElement("input",{type:"hidden",name:"sessionid",value:S.TS.SESSIONID}),r.createElement("button",{className:(0,D.A)(Ye().Action,a),type:"submit"},(0,k.we)("#EventDisplay_CallToAction_AddToAccount")))}}if((e||d)&&!n.BIsComingSoon()){let t=(0,k.we)("#EventDisplay_CallToAction_PlayNowForFree");return e?t=(0,k.we)("#EventDisplay_CallToAction_PlayNow"):n.BIsFreeTemporary()&&(t=(0,k.we)("#EventDisplay_CallToAction_AddToAccount")),r.createElement("div",{className:(0,D.A)(Ye().Action,a),onClick:i},r.createElement("span",null,t))}if(""==n.GetBestPurchasePriceFormatted()){const e=(0,l.wJ)(n.GetStorePageURL(),o);return r.createElement("a",{href:e,className:(0,D.A)(Ye().Action,a)},(0,k.we)("#EventDisplay_CallToAction_VisitStore"))}}return r.createElement($e,{className:a,storeItem:n,info:t})}function $e(e){const{className:t,storeItem:a,info:o}=e,n=(0,pe.n9)(),s=Ve(),i=(0,r.useCallback)((e=>{let t,r;if(2==a?.GetStoreItemType()||a?.GetBestPurchaseOption().bundleid?t=2==a?.GetStoreItemType()?o.id:a?.GetBestPurchaseOption().bundleid:r=a?.GetBestPurchaseOption().packageid,void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart)return window.AddItemToCart(r,t,(0,pe.pn)(n)),!0;{const a=`${S.TS.STORE_BASE_URL}cart/addtocart`,o=`${S.TS.STORE_BASE_URL}cart`,i=(0,l.L3)(n);se.Get().AddToCart(e,r,a,o,i,t,s)}return!0}),[a,n,o.id,s]);return r.createElement("div",{className:(0,D.A)(Ye().Action,t),onClick:i},r.createElement("span",null,(0,k.we)("#Store_AddToCart")))}var et=a(31782),tt=a.n(et);async function at(e){S.TS.IN_CLIENT?(console.log(`Running game ${e} locally.`),window.location.href="steam://run/"+e):(console.log(`Cannot identify local client. Prompting user to launch ${e}.`),async function(e){await d.A.Get().QueueAppRequest(e,{});const t=d.A.Get().GetApp(e),a=t?.GetName()||"";console.log("prompting for",a);const o=S.TS.STORE_BASE_URL+"about/";(0,Ge.mK)(r.createElement(ot,{appid:e,strGameName:a,strDownloadSteamUrl:o}),window)}(e))}const ot=e=>{const t=()=>e.closeModal&&e.closeModal();return r.createElement(fe.x_,{onEscKeypress:t,className:tt().GotSteamDialog},r.createElement(be.UC,null,r.createElement(be.Y9,null," ",(0,k.we)("#GotSteam_Title")," "),r.createElement(be.nB,null,r.createElement(be.a3,null,(0,k.PP)("#GotSteam_PromptWithDownloadLink",r.createElement("a",{href:e.strDownloadSteamUrl,className:tt().DownloadSteamUrl},(0,k.we)("#GotSteam_DownloadLinkText")),r.createElement("span",{className:tt().GameName},e.strGameName))),r.createElement("div",{className:tt().Buttons},r.createElement("a",{href:"steam://run/"+e.appid,onClick:t,className:(0,D.A)(tt().Button,tt().LeftButton)},r.createElement("div",{className:tt().AnswerText}," ",(0,k.we)("#GotSteam_Yes")," "),r.createElement("div",{className:tt().ActionText}," ",(0,k.we)("#GotSteam_Yes_Play")," ")),r.createElement("a",{href:e.strDownloadSteamUrl,onClick:t,className:tt().Button},r.createElement("div",{className:tt().AnswerText}," ",(0,k.we)("#GotSteam_No")," "),r.createElement("div",{className:tt().ActionText}," ",(0,k.we)("#GotSteam_No_Download")," "))),r.createElement("div",{className:tt().Footer},r.createElement(A.Qte,{className:tt().Logo}),(0,k.we)("#GotSteam_Blurb")))))};var nt=a(74164),st=a.n(nt),rt=a(76061);function it(e){const{info:t,className:a}=e,o=(0,r.useRef)({include_release:!0}),[n]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),o.current),s=n?.BHasDemo(),i=s||1===n?.GetAppType(),l=i?(0,k.we)("#Sale_InstallDemo_ttip",n?.GetName()):s?(0,k.we)("#Sale_CannotInstallDemo_ttip",n?.GetName()):(0,k.we)("#Loading");if(!(0,rt.$W)())return!i&&s&&n?.BIsFree()?r.createElement(Je,{info:t,className:a}):r.createElement(v.he,{toolTipContent:l,onClick:e=>{e.preventDefault(),e.stopPropagation(),i&&at(1===n?.GetAppType()?n.GetAppID():n.GetDemoAppIDs()[0])},className:(0,D.A)(a,st().DemoButton,!i&&st().DisabledButton)},i?(0,k.we)("#Sale_InstallDemo"):(0,k.we)("#Sale_DemoNotFound"))}var lt=a(90095),ct=a(23568),dt=a.n(ct),mt=a(9165),pt=a(90890);function ut(e){const{size:t,color:a,trackColor:o}=e,n={borderColor:o,borderLeftColor:a};if("number"==typeof t){const e=`${t}px`;n.width=e,n.height=e,n.minHeight=e,n.minWidth=e,n.borderWidth=t/10+"px"}return r.createElement("div",{className:(0,D.A)(pt.Loading,"small"==t&&pt.Small,("medium"==t||!t)&&pt.Medium,"large"==t&&pt.Large),style:n})}function ht(e){(0,Ge.pg)(r.createElement(fe.KG,{strTitle:(0,k.we)("#Wishlist_Error"),strDescription:(0,k.we)("#Wishlist_Error_Desc")},r.createElement("br",null),r.createElement("br",null),e),window)}function gt(e){const[t,a]=r.useState(!1),[o,n]=r.useState(!se.Get().BIsLoaded()),s=(0,pe.n9)(),{appid:i,bIsFree:c,bIsComingSoon:d,className:m}=e,[p,u]=(0,lt.q3)((()=>[se.Get().BIsGameWishlisted(i),se.Get().BOwnsApp(i)]));r.useEffect((()=>{(async()=>{await se.Get().HintLoad(),n(!1)})()}),[]);return u||!d&&c?c?r.createElement(_t,{possibleDemoAppID:i}):null:r.createElement(v.he,{toolTipContent:(0,k.we)("#AddToWishlist_ttip")},r.createElement("div",{className:(0,D.A)(F().WishList,dt().FlexRowContainer,m),onClick:async()=>{if(S.iA.logged_in){if(!t){a(!0);const e=!p;try{const t=await se.Get().UpdateGameWishlist(i,e,(0,l.L3)(s));a(!1),1!=t.success&&ht((0,Q.H)(t).strErrorMsg)}catch(e){a(!1),ht((0,Q.H)(e).strErrorMsg)}}}else(0,mt.vg)()}},(o||t)&&r.createElement(ut,{size:18}),!t&&p&&r.createElement(A.qnF,null),!t&&!p&&r.createElement(A.T4m,null)))}function _t(e){const{possibleDemoAppID:t,className:a}=e,[o]=(0,R.t7)(t,{});return(1==o?.GetAppType()||12==o?.GetAppType())&&o?.GetParentAppID()>0?r.createElement(St,{parentAppID:o?.GetParentAppID(),className:a}):null}function St(e){const{parentAppID:t,className:a}=e,[o]=(0,R.t7)(t,{include_release:!0});return o?r.createElement(gt,{appid:t,bIsComingSoon:o.BIsComingSoon(),bIsFree:o.BIsFree(),className:a}):null}var Ct=a(60339),vt=a(79419),wt=a(91176);const bt=(0,s.PA)((e=>{const{info:t,bShowDemoButton:a,bShowPurchaseOptionsButton:o,fnOnPurchaseOptionsClick:n,bHidePrice:s,bHideWishlistButton:i,bShowDeckCompatibilityDialog:l,className:c}=e,d=(0,r.useRef)({include_release:!0}),[m]=(0,R.G6)(t.id,(0,N.SW)(t.type),d.current),p=function(e){const[t,a]=re();return!t&&a.BOwnsApp(e)}(m?.GetAppID());if(!m)return null;const u=1===m.GetAppType()||m.BHasDemo(),h=me(t.type),g=a&&h&&u;let _=null;if(!p&&m?.GetBestPurchaseOption().is_free_to_keep&&m?.GetBestPurchaseOption().free_to_keep_ends){const e=m.GetBestPurchaseOption().free_to_keep_ends,t=(0,k.we)("#Sale_default_label_Free_Promo_Description_Short",(0,k.$z)(e)+" @ "+(0,vt.KC)(e,{bForce24HourClock:!1}));_=r.createElement("div",{className:F().PurchaseOptionDetails},t,r.createElement(wt.o,{tooltip:(0,k.we)("#Sale_default_Tooltip_Free_Promo_Limitation")}))}return r.createElement("div",{className:(0,D.A)(F().StoreActionWidgetContainer,c)},_,r.createElement("div",{className:F().StoreSalePriceActionWidgetContainer},Boolean(!i&&me(t.type))&&r.createElement(gt,{appid:t.id,bIsFree:m.BIsFree(),bIsComingSoon:m.BIsComingSoon(),className:"WishlistBtn"}),Boolean(g)&&r.createElement(it,{info:t,className:F().Action}),Boolean(!s)&&1!==m?.GetAppType()&&(Boolean(o&&!m.BIsFree())?r.createElement(ft,{fnOnPurchaseOptionsClick:n}):r.createElement(Je,{info:t,className:"CartBtn"})),Boolean(!s)&&r.createElement(Et,{info:t}),Boolean(l)&&r.createElement(Ne,{storeItem:m})))}));function ft(e){return r.createElement("div",{className:F().Action,onClick:e.fnOnPurchaseOptionsClick},r.createElement("span",null,(0,k.we)("#EventDisplay_CallToAction_ShowPurchaseOptions_Button")))}function Et(e){const{info:t,...a}=e,[o]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),{include_release:!0});return r.createElement(It,{...a,storeItem:o})}const yt=7;function It(e){const{bSingleLineMode:t,storeItem:a,onlyOneDiscountPct:o}=e,n=(0,j.f1)();if(!a)return null;const s=!a.BIsComingSoon()&&a.GetReleaseDateRTime()+yt*Ct.Kp.PerDay>n,i=(0,D.A)(F().StoreSalePriceWidgetContainer,t&&F().SingleLineMode,"StoreSalePriceWidgetContainer",s&&F().NewItem);if(e.bShowInLibrary)return r.createElement("div",{className:i},r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_InLibrary")));if(a.BIsComingSoon()&&!a.GetBestPurchaseOption()?.packageid)return r.createElement("div",{className:i},r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_ComingSoon")));if(a.BIsFree()){if(!a.BIsFreeTemporary())return 0==a.GetStoreItemType()&&1==a.GetAppType()?r.createElement("div",{className:i},s&&r.createElement("div",{className:F().StoreSaleNewItem},(0,k.we)("#Flag_New")),r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_FreeDemo"))):r.createElement("div",{className:i},s&&r.createElement("div",{className:F().StoreSaleNewItem},(0,k.we)("#Flag_New")),r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_FreeToPlay")));if(a.GetBestPurchaseOption()?.is_free_to_keep&&!a.GetBestPurchaseOption()?.formatted_original_price)return r.createElement("div",{className:i},r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_Free")))}const l=a.GetBestPurchaseOption();if(!l||!l.formatted_final_price)return null;let c=l.discount_pct,d=o||2!=a.GetStoreItemType()?void 0:l.bundle_discount_pct,m=l.formatted_final_price;return r.createElement(Dt,{bSingleLineMode:t,nBaseDiscountPercentage:d,nDiscountPercentage:c,bIsPrePurchase:a.BIsPrePurchase(),strBestPurchaseOriginalPriceFormatted:l.formatted_original_price,strBestPurchasePriceFormatted:m,bHideDiscountPercentForCompliance:l.hide_discount_pct_for_compliance,bShowNewFlag:s})}function Dt(e){const{bSingleLineMode:t,nDiscountPercentage:a,bIsPrePurchase:o,nBaseDiscountPercentage:n,strBestPurchaseOriginalPriceFormatted:s,strBestPurchasePriceFormatted:i,bHideDiscountPercentForCompliance:l,bShowNewFlag:c}=e,d=l&&!0;return r.createElement("div",{className:(0,D.A)({[F().StoreSalePriceWidgetContainer]:!0,[F().SingleLineMode]:t,StoreSalePriceWidgetContainer:!0,[F().Discounted]:Boolean(a),Discounted:Boolean(a),[F().PrePurchase]:Boolean(o),[F().NewItem]:Boolean(c)})},Boolean(o)&&r.createElement("div",{className:(0,D.A)(F().StoreSalePriceBox,F().StoreSalePrepurchaseLabel)},r.createElement("span",null,(0,k.we)("#EventDisplay_CallToAction_Prepurchase_Short"))),Boolean(!o&&c)&&r.createElement("div",{className:F().StoreSaleNewItem},(0,k.we)("#Flag_New")),Boolean(n&&a&&!d)&&r.createElement("span",{className:(0,D.A)(F().BaseDiscount)},`-${n}%`),Boolean(a&&!d)&&r.createElement("div",{className:F().StoreSaleDiscountBox},`-${a}%`),Boolean(d)&&r.createElement("div",{className:F().DiscountIconCtn},r.createElement(A.XH_,null)),Boolean(a&&s&&!d)?r.createElement("div",{className:(0,D.A)(F().StoreSaleDiscountedPriceCtn)},r.createElement("div",{className:(0,D.A)({[F().SingleLineOriginalPrice]:t,[F().StoreOriginalPrice]:!t})},s),r.createElement("div",{className:(0,D.A)({[F().StoreSalePriceBox]:!0,[F().SingleLineMode]:t})},i)):r.createElement("div",{className:F().StoreSalePriceBox},i))}var At=a(58156);function Bt(e,t,a,o,n,s){if(!a)return;var r;if(!(2==(r=e.GetStoreItemType())?"bundle":1==r?"sub":0==r?"app":null))return void(0,At.w)(!1,"StoreItemWidgetSalePageAction: unexpected type: "+e.GetStoreItemType());const i=(0,l.wJ)(`${e.GetStorePageURL(o)}${n?`?${n}`:""}`,t);return{onClick:e=>{let t=(0,te.uX)(e)||window;s?s(void 0):i.startsWith("steam://")||(t.location.href=(0,_.NT)(i))},onOKActionDescription:(0,k.we)("#Sale_Gamepad_Action_Select")}}var kt=a(28629),Tt=a(94015);a(1923);function Pt(e=S.TS.LANGUAGE){const t=(0,Ue.TR)(),a=(0,Ue.rX)();return(0,xe.I)(Lt(t,a,e))}function Lt(e,t,a){return{queryKey:["LocalizedTagNames",a],queryFn:async()=>{const o=`LocalizedTagNames_${a}`,n=await t.GetObject(o),s=We.w.Init(Tt.Gr);s.Body().set_language(a),n?.version_hash&&s.Body().set_have_version_hash(n.version_hash);const r=await Tt.nd.GetTagList(e.GetAnonymousServiceTransport(),s);let i;if(1==r.GetEResult())i=r.Body().toObject(),t.StoreObject(o,i);else if(29==r.GetEResult())i=n;else{if(!n)throw r.GetErrorMessage();console.warn("Couldn't load updated tag localization, will continue with what we have from storage."),i=n}const l=new Map;return i.tags.forEach((({tagid:e,name:t})=>l.set(e,{tagid:e,name:t}))),l},staleTime:36e5}}a(45090);function Gt(e){const{className:t,url:a,style:o,children:n,bSkipForcingStoreLink:s}=e,i=(0,pe.n9)(),c=s?a:(0,_.Ps)(a,S.TS.STORE_BASE_URL);if(c){const e=(0,l.wJ)(c,i);return r.createElement(f.Ii,{href:e,target:S.TS.IN_CLIENT?void 0:"_blank",className:t,style:o},n)}return r.createElement("span",{style:o,className:t},n)}function Nt(e){const{tagid:t,className:a}=e,o=function(e,t=S.TS.LANGUAGE){const{data:a}=Pt(t);return e?a?.get(e):void 0}(t);if(!o)return null;const n=(0,kt.ww)((0,kt.sf)(S.TS.LANGUAGE)),s=`${S.TS.STORE_BASE_URL}tags/${n}/${o?.name}`;return r.createElement(Gt,{url:s,className:(0,D.A)(F().Tag,"WidgetTag",a)},o.name)}const Rt=(0,s.PA)((e=>{const{appid:t,bIsMuted:a}=e,o=se.Get().BOwnsApp(t),n=(0,D.A)(F().CapsuleBottomBar,a&&F().Muted,o?F().PlayNowButton:F().AddToLibraryButton);return r.createElement("div",{onClick:e=>{e.preventDefault(),o?at(t):se.Get().AddLicenseForFreeGame(t)},className:n},(0,k.we)(o?"#Sale_PlayNow":"#Sale_AddToLibrary"))}));a(48036),a(73834);function Mt(e,t){r.useEffect((()=>{const a=a=>{a.key===e&&t(a)};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}),[e,t])}var Ot=a(49434),Ht=a.n(Ot);function Ft(e){const{closeModal:t,rgImageURL:a}=e,[o,n]=r.useState(0),s=r.useCallback((()=>{n(0==o?a.length-1:o-1)}),[o,a.length]),i=r.useCallback((()=>{o+1>=a.length?n(0):n(o+1)}),[o,a.length]);return r.createElement(fe.eV,{bAllowFullSize:!0,bOKDisabled:!0,closeModal:t,bHideCloseIcon:!0,modalClassName:Ht().PopupScreenshotModal},r.createElement(Vt,{index:o,numElements:a.length,fnForward:i,fnBackwards:s,fnClose:t,bCircular:!0}),r.createElement("div",{className:Ht().PopupScreenshotContainer},r.createElement("img",{className:Ht().PopupScreenshot,src:a[o]})))}function Vt(e){const{index:t,numElements:a,fnForward:o,fnBackwards:n,fnClose:s,bCircular:i}=e;Mt("ArrowLeft",n),Mt("Left",n),Mt("ArrowRight",o),Mt("Right",o),Mt("Escape",(()=>s&&s())),Mt("Esc",(()=>s&&s()));let l=a>1;return r.createElement("div",{className:Ht().ButtonCtn},l&&r.createElement(r.Fragment,null,r.createElement("div",{className:(0,D.A)(Ht().ButtonIcon,0!==t||i?null:Ht().Disabled),onClick:n},r.createElement(A.V5W,{angle:270})),r.createElement("div",{className:(0,D.A)(Ht().ButtonIcon,t!==a-1||i?null:Ht().Disabled),onClick:o},r.createElement(A.V5W,{angle:90}))),r.createElement("div",{className:Ht().ButtonIcon,onClick:s},r.createElement(A.X,null)))}var xt=a(33264),Wt=a.n(xt);var Ut=a(83279);function zt(e){const[t,a]=(0,r.useState)(!1),[o,n]=(0,r.useState)({naturalWidth:0,naturalHeight:0,displayWidth:0,displayHeight:0}),s=(0,r.useRef)(),[i,l]=function(){const[e,t]=r.useState(void 0),a=r.useCallback((()=>t(void 0)),[]),o=r.createElement(fe.EN,{active:void 0!==e},r.createElement(Ft,{closeModal:a,rgImageURL:e}));return[t,o]}();return(0,r.useEffect)((()=>{if(o.naturalWidth>1.3*o.displayWidth&&o.naturalHeight>1.3*o.displayHeight&&o.naturalWidth>256){o.naturalWidth/o.naturalHeight<3&&a(!0)}}),[o]),t?r.createElement("span",{className:Ut.PreviewCtn},l,r.createElement("span",{className:Ut.SVG},r.createElement(A.YNO,null)),r.createElement("img",{...e,className:(0,D.A)({[e.className]:Boolean(e.className),[Ut.ExpandableHover]:!0}),onClick:t=>i([e.src])})):r.createElement("img",{...e,ref:s,onLoad:e=>{if(!(e.currentTarget.closest("a")||window.innerWidth<parseInt(Wt().strMaxMobileWidth))){const{naturalWidth:t,naturalHeight:a,width:o,height:s}=e.currentTarget;n({naturalWidth:t,naturalHeight:a,displayWidth:o,displayHeight:s})}}})}function jt(e){const{className:t,srcs:a,lazyLoad:o,width:n,height:s,alt:i,crossOrigin:l}=e,[c,d]=r.useState(a.length),[m,p]=r.useState(0);r.useEffect((()=>{c!=a.length&&(d(a.length),p(0))}),[c,a.length]);const u=r.useCallback((()=>{e.onImageError&&e.onImageError(e.srcs[m]),m+1<e.srcs.length&&p(m+1)}),[m,e]);return 0==a.length?null:r.createElement("img",{className:t,src:a[m],crossOrigin:l,onError:u,loading:o?"lazy":void 0,width:n,height:s,alt:i})}function Xt(e){const{info:t,bPreferLibrary:a}=e,[o]=(0,R.G6)(t.id,(0,N.SW)(t.type),{include_assets:!0}),[n,s]=r.useState(0);if(!o)return r.createElement("div",{className:F().HeroCapsuleImageContainer});let i=o.GetAssets().GetHeroCapsuleURL(),l=o.GetAssets().GetLibraryCapsuleURL();if(o.GetIncludedAppIDs()?.length>0&&!i){const e=d.A.Get().GetApp(o.GetIncludedAppIDs()[0]);e&&(i||(i=e.GetAssets().GetHeroCapsuleURL()),l||(l=e.GetAssets().GetLibraryCapsuleURL()))}if(i&&(!a||!l))return r.createElement("div",{className:(0,D.A)(F().HeroCapsuleImageContainer,"HeroCapsuleImageContainer")},r.createElement("img",{src:i,className:F().CapsuleImage,alt:o.GetName()}));if(l)return r.createElement("div",{className:(0,D.A)(F().LibraryFallbackAssetImageContainer,F().VerticalCapsule,a?F().ForceLibrarySizing:"")},r.createElement("div",{className:F().FallbackBackground,style:{backgroundImage:`url(${l})`}}),r.createElement("img",{src:l,className:F().CapsuleImage,alt:o.GetName()}));const c=Qt(o,!0),m=c.length-1,p=e=>{const t=c.indexOf(e);t>=m&&t<c.length-1&&s(t+1)};if(n<c.length){const e=c[n];return r.createElement("div",{className:F().LibraryFallbackAssetImageContainer},r.createElement("div",{className:F().FallbackBackground,style:{backgroundImage:`url(${e})`}}),r.createElement(jt,{lazyLoad:!0,srcs:c,className:F().CapsuleImage,alt:o.GetName(),onImageError:p}))}return r.createElement("div",{className:F().HeroCapsuleImageContainer})}function Qt(e,t){let a=[];return e.GetAssets()&&(t?a.push(e.GetAssets().GetHeaderURL(),e.GetAssets().GetMainCapsuleURL()):a.push(e.GetAssets().GetMainCapsuleURL(),e.GetAssets().GetHeaderURL())),a.filter((e=>!!e))}var qt=a(20516);function Zt(e){const{bAllowOutsideOfDeck:t}=e;if(!(0,S.Qn)()&&!t)return null;let a="unknown";switch(e.eDeckCompatibilityCategory){case 3:a="verified";break;case 2:a="playable";break;case 1:a="unsupported"}return r.createElement("div",{className:(0,D.A)(qt.CompatIcon,"ds_steam_deck_compat",a,e.className)})}a(78325);a(41024);var Kt=a(67844),Yt=(a(18987),a(42689)),Jt=a.n(Yt),$t=a(24590),ea=a(65137),ta=a(30625);class aa{m_HomeView;BHasHomeView(){return Boolean(this.m_HomeView)}GetHomeView(){return this.m_HomeView?.home}static s_globalSingletonStore;static Get(){return aa.s_globalSingletonStore||(aa.s_globalSingletonStore=new aa,"dev"==S.TS.WEB_UNIVERSE&&(window.g_HomeViewSetting=aa.s_globalSingletonStore)),aa.s_globalSingletonStore}constructor(){"dev"===S.TS.WEB_UNIVERSE&&(window.g_HomeViewStore=this);const e=(0,S.Tc)("home_view_setting","application_config");this.ValidateHomeViewData(e)&&this.SetHomeViewSetting(e);const t=(0,S.Tc)("home_view_setting_override","application_config");this.ValidateHomeViewDataOverride(t)&&this.SetHomeViewSettingOverride(t)}ValidateHomeViewData(e){const t=e;return t&&"object"==typeof t.home&&"object"==typeof t.main_cluster}SetHomeViewSetting(e){this.m_HomeView=e}ValidateHomeViewDataOverride(e){const t=e;return t&&(!t.all||"object"==typeof t.all)&&(!t.maincap||"object"==typeof t.maincap)}SetHomeViewSettingOverride(e){this.m_HomeView.home={...this.m_HomeView.home,...e?.all,...e?.maincap}}}const oa={include_tag_count:20,include_basic_info:!0,include_supported_languages:!0};function na(e){const t=se.Get(),a=e?.GetAllLanguagesWithSomeSupport()||[],o=aa.Get().GetHomeView()?.localized;return!e||0==e.GetStoreItemType()&&(t.BIsGameIgnored(e.GetAppID())||t.BIsGameIgnored(e.GetParentAppID()))||t.BExcludesContentDescriptor(e.GetContentDescriptorIDs())||t.BExcludeTagIDs(e.GetTagIDs())||e.GetAllCreatorClanIDs().some((e=>t.BIsIgnoringCurator(e)))||o&&!(0==a.length||e.BHasSomeLanguageSupport(0)||t.BIsAnyLanguageEnabled(a))}var sa,ra=a(3539),ia=a(60485),la=a(95838);a(5668);!function(e){e.Default="default",e.Upcoming="upcoming",e.Featured="featured",e.Press="press",e.Steam="steam",e.Halloween="halloween",e.Dev_All="all",e.Dev_AssociatedPress="associated_press",e.Dev_Sales="associated_sales"}(sa||(sa={}));new Map;class ca{constructor(){(0,n.Gn)(this)}m_mapBlockedAppIds=new Map;m_mapBlockedClanIds=new Map;static s_globalSingletonStore;static Get(){return ca.s_globalSingletonStore||(ca.s_globalSingletonStore=new ca,ca.s_globalSingletonStore.Init()),ca.s_globalSingletonStore}GetMutedSourceCount(){return this.m_mapBlockedAppIds.size+this.m_mapBlockedClanIds.size}Init(){const e=(0,S.Tc)("mutedcomminfo","application_config");this.ValidateStoreDefault(e)&&("dev"!=S.TS.WEB_UNIVERSE&&"beta"!=S.TS.WEB_UNIVERSE||console.log("DEV_DEBUG: CMutedCommunicationStore loading bundles payload: "+JSON.stringify(e)),e.appids&&e.appids.forEach((e=>this.m_mapBlockedAppIds.set(e,!0))),e.clanids&&e.clanids.forEach((e=>this.m_mapBlockedClanIds.set(e,!0))))}ValidateStoreDefault(e){const t=e;return!(!t||"object"!=typeof t)&&(Array.isArray(t.appids)&&t.appids.length>0||Array.isArray(t.clanids)&&t.clanids.length>0)}BIsEventBlocked(e){return e.appid?this.m_mapBlockedAppIds.has(e.appid):!!e.clanInfo&&this.m_mapBlockedClanIds.has(e.clanInfo.clanid)}BIsMutedAppID(e){return this.m_mapBlockedAppIds.has(e)}BIsMutedClanID(e){return this.m_mapBlockedClanIds.has(e)}async UpdateCommunitionSetting(e,t,a){const o=S.TS.STORE_BASE_URL+"account/optoutappcommunication/",n=new FormData;if(n.append("sessionid",S.TS.SESSIONID),n.append("allowCommunication",e?"1":"0"),t){if(!e&&this.m_mapBlockedAppIds.has(t)||e&&!this.m_mapBlockedAppIds.has(t))return!0;e?this.m_mapBlockedAppIds.delete(t):this.m_mapBlockedAppIds.set(t,!0),n.append("appId",t.toString())}else{if(!a)return(0,At.w)(!1,"BlockEventsFromCalenderEvent: Invalid AppID and ClanID"),!1;if(!e&&this.m_mapBlockedClanIds.has(a)||e&&!this.m_mapBlockedClanIds.has(a))return!0;e?this.m_mapBlockedClanIds.delete(a):this.m_mapBlockedClanIds.set(a,!0),n.append("clanId",a.toString())}try{return 1==(await U().post(o,n)).data.success}catch(e){return console.error("Blocking app id hit error "+(0,Q.H)(e).strErrorMsg),!1}}}(0,o.Cg)([n.sH],ca.prototype,"m_mapBlockedAppIds",void 0),(0,o.Cg)([n.sH],ca.prototype,"m_mapBlockedClanIds",void 0);function da(e,t,a,o){return{strId:"section-"+t,strSectionLabel:t,rtSectionStart:a,rtSectionEnd:o,bIsFutureSection:a>=e,nRenderedHeight:2500,nTopOffset:0}}class ma{m_nForwardStuckCount=0;m_nBackwardStuckCount=0;m_mapCalendarAppsByID=new Map;m_mapCalendarClansByID=new Map;m_mapCalendarEventsByGid=new Map;m_rgSortedCalendarEvents=new Array;m_visibilityStore;m_currentView=n.sH.box(null);m_bFinishedSearchingForward=!1;m_bFinishedSearchingBackward=!1;m_rgCalendarSections=[];m_rgFutureSections=[];m_dtInitTime;m_forwardRequestInFlight;m_backwardRequestInFlight;m_key;m_collectionMetaData=void 0;constructor(e,t){(0,n.Gn)(this),this.m_key=e,this.m_visibilityStore=new la.vJ(t),se.Get().HintLoad()}GetNumEventsLoaded(){return this.m_mapCalendarEventsByGid.size}BIsGlobalCalendar(){return!(this.m_key.appids||this.m_key.clanaccountids||this.m_key.collectionid||this.m_key.saleid)}BIsShowingFeaturedFeed(){return Boolean(this.GetCollectionID()===sa.Featured||this.BIsGlobalCalendar()&&!S.iA.accountid)}BIsSingleSourceCalendar(){return Boolean(this.BIsSingleGroupCalendar()?!this.BIsSingleAppCalendar():this.BIsSingleAppCalendar())}GetKey(){return this.m_key}BEventMatchCalendarSingleSource(e){return this.BIsSingleAppCalendar()&&this.m_key.appids[0]==e.appid||this.BIsSingleGroupCalendar()&&this.m_key.clanaccountids[0]==e.clanid}BIsSingleSourceMuted(){return!!this.BIsSingleSourceCalendar()&&(this.BIsSingleAppCalendar()?ca.Get().BIsMutedAppID(this.GetSingleAppID()):ca.Get().BIsMutedClanID(this.GetSingleGroupID()))}BIsSingleGroupCalendar(){return Boolean(this.m_key.clanaccountids&&1==this.m_key.clanaccountids.length)}GetSingleGroupID(){return this.m_key.clanaccountids[0]}BIsSingleAppCalendar(){return Boolean(this.m_key.appids&&1==this.m_key.appids.length)}GetSingleAppID(){return this.m_key.appids[0]}BIsCollectionCalendar(){return!!this.m_key.collectionid}GetCollectionID(){return this.m_key.collectionid}BIsSaleCalendar(){return!!this.m_key.saleid}GetSaleID(){return this.m_key.saleid}BIsCalendarEndTimeSet(){return!!this.m_key.rtCalendarEnd}GetCalendarEndTime(){return this.m_key.rtCalendarEnd}SetCollectionMetaData(e){this.m_collectionMetaData=e}GetCollectionMetaData(){return this.m_collectionMetaData}BHasCollectionMetaData(){return Boolean(this.m_collectionMetaData)}ValidateCollectionMetadata(e){const t=e;return t&&"object"==typeof t&&t.clanid&&"number"==typeof t.clanid&&t.clan_event_gid&&"string"==typeof t.clan_event_gid}SetFilteredView(e,t){const a=this.m_currentView.get();a&&a.dispose();const o=this.BIsSingleSourceMuted(),n=new pa((()=>this.m_rgSortedCalendarEvents),this.LoadAdditionalEvents,this.BHitEventHorizon,e,t,o);this.m_currentView.set(n)}BIsFilteredViewEmpty(){return!!this.m_currentView.get()?.BIsViewEmpty()}GetCalendarItemsInTimeRange(e,t){const a=this.m_currentView.get();return a?a.GetCalendarItemsInTimeRange(e,t):(console.error("calendar view not yet initialized"),{rgCalendarItems:[],bIsComplete:!1})}GetActiveEventsAt(e){const t=this.m_currentView.get();return t?t.GetActiveEventsAt(e):(console.error("calendar view not yet initialized"),[])}GetCurrentlyLoadedEventCount(e,t){return this.m_currentView.get()?.GetCurrentlyLoadedEventCount(e,t)}GetCurrentlyLoadedItemsForStats(){return this.m_currentView.get()?.GetCurrentlyLoadedEvents()||[]}GetCalendarSections(e){return e?this.m_rgFutureSections:this.m_rgCalendarSections}GetStoreInitializationTimestamp(){return this.m_dtInitTime||(this.m_dtInitTime=j.HD.GetTimeNowWithOverrideAsDate()),this.m_dtInitTime}InitCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[],a=e.getTime()/1e3;t.push(da(a,(0,k.we)("#EventCalendar_FutureEventsHeader"),a));const o=new Date(e);o.setHours(0,0,0,1);let n=o.getTime()/1e3;t.push(da(a,(0,k.we)("#Time_Today"),n,a)),o.setDate(o.getDate()-1);let s=n;n=o.getTime()/1e3,t.push(da(a,(0,k.we)("#Time_Yesterday"),n,s));const r=this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1],i=r?r.start_time:a;let l=i>n;for(let e=0;e<5&&!l;e++)o.setDate(o.getDate()-1),s=n,n=o.getTime()/1e3,t.push(da(a,(0,k.cc)(o),n,s)),l=i>n;const c=new Date(o);let d=n;for(;c.getMonth()==e.getMonth()&&1!=c.getDate()&&!l;){c.setDate(c.getDate()-7);const e=c.getTime()/1e3;t.push(da(a,(0,k.lQ)(d-1),e,d)),l=i>e,d=e}const m=new Date(e);m.setHours(0,0,0,1),m.setDate(1);let p=d;for(let o=1;!l;o++){const n=new Date(m);n.setMonth(e.getMonth()-o,1);const s=n.getTime()/1e3;t.push(da(a,(0,k.lQ)(s),s,p)),l=i>s,p=s}this.m_rgCalendarSections.length>t.length?this.m_rgCalendarSections.splice(t.length,this.m_rgCalendarSections.length):t.splice(this.m_rgCalendarSections.length,t.length).forEach((e=>this.m_rgCalendarSections.push(e)))}InitFutureCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[];let a;this.m_key.rtCalendarEnd&&(a=this.m_key.rtCalendarEnd);const o=this.m_rgSortedCalendarEvents.length>0&&this.m_rgSortedCalendarEvents[0];o&&(a=o.start_time),a||(a=e.getTime()/1e3);const n=e.getTime()/1e3,s=new Date(e);s.setHours(24,0,0,0);let r=s.getTime()/1e3;t.push(da(n,(0,k.we)(this.m_key.bSectionByDay?"#Time_UpNext":"#Time_Today"),n,r));let i=a<=r,l=r;s.setDate(s.getDate()+1),r=s.getTime()/1e3,i||t.push(da(n,(0,k.we)("#Time_Tomorrow"),l,r)),i=a<=r;const c=6-Jt()(e).weekday();for(let e=2;e<=c&&!i;e++){l=r;const e=(0,k.cc)(s);s.setDate(s.getDate()+1),r=s.getTime()/1e3,t.push(da(n,e,l,r)),i=a<=r}if(this.m_key.bSectionByDay)for(;!i;){l=r;const e=(0,k.$w)(s);s.setDate(s.getDate()+1),r=s.getTime()/1e3,t.push(da(n,e,l,r)),i=a<=r}else{const o=new Date(s);let l=r;const c=Jt()(e).daysInMonth();if(o.getMonth()==e.getMonth()&&o.getDate()!=c&&!i){o.setDate(o.getDate()+7);const e=o.getTime()/1e3;t.push(da(n,(0,k.we)("#EventCalendar_NextWeek"),l,e)),i=a<=e,l=e}const d=new Date(e);let m;if(d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0,0,0,0),o<d&&!i){const e=d.getTime()/1e3;t.push(da(n,(0,k.we)("#EventCalendar_LaterThisMonth"),l,e)),i=a<=e,m=e}else m=l;for(let o=2;!i;o++){const s=new Date(d);s.setMonth(e.getMonth()+o);const r=s.getTime()/1e3;t.push(da(n,(0,k.lQ)(m),m,r)),i=a<=r,m=r}}this.m_rgFutureSections.length>t.length?this.m_rgFutureSections.splice(t.length,this.m_rgFutureSections.length):t.splice(this.m_rgFutureSections.length,t.length).forEach((e=>this.m_rgFutureSections.push(e)))}async RegisterCalendarEventsAndModels(e){await se.Get().HintLoad(),(0,n.h5)((()=>{this.RegisterCalendarApps(e.apps),this.RegisterCalendarClans(e.clans),this.RegisterCalendarEvents(e.documents),ta.O3.RegisterClanEvents(e.events),this.RegisterReadEvents(e.events_read),this.RegisterEventVotes(e.event_votes),e.forwardComplete&&(this.m_bFinishedSearchingForward=!0),e.backwardComplete&&(this.m_bFinishedSearchingBackward=!0),this.InitCalendarSections(),this.InitFutureCalendarSections(),this.SetCollectionMetaData(this.ValidateCollectionMetadata(e.metadatainfo)?e.metadatainfo:null)}))}RegisterCalendarApps(e){if(e)for(const t of e){if(this.m_mapCalendarAppsByID.has(t.appid))continue;const e=new $t.dF;e.appid=t.appid,e.source=t.source,e.playtime=t.playtime,e.last_played=t.last_played,e.wishlist_added=t.wishlist_added,this.m_mapCalendarAppsByID.set(t.appid,e),t.hidden&&this.m_visibilityStore.SetAppVisibility(t.appid,!1)}}RegisterCalendarClans(e){if(e)for(const t of e)if(!this.m_mapCalendarClansByID.has(t.clanid)){const e=new $t.w2;e.clanid=t.clanid,e.source=t.source,this.m_mapCalendarClansByID.set(t.clanid,e),t.hidden&&this.m_visibilityStore.SetClanVisibility(t.clanid,!1)}}RegisterReadEvents(e){if(!e)return;const t=ea.KN.Get();for(const a of e)t.SetEventAsRead(a)}RegisterEventVotes(e){if(!e)return;const t=ea.KN.Get();for(const a of e){const e=void 0===a.vote?void 0:Boolean(a.vote);t.SetVote(a.id,e)}}RegisterCalendarEvents(e){if(e){let t=!1;for(const a of e)this.BInternalInsertCalendarEventItem(a)&&(t=!0);t&&this.RebuildSortedCalendarEventList()}}BHitEventHorizon(e){return"forward"==e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward}GetTimeEdgeForDirection(e,t=void 0){return"forward"===e?this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[0].start_time:t:this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1].start_time:t}UpdateStuckCounters(e,t){const a="forward"===e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward,o=this.GetTimeEdgeForDirection(e,void 0);return a||o!==t?("forward"==e?this.m_nForwardStuckCount=0:this.m_nBackwardStuckCount=0,!1):("forward"==e?this.m_nForwardStuckCount++:this.m_nBackwardStuckCount++,!0)}GetRequestInFlight(e){return"forward"===e?this.m_forwardRequestInFlight:this.m_backwardRequestInFlight}SetRequestInFlight(e,t){(0,At.w)(!t||!this.GetRequestInFlight(e),"Already have a request in flight for",e),"forward"===e?this.m_forwardRequestInFlight=t:this.m_backwardRequestInFlight=t}async LoadAdditionalEvents(e,t){if(this.BHitEventHorizon(e))return 1;let a=this.GetRequestInFlight(e);if(a)return a;const o=S.TS.STORE_BASE_URL+"events/ajaxgetusereventcalendarrange/",n="forward"===e?this.m_nForwardStuckCount:this.m_nBackwardStuckCount,s=n<3?n:0,r=n>=3?1:0,i=("dev"===S.TS.WEB_UNIVERSE?50:250)+50*s,l=this.GetTimeEdgeForDirection(e,j.HD.GetTimeNowWithOverride()),c={minTime:0,maxTime:0,ascending:!0,maxResults:i,populateEvents:15,appTypes:this.m_visibilityStore.GetGameSources().join(","),eventTypes:Array.from(this.m_visibilityStore.enabledEventTypeSet).join(","),appIdFilter:Boolean(this.m_key.appids&&this.m_key.appids.length>0)?this.m_key.appids.sort().join(","):void 0,clanIdFilter:Boolean(this.m_key.clanaccountids&&this.m_key.clanaccountids.length>0)?this.m_key.clanaccountids.sort().join(","):void 0,collectionID:this.m_key.collectionid,saleID:this.m_key.saleid,hubtype:this.m_key.hubtype,category_or_language:this.m_key.category_or_language,tag_name:this.m_key.tag_name,tags:this.m_key.rgTags?this.m_key.rgTags.slice().sort().join(","):void 0};"forward"===e?(c.minTime=Math.floor(l+r),c.ascending=!0):(c.maxTime=Math.floor(l-r),c.ascending=!1);return a=U().get(o,{params:c,cancelToken:t?t.token:void 0,withCredentials:!0}).then((async a=>{if(this.SetRequestInFlight(e,null),1==a.data.success){if(await this.RegisterCalendarEventsAndModels(a.data),this.UpdateStuckCounters(e,l))return this.LoadAdditionalEvents(e,t)}else console.error("LoadAdditionalEvents was not successful: Msg"+a.data.msg);return a.data.success})).catch((t=>{this.SetRequestInFlight(e,null);let a=(0,Q.H)(t);return console.error("LoadAdditionalEvents hit error "+a.strErrorMsg,a),"forward"==e?this.m_bFinishedSearchingForward=!0:this.m_bFinishedSearchingBackward=!0,2})),this.SetRequestInFlight(e,a),a}BInternalInsertCalendarEventItem(e){if(!e.unique_id)return(0,At.w)(!1,"Attmpted to register a calendar event item with an invalid unique id!"),!1;if(this.m_mapCalendarEventsByGid.has(e.unique_id))return!1;const t=this.m_mapCalendarAppsByID.get(e.appid),a=this.m_mapCalendarClansByID.get(e.clanid);if(!t&&!a)return console.log("No AppInfo or ClanInfo For: ",e),!1;const o=new $t.NK;return o.clanid=e.clanid,o.unique_id=e.unique_id,o.event_type=e.event_type,o.appid=e.appid,o.start_time=e.start_time,o.score=e.score,o.appInfo=t,o.clanInfo=a,this.m_rgSortedCalendarEvents.push(o),this.m_mapCalendarEventsByGid.set(o.unique_id,o),!0}GetCalendarAppInfoForAppID(e){return this.m_mapCalendarAppsByID.get(e)}RebuildSortedCalendarEventList(){const e=this.m_rgSortedCalendarEvents.slice();this.m_rgSortedCalendarEvents=e.sort(((e,t)=>t.start_time-e.start_time))}async UpdateEventBlockFromCalendarEvent(e,t){let a=e.appInfo?e.appid:void 0,o=e.clanInfo?e.clanInfo.clanid:void 0;null!=a||null!=o?(await ca.Get().UpdateCommunitionSetting(t,a,o),ia.V.RecordAppInteractionEvent(a,ia.E.k_eMuted)):(0,At.w)(!1,"Both clan id and account id are missing, cannot change communication status")}GetAllClans(){return Array.from(this.m_mapCalendarClansByID.keys())}GetAllApps(){return Array.from(this.m_mapCalendarAppsByID.keys())}}(0,o.Cg)([n.sH],ma.prototype,"m_mapCalendarAppsByID",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_mapCalendarClansByID",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_mapCalendarEventsByGid",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_rgSortedCalendarEvents",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_bFinishedSearchingForward",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_bFinishedSearchingBackward",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_rgCalendarSections",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_rgFutureSections",void 0),(0,o.Cg)([n.sH],ma.prototype,"m_collectionMetaData",void 0),(0,o.Cg)([n.XI],ma.prototype,"InitCalendarSections",null),(0,o.Cg)([n.XI],ma.prototype,"InitFutureCalendarSections",null),(0,o.Cg)([n.XI],ma.prototype,"RegisterCalendarEventsAndModels",null),(0,o.Cg)([n.XI],ma.prototype,"RegisterCalendarApps",null),(0,o.Cg)([n.XI],ma.prototype,"RegisterCalendarClans",null),(0,o.Cg)([n.XI],ma.prototype,"RegisterReadEvents",null),(0,o.Cg)([n.XI],ma.prototype,"RegisterEventVotes",null),(0,o.Cg)([n.XI],ma.prototype,"RegisterCalendarEvents",null),(0,o.Cg)([ra.o],ma.prototype,"BHitEventHorizon",null),(0,o.Cg)([n.XI.bound],ma.prototype,"LoadAdditionalEvents",null),(0,o.Cg)([n.XI],ma.prototype,"UpdateEventBlockFromCalendarEvent",null);class pa{m_rgLoadedEventsBox=n.sH.box([]);m_lastLoadLatch=null;m_fnGetUnfilteredEvents;m_fnLoadAdditionalEvents;m_fnBHitEventHorizon;m_fnBIsEventInView;m_bSkipStorePreferenceCheck;m_bAllowMutedAndIgnoredSources;m_rgAutorunDisposer;constructor(e,t,a,o,s,r){(0,n.Gn)(this),this.m_fnGetUnfilteredEvents=e,this.m_fnLoadAdditionalEvents=t,this.m_fnBHitEventHorizon=a,this.m_fnBIsEventInView=o,this.m_bSkipStorePreferenceCheck=s,this.m_bAllowMutedAndIgnoredSources=r,this.m_rgAutorunDisposer=(0,n.fm)((async()=>{const e=this.viewFilteredEvents.slice();if(!this.m_bSkipStorePreferenceCheck){const t=Array.from(new Set(e.map((e=>e.appid)).filter(Boolean))).sort();if(this.m_lastLoadLatch=e,await d.A.Get().QueueMultipleAppRequests(t,{...oa,include_assets:!0}),this.m_lastLoadLatch!=e)return;this.m_lastLoadLatch=null}this.m_rgLoadedEventsBox.set(e)}))}dispose(){this.m_rgAutorunDisposer()}get viewFilteredEvents(){return this.m_fnGetUnfilteredEvents().filter((e=>this.m_fnBIsEventInView(e)))}get filteredAndCheckedEvents(){return this.m_rgLoadedEventsBox.get().filter((e=>{if(e.appid){if(!this.m_bAllowMutedAndIgnoredSources&&(ca.Get().BIsMutedAppID(e.appid)||se.Get().BIsGameIgnored(e.appid)))return!1;if(!this.m_bSkipStorePreferenceCheck&&na(d.A.Get().GetApp(e.appid)))return!1}else if(!this.m_bAllowMutedAndIgnoredSources&&(ca.Get().BIsMutedClanID(e.clanid)||se.Get().BIsIgnoringCurator(z.b.InitFromClanID(e.clanid))))return!1;return!0}))}BIsCompleteThroughTime(e,t){if(this.m_fnBHitEventHorizon(e))return!0;const a=this.m_fnGetUnfilteredEvents();return"forward"===e?t&&a.length>0&&a[0].start_time>t:a.length>0&&a[a.length-1].start_time<t}async EnsureRangeIsLoaded(e,t){for(let e=0;e<100&&!this.BIsCompleteThroughTime("forward",t);e++)await this.m_fnLoadAdditionalEvents("forward");for(let t=0;t<100&&!this.BIsCompleteThroughTime("backward",e);t++)await this.m_fnLoadAdditionalEvents("backward")}GetCalendarItemsInTimeRange(e,t){this.EnsureRangeIsLoaded(e,t);const a=this.filteredAndCheckedEvents.filter((a=>a.start_time>=e&&(!t||a.start_time<t))),o=this.BIsCompleteThroughTime("forward",t),n=this.BIsCompleteThroughTime("backward",e);return{rgCalendarItems:a,bIsComplete:o&&n}}GetCurrentlyLoadedEvents(){return this.filteredAndCheckedEvents}GetCurrentlyLoadedEventCount(e,t){let a=0;this.filteredAndCheckedEvents.forEach((o=>{o.start_time>=e&&(!t||o.start_time<t)&&a++}));const o=this.BIsCompleteThroughTime("forward",t),n=this.BIsCompleteThroughTime("backward",e);return{nCount:a,bIsComplete:o&&n}}BIsViewEmpty(){return this.filteredAndCheckedEvents.length>0}GetActiveEventsAt(e){return this.filteredAndCheckedEvents.map((e=>ta.O3.GetClanEventModel(e.unique_id))).filter((t=>{if(t){const a=t.endTime||t.startTime+3600;return e>=t.startTime&&e<a}return!1}))}}(0,o.Cg)([n.EW.struct],pa.prototype,"viewFilteredEvents",null),(0,o.Cg)([n.EW.struct],pa.prototype,"filteredAndCheckedEvents",null);const ua=n.sH.box(null),ha=new Map;function ga(){return null==ua.get()&&function(e,t){let a="";e.appids&&e.appids.length>0&&(a+="appids:"+e.appids.sort().join(",")),e.clanaccountids&&e.clanaccountids.length>0&&(a+="clanids:"+e.clanaccountids.sort().join(",")),e.collectionid&&(a+="collection:"+e.collectionid),e.saleid&&(a+="sale:"+e.saleid),e.bSectionByDay&&(a+="_sectionbyday"),e.rtCalendarEnd&&(a+="_end:"+e.rtCalendarEnd),e.rgTags&&e.rgTags.length>0&&(a+="_tags:"+e.rgTags.slice().sort().join(",")),e.hubtype&&(a+="_hubtype:"+e.hubtype+"_"+e.category_or_language+"_"+e.tag_name),ua.get()!==a&&(ua.set(a),ha.has(a)||ha.set(a,new ma(e,t)))}({}),ha.get(ua.get())}window.g_EventCalendarMap=ha;var _a=a(15515);const Sa=e=>{let t=S.TS.HELP_BASE_URL+"wizard/HelpWithLimitedAccount";return r.createElement(fe.o0,{strTitle:(0,k.we)("#Informational_Message"),onCancel:e.closeModal,onOK:e.closeModal,bAlertDialog:!0},r.createElement("div",null,(0,k.PP)(e.strTokenOverride||"#User_LimitedAccount",r.createElement("a",{href:t,target:S.TS.IN_CLIENT?void 0:"_blank"},(0,k.we)("#User_LimitedAccount_UrlInfo")))))},Ca=(0,s.PA)((e=>{const{closeModal:t}=e;return r.createElement(fe.o0,{strTitle:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_Title"),strDescription:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_Description"),strOKButtonText:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_OKButton"),strCancelButtonText:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_CancelButton"),onOK:()=>{ga().m_visibilityStore.SetGameSourceAllowed(la.FD.k_ECurator,!0),t()},onCancel:()=>{ga().m_visibilityStore.SetCuratorUnhideOnFollowDialogDismissed(!0),t()}})}));function va(e){e||null!==ua&&(ga().m_visibilityStore.BCuratorUnhideOnFollowDialogDismissed()||ga().m_visibilityStore.BIsGameSourceAllowed(la.FD.k_ECurator)||(0,Ge.pg)(r.createElement(Ca,null),window))}function wa(){return!!ea.KN.Get().BIsUserLoggedIn()||((0,Ge.pg)(r.createElement(fe.o0,{strTitle:(0,k.we)("#EventDisplay_Share_NotLoggedIn"),strDescription:(0,k.we)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:(0,k.we)("#MobileLogin_SignIn"),onOK:()=>(0,mt.vg)()}),window),!1)}function ba(e){const t=z.b.InitFromClanID(e),a=ea.KN.Get().GetPartnerEventPermissions(t);return!a||!a.limited_user||((0,Ge.pg)(r.createElement(Sa,null),window),!1)}const fa=e=>{const{className:t,bIgnored:a,bApplyingFollowing:o,bFollowing:n,onFollowClick:s}=e;return j.HD.bIsFollowingEnabled?r.createElement(v.he,{toolTipContent:a||n?void 0:(0,k.we)("#CreatorHome_Follow_tooltip")},r.createElement(f.ml,{className:(0,D.A)(ct.Button,_a.FollowButton,"FollowButton",t,n?"Followed":""),onClick:s},o&&r.createElement(ut,{size:15}),!o&&(n||a)&&r.createElement(A.Jlk,null),r.createElement("div",{className:_a.FollowBtnText},!o&&(n?(0,k.we)("#Button_Followed"):a?(0,k.we)("#Button_Ignored"):(0,k.we)("#Button_Follow"))))):null},Ea=e=>{const[t,a]=r.useState(!1),{clanAccountID:o,className:n}=e,s=z.b.InitFromClanID(o),i=(0,lt.q3)((()=>se.Get().BIsFollowingCurator(s))),l=(0,lt.q3)((()=>!i&&se.Get().BIsIgnoringCurator(s)));return r.createElement(fa,{className:n,bIgnored:l,bFollowing:i,bApplyingFollowing:t,onFollowClick:()=>{const{clanAccountID:t}=e;wa()&&ba(t)&&(a(!0),(()=>{const{clanAccountID:t,creatorID:o}=e,n=z.b.InitFromClanID(t),s=se.Get().BIsFollowingCurator(n),r=!s&&se.Get().BIsIgnoringCurator(n);se.Get().UpdateFollowOrIgnoreCurator(n,!r,!(r||s)).then((e=>{if(o){let e=Kt.pF.GetCreatorHomeByID(o);r||e.AdjustFollower(s?-1:1)}a(!1)})).then((()=>{va(s)})).catch((e=>{a(!1);let t=(0,Q.H)(e);console.error("CuratorFollowButton hit error: "+t.strErrorMsg,t)}))})())}})};var ya=a(79474);a(81378);const Ia="DEBUG_UseNewGameHover";window.SetHoverPresentation=function(e){window.sessionStorage.setItem(Ia,e)};const Da=5500,Aa=2e3,Ba=10;function ka(e,t,a){const o=[];if(1==e.length){const t=d.A.Get().GetApp(e[0]);t.GetMicroTrailer()&&o.push({rctImage:r.createElement(V,{appInfo:{id:t.GetID(),type:"game"}}),nDurationMs:Da}),t.GetOnlyAllAgesSafeScreenshots().slice(0,Ba).forEach(((e,t)=>{o.push({rctImage:r.createElement("img",{key:e,className:O().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:Aa})}))}if(0==o.length)for(const t of e){const e=d.A.Get().GetApp(t),a=e?.GetAssets()?.GetMainCapsuleURL();a&&o.push({rctImage:r.createElement("img",{key:"fallback",className:O().FullDivImage,loading:"lazy",src:a,alt:e.GetName()}),nDurationMs:Aa})}o.length>0?(t(o),a(!0)):"dev"!=S.TS.WEB_UNIVERSE&&"beta"!=S.TS.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: GameHoverImages for id/type no images: (might be not age safe screenshots)",(0,n.HO)(e))}function Ta(e){const{info:t}=e,a=(0,r.useRef)({include_assets:!0,include_trailers:!0,include_screenshots:!0}),[o,n]=(0,R.G6)(t.id,(0,N.SW)(t.type),a.current),s=(0,r.useRef)(o),[i,l]=(0,r.useState)([]),c=(0,r.useRef)(0),u=(0,m.CH)(),[h]=r.useState(new p.LU),g=(0,r.useCallback)(((e=!1)=>{if(e&&(c.current=0),i?.length>0){const e=i[c.current].nDurationMs;h.Schedule(e,(()=>{const e=c.current;c.current=(c.current+1)%i.length,e!=c.current&&(g(),u())}))}}),[i,h,u]);return(0,r.useEffect)((()=>(!o||i&&0!=i.length&&s.current===o?2==n&&0==i.length?l([{rctImage:r.createElement("img",{key:"default",className:O().FullDivImage,loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXsAAADXCAIAAAB09WZ9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA26SURBVHhe7d1JjyPHEYbhIfkrvAiWLI32BfIGnwwfbNgHAwJsQBfDJ5/8/6/TRUcVE8LMsPL7OBWdUezp91GpWVTkxmJlzHQ7mj788J//vUg4HA7tbI2OHo/HdrZG9w22wWZ63HN77DLXpD1uMe4l7+t8thdVUZ3dyKmJ3cr1+6X7ZqJhmqZ29u704NMU8W6DCD08PLQna9SeB4DHRcYBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pBxANTZM+PYKia8hSt2jSvytJw++/Z37fTdJUtgM92HVt+am9hNPXBlI1/1UHFJxRGp9NJsA99TDr594kXmzwDd1448dOqI948l3BEhXe58+vSb37bTNXZj6wbjosE2GMQvrD2u236b2Kn790Gz0xUL4h4daq95L5K36I4XTcxsV6Ub8HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOqdPv7E1x90qpsPB1Dj5YrlhNWnjRg5DB9dSE++37OdJ3CdLlZ2qlNPRJDd1O9lGD356+bWqOU7f4ar7jvs2467TzdO8pEN3V8aO215LLiy6ixGSg09n9VsOfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQ5/Ty69+00yumfm8+ZIOR5X+ZwZNTa0MHxzaZkjbR177Xdt5BC7Oi76Cp53GnCHcbqL/j6DVFbG4wP/SPPj24ZdaWiCYNHRwb2JtBa+3W6KhlB9dau46I6+Ptrfr6IempL2ubk07nGPhdVbyudgbsJG7+doYq+przcxwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgDhkHQB3zqaOmeFc3mCPd6A2luapFdDdrS0SThg6Oa3dbdGMXNmjhMWz6mqjuevBpUp86evrkq+5vOXjLvm/nV/S+G3Stb5HMCGSrDYYmhXGDJ0fW3SMoGrjtYxbmptbdI95tEBEZvWhPrw38rsq8qP2o67G3e14bHtfdvtduYWbZujc/xwFQh4wDoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+PuP/22na3Th42HRnlxZQqq/6HsLu7Z2dmVedGLqTN+h7nZhQReVPdlaOEPX++fGNh/qO6UuuIpHTIQj9OrVq/ZkzcC/44hl7etuF5b0vr6uJ2rs2zF07JGD810VgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHf85x7KQNWKZ4t35y+V8A11he3AjqwZuUfdc3XufqE6stOPVjqmnSc1++vhLlXHG7awY2e3bgbtaTz0nI1LKoxq6B3b8A0C9rogMe9HzwPKS6guejIpwBKcH9bsdfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQZ7eMcz4vpUTz1/VjIFcwFvO3M2Any+7omhvIY5x58Nc36luHc/r4y+/b6bs7LNqTd5csFdXd52jvsFProO7rXG6XXSRXjmLiVrF3UeY2M30jLBemP0+e76oA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq7JlxdKGRjiZlhs4sbOiLQrWRb+Zet1n2FnW9T7/+4rulVe9IMWXB8W+8vM6RKZCNnrqzKTl+T2tzh76uZ5pM5YuO+7idrZkv2Gs3/PUhOievtu5+mXz5unLYyak5xnDmHnyWYnu2s577vWhqYclVk3EA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXuOONQ4oH7xg26wemjz7+Lrb163CJa9Q5T2Btc5W876XprwtcOM7AZmZpjXOjKxmWbzC1Wj7nBFC3e/K+vH/OX5WFNN3AbvfJpmuaVd9kX3o3GuG3o5SVcH+rvOMvE7XyVDJpFj6WX7Ra258rx3rC3mdlAu9H3f3L78HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOnPNcTt9bKbC1Rf+tpOO7QW0rmfEtw69SHYf524XNpQvxOtb+nYbRNQUy7XHIYbW6Ymo7Wg+5zh6bz60mPut9m8cOrockom/Ps5bxyQvWTRZxMP6gSck+X493TshVqcOufrlRV91eeP46Rq8fSxxhe+qANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pia46VItVuoepjjqozVRGUF7Dy4bmAqaHVUrW0Z2XTvMYtqg+/jWdYcm4K0s4lrqc4ZlyK9rjms4+3k0cW8uub49OFn37bTdeYeTd3CsvMN215F9e7S42aMey+DzuCzxAuz+UjfxBk7jmzj7XFN9B23cr32iOipM1FdlL/07TaIoPkth/YIAOORcQDUIeMAqEPGAVCHjAOgDhkHQB0yDoA6ZBwAdU4f+prjniXYb6HryQ6XgrN+o6WBGkNXrJloe1y3zKybKK7r9pF11/lypcZWnZcPlLxTsmAtbeTgYuUR0nV62nna2PeGbqa6cJqiQbfF6Vem5lg4L7do9zZ1Sz+nUkYqJ5jBU0Pv6ezWPe51mXc7E7bJTm+A9rjJvHNSAyixM9vZmnnX9l/YHBBRl61yUdUgXtTDw0N7sobvqoA+tfV2JZPCPSPjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq3G/G0WVIz5O+JM/zej3R2+Tp3t7JlR/+9I9/t9Nrrq53qdzttojoUfY/HlW+Ox5V31y9sn5ZpnvGPPKosWeZladXpm5ElysHbj+/QbZuoejmynPNyKKBHVmPrUe+aM+vLL+lYLq3J1fOS82xaCD/jhO9uh1n/WEXJpwiXlLIRIfacerB7vR1+ev9/G4G/8dSbmH6dfFzHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnD15+PX9uaefQpUKmkEgXGs0FzaqBq1LKOveP+aVnJAp/ndFXZTNzxfQVdZd7+9tx0zu59e2eZEdb4Kcb2KgeXofnlXcaxH/VY5+Xzu3JlQiKwcOccdrpmrjBVfF75AydNfrRiGzuO1xyYcNWbqfOzWw7i/vQ2N7zBmp/WLKz2dauge2uie6ZgaNrjCwGmKNi6uWfnohM09SerOG7KgB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnDz75qp2u0Z99qyvGXLmaibtyNBfv0xNHVA89F1D1j9Hk0tvjTtSrz5XChWGDy86XSrjecWmwPHapsJ26H78E1dFv0Lq7lQuq71JzLBpExlE1x/NNLDbgvDvlFuhHl4FVXzXvwnwSeD8YFyM5tbAM3s47tg9uLrc1bGHL6+6LYOL+zjHz6vBcsJ+gOyejOmX4qGjg+oqi4whN00N7sobvqgC8QeWbNDIOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6DObhnnvJQStSdrZPDZGnpRRg3OO7nCXhTdILE99L4b7fDHv/3YTtccj6rMdY7JIlgdjcHb2ZrDQWXD6DlyahW1xnW3A7upUwtTm8Ddw5l4ZoPY3eUayIXZtcnwNMnB55V1G8xRObUO648itn1Fgwi9evWqPVnDd1UA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1UhnHFCE5rndqcC238N3suuynecmGSlwS+1aK8r+k5LbV7OCnX378ZTvtmD8QtW9u0HcZYRvd+xKMr73D1N7K2tzMwvetV96NvGQ3XE7ZPfF2jL0J56zQb7FEI7x+tH+7lmC3ga1Xbmdrlq3ZbXCJCsvUorspaI6Mo/6/HPTGtdtDN8hEteg7cvB20pMZPOS661fdTjq2z6tu8BvIDeLFNmhnj80P3G8QEd3dj627y/C4qI1HUmpna/g5DoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgzuCMY/53/fb4+ExBga04UBJd8V6xdSntZJPMLarpkZPz2u6HP/z1X+10hSkns1V2R/FZxYcXKhpkPdoNU8sGRzW1nNlPLfrrkYMe3Ep2H2rgFmqP6/y8/QYR2bw/I7C5b4ioaSDLjidZhqcH19Eg4hF4eHiIx/b8yukX5rcczB0sbvElI6nuZnu4vSOndszUKmyW7RrYtdnxhUzfofQdPI6dVzewUdEgArZ7O1uTiQb16xfpqfXk+rcc+DkOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAncPv//LPdrrOFLMdjt0Gh0V7skZHj7IsOIjuZmHzP9sXZl6V795O1um+7XGdW9eeTNFYgh3Y1LPZSrl+fC6F6w8eARG9UN31shftyRpdhqf6LmXWosEkoxFaao67Tj//6It2usbcwiPv8Hljb95Cru/2kS9S3RN93bqzr2srcQvewvV2YRnXa9ND698kiJjurtmLpje27p6MigY2ulvNsVgWurhmj4qbcAP9974kfo4DoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+tlHn7fTd6c+0bdVo9kG24nuemo7rV5YZtm+r576py/3J1P4kqya0d3N0Km5B44dfUX3OdQfeykbbuerXFg1iJCNhvb8yuH7P//QTte4vacaROggPzv92P9FhOCmnrUnV2y0nXXoBr57e1xnurupzdxPk7hBg9wci0R3PbXuHV11d119q0VfMfgc6s8cET21WViM3p/6lt9y6C9t5HdV8r3Yk7he+7vntT1BO17Nu77NpOTKdWd+jgOgDhkHQB0yDoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVDlxYv/A7Ox9ZVdSuKwAAAAAElFTkSuQmCC",alt:"default"}),nDurationMs:Aa}]):i?.length&&g():(s.current=o,2==o.GetStoreItemType()||1==o.GetStoreItemType()?((0,At.w)(o.GetIncludedAppIDs().length>0,"expected included apps "+o.GetID()+" "+o.GetStoreItemType()),d.A.Get().QueueMultipleAppRequests(o.GetIncludedAppIDs(),{include_assets:!0}).then((()=>ka(o.GetIncludedAppIDs(),l,g)))):1==o.GetAppType()&&o.GetParentAppID()&&!o.GetAllTrailers().BHasTrailers()?d.A.Get().QueueAppRequest(o.GetParentAppID(),a.current).then((()=>function(e,t,a,o){const n=[],s=d.A.Get().GetApp(t);s.GetMicroTrailer()&&n.push({rctImage:r.createElement(V,{appInfo:{id:s.GetID(),type:"game"}}),nDurationMs:Da});const i=d.A.Get().GetApp(e).GetOnlyAllAgesSafeScreenshots();i.slice(0,Ba).forEach(((e,t)=>{n.push({rctImage:r.createElement("img",{key:e,className:O().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:Aa})})),Ba-i.length>0&&s.GetOnlyAllAgesSafeScreenshots().slice(0,Ba).forEach(((e,t)=>{n.push({rctImage:r.createElement("img",{key:e,className:O().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:Aa})})),n.length>0?(a(n),o(!0)):"dev"!=S.TS.WEB_UNIVERSE&&"beta"!=S.TS.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: Demo GameHoverImages for id/type no images: (might be not age safe screenshots)",e,t)}(o.GetID(),o.GetParentAppID(),l,g))):ka([o.GetID()],l,g)),()=>h.Cancel())),[i,o,n,h,g,s]),r.createElement("div",{className:O().TrailerCtn},i?.map(((e,a)=>r.createElement("div",{key:"e-"+a+"-"+t.id+"_"+t.type,className:(0,D.A)(O().FullDivImage,a!=c.current&&O().Transparent)},e.rctImage))))}function Pa(e){const{rgTagIDs:t}=e;return r.createElement("div",{className:O().TagRow},r.createElement("div",{className:O().Tags},t.map((e=>r.createElement(Nt,{key:"tag_"+e,tagid:e,className:O().Tag})))))}function La(e){const{appInfo:t,bTruncateTotalReviews:a,bShowTooltip:o}=e,[n]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),{include_reviews:!0});if(!n)return null;const s=se.Get().BShowFilteredUserReviewScores()?n.GetFilteredReviewSummary():n.GetUnfilteredReviewSummary();if(!s||0==s.review_score)return null;let i=O().ReviewScoreNone;i=s.review_score>0&&s.review_score<5?O().ReviewScoreLow:5==s.review_score?O().ReviewScoreMixed:O().ReviewScoreHigh;const l=`${S.TS.STORE_BASE_URL}app/${t.id}/#app_reviews_hash`,c=r.createElement("div",{className:(0,D.A)(O().ReviewScoreValue,i)},r.createElement("div",{className:O().ReviewScoreLabel},s.review_score_label),r.createElement("div",{className:O().ReviewScoreDivider}," | "),r.createElement("div",{className:O().ReviewScoreCount},a?"("+s.review_count.toLocaleString()+")":(0,k.we)("#GameHover_UserReviewCount",s.review_count.toLocaleString())),!a&&r.createElement("div",{className:O().ReviewScoreHeader}," ",(0,k.we)("#GameHover_UserReviewsHeader")));let d="#ReviewScore_PercentPositive";if(2===n.GetStoreItemType())d="#ReviewScore_PercentPositive_bundle";else if(0===n.GetStoreItemType())switch(n.GetAppType()){case 6:d="#ReviewScore_PercentPositive_software";break;case 7:d="#ReviewScore_PercentPositive_video";break;case 10:d="#ReviewScore_PercentPositive_hardware";break;case 8:d="#ReviewScore_PercentPositive_series"}return r.createElement(Gt,{url:l,className:(0,D.A)(O().ReviewScore,"ReviewScore")},o&&null!=s.percent_positive&&null!=s.review_count&&Boolean(d)?r.createElement(v.he,{bTopmost:!0,toolTipContent:(0,k.we)(d,s.percent_positive,s.review_count)},c):c)}const Ga=(0,s.PA)((e=>{const{appID:t,snr:a,classOverride:o}=e,[n]=(0,R.t7)(t,{}),[s,i]=(0,r.useState)((()=>!n||1!=n?.GetAppType()&&12!=n?.GetAppType()?t:n.GetParentAppID()||t)),l=s&&se.Get().BIsGameWishlisted(s),c=s&&se.Get().BOwnsApp(s),[d,m]=(0,r.useState)(!1),p=(0,ya.m)("GameHoverWishlistButton");if((0,r.useEffect)((()=>{1!=n?.GetAppType()&&12!=n?.GetAppType()||i(n.GetParentAppID()||t)}),[t,n]),c)return null;return r.createElement("div",{className:(0,D.A)(O().WishlistButton,o),onClick:async e=>{e.preventDefault(),e.stopPropagation(),S.iA.logged_in?(m(!0),await se.Get().UpdateGameWishlist(s,!l,a),p.token.reason||m(!1)):(0,mt.vg)()}},l?r.createElement(A.qnF,null):r.createElement(A.T4m,null),r.createElement("div",{className:(0,D.A)(O().WishlistButtonText,d&&O().WishlistLoadingText)},(0,k.we)(l?"#Sale_RemoveFromWishlist":"#Sale_AddToWishlist")))})),Na=e=>{const{nCreatorAccountID:t}=e,[a,o]=(0,G.TB)(t),n=(0,Kt.FV)(t);return r.createElement("div",{className:O().GameHoverCreatorFollowButtonCtn},r.createElement("a",{href:n?.GetCreatorHomeURL("developer")},r.createElement("img",{src:a?(0,I.t)(null,"medium"):o.avatar_medium_url})),r.createElement(Ea,{clanAccountID:t}))},Ra=(0,s.PA)((e=>{const{info:t,displayInfo:a,name:o,strStoreUrl:n,elElementToAppend:s,bShowDemoButton:i,bHideBottomHalf:l,bHidePrice:c,bShowDeckCompatibilityDialog:d,bUseSubscriptionLayout:m,nCreatorAccountID:p,bPreventNavigation:u}=e,[h,g]=(0,r.useState)(!1),[_,C]=(0,r.useState)(""),[v]=(0,R.G6)(t.id,(0,N.SW)(t.type),{include_release:!0,include_platforms:!0,include_reviews:!0,include_tag_count:20}),[w]=(0,R.G6)(a.id,(0,N.SW)(a.type),{include_assets:!0}),b=!m&&!i&&!s,f=0==v?.GetStoreItemType();return r.createElement("div",{className:O().BottomShelf,style:{transform:l&&h?_:""},onMouseEnter:()=>g(!0),onFocus:()=>g(!0),onMouseLeave:()=>g(!1),onBlur:()=>g(!1)},r.createElement("a",{href:u?null:n,target:S.TS.IN_CLIENT?void 0:"_blank",className:O().Midline},Boolean(w)&&r.createElement("div",{className:O().CapsuleImageAnchorPoint},r.createElement("div",{className:(0,D.A)(O().CapsuleImageCtn,O().WithCornerShine)},r.createElement("img",{loading:"lazy",src:w?.GetAssets().GetHeaderURL(),alt:v?.GetName()}))),Boolean(!c&&!m)&&r.createElement("div",{className:O().Price},r.createElement(Et,{info:t,onlyOneDiscountPct:!0}))),r.createElement("div",{className:O().BottomShelfOffScreen,ref:e=>C(`translateY( -${e?.clientHeight||0}px )`)},r.createElement("div",{className:O().TextContent},r.createElement("a",{href:u?null:n,target:S.TS.IN_CLIENT?void 0:"_blank"},r.createElement("div",{className:O().GameTitle},v?.GetName()||o)),Boolean(v)&&r.createElement(Pa,{rgTagIDs:v.GetTagIDs()}),Boolean(!d&&v)&&r.createElement(La,{appInfo:t}),Boolean(!d&&b)&&r.createElement("div",{className:O().ReviewsAndRelease},r.createElement(x,{item:t,strClassName:O().PlatformDisplay}),Boolean(v?.GetFormattedSteamReleaseDate())&&r.createElement("div",{className:O().ReleaseDate},v?.GetFormattedSteamReleaseDate())),i&&r.createElement(it,{info:t,className:O().DemoButton}),Boolean(d&&f)&&r.createElement(Ne,{storeItem:v}),Boolean(s)&&s,Boolean(m&&f)&&r.createElement(Rt,{appid:t.id,bIsMuted:!1}),p&&r.createElement(Na,{nCreatorAccountID:p}))))}));(0,s.PA)((e=>{r.useEffect((()=>{se.Get().HintLoad()}),[]);const{info:t,displayInfo:a,strStoreUrl:o,bHideBottomHalf:n,bShowDeckCompatibilityDialog:s,bShowWishlistButton:i=!0}=e;let l;return t.overrideNavigation&&(l=e=>t.overrideNavigation()),r.createElement("div",{className:(0,D.A)(O().GameHoverCapsuleCtn,F().InGameHover,n&&O().UseHidingBottomHalf),onClick:l},r.createElement("a",{href:l?null:o,target:S.TS.IN_CLIENT?void 0:"_blank",className:O().TrailerAnchorStoreLink},Boolean(i&&!s&&!l)&&r.createElement(Ga,{appID:a.id,snr:e.strSNR}),r.createElement(Ta,{info:a})),r.createElement(Ra,{...e,bPreventNavigation:Boolean(l)}))}));function Ma(e){const{type:t,id:a,hoverClassName:o,fnGetIDOverride:n,fnHoverState:s,children:i}=e,l=r.useRef(null),c=r.useCallback((e=>{"clan"!=t&&(s&&s(!0),window.GameHover&&window.GameHover(n?n():l.current,e,"global_hover",{type:t,id:a,v6:1}))}),[t,s,n,a]),d=r.useCallback((e=>{"clan"!=t&&(s&&e.relatedTarget&&s(!1),window.HideGameHover&&window.HideGameHover(n?n():l.current,e,"global_hover"))}),[t,s,n]);return"dev"==S.TS.WEB_UNIVERSE&&(0,At.w)("store"==(0,S.yK)(),"StoreGameHoverAnchorSource only works on Store web properties"),r.createElement("div",{ref:l,className:o,onMouseEnter:c,onMouseLeave:d,onFocus:c,onBlur:d},i)}function Oa(e){const{id:t,type:a,strExtraParams:o}=e,n=(0,pe.n9)(),s="clan"==a?(0,l.wJ)(`${S.TS.STORE_BASE_URL}curator/${t}${o?`?${o}`:""}`,n):(0,l.wJ)(`${S.TS.STORE_BASE_URL}${a}/${t}${o?`?${o}`:""}`,n);return r.createElement(Ma,{...e},r.createElement(f.Ii,{className:e.className,href:s,target:S.TS.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"},e.children))}var Ha=a(16081);const Fa=(0,s.PA)((e=>{const{bIsHovered:t,setIsHovered:a,displayStoreItem:o,baseGameStoreItem:n,displayInfo:s,purchaseInfo:i,artworkInfo:c}=function(e,t){const a=(0,r.useRef)(U().CancelToken.source()),{id:o,type:n}=e,s=t?{...de,...t}:de,i=(0,r.useMemo)((()=>({id:o,type:n})),[o,n]),[l]=(0,R.G6)(i.id,(0,N.SW)(i.type),s),[c,d]=(0,r.useState)({id:o,type:n}),[m]=(0,R.G6)(c?.id,(0,N.SW)(c?.type),s),p=(0,r.useMemo)((()=>m?.GetIncludedAppIDs()?.length>1&&null==m?.GetAssets().GetMainCapsuleURL()&&null==m?.GetAssets().GetHeaderURL()?{id:m.GetIncludedAppIDs()[0],type:"game"}:c),[c,m]),[u]=(0,R.t7)(p?.id,s),h=(0,r.useMemo)((()=>({id:m?.GetParentAppID()!=m?.GetID()?m?.GetParentAppID():void 0,type:"game"})),[m]),[g]=(0,R.t7)(h.id,s),[_]=(0,r.useState)(++ve.instance_count),[S,C]=(0,r.useState)(!1),[v,w]=(0,r.useState)(Se(n)),[b,f]=(0,r.useState)(o);return(0,r.useEffect)((()=>{if(se.Get().HintLoad(),1==l?.GetStoreItemType()&&1==l.GetIncludedAppIDs().length&&(c.id!=l.GetIncludedAppIDs()[0]||"game"!=c.type)&&10!=l.GetAppType()&&!a?.current.token.reason){const e=l.GetIncludedAppIDs()[0];d({id:e,type:"game"}),w("app"),f(e)}}),[c.id,c.type,l]),(0,r.useEffect)((()=>()=>a?.current.cancel("StoreSalePreviewWidget: unmounting")),[]),{myInstance:_,bIsHovered:S,setIsHovered:C,purchaseInfo:i,displayInfo:c,displayStoreItem:m,baseGameStoreItem:g,baseGameInfo:h,hoverType:v,nHoverId:b,artworkInfo:p,artworkStoreItem:u}}(e),{bShowDemoButton:d,bPreferDemoStorePage:m,bHidePrice:p,bUseSubscriptionLayout:u,bHidePlatforms:h,bHideContainedApps:g,bAllowTwoLinesForHeader:_,bShowReviewSummary:C,bShowDeckCompatibilityDialog:v,bAutoFocus:w,fnOnClickOverride:I,bIsMarketingMessage:A}=e,B=(0,pe.n9)(),P=r.useMemo((()=>o?.GetIncludedAppIDsOrSelf()),[o]),L=(0,r.useRef)(null),[G,M]=(0,r.useState)(!1),H=(0,S.Qn)();if((0,r.useEffect)((()=>{L.current&&M(L.current.offsetWidth<370)}),[L]),!o)return null;const W=o.GetBestPurchaseOption().discount_pct,z=o.GetIncludedAppIDs().length;let j=o.GetShortDescription();2!=o.GetStoreItemType()&&1!=o.GetStoreItemType()||(j=W?(0,k.we)("#Sale_BundleSave_WithDiscount",W,z):(0,k.we)("#Sale_BundleSave",z));const X=(0,l.L3)(B),Q=b(o.GetStorePageURL(m)),q=Boolean(!g&&z>0),Z=o.BHasTags()?o.GetTagIDs():n?.BHasTags()?n.GetTagIDs():[],K=0==o.GetStoreItemType(),Y=(0,l.wJ)(Q,B),J=(0,rt.Ae)(),$=H||o.BIsReleased()||o.BIsPrePurchase();return r.createElement(Ce,{appid:K?o.GetAppID():void 0},r.createElement(E.Z,{className:(0,D.A)({[F().StoreSaleWidgetOuterContainer]:!0,[F().AllowTwoLineHeader]:_}),onMouseEnter:()=>!J&&a(!0),onMouseLeave:()=>!J&&a(!1),"flow-children":"grid",navEntryPreferPosition:y.iU.PREFERRED_CHILD,autoFocus:w,navKey:"preview_widget_"+o.GetID()},r.createElement(f.ml,{onClick:A?I:null,className:(0,D.A)(F().StoreSaleWidgetContainer,F().SaleItemDefaultCapsuleDisplay,A?F().MarketingMessage:""),...Bt(o,B,H,m,void 0,I),preferredFocus:q},r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetHalfLeft)},r.createElement("a",{href:I?void 0:Y,target:S.TS.IN_CLIENT||I?void 0:"_blank",onClick:I},r.createElement("div",{className:F().StoreSaleWidgetImage},r.createElement(ce,{appids:P}),r.createElement(Ua,{info:c,imageType:"header"}),r.createElement(Zt,{eDeckCompatibilityCategory:o.GetPlatforms()?.steam_deck_compat_category}),Boolean(s&&t)&&r.createElement(V,{appInfo:s})))),r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetRight,q?F().Bundle:"")},Boolean(K&&!I)&&r.createElement(Ga,{appID:s.id,classOverride:(0,D.A)(O().WishlistButtonNotTop,"WishlistButton"),snr:X}),r.createElement("div",{className:F().TitleCtn},r.createElement("a",{href:I?void 0:Y,target:S.TS.IN_CLIENT?void 0:"_blank",onClick:I},r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetTitle,"StoreSaleWidgetTitle")},o.GetName()))),r.createElement("div",{className:F().StoreSaleWidgetReleaseAndTags},Z&&r.createElement("div",{className:F().StoreSaleWidgetTags},Z.map((e=>r.createElement(Nt,{key:"tag_"+e,tagid:e,className:F().AppTag})))),r.createElement("div",{className:F().WidgetReleaseDateAndPlatformCtn,ref:L},K&&r.createElement("div",{className:F().StoreSaleWidgetRelease},o.GetFormattedSteamReleaseDate()),!h&&r.createElement(r.Fragment,null,r.createElement(x,{item:s,bMinimizePlatforms:G}),Boolean(v&&0==o?.GetStoreItemType()&&o.GetPlatforms())&&r.createElement(T,{className:F().DeckCompatIcon,category:o.GetPlatforms().steam_deck_compat_category}))),C&&r.createElement(La,{appInfo:s})),q&&r.createElement(xa,{info:i}),Boolean(K&&j)&&r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetShortDesc,"StoreSaleWidgetShortDesc")},Boolean(j.startsWith("#")&&-1==j.indexOf(" "))?r.createElement("span",{className:F().LocalizationSpan},(0,k.oW)(j,r.createElement("i",null),r.createElement("i",null),r.createElement("i",null),r.createElement("i",null))):j),Boolean(!I)?r.createElement(r.Fragment,null,Boolean(u&&K)?r.createElement(Rt,{appid:s.id,bIsMuted:t}):r.createElement(bt,{info:i,bShowDemoButton:d,bHidePrice:p,bHideWishlistButton:$,bShowDeckCompatibilityDialog:v})):r.createElement("div",{className:F().StoreActionWidgetContainer},r.createElement("div",{className:F().StoreSalePriceActionWidgetContainer},r.createElement(Et,{info:i}))),r.createElement("div",{className:F().StoreSaleWidgetBgTint},r.createElement(Ua,{info:s,imageType:"header"}))))),Boolean(e.strReason)&&e.strReason.length>0&&r.createElement("div",{className:F().RecommendationReason},e.strReason))})),Va=6;function xa(e){const{info:t}=e,[a]=(0,R.G6)(t.id,(0,N.SW)(t.type),{}),[o,n]=r.useState(null);return r.useEffect((()=>{a&&(1==a.GetStoreItemType()||2==a.GetStoreItemType()?n(a.GetIncludedAppIDs().map((e=>({id:e,type:"game"})))):console.error("ContentsPreviewList unexpected store item type: ",a.GetStoreItemType()))}),[a]),o?r.createElement("div",{className:F().BundleContentPreview},r.createElement("div",{className:F().ContentsCount},(0,k.Yp)("#Sale_ContentPreview",o.length)),r.createElement("div",{className:F().PreviewCtn},o.slice(0,Va).map((e=>r.createElement(Wa,{key:`preview${e.id}_${e.type}`,info:e}))))):null}function Wa(e){const{info:t}=e,[a]=(0,R.mZ)(t.id,(0,N.SW)(t.type),{include_assets:!0}),o=a?.GetAssets().GetSmallCapsuleURL();return r.createElement(Oa,{type:Se(t.type),id:t.id,hoverClassName:F().PreviewItem},r.createElement("img",{src:o,className:F().PreviewImg,loading:"lazy",alt:a?.GetName()}))}function Ua(e){const{info:t,imageType:a}=e,[o]=(0,R.G6)(t.id,(0,N.SW)(t.type),{include_assets:!0});let n;o&&1==o.GetIncludedAppIDs().length&&!function(e,t){const a=e?.GetAssets();if(!a)return!1;switch(t){case"header":return!!a.GetHeaderURL();case"main":return!!a.GetMainCapsuleURL();case"library":return!!a.GetHeroCapsuleURL()||!!a.GetLibraryCapsuleURL();default:return(0,Ha.z)(t,`Unhandled imageType: ${t}`),!1}}(o,a)&&[1,2].includes(o.GetStoreItemType())&&(n=o.GetIncludedAppIDs()[0]);const[s]=(0,R.t7)(n,{include_assets:!0}),i=s?.BIsVisible()?s:o;if(!i)return r.createElement(Pe.t,{size:"small",position:"center",string:(0,k.we)("#Loading")});if("library"===a)return r.createElement(Xt,{info:t});let l,c,d=Qt(i,"header"===a),m="";if("main"===a)l=F().mainCapsuleImgWidth,c=F().mainCapsuleImgHeight,m=F().MainCapsuleImageContainer;else l=F().headerCapsuleImgWidth,c=F().headerCapsuleImgHeight,m=F().HeaderCapsuleImageContainer;return r.createElement("div",{className:(0,D.A)(m,"CapsuleImageCtn")},r.createElement(jt,{lazyLoad:!0,srcs:d,className:(0,D.A)(F().CapsuleImage),width:l,height:c,alt:i.GetName()}))}(0,s.PA)((e=>{const t=k.NT.GetWithFallback(e.link.localized_link_capsule,e.language);return r.createElement(Gt,{url:e.link.url,className:e.strClassName?e.strClassName:void 0,bSkipForcingStoreLink:!0},r.createElement("div",{className:F().CapsuleContainer},Boolean(e.link.localized_link_capsule)&&r.createElement(zt,{className:F().LinkCapsuleImage,src:`${(0,L.mJ)()}${e.clanAccountID}/${t}`}),Boolean(e.link.materialized_link_capsule)&&r.createElement("img",{className:F().LinkCapsuleImage,src:e.link.materialized_link_capsule})))}));var za=a(74454),ja=a(95623);function Xa(e){const{gidEvent:t}=e,a=(0,za.RR)(t),[o,n]=(0,r.useMemo)((()=>{if(a?.jsondata?.localized_sale_product_banner?.length>0&&a?.jsondata?.localized_sale_product_mobile_banner?.length>0){const e=(0,kt.sf)(S.TS.LANGUAGE),t=k.NT.GetWithFallback(a.jsondata.localized_sale_product_banner,e),o=k.NT.GetWithFallback(a.jsondata.localized_sale_product_mobile_banner,e);if(t?.length>0&&o?.length>0){const e=a.clanSteamID.GetAccountID();return[`${(0,L.mJ)()}${e}/${t}`,`${(0,L.mJ)()}${e}/${o}`]}}return[null,null]}),[a]);return o?.length>0&&n?.length>0?r.createElement("a",{href:(0,_.k2)(a.GetSaleURL()),className:ja.Link},r.createElement("img",{src:o,className:(0,D.A)(ja.Banner,ja.Big)}),r.createElement("img",{src:n,className:(0,D.A)(ja.Banner,ja.Mobile)})):null}var Qa,qa=a(73280),Za=a.n(qa),Ka=a(73767);!function(e){e.topleft="topleft",e.top="top",e.topright="topright",e.left="left",e.middle="middle",e.right="right",e.bottomleft="bottomleft",e.bottom="bottom",e.bottomright="bottomright"}(Qa||(Qa={}));let Ya=class extends r.Component{m_rectLinkRegion;m_elLinkRegionBox;m_nLocalOffsetXPct;m_nLocalOffsetYPct;m_fnMouseUp=null;m_fnMouseMove=null;m_listeners=new p.Ji;m_strDescription="";m_aspectRatio=1;componentWillUnmount(){this.m_listeners.Unregister()}constructor(e){super(e),this.state={curLeftPosPct:this.props.xPosPct,curTopPosPct:this.props.yPosPct,curRightPosPct:100-(this.props.widthPct+this.props.xPosPct),curBottomPosPct:100-(this.props.yPosPct+this.props.heightPct),curWidthPct:this.props.widthPct,curHeightPct:this.props.heightPct,EdgeDown:null,text_link_url:this.props.link_url,text_link_description:this.props.link_description,bEditingLink:!1,valid_link:this.validateUrl(this.props.link_url)},this.m_strDescription=this.props.link_description,this.m_aspectRatio=this.props.heightPct>0&&this.props.widthPct>0?this.props.widthPct/this.props.heightPct:1}LinkRegionBoxRef(e){this.m_elLinkRegionBox=e}OnMouseDown(e,t){this.m_fnMouseUp=e=>{this.OnMouseUp(e,t)},this.m_fnMouseMove=e=>{this.OnMouseMove(e,t)},this.setState({EdgeDown:t}),this.m_rectLinkRegion=this.m_elLinkRegionBox.parentElement.getBoundingClientRect(),this.m_nLocalOffsetXPct=(e.clientX-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.state.curLeftPosPct,this.m_nLocalOffsetYPct=(e.clientY-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.state.curTopPosPct,this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mousemove",this.m_fnMouseMove),this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mouseup",this.m_fnMouseUp),e.preventDefault(),e.stopPropagation()}OnMouseMove(e,t){if(void 0!==this.state.EdgeDown){switch(e.shiftKey&&this.m_fnMouseUp(),t){case Qa.left:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case Qa.right:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX)});break;case Qa.top:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY)});break;case Qa.bottom:this.UpdateState({curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Qa.topleft:this.UpdateState({curTopPosPct:this.CalcBottomEdge(e.clientY),curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case Qa.topright:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.CalcRightEdge(e.clientX)});break;case Qa.bottomleft:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Qa.bottomright:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Qa.middle:{const t=(0,Ka.OQ)(this.CalcLeftEdge(e.clientX),0,100-this.state.curWidthPct),a=100-(t+this.state.curWidthPct),o=(0,Ka.OQ)(this.CalcTopEdge(e.clientY),0,100-this.state.curHeightPct),n={curLeftPosPct:t,curRightPosPct:a,curTopPosPct:o,curBottomPosPct:100-(o+this.state.curHeightPct)};this.setState(n);break}}e.preventDefault(),e.stopPropagation()}}IsValidPct(e){return e>=0&&e<=100}UpdateState(e){let t=void 0!==e.curTopPosPct?e.curTopPosPct:this.state.curTopPosPct,a=void 0!==e.curBottomPosPct?e.curBottomPosPct:this.state.curBottomPosPct,o=void 0!==e.curLeftPosPct?e.curLeftPosPct:this.state.curLeftPosPct,n=void 0!==e.curRightPosPct?e.curRightPosPct:this.state.curRightPosPct,s=(0,Ka.OQ)(100-n-o,this.props.widthMinPct||0,this.props.widthMaxPct||100),r=(0,Ka.OQ)(100-a-t,this.props.heightMinPct||0,this.props.heightMaxPct||100);this.props.bLockAspectRatio&&(void 0!==e.curLeftPosPct||void 0!==e.curRightPosPct?r=s/this.m_aspectRatio:s=r*this.m_aspectRatio),void 0!==e.curLeftPosPct?o=100-n-s:n=100-(o+s),void 0!==e.curTopPosPct?t=100-a-r:a=100-(t+r);const i=100-n-o,l=100-a-t;this.IsValidPct(o)&&this.IsValidPct(n)&&this.IsValidPct(t)&&this.IsValidPct(a)&&this.IsValidPct(i)&&this.IsValidPct(l)&&this.setState({curLeftPosPct:o,curRightPosPct:n,curTopPosPct:t,curBottomPosPct:a})}GetXPercent(e){return(e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.m_nLocalOffsetXPct}GetYPercent(e){return(e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.m_nLocalOffsetYPct}CalcLeftEdge(e){return(0,Ka.OQ)(this.GetXPercent(e),0,100)}CalcRightEdge(e){return(0,Ka.OQ)(100-(this.GetXPercent(e)+this.state.curWidthPct),0,100)}CalcTopEdge(e){return(0,Ka.OQ)(this.GetYPercent(e),0,100)}CalcBottomEdge(e){return(0,Ka.OQ)(100-(this.GetYPercent(e)+this.state.curHeightPct),0,100)}OnMouseUp(e,t){this.setState({curWidthPct:100-this.state.curRightPosPct-this.state.curLeftPosPct}),this.setState({curHeightPct:100-this.state.curBottomPosPct-this.state.curTopPosPct}),this.setState({EdgeDown:void 0}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description}),this.m_listeners.Unregister()}async HandleDelete(){this.props.deleteFn&&this.props.deleteFn(this.props.index)}OnSetLinkURLChange(e){this.setState({text_link_url:e.target.value,valid_link:this.validateUrl(e.target.value)})}OnSetLinkDescriptionChange(e){this.setState({text_link_description:e.target.value})}validateUrl(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)}OnSaveLink(){this.m_strDescription=this.state.text_link_description,this.setState({bEditingLink:!this.state.bEditingLink}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description})}OnEditLink(){this.setState({bEditingLink:!this.state.bEditingLink})}render(){let e={left:this.state.curLeftPosPct+"%",top:this.state.curTopPosPct+"%",right:this.state.curRightPosPct+"%",bottom:this.state.curBottomPosPct+"%"},t=Za().LinkRegionDragBox;return null!==this.state.EdgeDown&&(t+=` ${Za().EdgeDown} `+Za()[this.state.EdgeDown]),r.createElement("div",{className:t,style:e,ref:this.LinkRegionBoxRef,draggable:!1},r.createElement("div",{className:Za().LinkRegionGridBox},r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().TopLeft}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.topleft)},draggable:!1}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().Top}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.top)}}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().TopRight}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.topright)},draggable:!1}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().Left}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.left)},draggable:!1}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().Middle}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.middle)},draggable:!1},this.props.deleteFn&&r.createElement("div",{className:Za().LinkRegionDelete,onClick:this.HandleDelete},r.createElement(A.sED,null)),!this.props.bDisableLink&&r.createElement("div",{className:Za().LinkRegionSettings,onClick:this.OnEditLink},r.createElement(A.xv8,null)),r.createElement("div",{className:Za().LinkText}," ",this.m_strDescription," ")),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().Right}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.right)},draggable:!1}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().BottomLeft}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.bottomleft)},draggable:!1}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().Bottom}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.bottom)},draggable:!1}),r.createElement("div",{className:`${Za().LinkRegionEdge} ${Za().BottomRight}`,onMouseDown:e=>{this.OnMouseDown(e,Qa.bottomright)},draggable:!1})),this.state.bEditingLink&&r.createElement("div",{className:Za().LinkRegionInfo},r.createElement(be.pd,{className:Za().LinkRegionInput,type:"text",name:"link_url",value:this.state.text_link_url,label:(0,k.we)("#SteamTV_LinkURL"),placeholder:"https://www.example.com",onChange:this.OnSetLinkURLChange,mustBeURL:!0}),r.createElement(be.pd,{className:Za().LinkRegionInput,type:"text",name:"link_description",value:this.state.text_link_description,label:(0,k.we)("#SteamTV_LinkDescription"),placeholder:(0,k.we)("#SteamTV_LinkDescription_Placeholder"),onChange:this.OnSetLinkDescriptionChange}),r.createElement("div",{className:Za().LinkRegionButtonContainer},r.createElement(be.$n,{disabled:!this.state.valid_link,onClick:this.OnSaveLink}," ",(0,k.we)("#Button_OK")," "),r.createElement(be.$n,{onClick:this.OnEditLink}," ",(0,k.we)("#Button_Cancel")))))}};(0,o.Cg)([m.oI],Ya.prototype,"LinkRegionBoxRef",null),(0,o.Cg)([m.oI],Ya.prototype,"OnMouseDown",null),(0,o.Cg)([m.oI],Ya.prototype,"OnMouseMove",null),(0,o.Cg)([m.oI],Ya.prototype,"OnMouseUp",null),(0,o.Cg)([m.oI],Ya.prototype,"HandleDelete",null),(0,o.Cg)([m.oI],Ya.prototype,"OnSetLinkURLChange",null),(0,o.Cg)([m.oI],Ya.prototype,"OnSetLinkDescriptionChange",null),(0,o.Cg)([m.oI],Ya.prototype,"OnSaveLink",null),(0,o.Cg)([m.oI],Ya.prototype,"OnEditLink",null),Ya=(0,o.Cg)([s.PA],Ya);var Ja=a(2899),$a=a(57883),eo=a(672),to=a(32654),ao=a.n(to);function oo(){return r.createElement("div",{className:"STV_ReplayBanner"},(0,k.we)("#DASHPlayerControls_IsReplay"))}const no=(0,s.PA)((e=>{let t=e.video;if(t&&(t.IsBroadcastClip()||t.IsBroadcastVOD()))return null;let a=c.fK.Loading,o="";if(t){a=t.GetBroadcastState(),o=t.GetBroadcastStateDescription();let e=t.IsBuffering();a==c.fK.Unlocking&&(a=c.fK.Loading,o=""),a==c.fK.Ready&&e&&(a=c.fK.Loading,o="")}if(t&&a!=c.fK.Error&&t.GetUserInputNeeded())return null;if(a==c.fK.Ready)return null;let n=a==c.fK.Loading;return r.createElement("div",{className:"BroadcastVideoWatchState",style:{filter:"hue-rotate(40deg)"}},n&&r.createElement(Pe.t,null),!n&&r.createElement("div",{className:"BroadcastVideoWatchState_Text"},o))}));class so extends r.Component{OnClick(){c.BroadcastWatchStore.UserInputClickVideo(this.props.video)}render(){return r.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},r.createElement(A.jGG,null),r.createElement("span",null,(0,k.we)("#DASHPlayerControls_ClickToPlay")))}}(0,o.Cg)([m.oI],so.prototype,"OnClick",null);let ro=class extends r.Component{constructor(e){super(e)}HideStats(){this.props.closeStats&&this.props.closeStats()}render(){let e=this.props.stats;return r.createElement("div",{className:"dash_video_stats"},r.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},r.createElement(A.sED,null)),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BufferingResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_PlaybackResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_HtmlResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_ContentServer")," ",r.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_StallEvents")," ",r.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_FailedDownloads")," ",r.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_TimeToFirstFrame")," ",r.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_PlaybackRate")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),r.createElement(io,{stats:e}))}};(0,o.Cg)([m.oI],ro.prototype,"HideStats",null),ro=(0,o.Cg)([s.PA],ro);let io=class extends r.Component{constructor(e){super(e)}createBufferedRange(e){let t=this.props.stats,a=[],o=e?"vidbuf":"audbuf",n=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(n>0)for(let s=0;s<n;++s){let n=(0,k.we)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",s),i=e?t.GetBufferedVideoSegmentForDisplay(s):t.GetBufferedAudioSegmentForDisplay(s);a.push(r.createElement("div",{key:o+s},n," ",r.createElement("span",{className:"videoStatsValue"},i)))}else{let t=(0,k.we)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");a.push(r.createElement("div",{key:o+"none"},t))}return a}render(){let e=this.props.stats;return r.createElement("div",{className:"dash_video_quick_stats"},r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BytesReceived")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&r.createElement("div",null,(0,k.we)("#DASHPlayerStats_DroppedFrames")," ",r.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_VideoBuffered")," ",r.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_AudioBuffered")," ",r.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BandwidthRequired")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BandwidthVideo")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BandwidthNums")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_DownloadNums")," ",r.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_ActiveDownloads")," ",r.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_VideoDownloadProgress")," ",r.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_DroppingFrames")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_CurrentFPS")," ",r.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))}};io=(0,o.Cg)([s.PA],io);var lo=a(41368);class co extends r.Component{m_elSettingsButton;m_SettingsButtonPos;m_elClickListener;m_elSettingsPanel;m_elSubtitlesButton=r.createRef();m_elSubtitlesPanel=r.createRef();m_SubtitlesButtonPos;constructor(e){super(e),this.state={bSettingsOpen:!1,bSubtitlesOpen:!1}}OnVideoControlClick(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnSubtitlesClick(e){this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen}),this.m_SubtitlesButtonPos=[this.m_elSubtitlesButton.current.offsetLeft,this.m_elSubtitlesButton.current.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnMouseUp(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),(0,te.id)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1}),(0,te.id)(this.m_elSubtitlesPanel.current,e.target)||this.setState({bSubtitlesOpen:!1})}bindSettingsButton(e){this.m_elSettingsButton=e}BindSettingsPanel(e){this.m_elSettingsPanel=e}OnShowStats(e){this.props.onShowStats(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})}render(){let e=!1,t=!1;const{video:a,actions:o}=this.props;let n,s,i=0,l=r.createElement("div",{key:"separator",className:"settingsMenuSeparator"});if(this.state.bSettingsOpen&&(e=!0,n=this.props.video.GetVideoRepresentations(),s=n.map((e=>r.createElement(lo.n,{key:e.id,onClick:()=>{this.props.video.SetVideoRepresentation(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})},bChecked:e.selected},e.displayName))),s.push(l),s.push(r.createElement(lo.D,{key:"statsToggle",onClick:this.OnShowStats},(0,k.we)("#Broadcast_VideoContext_ToggleStats"),"\t")),i=0-(21*s.length+32)),this.state.bSubtitlesOpen){t=!0,s=[],s.push(r.createElement(lo.n,{key:"none",onClick:()=>{this.props.video.SetSubtitles(null),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},className:"NoSubtitles",bChecked:!1},(0,k.we)("#Broadcast_None")));for(let e=0;e<this.props.video.ListSubtitles().length;e++){const t=this.props.video.ListSubtitles()[e];s.push(r.createElement(lo.n,{key:t.language,onClick:()=>{this.props.video.SetSubtitles(t.language),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},bChecked:"showing"===t.mode},t.label))}i=-292}const c=this.props.video.BHasPlayer()&&this.props.video.BHasTimedText();return r.createElement("div",{className:"STV_BroadcastSettings"},c&&r.createElement("div",{className:"videoControlButton"+(c?" ClosedCaptionsActive":""),onClick:this.OnSubtitlesClick,ref:this.m_elSubtitlesButton},r.createElement(A.N8C,null)),r.createElement("div",{className:"videoControlButton VideoSettings "+(e?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},r.createElement(A.wB_,null)),r.createElement(mo,{video:a}),o&&o.map((e=>r.createElement("div",{key:e.key,className:"videoControlButton videoControlFitWidth"},e))),e&&r.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:i}},r.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},s)),t&&r.createElement("div",{ref:this.m_elSubtitlesPanel,className:"STV_BroadcastSettingsPanel SubtitlesMenu",style:{maxHeight:"260px",left:this.m_SubtitlesButtonPos[0],top:this.m_SubtitlesButtonPos[1],marginTop:i}},r.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},s)))}}(0,o.Cg)([m.oI],co.prototype,"OnVideoControlClick",null),(0,o.Cg)([m.oI],co.prototype,"OnSubtitlesClick",null),(0,o.Cg)([m.oI],co.prototype,"OnMouseUp",null),(0,o.Cg)([m.oI],co.prototype,"bindSettingsButton",null),(0,o.Cg)([m.oI],co.prototype,"BindSettingsPanel",null),(0,o.Cg)([m.oI],co.prototype,"OnShowStats",null);let mo=class extends r.Component{constructor(e){super(e),(0,n.Gn)(this)}k_nHideSliderTimeout=1500;m_bShowSlider=true;m_schHideSlider=new p.LU;m_bChildDragging=!1;m_bMouseOver=!1;componentWillUnmount(){this.m_schHideSlider.Cancel()}ToggleMute(){let e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)}OnMouseEnter(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()}OnMouseLeave(e){this.m_bMouseOver=!1,this.ScheduleHide()}OnChildDrag(e){this.m_bChildDragging=e,this.ScheduleHide()}ScheduleHide(){this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,(()=>this.m_bShowSlider=true))}render(){let e=this.props.video,t=e.IsMuted(),a=100*e.GetVolume(),o="videoControlButton";a>65?o+=" HighestVolume":a>45?o+=" HighVolume":a<46&&a>24?o+=" MedVolume":a<25&&(o+=" LowVolume");let n="BroadcastVolumeControl";return this.m_bShowSlider&&(n+=" ShowVolumeSlider"),t&&(n+=" muted"),r.createElement("div",{className:n,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},r.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},r.createElement("div",{className:o,onClick:this.ToggleMute},r.createElement(A.fSs,null)),r.createElement(po,{video:e,onDrag:this.OnChildDrag})))}};(0,o.Cg)([n.sH],mo.prototype,"m_bShowSlider",void 0),(0,o.Cg)([m.oI],mo.prototype,"ToggleMute",null),(0,o.Cg)([m.oI],mo.prototype,"OnMouseEnter",null),(0,o.Cg)([m.oI],mo.prototype,"OnMouseLeave",null),(0,o.Cg)([m.oI],mo.prototype,"OnChildDrag",null),mo=(0,o.Cg)([s.PA],mo);let po=class extends r.Component{constructor(e){super(e),(0,n.Gn)(this)}m_elSlider=null;m_nVolumeStartOfDrag=0;OnMouseDown(e){let t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)}OnMouseMove(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)}OnMouseUp(e){if(!this.m_elSlider)return;this.SetVolumeWithCoord(this.m_elSlider,e.clientX);let t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}SetVolumeWithCoord(e,t){let a=e.getBoundingClientRect(),o=Ka.Fu(t,a.left,a.right,0,1),n=Ka.OQ(o,0,1),s=this.props.video;s.SetMute(o<.01),s.SetVolume(n)}render(){let e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);let a={left:`${t}%`},o={width:`${t}%`};return r.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},r.createElement("div",{className:"BroadcastVolumeSlider_Track"}),r.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:o}),r.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:a}))}};(0,o.Cg)([m.oI],po.prototype,"OnMouseDown",null),(0,o.Cg)([m.oI],po.prototype,"OnMouseMove",null),(0,o.Cg)([m.oI],po.prototype,"OnMouseUp",null),(0,o.Cg)([n.XI],po.prototype,"SetVolumeWithCoord",null),po=(0,o.Cg)([s.PA],po);const uo=15;let ho=class extends r.Component{m_schHideControls=new p.LU;m_schUnmountControls=new p.LU;m_elVideo=null;m_elBroadcastPlayer=null;m_bMouseDown=!1;m_elMouseDown=null;m_listeners=new p.Ji;constructor(e){super(e),this.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1}}StopVideo(){let e=this.state.video;e&&(c.BroadcastWatchStore.StopVideo(e),this.setState({video:null}),this.props.fnSetBroadcastVideo?.(null))}IsMuted(){let e=this.state.video;return!e||e.IsMuted()}StopPlaybackTillUserInput(){let e=this.state.video;e&&e.StopPlaybackTillUserInput()}componentDidUpdate(e,t){!t.bMountControls&&this.state.bMountControls?setTimeout((()=>{this.setState((e=>({bControlsVisible:e.bMountControls})))}),15):t.bControlsVisible&&!this.state.bControlsVisible&&this.state.video&&!this.state.video.IsPaused()&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls),this.props.steamIDBroadcast!==e.steamIDBroadcast&&this.BindVideoRef(this.m_elVideo),!this.props.nAppIDVOD||void 0!==t.strInitialCapsuleImageUrl&&e.nAppIDVOD==this.props.nAppIDVOD||d.A.Get().QueueAppRequest(this.props.nAppIDVOD,{include_assets:!0,include_trailers:!0}).then((()=>{const e=d.A.Get().GetApp(this.props.nAppIDVOD),t=e?.GetAssets().GetMainCapsuleURL()||"";this.setState({strInitialCapsuleImageUrl:t})}))}componentWillUnmount(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()}BindBroadcastPlayerRef(e){this.m_listeners.Unregister(),this.m_elBroadcastPlayer=e,e&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))}BindVideoRef(e){let t;this.StopVideo(),this.props.steamIDBroadcast?e&&(t=c.BroadcastWatchStore.CreateBroadcastVideo(e,this.props.steamIDBroadcast,this.props.watchLocation,this.props.bWebRTC)):this.props.broadcastClipID?e&&(t=c.BroadcastWatchStore.CreateClipVideo(e,this.props.broadcastClipID,this.props.watchLocation)):this.props.nAppIDVOD&&e&&(t=c.BroadcastWatchStore.CreateVODVideo(e,this.props.nAppIDVOD,this.props.watchLocation),this.props.fnOnVideoEnd&&t.SetOnVideoCallback(this.props.fnOnVideoEnd)),t&&(this.props.bStartMuted&&t.SetMute(!0),this.props.bStartWithSubtitles&&t.SetStartWithSubtitles(!0),this.props.bStartPaused?t.StopPlaybackTillUserInput():t.Play()),this.setState({video:t}),this.props.fnSetBroadcastVideo?.(t),this.m_elVideo=e}OnMouseDown(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}OnMouseUp(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseMove(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseLeave(e){this.HideControls()}HideControls(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1})}UmountControls(){this.setState((e=>{if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}}))}ShowStatsView(){let e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))}OnContextMenu(e){this.state.bFullscreen||((0,i.lX)(r.createElement(h.tz,null,this.GetContextMenuItems()),e),e.preventDefault())}ToggleStatsView(e){let t=!this.state.bShowStats;this.setState({bShowStats:t});let a=this.state.video;a&&a.SetStatsViewIsVisible(t)}ShowStorePage(e){let t=this.state.video;if(!t||!this.props.onOpenLinkInNewWindow)return;let a=t.GetBroadcastInfo();if(!a)return;let o=(0,l.k2)(`${S.TS.STORE_BASE_URL}app/${a.m_strAppId}`);this.props.onOpenLinkInNewWindow(e,o),e.stopPropagation()}GetContextMenuItems(){let e=[],t=this.state.video;if(!t)return e;let a=t.GetBroadcastInfo();return e.push(r.createElement(h.IK,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:e=>{this.ToggleStatsView(e)}},(0,k.we)("#Broadcast_VideoContext_ToggleStats"))),a&&"0"!=a.m_strAppId&&Number.parseInt(a.m_strAppId)!=c.fO&&e.push(r.createElement(h.kt,{key:"visitstore",onSelected:e=>{this.ShowStorePage(e)}},(0,k.we)("#Broadcast_VideoContext_OpenStore"))),e}CloseStats(){let e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))}OnToggleFullscreen(){this.m_elBroadcastPlayer&&((0,te.ww)(this.m_elBroadcastPlayer)?(0,te.MS)(this.m_elBroadcastPlayer):(0,te.tl)(this.m_elBroadcastPlayer,this.m_elVideo))}OnFullscreenChange(e){if(!this.m_elBroadcastPlayer)return;let t=(0,te.ww)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}BHideVideoControls(){let e=this.state.video;return!e||(!!e.GetUserInputNeeded()||c.BroadcastWatchStore.GetBroadcastState(e)==c.fK.Error)}render(){const e=this.state.video,t=e&&e.IsPaused(),a=e&&e.BHasDASHStats()&&this.state.bShowStats,o=Boolean(e&&e.IsReplay()),n=this.state.bMountControls,s=this.state.bControlsVisible||t,i=e&&e.GetUserInputNeeded(),l=e?.IsBroadcastVOD()&&i&&this.state.strInitialCapsuleImageUrl;let c="videoContainer";s||(c+=" HidePlayerControls"),t&&(c+=" VideoPaused"),this.state.bFullscreen&&(c+=" fullscreenVideo"),this.props.classes&&(c+=" "+this.props.classes);let d=[];!this.state.bFullscreen&&this.props.actions&&(d=d.concat(this.props.actions)),!this.state.bFullscreen&&this.props.onTheaterMode&&d.push(r.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:(0,k.we)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),d.push(r.createElement("div",{key:"FullscreenToggle",title:(0,k.we)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));const m=n&&!this.BHideVideoControls(),p=n&&!this.state.bFullscreen,h=this.props.fnRenderBroadcastContext&&this.props.fnRenderBroadcastContext();return r.createElement("div",{ref:this.BindBroadcastPlayerRef,className:c,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},h&&r.createElement("div",{className:ao().BroadcastContext},h),o&&r.createElement(oo,null),this.props.showVideoBackgroundBlur&&r.createElement(u,{className:"videoBlur",elementRef:this.m_elVideo,updateRate:33,width:320,height:180,reductionFactor:10,blurAmount:5}),r.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:this.props.bMuted??!0,autoPlay:!0,playsInline:!0,controls:!1,onVolumeChange:this.props.fnVolumeChanged,onClick:this.props.fnVideoClick}),this.props.linkRegions?r.createElement(Bo,{linkRegions:this.props.linkRegions,editMode:this.props.editMode,onSaveLinkRegions:this.props.onSaveLinkRegions}):null,this.props.linkElement,l&&r.createElement("img",{loading:"lazy",className:(0,D.A)(ao().BroadcastPlaceholderImg,"BroadcastPlaceholderImg"),src:this.state.strInitialCapsuleImageUrl}),m&&r.createElement(_o,{video:e,actions:d,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow,onShowStats:this.ToggleStatsView,bIncludeClipEditor:this.props.bIncludeClipEditor}),p&&r.createElement(So,{onClick:this.props.onRequestClose}),a&&r.createElement(ro,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),r.createElement(no,{video:e}),i&&r.createElement(so,{video:e}))}};(0,o.Cg)([m.oI],ho.prototype,"BindBroadcastPlayerRef",null),(0,o.Cg)([m.oI],ho.prototype,"BindVideoRef",null),(0,o.Cg)([m.oI],ho.prototype,"OnMouseDown",null),(0,o.Cg)([m.oI],ho.prototype,"OnMouseUp",null),(0,o.Cg)([m.oI],ho.prototype,"OnMouseMove",null),(0,o.Cg)([m.oI],ho.prototype,"OnMouseLeave",null),(0,o.Cg)([m.oI],ho.prototype,"HideControls",null),(0,o.Cg)([m.oI],ho.prototype,"UmountControls",null),(0,o.Cg)([m.oI],ho.prototype,"ShowStatsView",null),(0,o.Cg)([m.oI],ho.prototype,"OnContextMenu",null),(0,o.Cg)([m.oI],ho.prototype,"ToggleStatsView",null),(0,o.Cg)([m.oI],ho.prototype,"ShowStorePage",null),(0,o.Cg)([m.oI],ho.prototype,"CloseStats",null),(0,o.Cg)([m.oI],ho.prototype,"OnToggleFullscreen",null),(0,o.Cg)([m.oI],ho.prototype,"OnFullscreenChange",null),ho=(0,o.Cg)([s.PA],ho);const go=ho;let _o=class extends r.Component{render(){const{video:e}=this.props;if(!e)return null;let t=e.has_segments;return r.createElement("div",{className:"videoControls"},r.createElement(Do,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0,bVerticalBroadcastChat:!0,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow}),r.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},r.createElement(Io,{video:e,bIncludeClipEditor:this.props.bIncludeClipEditor}),r.createElement("div",{className:"STV_BroadcastController"},r.createElement("div",{className:"videoControlsButtons LeftSpacer"}),r.createElement(Co,{video:e}),r.createElement(vo,{video:e}),r.createElement(co,{video:e,actions:this.props.actions,onShowStats:this.props.onShowStats}))))}};_o=(0,o.Cg)([s.PA],_o);class So extends r.PureComponent{render(){return this.props.onClick?r.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},r.createElement(A.sED,null)):null}}class Co extends r.Component{OnJumpBackward(){this.props.video.JumpTime(-15)}OnJumpForward(){this.props.video.JumpTime(uo)}render(){let e=this.props.video,t=e.CanSeek();return r.createElement("div",{className:"videoControlsButtons PlayControls"},r.createElement(bo,{video:e}),t&&r.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},r.createElement(A.tID,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),r.createElement("div",{className:"jumpAheadValue"},uo)),r.createElement(wo,{video:e}),t&&r.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},r.createElement(A.tID,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),r.createElement("div",{className:"jumpAheadValue"},uo)),t&&r.createElement(fo,{video:e}))}}(0,o.Cg)([m.oI],Co.prototype,"OnJumpBackward",null),(0,o.Cg)([m.oI],Co.prototype,"OnJumpForward",null);const vo=(0,s.PA)((e=>{if(e.video.IsBroadcastClip()||e.video.IsBroadcastVOD())return null;let t=e.video.IsOnLiveEdge();return r.createElement("div",{className:"videoControlsButtons GoLive"},r.createElement("div",{className:"videoControlButton videoControlGoLive"+(t?" isLiveEdge":""),onClick:t?null:t=>{e.video.JumpToLiveEdge()}},r.createElement(A.tID,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),r.createElement("div",{className:"jumpGoLive"},(0,k.we)(t?"#DASHPlayerControls_IsLive":"#DASHPlayerControls_GoLive"))))}));let wo=class extends r.Component{OnTogglePlayPause(){this.props.video.TogglePlayPause()}render(){let e=this.props.video.IsPaused();return r.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},e?r.createElement(A.jGG,null):r.createElement(A.vRz,null))}};(0,o.Cg)([m.oI],wo.prototype,"OnTogglePlayPause",null),wo=(0,o.Cg)([s.PA],wo);let bo=class extends r.Component{constructor(e){super(e),(0,n.Gn)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}video=void 0;get has_previous_marker(){return void 0!==this.GetPreviousMarkerTime()}GetPreviousMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=e.length-1;a>=0;a--)if(!(e[a].nTime>=t))return e[a].nTime}OnJumpToPreviousMarkerClicked(e){let t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)}render(){let e=this.props.video.BHasMarkersOrSegments();return r.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},r.createElement(A.tID,{bHidePostArrow:!0,bFlipHorizontal:!0}))}};(0,o.Cg)([n.sH],bo.prototype,"video",void 0),(0,o.Cg)([n.EW],bo.prototype,"has_previous_marker",null),(0,o.Cg)([m.oI],bo.prototype,"OnJumpToPreviousMarkerClicked",null),bo=(0,o.Cg)([s.PA],bo);let fo=class extends r.Component{constructor(e){super(e),(0,n.Gn)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}video=void 0;get has_next_marker(){return void 0!==this.GetNextMarkerTime()}GetNextMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=0;a<e.length;a++)if(!(e[a].nTime<=t))return e[a].nTime}OnJumpToNextMarkerClicked(e){let t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)}render(){let e=this.props.video.BHasMarkersOrSegments();return r.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},r.createElement(A.tID,{bHidePostArrow:!0,bFlipHorizontal:!1}))}};(0,o.Cg)([n.sH],fo.prototype,"video",void 0),(0,o.Cg)([n.EW],fo.prototype,"has_next_marker",null),(0,o.Cg)([m.oI],fo.prototype,"OnJumpToNextMarkerClicked",null),fo=(0,o.Cg)([s.PA],fo);const Eo=e=>r.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:()=>e.onMouseEnter(e.pos),onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown?e.onMouseDown:void 0},r.createElement("div",{className:"timelineMarkerIcon"},r.createElement(A.Dp6,null)));function yo(e){let t=e.startPos,a=e.endPos,o="",n=1;return t<0&&(n=(a-t)/10,t=0,o=" hideFront"),r.createElement("div",{className:"STV_timelineSegment"+o,style:{left:t+"%",width:a-t+"%",opacity:n},onClick:e.onClick},r.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),r.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),r.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}let Io=class extends r.Component{m_elSlider=r.createRef();m_rectSlider=void 0;constructor(e){super(e),this.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0,hoverX:0,bStartMouseDown:!1,bEndMouseDown:!1,thumbnailURL:""}}OnMouseDown(e,t){if(this.m_elSlider){e.persist(),this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();let a={};"start"===t?(a={bStartMouseDown:!0},e.stopPropagation()):"end"===t?(a={bEndMouseDown:!0},e.stopPropagation()):a={bGrabberMouseDown:!0},this.setState(a,(()=>this.AdjustSliderForClientX(e.clientX))),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}}OnMouseMove(e){this.AdjustSliderForClientX(e.clientX)}OnMouseUp(e){this.state.bStartMouseDown?this.setState({bStartMouseDown:!1}):this.state.bEndMouseDown?this.setState({bEndMouseDown:!1}):(this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nGrabberMouseDownTime:0})),this.m_elSlider.current&&(this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp))}OnKeyDown(e){37==e.keyCode?(this.props.video.JumpTime(-15),e.preventDefault()):39==e.keyCode&&(this.props.video.JumpTime(15),e.preventDefault())}AdjustSliderForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration(),n=t.GetTimeAtMousePosition(e,this.m_rectSlider,a,o);if(this.state.bStartMouseDown){const e=Ka.OQ(n,a,t.m_editorEndTime-5);t.m_editorStartTime=e}else if(this.state.bEndMouseDown){const e=Ka.OQ(n,t.m_editorStartTime+5,o);t.m_editorEndTime=e}else n!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:n})}OnMouseHoverMove(e){this.AdjustHoverForClientX(e.clientX)}OnMouseHoverLeave(e){this.setState({hoverX:0})}AdjustHoverForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration();this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();t.GetTimeAtMousePosition(e,this.m_rectSlider,a,o)}OnSegmentClick(e){this.props.video.Seek(e)}OnMarkerMouseEnter(e){this.setState({nHoverValue:e})}OnMarkerMouseLeave(){this.setState({nHoverValue:void 0})}render(){let e=this.props.video,t=this.state.bGrabberMouseDown,a=e.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,c.a0.Timeline),o=e.GetPercentOffsetFromTime(e.GetPlaybackTime(),c.a0.Timeline),n=e.GetPercentOffsetFromTime(e.GetVideoAvailableStartTime(),c.a0.Timeline);n<.05&&(n=0);let s=Ka.OQ(a,0,100).toFixed(1)+"%",i=Ka.OQ(o,0,100).toFixed(1)+"%",l=Ka.OQ(n,0,100).toFixed(1)+"%",d={},m={},p={},u={};t?(u.left=s,d.width=s,m.width=i,p.width=l):(u.left=i,m.width=i,p.width=l);let h=(0,eo.ap)(e.GetPlaybackTime()),g=(0,eo.ap)(this.state.nHoverValue),_="STV_timelineContainer";this.state.bGrabberMouseDown&&(_+=" grabberDown"),e.IsTimelineMapActive()&&(_+=" minimapActive");let S="";a=t?a:o,a>100?S=" grabberOffScreenRight grabberOffscreen":a<0&&(S=" grabberOffScreenLeft grabberOffscreen");let C=[];e.GetTimelineMarkers().forEach(((t,a)=>{let o=e.GetPercentOffsetFromTime(t.nTime,c.a0.Timeline);o<0||o>100||C.push(r.createElement(Eo,{key:a,pos:o,label:t.strTemplateName,onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave}))}));let v=[];e.GetTimelineSegments().forEach(((t,a)=>{let o=e.GetPercentOffsetFromTime(t.nTimeStart,c.a0.Timeline);if(o>100)return;let n=e.GetPercentOffsetFromTime(t.nTimeEnd,c.a0.Timeline);n<0||v.push(r.createElement(yo,{key:a,startPos:o,endPos:n,label:t.strTemplateName,color:t.color,onClick:e=>this.OnSegmentClick(t.nTimeStart)}))}));const w=e.GetPercentOffsetFromTime(e.m_editorStartTime,c.a0.Timeline),b=e.GetPercentOffsetFromTime(e.m_editorEndTime,c.a0.Timeline),f=this.props.bIncludeClipEditor?[r.createElement(Eo,{key:"start",pos:w,label:(0,k.we)("#DASHPlayerControls_Start"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"start")}),r.createElement(Eo,{key:"end",pos:b,label:(0,k.we)("#DASHPlayerControls_End"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"end")})]:[];return r.createElement("div",{className:"videoTimelineMain",tabIndex:0,onKeyDown:this.OnKeyDown},r.createElement("div",{className:_},r.createElement("div",{className:"DialogLabel"},h),r.createElement("div",{className:"STV_timelineSegmentsContainer"},v),r.createElement("div",{onMouseDown:this.OnMouseDown,onMouseMove:this.OnMouseHoverMove,onMouseLeave:this.OnMouseHoverLeave,ref:this.m_elSlider},r.createElement("div",{className:"VideoTimelineSlider"},r.createElement("div",{className:"STV_timelineValue",style:d}),r.createElement("div",{className:"STV_timelineGhostValue",style:m}),r.createElement("div",{className:"STV_timelineNoVideo",style:p}),C,f,Boolean(this.state.hoverX)&&r.createElement("div",{key:"grabbertime",style:{position:"absolute",left:this.state.hoverX-75,bottom:"30px"}},r.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center"}},this.state.thumbnailURL&&r.createElement("img",{style:{width:"150px"},src:this.state.thumbnailURL}),r.createElement("span",{className:"STV_timelineGrabberValue",style:{position:"absolute",bottom:"4px"}},g))),r.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:u},r.createElement("div",{className:"STV_timelineGrabber"+S},r.createElement("div",{className:"STV_timelineGrabberArrow"},r.createElement(A.apU,null))))))))}};(0,o.Cg)([m.oI],Io.prototype,"OnMouseDown",null),(0,o.Cg)([m.oI],Io.prototype,"OnMouseMove",null),(0,o.Cg)([m.oI],Io.prototype,"OnMouseUp",null),(0,o.Cg)([m.oI],Io.prototype,"OnKeyDown",null),(0,o.Cg)([m.oI],Io.prototype,"OnMouseHoverMove",null),(0,o.Cg)([m.oI],Io.prototype,"OnMouseHoverLeave",null),(0,o.Cg)([m.oI],Io.prototype,"AdjustHoverForClientX",null),(0,o.Cg)([m.oI],Io.prototype,"OnSegmentClick",null),(0,o.Cg)([m.oI],Io.prototype,"OnMarkerMouseEnter",null),(0,o.Cg)([m.oI],Io.prototype,"OnMarkerMouseLeave",null),Io=(0,o.Cg)([s.PA],Io);let Do=class extends r.Component{state={info:null};static getDerivedStateFromProps(e,t){if((!t.info||t.info.m_steamIDBroadcast!==e.steamID)&&(t.info&&(c.BroadcastWatchStore.StopInfo(t.info),t.info=null),e.steamID)){return{info:c.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&c.BroadcastWatchStore.StopInfo(this.state.info)}RenderStreamSwitcher(){const e=this.props.steamID;return $a.td.stream[e]?r.createElement(Ao,{value:e,options:$a.td.stream,onChange:this.props.onLocalStreamChange}):null}render(){let{info:e}=this.state;if(!e)return null;let t="";e.m_nViewerCount&&(t=(0,Ja.Dq)(e.m_nViewerCount));let a=$a.td.bValid&&$a.td.stream&&$a.td.stream[e.m_steamIDBroadcast],o=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&(parseInt(e.m_strAppId)>0||a);const n=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&a&&$a.td.gidEvent;return r.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&r.createElement(g.y,{className:"broadcastDetailsThumbBlur",src:e.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastDetailsHeader"},e&&e.m_strAppTitle&&r.createElement("div",{className:"displayColumn"},r.createElement("div",{className:"Info"},r.createElement("span",{className:"AppTitle"},e.m_strAppTitle),e.m_strTitle&&r.createElement("span",{className:"BroadcastTitle"}," - ",e.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),t&&r.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},r.createElement(A.y_e,null),(0,k.Yp)("#Broadcast_ViewerCount",t))),a&&this.props.onOpenLinkInNewWindow&&r.createElement("div",{className:"Actions"},r.createElement("div",{onClick:e=>this.props.onOpenLinkInNewWindow(e,$a.td.link),className:"BroadcastLink"},$a.td.linkName))),n&&r.createElement(Xa,{gidEvent:$a.td.gidEvent}),o&&r.createElement(Fa,{id:$a.td.bValid&&$a.td.stream&&$a.td.stream[e.m_steamIDBroadcast]?$a.td.appID:parseInt(e.m_strAppId),type:"game"}))}};Do=(0,o.Cg)([s.PA],Do);class Ao extends r.Component{showContextMenu(e){const{options:t,value:a,onChange:o}=this.props,n=Object.keys(t).map((e=>r.createElement(h.IK,{key:e,onSelected:()=>o(e),bChecked:e===a},(0,k.we)(t[e]))));(0,i.lX)(r.createElement(h.tz,null,n),e)}render(){const{value:e,options:t}=this.props,a=t[e];return r.createElement("div",{className:"BroadcastLanguage",onClick:this.showContextMenu},r.createElement("span",null," - ",(0,k.we)(a)),r.createElement("div",{className:"ContextMenuButton"},r.createElement(A.GB9,null)))}}(0,o.Cg)([m.oI],Ao.prototype,"showContextMenu",null);let Bo=class extends r.Component{constructor(e){super(e),this.state={sizableRegion:[]}}async AddLinkRegion(){let e=this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:2.5+e,yPosPct:2.5+e,widthPct:20,heightPct:15}),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}componentDidUpdate(e){0==e.linkRegions.length&&this.props.linkRegions.forEach(((e,t)=>{this.LoadLinkRegion(e,t)}))}async LoadLinkRegion(e,t){this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:e.left,yPosPct:e.top,widthPct:e.width,heightPct:e.height,link_url:e.url,link_description:e.link_description,link_index:e.link_index}),await this.setState({sizableRegion:this.state.sizableRegion})}OnSaveRegions(){let e;e={links:[]};for(let t=0;t<this.state.sizableRegion.length;t++){let a;a={left:Math.floor(100*this.state.sizableRegion[t].xPosPct),top:Math.floor(100*this.state.sizableRegion[t].yPosPct),width:Math.floor(100*this.state.sizableRegion[t].widthPct),height:Math.floor(100*this.state.sizableRegion[t].heightPct),url:this.state.sizableRegion[t].link_url,link_description:this.state.sizableRegion[t].link_description,link_index:t},e.links.push(a)}this.props.onSaveLinkRegions(e)}async DeleteRegion(e){this.state.sizableRegion.splice(e,1),console.log("keys: ",this.state.sizableRegion.keys),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}async UpdatePanel(e,t){const a=[...this.state.sizableRegion];a[e]=t,this.setState({sizableRegion:a},(()=>this.OnSaveRegions()))}render(){return r.createElement("div",{className:"LinkOverlayContainer"},r.createElement("div",{className:"LinkOverlayValidRegion"},!this.props.editMode&&this.props.linkRegions?this.props.linkRegions.map((e=>{const t=(0,C.p)(e.url);return r.createElement(Ze.uU,{key:e.link_index,href:e.url,bForceExternal:t,bUseLinkFilter:t},r.createElement("div",{className:"LinkRegion",style:{left:e.left+"%",top:e.top+"%",width:e.width+"%",height:e.height+"%"}},r.createElement("div",{className:"LinkRegionText"},e.link_description," ")))})):null,this.props.editMode&&this.state.sizableRegion.map(((e,t)=>r.createElement(Ya,{key:100*t+e.xPosPct,index:t,deleteFn:this.DeleteRegion,updateFn:this.UpdatePanel,xPosPct:e.xPosPct,yPosPct:e.yPosPct,widthPct:e.widthPct,heightPct:e.heightPct,link_url:e.link_url,link_description:e.link_description}))),this.props.editMode&&r.createElement("div",{className:"AddLinkRegion",onClick:this.AddLinkRegion},(0,k.we)("#SteamTV_AddLinkRegion"))),r.createElement("div",{className:"LinkOverlayInvalidRegion"},r.createElement("div",null,(0,k.we)("#SteamTV_LinkRegionReserved"))))}};(0,o.Cg)([m.oI],Bo.prototype,"AddLinkRegion",null),(0,o.Cg)([m.oI],Bo.prototype,"LoadLinkRegion",null),(0,o.Cg)([m.oI],Bo.prototype,"OnSaveRegions",null),(0,o.Cg)([m.oI],Bo.prototype,"DeleteRegion",null),(0,o.Cg)([m.oI],Bo.prototype,"UpdatePanel",null),Bo=(0,o.Cg)([s.PA],Bo)},61889:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var o=a(96273),n=a(4183),s=a(83957),r=a.n(s);class i extends o.p{constructor(){super()}BInitialized(){return!0}GetServerTime(){return n.TS.PAGE_TIMESTAMP+Math.floor(performance.now()/1e3)}async RequestEmoticonListInternal(){let e=[];try{let t=await r().get(n.TS.CHAT_BASE_URL+"actions/EmoticonData",{withCredentials:!0});if(t.data.emoticons)for(let a of t.data.emoticons){let t=a.name;if(t.startsWith("^"))e.push({name:t});else{let o={name:t.substr(1,t.length-2)},n=o.name.toLowerCase();n!=o.name&&(o.name_normalized=n),a.time_last_used&&(o.last_used=a.time_last_used),a.use_count&&(o.use_count=a.use_count),a.time_received&&(o.time_received=a.time_received),a.appid&&(o.appid=a.appid),e.push(o)}}}catch(e){console.error("error loading emoticon list",e)}this.OnEmoticonListReceived(e)}}new i}}]);