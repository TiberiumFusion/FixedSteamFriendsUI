










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
(self.webpackChunk_steam_friendsui=self.webpackChunk_steam_friendsui||[]).push([[7653],{32654:e=>{e.exports={BroadcastPlayerLite:"broadcastplayer_BroadcastPlayerLite_SAxf3",BroadcastPlayerLiteVideo:"broadcastplayer_BroadcastPlayerLiteVideo_yCd0z",BroadcastContext:"broadcastplayer_BroadcastContext_3TnYL",BroadcastPlaceholderImg:"broadcastplayer_BroadcastPlaceholderImg_3hxn9"}},31782:e=>{e.exports={GotSteamDialog:"gameactions_GotSteamDialog_2Qusm",DownloadSteamUrl:"gameactions_DownloadSteamUrl_10lP7",GameName:"gameactions_GameName_1_uzw",Buttons:"gameactions_Buttons_2_Obm",Button:"gameactions_Button_2nVaF",LeftButton:"gameactions_LeftButton_3WYyu",AnswerText:"gameactions_AnswerText_hCqVo",ActionText:"gameactions_ActionText_2s5Ns",Footer:"gameactions_Footer_3OKQs",Logo:"gameactions_Logo_2AEA_"}},15034:e=>{e.exports={"duration-app-launch":"800ms",BannerContainer:"deckverified_BannerContainer_29jK3",BannerHeader:"deckverified_BannerHeader_3yxJH",BannerContentDesktop:"deckverified_BannerContentDesktop_Cek1s",BannerContent:"deckverified_BannerContent_2dGPT",LearnMore:"deckverified_LearnMore_2gXzK",DeveloperBlockLinkDesktop:"deckverified_DeveloperBlockLinkDesktop_1lpfU",CategoryIcon:"deckverified_CategoryIcon_3qF71",LearnMoreCtn:"deckverified_LearnMoreCtn_2IcEu",LearnMorePC:"deckverified_LearnMorePC_CrSPf",DialogHeader:"deckverified_DialogHeader_ZEuE1",DialogTitle:"deckverified_DialogTitle_2WJTd",AppTitleCategory:"deckverified_AppTitleCategory_23sFZ",CompatibilityDetailsStillLearning:"deckverified_CompatibilityDetailsStillLearning_1WWwt",CompatibilityDetailsContainerDesktop:"deckverified_CompatibilityDetailsContainerDesktop_2ADsv",CompatibilityDetailsContainer:"deckverified_CompatibilityDetailsContainer_1-O8t",CompatibilityDetailsInterior_NoScroll:"deckverified_CompatibilityDetailsInterior_NoScroll_3oQPV",CompatibilityDetailsInterior_Scroll:"deckverified_CompatibilityDetailsInterior_Scroll_2uCLc",CompatibilityDetailsRow:"deckverified_CompatibilityDetailsRow_32fPp",CompatibilityDetailRatingSummary:"deckverified_CompatibilityDetailRatingSummary_mJGYS",Verified:"deckverified_Verified_ewmg-",Playable:"deckverified_Playable_1n8va",Unsupported:"deckverified_Unsupported_2Q0ld",CompatibilityDetailRatingDescription:"deckverified_CompatibilityDetailRatingDescription_3456E",CompatibilityDetailsSeparator:"deckverified_CompatibilityDetailsSeparator_2mwbd",CompatibilityDetailsResultIcon:"deckverified_CompatibilityDetailsResultIcon_-L3Xu",CompatabilityDetailsNoteContainer:"deckverified_CompatabilityDetailsNoteContainer_6_voo",CompatibilityNotes:"deckverified_CompatibilityNotes_1aoam",CompatibilityDetailsNoteRow:"deckverified_CompatibilityDetailsNoteRow_1Wu_j",DeveloperBlogYButton:"deckverified_DeveloperBlogYButton_3avWD",Divider:"deckverified_Divider_1ikdM",DeveloperComments_Anchor:"deckverified_DeveloperComments_Anchor__JTh9",DeveloperComments_Icon:"deckverified_DeveloperComments_Icon_2R6eC",DeveloperComments_LinkNoIcon:"deckverified_DeveloperComments_LinkNoIcon_1zjwW",DeveloperComments_LinkIcon:"deckverified_DeveloperComments_LinkIcon_3OZNU"}},25509:e=>{e.exports={AddToCartAnchorCtn:"addtocartbutton_AddToCartAnchorCtn_2ZqO4",Action:"addtocartbutton_Action_yoe6d",ActionOutOfStock:"addtocartbutton_ActionOutOfStock_3XwnF"}},15515:e=>{e.exports={DevSummaryCtn:"creatorhomeembed_DevSummaryCtn_1k0S-",LargeFormat:"creatorhomeembed_LargeFormat_1090T",CreatorDescCtn:"creatorhomeembed_CreatorDescCtn_3nKoQ",SmallFormat:"creatorhomeembed_SmallFormat_18tLe",DevSummaryWidgetCtn:"creatorhomeembed_DevSummaryWidgetCtn_A2B2V",DevSummaryBackground:"creatorhomeembed_DevSummaryBackground_1TsqA",DevSummaryContent:"creatorhomeembed_DevSummaryContent_23xa4",Avatar:"creatorhomeembed_Avatar_3Jepb",CreatorTitleCtn:"creatorhomeembed_CreatorTitleCtn_2T8Ub",CreatorNameName:"creatorhomeembed_CreatorNameName_8196l",CreatorTagline:"creatorhomeembed_CreatorTagline_NX5We",Title:"creatorhomeembed_Title_37vyV",Followers:"creatorhomeembed_Followers_2ZpFi",SocialFollowersCtn:"creatorhomeembed_SocialFollowersCtn_BT3Bj",FollowBtnCtn:"creatorhomeembed_FollowBtnCtn_2artm",FollowButton:"creatorhomeembed_FollowButton_1HwWX",FollowBtnText:"creatorhomeembed_FollowBtnText_1a5dj",SocialContainer:"creatorhomeembed_SocialContainer_1o1Ds",SocialImg:"creatorhomeembed_SocialImg_2v_K1",SocialLink:"creatorhomeembed_SocialLink_3eCVb",CuratorHoverCtn:"creatorhomeembed_CuratorHoverCtn_30j_R",AvatarLink:"creatorhomeembed_AvatarLink_1N0rY",MembersListLink:"creatorhomeembed_MembersListLink_3DO0N"}},74164:e=>{e.exports={DemoButton:"demobutton_DemoButton_3euSF",DisabledButton:"demobutton_DisabledButton_3Fsf5"}},39013:e=>{e.exports={"duration-app-launch":"800ms",HoverContentTransition:"gamehover_HoverContentTransition_3-pnC",Opening:"gamehover_Opening_3A24v",Open:"gamehover_Open_1rWYa",ItemHoverSource:"gamehover_ItemHoverSource_2ByoT",Selectable:"gamehover_Selectable_Hvshc",GameHoverCapsuleCtn:"gamehover_GameHoverCapsuleCtn_2jsr3",UseHidingBottomHalf:"gamehover_UseHidingBottomHalf_5hPHC",TrailerAnchorStoreLink:"gamehover_TrailerAnchorStoreLink_OxANH",TrailerCtn:"gamehover_TrailerCtn_1I27K",FullDivImage:"gamehover_FullDivImage_2jpCs",Transparent:"gamehover_Transparent_AZ9GL",Midline:"gamehover_Midline_Xwe3c",Price:"gamehover_Price_2Eh6G",CapsuleImageAnchorPoint:"gamehover_CapsuleImageAnchorPoint_1OMas",CapsuleImageCtn:"gamehover_CapsuleImageCtn_wm-2T",WithCornerShine:"gamehover_WithCornerShine_2kRKA",DemoButton:"gamehover_DemoButton_2V6ci",WishlistButton:"gamehover_WishlistButton_3notz",WishlistButtonText:"gamehover_WishlistButtonText_VI5mZ",WishlistLoadingText:"gamehover_WishlistLoadingText_7-s8T",WishlistButtonNotTop:"gamehover_WishlistButtonNotTop_3VcyY",BottomShelf:"gamehover_BottomShelf_oAqlZ",BottomShelfOffScreen:"gamehover_BottomShelfOffScreen_36zpR",TextContent:"gamehover_TextContent_2VvFL",GameTitle:"gamehover_GameTitle_405wj",TagRow:"gamehover_TagRow_2SWQM",Tags:"gamehover_Tags_fTGVi",Tag:"gamehover_Tag_1wO-t",PlatformDisplay:"gamehover_PlatformDisplay_2UG4_",ReviewsAndRelease:"gamehover_ReviewsAndRelease_1HFUC",ReleaseDate:"gamehover_ReleaseDate_35Bya",ReleasePrefix:"gamehover_ReleasePrefix_2ZKEX",ReviewScore:"gamehover_ReviewScore_3qvpp",ReviewScoreHeader:"gamehover_ReviewScoreHeader_2t-0j",ReviewScoreCount:"gamehover_ReviewScoreCount_1wXL_",ReviewScoreValue:"gamehover_ReviewScoreValue_3ZWs0",ReviewScoreNone:"gamehover_ReviewScoreNone_3TKyM",ReviewScoreLow:"gamehover_ReviewScoreLow_3nU5I",ReviewScoreMixed:"gamehover_ReviewScoreMixed_11Q2_",ReviewScoreHigh:"gamehover_ReviewScoreHigh_3wXHC",ReviewScorePercentage:"gamehover_ReviewScorePercentage_38dPa",GameHoverCreatorFollowButtonCtn:"gamehover_GameHoverCreatorFollowButtonCtn_1mQuB"}},45090:e=>{e.exports={"duration-app-launch":"800ms",SaleSection:"partnersaledisplay_SaleSection_1cOoC",CarouselDisplay:"partnersaledisplay_CarouselDisplay_mntHD",SaleSectionCtn:"partnersaledisplay_SaleSectionCtn_i2PTz",SaleHeaderContainer:"partnersaledisplay_SaleHeaderContainer_W4mvn",SaleViewAll:"partnersaledisplay_SaleViewAll_1bsBz",SaleSectionLoginPrompt:"partnersaledisplay_SaleSectionLoginPrompt_2-dSB",LoginButton:"partnersaledisplay_LoginButton_3h6sH",SaleOverlayCtn:"partnersaledisplay_SaleOverlayCtn_3GTIc",SaleOverlay:"partnersaledisplay_SaleOverlay_1sZo8",CarouselCapsuleBordered:"partnersaledisplay_CarouselCapsuleBordered_31OAy",CarouselCapsuleAnimated:"partnersaledisplay_CarouselCapsuleAnimated_3V1O5",AppSummaryWidgetCtn:"partnersaledisplay_AppSummaryWidgetCtn_2H8Bm",CarouselSalePageCapsule:"partnersaledisplay_CarouselSalePageCapsule_3r4Ny",SaleBroadcastCtn:"partnersaledisplay_SaleBroadcastCtn_1SFMh",SaleOuterContainer:"partnersaledisplay_SaleOuterContainer_150kd",CustomStyle_together:"partnersaledisplay_CustomStyle_together_1lAyg",SalePageLogoSet:"partnersaledisplay_SalePageLogoSet_JxIGH",SaleNewSizing:"partnersaledisplay_SaleNewSizing_1v-BV",SaleBackground:"partnersaledisplay_SaleBackground_2N8Se",SaleSectionTitleCtn:"partnersaledisplay_SaleSectionTitleCtn_bE2EA",SaleSectionSubtext:"partnersaledisplay_SaleSectionSubtext_17Fnl",SaleSectionContainer:"partnersaledisplay_SaleSectionContainer_W9_WA",vr_supported:"partnersaledisplay_vr_supported_1BDSJ",vr_required:"partnersaledisplay_vr_required_1P__h",preview_placeholder_section:"partnersaledisplay_preview_placeholder_section_3QLsj",LinkCapsule:"partnersaledisplay_LinkCapsule_2zVSa",fullscreen_bg:"partnersaledisplay_fullscreen_bg_j2ykT",fullscreen_bg_video:"partnersaledisplay_fullscreen_bg_video_3BU-y",SalePageBroadcastContextHover:"partnersaledisplay_SalePageBroadcastContextHover_hbVdl",AlbumCoverImage:"partnersaledisplay_AlbumCoverImage_2JfUA",AlbumTitle:"partnersaledisplay_AlbumTitle_keaMw",SaleSectionTabs:"partnersaledisplay_SaleSectionTabs_1FPIV",DesktopTabs:"partnersaledisplay_DesktopTabs_2utXv",SaleSectionTabsTab:"partnersaledisplay_SaleSectionTabsTab_3BgHm",SaleSectionTabContainer:"partnersaledisplay_SaleSectionTabContainer_1Svj0",SaleSectionTabsRow:"partnersaledisplay_SaleSectionTabsRow_30oGT",SaleTab:"partnersaledisplay_SaleTab_gc-rq",SaleTabLabel:"partnersaledisplay_SaleTabLabel_2mYMQ",SaleSectionTabListContainer:"partnersaledisplay_SaleSectionTabListContainer_2VZtq",MobileTabSelector:"partnersaledisplay_MobileTabSelector_2fm5T",Visible:"partnersaledisplay_Visible_2Jmo5",MobileTabSelectorButton:"partnersaledisplay_MobileTabSelectorButton_1t4-3",MobileTabSelectorShortcut:"partnersaledisplay_MobileTabSelectorShortcut_1P5tc",MobileTabSelectorDropDown:"partnersaledisplay_MobileTabSelectorDropDown_3KO7Y",MobileTabSelectorOption:"partnersaledisplay_MobileTabSelectorOption_GiTJl",TabContentsContainer:"partnersaledisplay_TabContentsContainer_2xJbu",HorizontalScrollInDragForceCursor:"partnersaledisplay_HorizontalScrollInDragForceCursor_nemO6",SaleBroadcastSection:"partnersaledisplay_SaleBroadcastSection_1u0IZ",CarouselPage:"partnersaledisplay_CarouselPage_Hlkuk",TabButtonsCtn:"partnersaledisplay_TabButtonsCtn_21-6t",TabButton:"partnersaledisplay_TabButton_1Gz4s",DefaultCreatorCtn:"partnersaledisplay_DefaultCreatorCtn_3KzJ1",EventSectionViewAllCtn:"partnersaledisplay_EventSectionViewAllCtn_1B6gV",SaleSectionBackgroundImageGroupEdit:"partnersaledisplay_SaleSectionBackgroundImageGroupEdit_2a4me"}},6933:e=>{e.exports={"duration-app-launch":"800ms",headerCapsuleImgWidth:"460",headerCapsuleImgHeight:"215",mainCapsuleImgWidth:"616",mainCapsuleImgHeight:"353",libraryAssetImgWidth:"300",libraryAssetImgHeight:"450",heroCapsuleImgWidth:"374",heroCapsuleImgHeight:"448",StoreSaleWidgetContainer:"salepreviewwidgets_StoreSaleWidgetContainer_2hhNO",LibraryAssetExpandedDisplay:"salepreviewwidgets_LibraryAssetExpandedDisplay_PZY_7",SaleItemDefaultCapsuleDisplay:"salepreviewwidgets_SaleItemDefaultCapsuleDisplay_37igg",MarketingMessage:"salepreviewwidgets_MarketingMessage_3_q87",StoreSaleWidgetRight:"salepreviewwidgets_StoreSaleWidgetRight_v9uRg",StoreSaleWidgetHalfLeft:"salepreviewwidgets_StoreSaleWidgetHalfLeft_111nf",StoreSaleWidgetTitle:"salepreviewwidgets_StoreSaleWidgetTitle_2ekpT",StoreSaleDiscountBox:"salepreviewwidgets_StoreSaleDiscountBox_cnkoF",StoreSaleWidgetLibraryAssetExtendedTop:"salepreviewwidgets_StoreSaleWidgetLibraryAssetExtendedTop_1uLNB",StoreSaleWidgetImage:"salepreviewwidgets_StoreSaleWidgetImage_yvqq8",CapsuleMicroTrailer:"salepreviewwidgets_CapsuleMicroTrailer_1M7n5",CapsulePlatform:"salepreviewwidgets_CapsulePlatform_2bCf9",StoreSaleWidgetContents:"salepreviewwidgets_StoreSaleWidgetContents_Agwfe",StoreMetaDataCtn:"salepreviewwidgets_StoreMetaDataCtn_2W2g3",StoreSaleItemRelease:"salepreviewwidgets_StoreSaleItemRelease_vCEpe",StoreSaleItemDev:"salepreviewwidgets_StoreSaleItemDev_3tIbO",StoreSaleItemReview:"salepreviewwidgets_StoreSaleItemReview_Kx5Nf",StoreSaleWidgetLeft:"salepreviewwidgets_StoreSaleWidgetLeft_3DkfN",TitleCtn:"salepreviewwidgets_TitleCtn_3rrH9",StoreSaleWidgetCrossCenterRight:"salepreviewwidgets_StoreSaleWidgetCrossCenterRight_oW0H1",CapsuleBottomBar:"salepreviewwidgets_CapsuleBottomBar_3lmdE",PlayNowButton:"salepreviewwidgets_PlayNowButton_38ePa",AddToLibraryButton:"salepreviewwidgets_AddToLibraryButton_1DrDh",StoreActionWidgetContainer:"salepreviewwidgets_StoreActionWidgetContainer_kW6m4",StoreSalePriceWidgetContainer:"salepreviewwidgets_StoreSalePriceWidgetContainer_2s-O5",StoreSaleWidgetBgTint:"salepreviewwidgets_StoreSaleWidgetBgTint_MvLJD",LibraryFallbackAssetImageContainer:"salepreviewwidgets_LibraryFallbackAssetImageContainer_1APLS",FallbackBackground:"salepreviewwidgets_FallbackBackground_3chRZ",SaleTagBlockCtn:"salepreviewwidgets_SaleTagBlockCtn_1ZqQL",StoreSaleWidgetCenter:"salepreviewwidgets_StoreSaleWidgetCenter_2asUT",StoreSaleWidgetReleaseAndTags:"salepreviewwidgets_StoreSaleWidgetReleaseAndTags_3wryh",Bundle:"salepreviewwidgets_Bundle_2GbhL",WidgetReleaseDateAndPlatformCtn:"salepreviewwidgets_WidgetReleaseDateAndPlatformCtn_3a6HR",SaleItemBrowserRow:"salepreviewwidgets_SaleItemBrowserRow_gASJ2",StoreSaleWidgetRelease:"salepreviewwidgets_StoreSaleWidgetRelease_1qvTF",StoreSaleWidgetTags:"salepreviewwidgets_StoreSaleWidgetTags_2bkP-",AppTag:"salepreviewwidgets_AppTag_3FJnZ",StoreSaleWidgetShortDesc:"salepreviewwidgets_StoreSaleWidgetShortDesc_3AsE5",TagTitle:"salepreviewwidgets_TagTitle_v1i4W",TagBox:"salepreviewwidgets_TagBox_1lqaD",SaleItemFullCapsuleDisplay:"salepreviewwidgets_SaleItemFullCapsuleDisplay_2sVvR",Tag:"salepreviewwidgets_Tag_33yqk",BundleContentPreview:"salepreviewwidgets_BundleContentPreview_jQ5Ga",StoreSaleBroadcastWidgetRight:"salepreviewwidgets_StoreSaleBroadcastWidgetRight_9VjYX",StoreSalePriceActionWidgetContainer:"salepreviewwidgets_StoreSalePriceActionWidgetContainer_1JuIp",Discounted:"salepreviewwidgets_Discounted_1g0B-",WishList:"salepreviewwidgets_WishList_1djkd",Action:"salepreviewwidgets_Action_2zssE",SingleLineMode:"salepreviewwidgets_SingleLineMode_1ZlGJ",StoreSaleDiscountedPriceCtn:"salepreviewwidgets_StoreSaleDiscountedPriceCtn_3NhLu",StoreSalePriceBox:"salepreviewwidgets_StoreSalePriceBox_3j4dI",StoreSaleNewItem:"salepreviewwidgets_StoreSaleNewItem_2_KY_",StoreOriginalPrice:"salepreviewwidgets_StoreOriginalPrice_3fFFs",PrePurchase:"salepreviewwidgets_PrePurchase_2f7BM",NewItem:"salepreviewwidgets_NewItem_2xCT1",InGameHover:"salepreviewwidgets_InGameHover_axjdi",StoreSalePrepurchaseLabel:"salepreviewwidgets_StoreSalePrepurchaseLabel_1Fru-",SingleLineOriginalPrice:"salepreviewwidgets_SingleLineOriginalPrice_t7Gt8",BaseDiscount:"salepreviewwidgets_BaseDiscount_3mInD",StoreSalePriceButton:"salepreviewwidgets_StoreSalePriceButton_1BejQ",OuterCapsuleContainer:"salepreviewwidgets_OuterCapsuleContainer_1dKR2",BottomBarPriceInfo:"salepreviewwidgets_BottomBarPriceInfo_1X3j2",CapsuleContainer:"salepreviewwidgets_CapsuleContainer_22Acx",EventRow:"salepreviewwidgets_EventRow_1UMFn",Muted:"salepreviewwidgets_Muted_1HVwz",BottomCreatorRow:"salepreviewwidgets_BottomCreatorRow_1JrUu",CreatorLogo:"salepreviewwidgets_CreatorLogo_3Krfu",CreatorName:"salepreviewwidgets_CreatorName_Fmi-a",HeaderCapsuleImageContainer:"salepreviewwidgets_HeaderCapsuleImageContainer_2oW_y",MainCapsuleImageContainer:"salepreviewwidgets_MainCapsuleImageContainer_1vpxH",HeroCapsuleImageContainer:"salepreviewwidgets_HeroCapsuleImageContainer_vnhlb",DiscoveryQueueCtn:"salepreviewwidgets_DiscoveryQueueCtn_2uX2G",VerticalCapsule:"salepreviewwidgets_VerticalCapsule_3sy8X",ForceLibrarySizing:"salepreviewwidgets_ForceLibrarySizing_25KI3",CapsuleImage:"salepreviewwidgets_CapsuleImage_2eQ4m",LinkCapsuleImage:"salepreviewwidgets_LinkCapsuleImage_2xO8H",CapsuleParentInfo:"salepreviewwidgets_CapsuleParentInfo_2erfW",ParentType:"salepreviewwidgets_ParentType_3FCPP",Banner:"salepreviewwidgets_Banner_2gxv9",Blue:"salepreviewwidgets_Blue_2o-5t",LinesImg:"salepreviewwidgets_LinesImg_3LecB",CapsuleDecorators:"salepreviewwidgets_CapsuleDecorators_1xNQc",BundleContentsCtnTransition:"salepreviewwidgets_BundleContentsCtnTransition_24KNc",Expanding:"salepreviewwidgets_Expanding_38KIq",Expanded:"salepreviewwidgets_Expanded_hPc1l",Collapsing:"salepreviewwidgets_Collapsing_2NmI1",BundleContentsCtn:"salepreviewwidgets_BundleContentsCtn_34acu",BundleContentsTitle:"salepreviewwidgets_BundleContentsTitle_hhdk8",BundleShowButton:"salepreviewwidgets_BundleShowButton_2Vu78",ShowContentsButton:"salepreviewwidgets_ShowContentsButton_-VlK4",ShowContentsSection:"salepreviewwidgets_ShowContentsSection_fsPeL",BundleContentItem:"salepreviewwidgets_BundleContentItem_2sdNO",StoreSaleWidgetOuterContainer:"salepreviewwidgets_StoreSaleWidgetOuterContainer_1_P15",ContentsCount:"salepreviewwidgets_ContentsCount_353Lz",PreviewCtn:"salepreviewwidgets_PreviewCtn_1NM53",PreviewItem:"salepreviewwidgets_PreviewItem_2yhQb",DeckCompatIcon:"salepreviewwidgets_DeckCompatIcon_1Nju8",PreviewImg:"salepreviewwidgets_PreviewImg_1jx70",DemoLayoutPopup:"salepreviewwidgets_DemoLayoutPopup_2tmp2",FreeWeekendBar:"salepreviewwidgets_FreeWeekendBar_2SCof",FreeWeekendLabel:"salepreviewwidgets_FreeWeekendLabel_21B6L",RecommendationReason:"salepreviewwidgets_RecommendationReason_3Q_ta",LocalizationSpan:"salepreviewwidgets_LocalizationSpan_3bCSm",CapsuleName:"salepreviewwidgets_CapsuleName_31P1R",DiscountIconCtn:"salepreviewwidgets_DiscountIconCtn_3Qt9S"}},82149:e=>{e.exports={bordered_live_stream_icon:"liveicon_bordered_live_stream_icon_2R1rY"}},95623:e=>{e.exports={Link:"salebanner_Link_-HlDB",Banner:"salebanner_Banner_2bT8i",Big:"salebanner_Big_sGy-b",Mobile:"salebanner_Mobile_mhii5"}},49434:e=>{e.exports={PopupScreenshotModal:"screenshotpopout_PopupScreenshotModal_yloqx",PopupScreenshotContainer:"screenshotpopout_PopupScreenshotContainer_1wwvw",PopupScreenshot:"screenshotpopout_PopupScreenshot_31XZu",ButtonCtn:"screenshotpopout_ButtonCtn_3Mysp",ButtonIcon:"screenshotpopout_ButtonIcon_1tCO1",Disabled:"screenshotpopout_Disabled_1a_f8"}},20516:e=>{e.exports={CompatIcon:"deckcompaticons_CompatIcon_3cEK5"}},48036:e=>{e.exports={ErrorDiv:"image_ErrorDiv_2FXME"}},83279:e=>{e.exports={PreviewCtn:"expandableimage_PreviewCtn_16Skn",SVG:"expandableimage_SVG_3Mns5"}},73280:e=>{e.exports={LinkRegionDragBox:"linkregionbox_LinkRegionDragBox_Rtlc-",EdgeDown:"linkregionbox_EdgeDown_i9zrH",LinkRegionGridBox:"linkregionbox_LinkRegionGridBox_1Ob4A",LinkRegionEdge:"linkregionbox_LinkRegionEdge_2stP4",TopLeft:"linkregionbox_TopLeft_Clgi-",Top:"linkregionbox_Top_2Z9Vy",TopRight:"linkregionbox_TopRight_2-8Db",Left:"linkregionbox_Left_3ZwUw",Middle:"linkregionbox_Middle_1Heco",LinkRegionDelete:"linkregionbox_LinkRegionDelete_3Hb3w",LinkRegionSettings:"linkregionbox_LinkRegionSettings_VazMl",Right:"linkregionbox_Right_3h5fK",BottomLeft:"linkregionbox_BottomLeft_2CQe0",Bottom:"linkregionbox_Bottom_sIHlK",BottomRight:"linkregionbox_BottomRight_3lnwj",topleft:"linkregionbox_topleft_3W096",top:"linkregionbox_top_1iRW1",topright:"linkregionbox_topright_1Yrl7",left:"linkregionbox_left_2iBrm",right:"linkregionbox_right_15t6A",bottomleft:"linkregionbox_bottomleft_3SdBc",bottom:"linkregionbox_bottom_2kzZ9",bottomright:"linkregionbox_bottomright_2AKXk",middle:"linkregionbox_middle_1CS75",LinkRegionButtonContainer:"linkregionbox_LinkRegionButtonContainer_1ZJ42",DialogButton:"linkregionbox_DialogButton_nN2Q1",LinkRegionInfo:"linkregionbox_LinkRegionInfo_3TiV7",LinkText:"linkregionbox_LinkText_2TAc2"}},90890:e=>{e.exports={Loading:"loadingspinner_Loading_24C5l",LoadingSpinnerAmin:"loadingspinner_LoadingSpinnerAmin_15h2O",Small:"loadingspinner_Small_2FPxE",Medium:"loadingspinner_Medium_2FfWb",Large:"loadingspinner_Large_30IMo"}},33264:e=>{e.exports={strMaxMobileWidth:"700px"}},36306:(e,t,a)=>{"use strict";a.d(t,{FF:()=>W,CBroadcastApp:()=>R});var o=a(34629),n=a(94373),s=a(56),r=a(63696),i=a(77286),l=a(37811),c=a(97775),d=a(62770),m=a(80155),p=a(78476),u=a(85068),h=a(53337);const g=({group:e,onClick:t})=>{const a=e.watching_broadcast_steamid;return r.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:t},r.createElement("div",{className:"ChatRoomListGroupItem_header"},r.createElement(u.I,{group:e,small:!0}),r.createElement("div",{className:"groupNameStatusContainer"},r.createElement("div",{className:"chatRoomName"},e.name),a&&r.createElement("div",{className:"chatRoomDetails"},(0,d.we)("#Broadcast_WatchParty_Viewers_NoneActive")))))};class _ extends r.Component{CreateWatchParty(e=!1){const{browserContext:t,ownerWindow:a,broadcastAccountId:o,initialFriend:s}=this.props;this.Close();const i=e&&s?[s.accountid]:[];!function(e,t,a,o){(0,l.HT)(r.createElement(m.zw,{browserContext:e,bHideChatNameEntry:!1,vecInvitePlayers:o,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:a},strTitle:(0,d.we)("#Broadcast_CreateWatchParty")}),t,"CreateChatDialog",{strTitle:(0,d.we)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600},(0,n.h8)(t))}(t,a||window,o,i)}WatchAlone(){this.Close()}UpgradeExisting(e){const{broadcastAccountId:t,browserContext:a,broadcastChannelID:o,broadcastTabId:n}=this.props;this.Close(),o?e.SetChatRoomGroupWatchingBroadcast(void 0,o):e.SetChatRoomGroupWatchingBroadcast(t);const r=s.xm.UIStore.ShowAndOrActivateChatRoomGroup(a,e,!0);n&&s.xm.UIStore.CloseTabByID(n),this.props.bIsNewSteamTVDialog||r.ShowBroadcast()}Close(){const{closeModal:e}=this.props;e&&e()}render(){const{closeModal:e,initialFriend:t}=this.props,a=s.xm.ChatStore.currentChatRoomGroups.filter((e=>e.BCanIAssociateBroadcast())),o=t;return r.createElement("div",{className:"chatModalCover"},r.createElement(l.x_,{onEscKeypress:e},r.createElement(c.UC,{className:"watchPartyDialog"},r.createElement(c.nB,null,r.createElement("div",{className:"watchPartyPrompt"},(0,d.we)("#Broadcast_WatchPrompt")),r.createElement(c.xz,null,!this.props.bIsNewSteamTVDialog&&r.createElement(c.$n,{svgicon:i.Gv$,className:"watchHowButton",onClick:this.WatchAlone},(0,d.we)("#Broadcast_WatchAlone")),o&&r.createElement(c.$n,{className:"watchHowButton",onClick:()=>this.CreateWatchParty(!0)},r.createElement(h.gv,{friend:o,context:null,bLarge:!1}),(0,d.PP)("#Broadcast_WatchWith",r.createElement("span",{className:"highlight"}," ",o.display_name))),0!==a.length&&r.createElement(r.Fragment,null,r.createElement(c.JU,null,(0,d.we)("#Broadcast_WatchWithExistingWatchParty")),a.map((e=>r.createElement(g,{key:e.unique_id,group:e,onClick:()=>this.UpgradeExisting(e)})))),r.createElement(c.$n,{className:"watchHowButton newWatchGroup",svgicon:i.u9R,onClick:()=>this.CreateWatchParty(!1)},(0,d.we)("#Broadcast_LinkBroadcastToGroup_New")))),r.createElement(c.wi,null))))}}(0,o.Cg)([p.oI],_.prototype,"WatchAlone",null),(0,o.Cg)([p.oI],_.prototype,"Close",null);var S=a(89193),C=a(41230),v=a(7470),w=a(4596),b=a(63437),E=a.n(b),I=a(51320),f=a(14692),y=a(30568),A=a(61452),D=a(30431),B=a(74688),k=a(93138),T=a(93067),P=a(96665),G=a(29080),L=a(6162),N=a(71342);class R{constructor(){(0,S.Gn)(this)}m_fnLaunchChat;m_iTimeoutLogin=void 0;m_eLogonState=0;m_bLogonDialogVisisible=!1;m_steamID=void 0;m_reactRoot;Init(e){this.m_fnLaunchChat=e,this.m_steamID=N.GP.steamid,window.addEventListener("message",this.HandlePostMessage),this.m_reactRoot=v.H(document.getElementById("friendslist-container")),this.m_reactRoot.render(r.createElement(M,{app:this})),this.m_iTimeoutLogin=window.setTimeout((()=>{0==this.m_eLogonState&&(this.m_eLogonState=1)}),2500)}LaunchChat(){this.m_reactRoot.unmount(),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),(0,n.xT)(N.GP.steamid),this.m_fnLaunchChat()}GetLoginURL(){return`${N.TS.STORE_BASE_URL}login/?steamtv`}BIsPerformingLogonCheck(){return 0==this.m_eLogonState||1==this.m_eLogonState}BIsLogonDialogVisible(){return this.m_bLogonDialogVisisible}ShowLogonDialog(){this.m_bLogonDialogVisisible=!0}BReadyToRender(){return 0!=this.m_eLogonState}DismissLogonDialog(){this.m_bLogonDialogVisisible=!1}GetSteamIDWatched(){return this.m_steamID}ExtractOrigin(e){return e.replace(/^(https?:\/\/[^/]*).*$/,"$1")}HandlePostMessage(e){if(e.origin!=this.ExtractOrigin(N.TS.STORE_BASE_URL)&&e.origin!=this.ExtractOrigin(N.TS.CHAT_BASE_URL))return void console.warn(`Ignoring message from untrusted domain "${e.origin}"`);let t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()}}(0,o.Cg)([S.sH],R.prototype,"m_eLogonState",void 0),(0,o.Cg)([S.sH],R.prototype,"m_bLogonDialogVisisible",void 0),(0,o.Cg)([S.sH],R.prototype,"m_steamID",void 0),(0,o.Cg)([S.XI],R.prototype,"LaunchChat",null),(0,o.Cg)([S.XI.bound],R.prototype,"HandlePostMessage",null);let M=class extends r.Component{m_broadcastInfo=null;constructor(e){super(e),this.m_broadcastInfo=k.BroadcastWatchStore.StartInfo(this.props.app.GetSteamIDWatched()),this.state={bChatCollapsed:!1,bTheaterMode:!1}}componentWillUnmount(){this.m_broadcastInfo&&(k.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnShowLogin(){this.props.app.ShowLogonDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){this.setState({bTheaterMode:!this.state.bTheaterMode})}render(){const e=this.props.app;let t=this.m_broadcastInfo,a=U();return r.createElement(H,null,e.BReadyToRender()&&r.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},r.createElement(T.y,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastTab"},r.createElement("div",{className:"StandalonePlayerHeader"},r.createElement("div",{className:"STV_Logo"},r.createElement(i.P7C,null)),r.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},r.createElement(V,{onClick:this.OnShowLogin}),r.createElement(x,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),r.createElement(z,{steamID:e.GetSteamIDWatched(),watchLocation:a,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},r.createElement(Z,{app:e})))),r.createElement(F,{app:e}))}};function O(){const e=(0,N.Fd)("loyalty_webapi_token","application_config");return new B.D(N.TS.WEBAPI_BASE_URL,e)}function H(e){const{children:t}=e,a=r.useCallback((()=>s.xm?.CMInterface),[]),o=(0,p.bs)(r.useCallback((()=>new A.A),[])),n=(0,p.bs)(O);return r.createElement(L.s,null,r.createElement(N.ss,null,N.iA.logged_in?r.createElement(y.VQ,{useActiveCMInterface:a,useStorage:o},t):r.createElement(y.VQ,{useActiveSteamInterface:n,useStorage:o},t)))}(0,o.Cg)([p.oI],M.prototype,"OnShowLogin",null),(0,o.Cg)([p.oI],M.prototype,"ToggleChat",null),(0,o.Cg)([p.oI],M.prototype,"ToggleTheaterMode",null),M=(0,o.Cg)([C.PA],M);let F=(0,C.PA)((({app:e})=>e.BIsPerformingLogonCheck()?r.createElement("div",null,r.createElement("iframe",{style:{display:"none"},src:e.GetLoginURL()})):null));function V(e){return r.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},r.createElement(i.y_e,null),(0,d.we)("#Broadcast_WatchWithFriends"))}function x(e){return r.createElement("div",{className:"ToggleBroadcastChat",title:(0,d.we)("#Broadcast_ToggleChat"),onClick:e.onClick},r.createElement(i.K7s,{showChat:e.hideIcon}))}function U(){return N.TS.STEAM_TV?1:3}let W=class extends r.Component{m_broadcastInfo=null;constructor(e){super(e);let t=this.props.broadcastView.GetSteamID().ConvertTo64BitString();this.m_broadcastInfo=k.BroadcastWatchStore.StartInfo(t),this.state={bChatCollapsed:!1}}componentWillUnmount(){this.m_broadcastInfo&&(k.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnWatchWithFriends(){this.props.broadcastView.ShowWatchPromptDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){s.xm.UIStore.SetTheaterMode(!s.xm.UIStore.GetTheaterMode())}render(){const{broadcastView:e,popup:t,style:a}=this.props,o=e.GetSteamID().ConvertTo64BitString();let n=U();const s=e.m_bShowWatchPromptDialog?r.createElement(_,{closeModal:()=>e.HideWatchPromptDialog(),broadcastAccountId:e.GetSteamID().GetAccountID(),broadcastTabId:e.GetUniqueID(),initialFriend:e.m_watchPromptInitialFriend,browserContext:D.m,ownerWindow:t}):null;return r.createElement("div",{className:"BroadcastTab",style:a},r.createElement(T.y,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastTab_OverBackground"},r.createElement("div",{className:"BroadcastTabHeaderContainer"},r.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},r.createElement(V,{onClick:this.OnWatchWithFriends}),r.createElement(x,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),r.createElement(z,{steamID:o,watchLocation:n,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},s)))}};(0,o.Cg)([p.oI],W.prototype,"OnWatchWithFriends",null),(0,o.Cg)([p.oI],W.prototype,"ToggleChat",null),(0,o.Cg)([p.oI],W.prototype,"ToggleTheaterMode",null),W=(0,o.Cg)([C.PA],W);let z=class extends r.Component{m_strLocalSteamID="";m_refBroadcastContainer=r.createRef();m_elMainContent;constructor(e){super(e),(0,S.Gn)(this),this.state={info:null}}componentDidMount(){I.td.stream["76561198208088121"]&&"chinese"===N.TS.LANGUAGE?this.OnLocalStreamChange("76561198208088121"):I.td.stream["76561198207552741"]&&"russian"===N.TS.LANGUAGE&&this.OnLocalStreamChange("76561198207552741")}static getDerivedStateFromProps(e,t){if(!t.info||t.info.m_steamIDBroadcast!==e.steamID){t.info&&k.BroadcastWatchStore.StopInfo(t.info);return{info:k.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&k.BroadcastWatchStore.StopInfo(this.state.info)}OnLocalStreamChange(e){this.m_strLocalSteamID=e}SetMainContentRef(e){this.m_elMainContent=e}CalculateBroadcastSectionStyles(e){if(this.props.bHideChat)return{width:"100%",height:"100%"};let t,a;n.ZM&&(t=n.ZM.UIDisplayPrefs.nWatchPartyBroadcastHeightPercentage,a=n.ZM.UIDisplayPrefs.nWatchPartyBroadcastWidthPercentage);const o={};if(e){const e=t||66;if(o.height=`${e}%`,this.m_elMainContent){const{clientWidth:t,clientHeight:a}=this.m_elMainContent,n=9/16*t+50,s=(0,G.OQ)(e,1,n/a*100);o.height=`${s}%`}}else o.width=a?`${a}%`:"66%",o.minWidth=a?`${a}%`:"66%",o.maxWidth="calc( 100% - 316px )",o.overflowY="auto";return o}OnGrabberMouseDown(e){let t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})}HandleMouseMove(e){e.preventDefault(),e.stopPropagation();let t=this.m_refBroadcastContainer.current.getBoundingClientRect(),a=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect();const o=t.left,s=e.clientX,r=a.width,i=(0,G.OQ)((s-o)/r*100,1,100);n.ZM.SetUIDisplayPref("nWatchPartyBroadcastWidthPercentage",i)}UnregisterDragEvents(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})}render(){let{steamID:e,children:t}=this.props,a=this.m_strLocalSteamID||e,o=this.state.info.m_bIsOnline,n=null;const i=this.CalculateBroadcastSectionStyles(!1);i.flexGrow=this.props.bHideChat?1:null,I.td.bValid&&(n=r.createElement(j,{info:I.td}));const l=new R,c=r.createElement("div",{className:"LoginDiv"},r.createElement("a",{onClick:()=>l.ShowLogonDialog(),className:E().ChatLoginButton,href:"#"},(0,d.we)("#BroadcastChat_Login")),r.createElement(Z,{app:l})),m=k.BroadcastWatchStore.GetBroadcast(a)?k.BroadcastWatchStore.GetBroadcast(a).m_ulBroadcastID:"0";return r.createElement("div",{className:"BroadcastContainer"},r.createElement("div",{className:"BroadcastContainerSection",ref:this.m_refBroadcastContainer,style:i},r.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},o&&r.createElement(f.default,{key:a,steamIDBroadcast:a,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!o&&n,r.createElement("div",{className:"videoContainerSizer"})),t,r.createElement("div",{className:"BroadcastDetailsSection"},r.createElement(f.BroadcastDetails,{steamID:a,onLocalStreamChange:this.OnLocalStreamChange,bVerticalBroadcastChat:!0}))),!this.props.bHideChat&&r.createElement("div",{className:"BroadcastChatDivider horizontal",onMouseDown:this.OnGrabberMouseDown}),r.createElement("div",{className:"BroadcastChatDiv",style:{display:this.props.bHideChat?"none":"flex",flexDirection:"column",width:"100%",minWidth:"300px"}},r.createElement(w.I,{emoticonStore:s.xm?s.xm.ChatStore.EmoticonStore:null,broadcastID:m,steamID:a,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}),N.iA&&N.iA.logged_in?null:c))}};function j(e){let t=`url( "${N.TS.CHAT_BASE_URL+e.info.offlineImage}" )`;return r.createElement("div",{style:{backgroundImage:t},className:"BroadcastOffline"})}(0,o.Cg)([S.sH],z.prototype,"m_strLocalSteamID",void 0),(0,o.Cg)([p.oI],z.prototype,"OnLocalStreamChange",null),(0,o.Cg)([p.oI],z.prototype,"SetMainContentRef",null),(0,o.Cg)([p.oI],z.prototype,"OnGrabberMouseDown",null),(0,o.Cg)([p.oI],z.prototype,"HandleMouseMove",null),(0,o.Cg)([p.oI],z.prototype,"UnregisterDragEvents",null),z=(0,o.Cg)([C.PA],z);class X extends r.Component{Dismiss(){this.props.app.DismissLogonDialog()}render(){return r.createElement(P.x_,{onEscKeypress:this.Dismiss},r.createElement(c.UC,{className:"SteamTVLoginDialog"},r.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))}}(0,o.Cg)([p.oI],X.prototype,"Dismiss",null);let Z=class extends r.Component{render(){if(!this.props.app.BIsLogonDialogVisible())return null;let e=r.createElement(X,{app:this.props.app});return r.createElement("div",{className:"FullModalOverlay"},r.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),r.createElement("div",{className:"ModalOverlayContent active"},e))}};Z=(0,o.Cg)([C.PA],Z)},92025:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var o=a(34629),n=a(63696),s=a(36306),r=a(41230),i=a(88561);let l=class extends n.Component{render(){let e=this.props.broadcastView;if(!(e&&e instanceof i.w))return null;let t={};return this.props.isActive||(t.display="none"),n.createElement(s.FF,{style:t,broadcastView:e,popup:this.props.popup})}};l=(0,o.Cg)([r.PA],l);const c=l},44820:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(63696),n=a(14692),s=a(35);const r=o.forwardRef((function({steamID:e,localSteamID:t,watchLocation:a,bWebRTC:r,style:i,onRequestClose:l,actions:c,onTheaterMode:d,onLocalStreamChange:m,bVerticalBroadcastChat:p},u){const h=t||e;return o.createElement("div",{ref:u,style:{display:"flex",flexDirection:"column",...i}},o.createElement("div",{className:"BroadcastSection"},o.createElement(n.default,{key:h,steamIDBroadcast:h,watchLocation:a,bWebRTC:r,onRequestClose:l,actions:c,onTheaterMode:d,onOpenLinkInNewWindow:s.EP}),o.createElement("div",{className:"videoContainerSizer"})),o.createElement("div",{className:"BroadcastDetailsSection"},o.createElement(n.BroadcastDetails,{steamID:h,onLocalStreamChange:m,bVerticalBroadcastChat:p})))}))},14692:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BroadcastDetails:()=>Eo,LinkOverlay:()=>fo,default:()=>mo});var o=a(34629),n=a(83957),s=a.n(n),r=a(89193),i=a(41230),l=a(63696),c=a(4746),d=a(98186),m=a(93138),p=a(65718),u=a(78476),h=a(36243);class g extends l.Component{m_elCanvas;m_Context;m_schUpdate=new h.LU;m_bSetupComplete=!1;componentDidMount(){0==this.props.updateRate&&this.updateCanvas()}componentWillUnmount(){this.m_schUpdate.Cancel()}componentDidUpdate(){this.updateCanvas()}BindCanvasRef(e){this.m_elCanvas=e}updateCanvas(){if(null==this.props.elementRef||null==this.m_elCanvas||this.m_bSetupComplete)return;let e=this.props.scaleFactor||[1,1],t=this.props.elementRef,a=this.props.updateRate;this.m_Context=this.m_elCanvas.getContext("2d");let o=Math.floor(this.m_elCanvas.clientWidth/this.props.reductionFactor),n=Math.floor(this.m_elCanvas.clientHeight/this.props.reductionFactor);this.m_elCanvas.width=o,this.m_elCanvas.height=n,this.props.blurAmount>0&&(this.m_Context.filter="blur("+this.props.blurAmount+"px)");let s=()=>{this.m_Context.drawImage(t,0,0,o*e[0],n*e[1]),a>0&&this.m_schUpdate.Schedule(a,s)};s(),this.m_bSetupComplete=!0}render(){return l.createElement("canvas",{id:this.props.id,className:this.props.className,ref:this.BindCanvasRef,width:this.props.width,height:this.props.height})}}(0,o.Cg)([u.oI],g.prototype,"BindCanvasRef",null),(0,o.Cg)([u.oI],g.prototype,"updateCanvas",null);var _=a(6984),S=a(93067),C=a(12937),v=a(71342),w=a(34298),b=a(36365);function E(e,t){return(0,w.p)(e,function(e){return[e?.jsondata?.read_more_link?(0,C.wm)(e.jsondata.read_more_link).toLocaleLowerCase():void 0]}(t))}function I(e,t){return e=E(e,t)?(v.TS.IN_CLIENT?"steam://openurl_external/":"")+(0,w.E)(e):(0,C.NT)(e)}var f=a(46242),y=a(59301),A=a(87628),D=a(37093),B=a(63699),k=a(77286),T=a(75223),P=a(62770);l.createContext({bShowCompatInfo:!1});const G=e=>{const t=(a=e.category,L[a]||k.WX$);var a;return l.createElement("div",{className:(0,B.A)(T.SteamDeckCompatInfo,e.className)},l.createElement(k.lRD,null),l.createElement(t,{className:T.SteamDeckCompatIcon}))},L={1:k.jIP,2:k.aVR,3:k.o5Q,0:k.WX$};var N=a(50863),R=a(94461),M=a(21949),O=a(75316),H=a(39013),F=a.n(H),V=a(6933),x=a.n(V);function U(e){const{appInfo:t}=e,a=(0,l.useRef)({include_trailers:!0}),[o]=(0,O.G6)(t?.id,(0,M.SW)(t?.type),a.current);if(!o)return null;const n=o.GetMicroTrailer();return n?l.createElement("video",{className:x().CapsuleMicroTrailer,loop:!0,muted:!0,autoPlay:!0,key:"mtv-"+n.strMP4URL},l.createElement("source",{src:n.strWebMURL,type:"video/webm"}),!v.TS.IN_CLIENT&&l.createElement("source",{src:n.strMP4URL,type:"video/mp4"})):!o.GetParentAppID()||1!=o.GetAppType()&&12!=o.GetAppType()?null:l.createElement(U,{appInfo:{id:o.GetParentAppID(),type:"game"}})}function W(e){const{item:t,strClassName:a,bMinimizePlatforms:o}=e,[n]=(0,O.G6)(t?.id,(0,M.SW)(t?.type),{include_platforms:!0});if(!n)return null;const s=n.GetPlatforms();if(o){let e=s.windows&&l.createElement("span",{title:(0,P.we)("#Platform_Windows")},l.createElement(k.Xz0,null));return(0,v.Pr)()&&s.mac?e=l.createElement("span",{title:(0,P.we)("#Platform_Mac")},l.createElement(k.kPc,null)):((0,v.CI)()||(0,v.Hn)()||(0,v.rf)())&&s.steamos_linux&&(e=l.createElement("span",{title:(0,P.we)("#Platform_Linux")},l.createElement(k.Qte,null))),e?l.createElement("span",{className:(0,B.A)(x().CapsulePlatform,a)},e):null}return l.createElement("span",{className:(0,B.A)(x().CapsulePlatform,a)},s.windows&&l.createElement("span",{title:(0,P.we)("#Platform_Windows")},l.createElement(k.Xz0,null)),s.mac&&l.createElement("span",{title:(0,P.we)("#Platform_Mac")},l.createElement(k.kPc,null)),s.steamos_linux&&l.createElement("span",{title:(0,P.we)("#Platform_Linux")},l.createElement(k.Qte,null)),s.vr_support?.vrhmd&&l.createElement("span",{title:(0,P.we)("#Platform_VR")},l.createElement(k.VR,null)))}var z=a(41695),j=a(9646),X=a(40222),Z=a(13552);var Q;function Y(e){switch(e){case"primary":return Q.k_ePrimary;case"featured":return Q.k_eFeatured;case"default_featured":return Q.k_eDefaultFeatured;default:return Q.k_eGeneral}}!function(e){e[e.k_ePrimary=3]="k_ePrimary",e[e.k_eFeatured=2]="k_eFeatured",e[e.k_eDefaultFeatured=1]="k_eDefaultFeatured",e[e.k_eGeneral=0]="k_eGeneral"}(Q||(Q={}));class q{constructor(){(0,r.Gn)(this)}accountid;steamid;hub_popular;popular;relay_broadcast_id;rowversion;thumbnail_http_address;nAppIDVOD;title=void 0;viewer_count=void 0;whitelist_rank;gamedata_subtitle=void 0;store_title;left_panel;right_panel;snr;broadcast_chat_visibility;default_selection_priority=Q.k_eGeneral;current_selection_priority=Q.k_eGeneral}(0,o.Cg)([r.sH],q.prototype,"title",void 0),(0,o.Cg)([r.sH],q.prototype,"viewer_count",void 0),(0,o.Cg)([r.sH],q.prototype,"gamedata_subtitle",void 0),(0,o.Cg)([r.sH],q.prototype,"current_selection_priority",void 0);function K(e){return Boolean(e&&e.thumbnail_http_address)}class J{constructor(){(0,r.Gn)(this)}static s_GlobalStore;m_inFlightRequests=new Map;m_lookupKeyToEmbedStreamDef=new Map;m_lookupStreams=new Map;m_playReadyStream=new Map;m_bMapHasStartedVideo=new Map;m_mapBroadcastChecked=new Map;m_pageChatStatus="hide";m_streamChatStatus="hide";m_bUserChatExpanded=void 0;m_bUserPreferenceHideBroadcastByDefault=void 0;m_bCollapsed=void 0;m_setStreamChangedListeners=new Set;m_bUseFakeData=!1;m_onLoadContextCall=new Map;BHasStreams(e){const t=this.GetStreams(e);return Boolean(t&&t.length>0)}AddCallbackOnNewContext(e,t,a){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),{name:t,fnCallback:a})}ClearCallbackOnNewContext(e){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),null)}GetPlayReadyStream(e){let t=this.GetStreamsLookupKeyFromDef(e);return this.m_playReadyStream.get(t)}BIsEmbeddedBroadcastHiddenByDefaultUserSettings(){return Boolean(this.m_bUserPreferenceHideBroadcastByDefault)}BIsEmbeddedStreamCollapsed(){return Boolean(this.m_bCollapsed)}SetEmbeddedStreamCollapsed(e){this.m_bCollapsed!=e&&(this.m_bCollapsed=e)}GetConcurrentStreams(e){const t=this.GetStreams(e);return t?t.filter((e=>K(e))).length:0}GetChatVisibility(){return"remove"===this.m_pageChatStatus||"remove"===this.m_streamChatStatus?"remove":void 0!==this.m_bUserChatExpanded?this.m_bUserChatExpanded?"show":"hide":"show"===this.m_pageChatStatus?"show":"hide"===this.m_pageChatStatus||"hide"===this.m_streamChatStatus?"hide":"show"}ToggleChatVisibility(){const e=this.GetChatVisibility();"remove"!==e&&(this.m_bUserChatExpanded="hide"===e)}DebugDumpContextAndAvailableContext(e){console.log("Requested context",this.GetStreamsLookupKeyFromDef(e)),console.log("Available context count: ",this.m_lookupStreams.size),this.m_lookupStreams.forEach(((e,t)=>{console.log(t,e.length)}))}GetStreams(e){const t=this.GetStreamsLookupKeyFromDef(e);return this.m_lookupStreams.get(t)}GetBroadcastURL(e){let t=null;return t=e.steamid?new z.b(e.steamid):z.b.InitFromAccountID(e.accountid),v.TS.COMMUNITY_BASE_URL+"broadcast/watch/"+t.ConvertTo64BitString()}BIsAppStreaming(e){let t=!1;return this.m_lookupStreams.forEach((a=>{t||(t=Boolean(a)&&a.some((t=>m.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID===e)))})),t}GetStreamsForAppID(e){const t=new Array;return this.m_lookupStreams.forEach((a=>{a?.forEach((a=>{m.BroadcastWatchStore.GetOrCreateBroadcastInfo(a.steamid).m_nAppID===e&&t.push(a)}))})),t}AddStreamChangedListener(e){this.m_setStreamChangedListeners.add(e)}RemoveStreamChangedListener(e){this.m_setStreamChangedListeners.delete(e)}async LoadBIsEmbeddedBroadcastHidden(e){if(void 0===this.m_bUserPreferenceHideBroadcastByDefault){let t=(0,v.Tc)("broadcastuser","application_config");if(!t)try{let a=v.TS.STORE_BASE_URL+"broadcast/ajaxgetuserbroadcastpreferences",o=await s().get(a,{params:{},cancelToken:e.token});t=o.data}catch(e){console.log("LoadBIsEmbeddedBroadcastHidden: "+(0,Z.H)(e).strErrorMsg),t={bHideStoreBroadcast:!1}}(0,r.h5)((()=>{this.m_bUserPreferenceHideBroadcastByDefault=t.bHideStoreBroadcast,this.m_bCollapsed=t.bHideStoreBroadcast}))}return this.m_bUserPreferenceHideBroadcastByDefault}async SetupEmbeddableVOD(e,t){this.m_bUseFakeData=!1,this.m_streamChatStatus="remove",await p.A.Get().QueueAppRequest(e.nAppIDVOD,{include_assets:!0,include_trailers:!0});const a=p.A.Get().GetApp(e.nAppIDVOD),o=new q;if(o.accountid=0,o.nAppIDVOD=e.nAppIDVOD,o.default_selection_priority=Q.k_ePrimary,o.current_selection_priority=Q.k_ePrimary,o.thumbnail_http_address=a?.GetAssets().GetHeaderURL()||"",o.title=a?.GetName()||"",this.GetStreams(e).unshift(o),t){const t=this.GetStreamsLookupKeyFromDef(e);this.m_playReadyStream.set(t,o)}}async HintLoadEmbeddablePreviewStreams(e){let t=null,a={eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0};try{return t=await s().get(v.TS.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpreview",{params:a}),this.HandleHintLoadBroadcastResponse(e,t.data)}catch(e){let t=(0,Z.H)(e);console.error("HintLoadEmbeddablePreviewStreams hit error loading: "+t.strErrorMsg,t)}return[]}async HintLoadEmbeddableStreams(e){let t=this.MapEmbeddableStreamToRequest(e),a=this.GetStreamsLookupKeyFromParam(t);if(!this.m_inFlightRequests.has(a)){this.m_lookupKeyToEmbedStreamDef.set(a,e);const o=this.InternalHintLoadEmbeddableStreams(e,t);this.m_inFlightRequests.set(a,o)}return this.m_inFlightRequests.get(a)}ValidateBroadcastPageStreamers(e){const t=e;return!!(t&&"number"==typeof t.success&&t.filtered&&Array.isArray(t.filtered)&&t.broadcast_chat_visibility)&&(0==t.filtered.length||"string"==typeof t.filtered[0].accountid)}async InternalHintLoadEmbeddableStreams(e,t){let a=(0,v.Tc)("broadcast_available_for_page","application_config");if(this.ValidateBroadcastPageStreamers(a))return this.HandleHintLoadBroadcastResponse(e,a);try{let a=null;return a=await s().get(v.TS.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpage",{params:t}),this.HandleHintLoadBroadcastResponse(e,a.data)}catch(e){let t=(0,Z.H)(e);console.error("HintLoadEmbeddableStreams hit error loading: "+t.strErrorMsg,t)}return[]}async HandleHintLoadBroadcastResponse(e,t){this.m_bUseFakeData=!1,e.bIsPreview&&(t?.filtered?.length>0?this.ExtractBroadcastPrioritiesFromPartnerEventForPreview(e.event,t.filtered):(t={filtered:[{}],success:1,total_count:1,err_msg:"",broadcast_chat_visibility:"hide"},this.m_bUseFakeData=!0)),t.broadcast_chat_visibility&&(this.m_pageChatStatus=t.broadcast_chat_visibility);const a=new Array;(0,r.h5)((()=>{t.filtered.forEach((e=>{if(!e.steamid){const t=z.b.InitFromAccountID(e.accountid);e.steamid=t.ConvertTo64BitString()}const t=m.BroadcastWatchStore.GetOrCreateBroadcastInfo(e.steamid),o=e.appid?Number(e.appid):m.fO;t.m_nAppID=o,t.m_strAppId=""+o,void 0===e.current_selection_priority&&(e.current_selection_priority=e.default_selection_priority),o!=m.fO&&a.push(o)}))}));const o=this.GetStreamsLookupKeyFromDef(e);if(this.m_lookupStreams.set(o,t.filtered),this.m_onLoadContextCall.has(o)){const e=this.m_onLoadContextCall.get(o);e?("dev"==v.TS.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller using callback to "+e.name),e.fnCallback()):"dev"==v.TS.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller, however callback is since cleared")}const n=this.GetStreams(e);return await this.AutoStartVideoStream(e,n),n}ExtractBroadcastPrioritiesFromPartnerEventForPreview(e,t){const a=Array.from(e.jsondata.broadcast_whitelist??[]),o=Array.from(e.jsondata.broadcast_priority??[]),n=new Map;for(let e=0;e<a.length&&!(e>=o.length);e++)n.set(a[e],Y(o[e]));t.forEach((e=>{const t=Number(e.accountid);n.has(t)&&(e.current_selection_priority=n.get(t))}))}async AutoStartVideoStream(e,t){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.get(a))return null;if(this.m_bUseFakeData){if(!this.m_playReadyStream.get(a)){const e={accountid:0,thumbnail_http_address:"",default_selection_priority:Q.k_eGeneral,current_selection_priority:Q.k_eGeneral};this.m_playReadyStream.set(a,e)}return this.m_playReadyStream}return this.PlayFromAvailableStreams(e,t)}async PlayFromAvailableStreams(e,t,a=!1){const o=new Set;for(;;){const n=t.filter((e=>!(o.has(e)||a&&e.nAppIDVOD))),s=this.GetAutoStartStream(n);if(!s)return null;if(await this.AttemptToPlayStream(e,s))return s;o.add(s)}}async AttemptToPlayStream(e,t){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.set(a,!0),this.m_mapBroadcastChecked.has(t.accountid)||this.m_mapBroadcastChecked.set(t.accountid,this.InternalAttemptToPlayStream(e,t)),t.nAppIDVOD)this.m_playReadyStream.set(a,t);else{const o=await this.m_mapBroadcastChecked.get(t.accountid);if(1!=o?.success)return null;t.steamid=o.steamid,this.m_playReadyStream.set(a,t),this.GetConcurrentStreams(e)>1?this.m_streamChatStatus="hide":this.m_streamChatStatus=t.broadcast_chat_visibility,this.m_setStreamChangedListeners.forEach((e=>e(t)));!async function(e,t,a){if(e>0&&7!=e&&a){let o=new URLSearchParams;o.append("page_action",""+t),o.append("snr",a),s().post(v.TS.STORE_BASE_URL+"ajaxreportproductaction/"+e+"/",o)}}(m.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID,1,t.snr)}return t}async InternalAttemptToPlayStream(e,t){this.GetStreamsLookupKeyFromDef(e);let a=null;try{const e=v.TS.STORE_BASE_URL+"broadcast/ajaxcheckbroadcast";let o={broadcastaccountid:t.accountid,viewer_token:m.BroadcastWatchStore.GetViewerToken(),origin:self.origin};return a=await s().get(e,{params:o}),a.data}catch(e){let t=(0,Z.H)(e);console.error("Broadcast.AttemptToPlayStream: "+t.strErrorMsg,t)}return null}GetAutoStartStream(e){if(!e)return null;const t=e.filter((e=>K(e))),a=t.reduce(((e,t)=>Math.max(e,$(t))),0),o=t.filter((e=>$(e)===a));if(0===o.length)return null;return o[Math.floor(Math.random()*o.length)]}MapEmbeddableStreamToRequest(e){return{appid:e.appid,promotionName:e.bIsPreview?"preview":e.promotionName,clanid:e.clanid?e.clanid:e.event?e.event.clanSteamID.GetAccountID():void 0,listid:e.listid,subid:e.subid,bundleid:e.bundleid,eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0,test:false,cc:v.TS.COUNTRY,l:v.TS.LANGUAGE,hubtype:e.event?.GetContentHubType(),hubcategory:e.event?.GetContentHubCategory(),hubtagid:e.event?.GetContentHubTag(),tabuniqueid:e.tabuniqueid,tabfilter:e.tabfilter,rt_now_override_test:j.HD.BHasTimeOverride()?j.HD.GetTimeNowWithOverride():void 0}}GetStreamsLookupKeyFromDef(e){return this.GetStreamsLookupKeyFromParam(this.MapEmbeddableStreamToRequest(e))}GetStreamsLookupKeyFromParam(e){return JSON.stringify(e)}static Get(){return J.s_GlobalStore||(J.s_GlobalStore=new J,"dev"==v.TS.WEB_UNIVERSE&&(window.g_BroadcastEmbeddableStore=J.s_GlobalStore),J.s_GlobalStore.Init()),J.s_GlobalStore}Init(){}}function $(e){return e.current_selection_priority||Q.k_eGeneral}(0,o.Cg)([r.sH],J.prototype,"m_lookupStreams",void 0),(0,o.Cg)([r.sH],J.prototype,"m_playReadyStream",void 0),(0,o.Cg)([r.sH],J.prototype,"m_pageChatStatus",void 0),(0,o.Cg)([r.sH],J.prototype,"m_streamChatStatus",void 0),(0,o.Cg)([r.sH],J.prototype,"m_bUserChatExpanded",void 0),(0,o.Cg)([r.sH],J.prototype,"m_bUserPreferenceHideBroadcastByDefault",void 0),(0,o.Cg)([r.sH],J.prototype,"m_bCollapsed",void 0),(0,o.Cg)([r.XI],J.prototype,"HintLoadEmbeddablePreviewStreams",null),(0,o.Cg)([r.XI],J.prototype,"AttemptToPlayStream",null);new X.T;var ee,te=a(74078),ae=a(82020);!function(e){e[e.AnyController=0]="AnyController",e[e.XboxController=1]="XboxController",e[e.Ps3Controller=2]="Ps3Controller",e[e.Ps4Controller=3]="Ps4Controller",e[e.Ps5Controller=4]="Ps5Controller",e[e.SwitchController=5]="SwitchController",e[e.SteamController=6]="SteamController",e[e.SteamDeckNeptune=7]="SteamDeckNeptune",e[e.SteamDeckGalileo=8]="SteamDeckGalileo"}(ee||(ee={}));const oe={any_controller:ee.AnyController,xbox_controller:ee.XboxController,ps3_controller:ee.Ps3Controller,ps4_controller:ee.Ps4Controller,ps5_controller:ee.Ps5Controller,switch_controller:ee.SwitchController,steam_controller:ee.SteamController,steam_deck_neptune:ee.SteamDeckNeptune,steam_deck_galileo:ee.SteamDeckGalileo},ne="unUserdataVersion";class se{m_setWishList=new Set;m_wishlistInOrder=Array();m_setOwnedPackages=new Set;m_setOwnedApps=new Set;m_setFollowedApps=new Set;m_setExcludedTagsIds=new Set;m_setExcludedContentDescriptors=new Set;m_setRecommendedApps=new Set;m_recAppInOrder=new Array;m_mapIgnoredApps=new Map;m_mapIgnoredPackages=new Map;m_setCuratorsFollowed=new Set;m_setCuratorsIgnored=new Set;m_bShowFilteredUserReviewScores=!0;m_setPreferredPlatforms=new Set;m_bAllowAppImpressions=!1;m_primaryLanguage=-1;m_secondaryLanguages=new Set;m_setRecommendedTags=new Set;m_mapRecommendingCuratorsForApp=new Map;m_setPackagesInCart=new Set;m_setAppsInCart=new Set;m_nCartLineItemCount=0;m_rgHardwareUsed=new Set;m_bIsLoaded=!1;m_promise;m_bAjaxInFlight=!1;BIsLoaded(){return this.m_bIsLoaded}GetWishlistGamesInUserOrder(){return this.m_wishlistInOrder}GetWishlistGameCount(){return this.m_setWishList.size}GetRecommendedGamesInIRPriorityOrder(){return this.m_recAppInOrder}GetFollowedCuratorCount(){return this.m_setCuratorsFollowed.size}GetFollowedCuratorsAccountID(){return Array.from(this.m_setCuratorsFollowed)}GetPackagesInCartCount(){return this.m_setPackagesInCart.size}GetAppInCartCount(){return this.m_setAppsInCart.size}GetCartLineItemCount(){return this.m_nCartLineItemCount}GetIgnoredAppsCount(){return this.m_mapIgnoredApps.size}BIsFollowingCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsFollowed.has(t)}BIsFollowingCreator(e){return this.BIsFollowingCurator(e)}BIsIgnoringCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsIgnored.has(t)}get ExcludedContentDescriptor(){return Array.from(this.m_setExcludedContentDescriptors)}BExcludesTag(e){return e.some((e=>this.m_setExcludedTagsIds.has(Number(e.tagid))))}BExcludeTagIDs(e){return e.some((e=>this.m_setExcludedTagsIds.has(e)))}GetExcludedTagsSortedByID(){return Array.from(this.m_setExcludedTagsIds).sort()}BExcludesContentDescriptor(e){return e.some((e=>this.m_setExcludedContentDescriptors.has(e)))}BIncludesContentDescriptor(e){return!this.m_setExcludedContentDescriptors.has(e)}BIsGameWishlisted(e){return this.m_setWishList.has(Number(e))}BIsGameRecommended(e){return this.m_setRecommendedApps.has(Number(e))}BIsGameIgnored(e){return this.m_mapIgnoredApps&&this.m_mapIgnoredApps.has(e)}BIsPackageIgnored(e){return this.m_mapIgnoredPackages?.has(e)}BIsGameOwned(e){return this.m_setOwnedApps.has(Number(e))}BOwnsApp(e){return this.m_setOwnedApps.has(Number(e))}BFollowsApp(e){return this.m_setFollowedApps.has(Number(e))}BOwnsPackage(e){return this.m_setOwnedPackages.has(Number(e))}BHasUsedHardware(e){return this.m_rgHardwareUsed.has(e)}BShowFilteredUserReviewScores(){return this.m_bShowFilteredUserReviewScores}BAppImpressionsAllowed(){return this.m_bAllowAppImpressions}GetPrimaryLanguage(){return this.m_primaryLanguage}GetSecondaryLanguages(){return this.m_secondaryLanguages}BIsAnyLanguageEnabled(e){return null==this.m_primaryLanguage||(this.m_primaryLanguage<=-1||31<=this.m_primaryLanguage||e.some((e=>this.m_primaryLanguage===e||this.m_secondaryLanguages.has(e))))}GetRecommendedTags(){return this.m_setRecommendedTags}BIsAjaxInFlight(){return this.m_bAjaxInFlight}BIsAppRecommendedBySomeCurator(e){return this.m_mapRecommendingCuratorsForApp.has(e)}GetRecommendingCuratorsForApp(e){return this.m_mapRecommendingCuratorsForApp.get(e)}GetOwnedApps(){return this.m_setOwnedApps}GetWishlistedApps(){return this.m_setWishList}async HintLoad(){return this.m_promise||(this.m_promise=this.InternalLoad()),this.m_promise}async InternalLoad(){let e=window.localStorage.getItem(ne)||"0",t={v:"0"==e?void 0:e,id:""+v.iA.accountid,cc:""+v.TS.COUNTRY,origin:self.origin},a=v.TS.STORE_BASE_URL+"dynamicstore/userdata/";try{let e=await s().get(a,{params:t,withCredentials:!0});e&&200==e.status&&(0,r.h5)((()=>{if(this.m_bIsLoaded=!0,e.data.rgCurators){this.m_setCuratorsFollowed=new Set;for(const t in e.data.rgCurators)this.m_setCuratorsFollowed.add(Number(t))}if(e.data.rgCuratorsIgnored&&(this.m_setCuratorsIgnored=new Set(e.data.rgCuratorsIgnored.map((e=>Number(e))))),e.data.rgWishlist&&(this.m_wishlistInOrder=e.data.rgWishlist.map((e=>Number(e))),this.m_setWishList=new Set(e.data.rgWishlist.map((e=>Number(e))))),e.data.rgFollowedApps&&(this.m_setFollowedApps=new Set(e.data.rgFollowedApps.map((e=>Number(e))))),e.data.rgOwnedApps&&(this.m_setOwnedApps=new Set(e.data.rgOwnedApps.map((e=>Number(e))))),e.data.rgOwnedPackages&&(this.m_setOwnedPackages=new Set(e.data.rgOwnedPackages.map((e=>Number(e))))),e.data.rgIgnoredApps){const t=e.data.rgIgnoredApps;this.m_mapIgnoredApps=new Map;for(const e in t)this.m_mapIgnoredApps.set(Number(e),Number(t[e]))}if(e.data.rgIgnoredPackages){const t=e.data.rgIgnoredPackages;this.m_mapIgnoredPackages=new Map;for(const e in t)this.m_mapIgnoredPackages.set(Number(e),Number(t[e]))}if(e.data.rgExcludedTags&&(this.m_setExcludedTagsIds=new Set(e.data.rgExcludedTags.map((e=>Number(e.tagid))))),e.data.rgExcludedContentDescriptorIDs&&(this.m_setExcludedContentDescriptors=new Set(e.data.rgExcludedContentDescriptorIDs.map((e=>Number(e))))),e.data.rgRecommendedApps&&(this.m_recAppInOrder=e.data.rgRecommendedApps.map((e=>Number(e))),this.m_setRecommendedApps=new Set(e.data.rgRecommendedApps.map((e=>Number(e))))),e.data.rgPreferredPlatforms&&(this.m_setPreferredPlatforms=new Set(e.data.rgPreferredPlatforms)),e.data.bAllowAppImpressions&&(this.m_bAllowAppImpressions=e.data.bAllowAppImpressions),this.m_bShowFilteredUserReviewScores=!!e.data.bShowFilteredUserReviewScores,void 0!==e.data.rgPrimaryLanguage&&(this.m_primaryLanguage=e.data.rgPrimaryLanguage),e.data.rgSecondaryLanguages&&(this.m_secondaryLanguages=new Set(e.data.rgSecondaryLanguages)),e.data.rgRecommendedTags&&(this.m_setRecommendedTags=new Set(e.data.rgRecommendedTags.map((e=>e.tagid)))),e.data.rgAppsInCart&&(this.m_setAppsInCart=new Set(e.data.rgAppsInCart)),e.data.rgPackagesInCart&&(this.m_setPackagesInCart=new Set(e.data.rgPackagesInCart)),e.data.nCartLineItemCount&&(this.m_nCartLineItemCount=e.data.nCartLineItemCount),e.data.rgCurations)for(const t of Object.keys(e.data.rgCurations)){const a=[];for(const o of Object.keys(e.data.rgCurations[t]))0===e.data.rgCurations[t][o]&&a.push(Number(o));this.m_mapRecommendingCuratorsForApp.set(Number(t),a)}if(e.data.rgHardwareUsed)for(const t of e.data.rgHardwareUsed){const e=oe[t];e&&this.m_rgHardwareUsed.add(e)}}))}catch(e){let t=(0,Z.H)(e);console.error("CDynamicStore.InternalLoad",t.strErrorMsg,t)}return this}async UpdateFollowOrIgnoreCurator(e,t,a){let o=v.TS.STORE_BASE_URL+"curators/"+(t?"ajaxfollow/":"ajaxignore/");const n=e.GetAccountID(),r=new FormData;r.append("clanid",""+n),r.append("sessionid",v.TS.SESSIONID),r.append(t?"follow":"ignore",a?"1":"0");let i=await s().post(o,r,{withCredentials:!0});if(i&&200==i.status){this.InvalidateCache();const e=t?this.m_setCuratorsFollowed:this.m_setCuratorsIgnored;a?e.add(n):e.delete(n)}return i.data}async UpdateAppIgnore(e,t,a=0){let o=v.TS.STORE_BASE_URL+"recommended/ignorerecommendation";const n=new FormData;n.append("sessionid",v.TS.SESSIONID),n.append("appid",""+e),n.append("remove",t?"0":"1"),n.append("snr",v.TS.SNR),n.append("ignore_reason",""+a);try{this.m_bAjaxInFlight=!0;let i=await s().post(o,n,{withCredentials:!0});return i&&200==i.status&&(0,r.h5)((()=>{this.InvalidateCache(),t?this.m_mapIgnoredApps.set(e,a):this.m_mapIgnoredApps.delete(e)})),this.m_bAjaxInFlight=!1,i.data}catch(e){let t=(0,Z.H)(e);console.error("UpdateAppIgnore",t.strErrorMsg,t)}return this.m_bAjaxInFlight=!1,{success:2}}async UpdateGameWishlist(e,t,a,o){let n=v.TS.STORE_BASE_URL+"api/"+(t?"addtowishlist":"removefromwishlist");const r=new FormData;r.append("appid",""+e),r.append("sessionid",v.TS.SESSIONID),a&&r.append("snr",a),this.m_bAjaxInFlight=!0;let i=await s().post(n,r,{withCredentials:!0,cancelToken:o?o.token:void 0});if(this.m_bAjaxInFlight=!1,o&&o.token.reason)return{success:52};if(i.data.success=1==i.data.success?1:2,1==i.data.success)if(this.InvalidateCache(),e=Number(e),t)this.m_setWishList.has(e)||this.m_wishlistInOrder.push(e),this.m_setWishList.add(e);else{if(this.m_setWishList.has(e)){const t=this.m_wishlistInOrder.findIndex((t=>t==e));-1!=t&&this.m_wishlistInOrder.splice(t,1)}this.m_setWishList.delete(e)}return i.data}async AddToCart(e,t,a,o,n,r,i){if(void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart){let e;return n&&(e=ae.A.ParseSNR(n)),window.AddItemToCart(t,r,e),!0}const l=new FormData;l.append("action","add_to_cart"),r?l.append("bundleid",r.toString()):l.append("subid",""+t),n&&l.append("snr",n),l.append("sessionid",v.TS.SESSIONID),l.append("quantity","1");const c=(0,te.uX)(e);e.preventDefault();try{await s().post(a,l,{withCredentials:!0}),this.InvalidateCache(),i?.fnSetURL?i.fnSetURL(o):c.location.href=o}catch(e){return console.log("HandleOnAddToCart",e),!1}return!0}async AddLicenseForFreeGame(e){if(this.BOwnsApp(e))return 1;try{const t=new FormData;t.append("sessionid",v.TS.SESSIONID),t.append("appid",""+e),t.append("cc",v.TS.COUNTRY);let a=v.TS.STORE_BASE_URL+"actions/addappformastersubscription",o=await s().post(a,t,{withCredentials:!0});if(this.InvalidateCache(),!o.data.success||1!==o.data.success)return o.data.success?o.data.success:2;this.m_setOwnedApps.add(Number(e))}catch(e){let t=(0,Z.H)(e);return console.log("AddLicense request failed:",t.strErrorMsg,t),2}return 1}async UpdateFollowingApp(e,t){try{const a=v.TS.STORE_BASE_URL+"explore/followgame",o=new FormData;o.append("appid",""+e),o.append("sessionid",v.TS.SESSIONID),t||o.append("unfollow","1");const n=await s().post(a,o,{withCredentials:!0});if(!n.data)return 2;this.InvalidateCache(),t?this.m_setFollowedApps.add(Number(e)):this.m_setFollowedApps.delete(Number(e))}catch(e){return console.log("Follow game request failed"),2}return 1}BHasPlatformPreferenceSet(){return this.m_setPreferredPlatforms.size>0&&this.m_setPreferredPlatforms.size<3}BIsPreferredPlatform(e){return this.m_setPreferredPlatforms.has(e)}InvalidateCache(){window.localStorage.setItem(ne,(Number.parseInt(window.localStorage.getItem(ne)||"0")+1).toString())}static s_globalSingletonStore;static Get(){return se.s_globalSingletonStore||(se.s_globalSingletonStore=new se,"dev"==v.TS.WEB_UNIVERSE&&(window.DUS=se.s_globalSingletonStore)),se.s_globalSingletonStore}constructor(){(0,r.Gn)(this)}}(0,o.Cg)([r.sH],se.prototype,"m_setWishList",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setOwnedPackages",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setOwnedApps",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setFollowedApps",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setExcludedTagsIds",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setExcludedContentDescriptors",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setRecommendedApps",void 0),(0,o.Cg)([r.sH],se.prototype,"m_mapIgnoredApps",void 0),(0,o.Cg)([r.sH],se.prototype,"m_mapIgnoredPackages",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setCuratorsFollowed",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setCuratorsIgnored",void 0),(0,o.Cg)([r.sH],se.prototype,"m_bShowFilteredUserReviewScores",void 0),(0,o.Cg)([r.sH],se.prototype,"m_primaryLanguage",void 0),(0,o.Cg)([r.sH],se.prototype,"m_secondaryLanguages",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setRecommendedTags",void 0),(0,o.Cg)([r.sH],se.prototype,"m_mapRecommendingCuratorsForApp",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setPackagesInCart",void 0),(0,o.Cg)([r.sH],se.prototype,"m_setAppsInCart",void 0),(0,o.Cg)([r.sH],se.prototype,"m_nCartLineItemCount",void 0),(0,o.Cg)([r.sH],se.prototype,"m_rgHardwareUsed",void 0),(0,o.Cg)([r.sH],se.prototype,"m_bAjaxInFlight",void 0),(0,o.Cg)([r.EW],se.prototype,"ExcludedContentDescriptor",null),(0,o.Cg)([r.XI],se.prototype,"UpdateAppIgnore",null);var re=a(82149);function ie(){return l.createElement("div",{className:re.bordered_live_stream_icon},(0,P.we)("#home_page_live_broadcast"))}function le(e){const{appids:t,hide_status_banners:a}=e,o=t.every((e=>se.Get().BOwnsApp(e))),n=t.every((e=>se.Get().BIsGameWishlisted(e))),s=t.some((e=>{const t=p.A.Get().GetApp(e);return t&&function(e,t){if(t||e){const a=t||e;return a&&J.Get().BIsAppStreaming(a)}return!1}(e,t?.GetParentAppID())})),r=o&&!a,i=n&&!a;return l.createElement("div",{className:(0,B.A)(x().CapsuleDecorators,"CapsuleDecorators")},r&&l.createElement("span",{className:(0,B.A)(x().Banner,x().Blue)},l.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUNDNzBFNTUyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUNDNzBFNTYyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Q0M3MEU1MzIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0M3MEU1NDIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv3vUKAAAAAlSURBVHjaYvz//z8DsYARpFhISAivjnfv3jGSp3jUGeQ4AyDAADZHNe2nyOBrAAAAAElFTkSuQmCC",className:x().LinesImg}),(0,P.we)("#Sale_InLibrary")),i&&l.createElement("span",{className:x().Banner},l.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTM3OEVDNTUyMUM0MTFFNDgxN0ZEN0MzNjYzNzcxOTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTM3OEVDNTYyMUM0MTFFNDgxN0ZEN0MzNjYzNzcxOTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMzc4RUM1MzIxQzQxMUU0ODE3RkQ3QzM2NjM3NzE5NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMzc4RUM1NDIxQzQxMUU0ODE3RkQ3QzM2NjM3NzE5NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps9jzFQAAACPSURBVHjaYvz//z+DkJDQdQYGhpsMCMAKxMZAHPXu3bt9cFGQYkFBwQ0gGoaBfAEgzgfibUDsBxNnYsAOfgKxJBBvAeIZMEEWZBVA52xA5gOdUAEUc8NQDBTkBEoGMOAByCYLAjUsRzM5AKtioMQzIEW0ydjcHIBTMSE3M0Ij5RKQfQ6HGiOgIXogBkCAAQDGVT+0v+n6EQAAAABJRU5ErkJggg==",className:x().LinesImg}),(0,P.we)("#Sale_OnWishlist")),s&&l.createElement(ie,null))}const ce={include_assets:!0,include_release:!0,include_platforms:!0,include_tag_count:20,include_basic_info:!0,include_trailers:!0,include_reviews:!0,include_screenshots:!0,include_supported_languages:!0};function de(e){return"game"===e||"dlc"===e||"software"===e||"music"===e||"application"===e||"demo"===e||"hardware"===e||"mod"===e||"video"==e||"beta"===e||"advertising"===e}var me=a(20590),pe=a(67216);const ue=l.createContext({AddImpression:()=>{console.log("Impression Tracking not enabled")},BIsValid:()=>!1});function he(e){const{appID:t,feature:a,depth:o,children:n}=e,s=(0,pe.ru)(a,o),r=l.useContext(ue),i=l.useCallback((()=>t&&r.AddImpression(t,s)),[r,t,s]);return l.createElement(me.Y,{onEnter:i},n)}function ge(e){return"bundle"==e?"bundle":"sub"==e?"sub":de(e)?"app":null}const _e=e=>{const{appid:t}=e,a=l.createElement("div",{className:"ImpressionTrackedElement"},e.children);return t?l.createElement(he,{appID:t},a):a};class Se{static instance_count=0}class Ce{appid;demo_appid;demo_package_id;constructor(e){this.appid=e.appid,this.demo_appid=e.demo_appid,this.demo_package_id=0}}class ve{constructor(){(0,r.Gn)(this)}static s_DemoEventStore;m_mapAppToDemoInfo=new Map;m_mapAppIDToLoadPromise=new Map;static Get(){return ve.s_DemoEventStore||(ve.s_DemoEventStore=new ve,ve.s_DemoEventStore.Init()),ve.s_DemoEventStore}BHasDemoEventInfo(e){return this.m_mapAppToDemoInfo.has(e)}GetDemoEventInfo(e){return this.m_mapAppToDemoInfo.get(e)}GetAllDemoInfo(){return this.m_mapAppToDemoInfo}BHasDemoAppID(e){return Boolean(this.m_mapAppToDemoInfo.get(e)?.demo_appid)}GetNumDemos(){let e=0;return this.m_mapAppToDemoInfo.forEach((t=>{t.demo_appid>0&&(e+=1)})),e}Init(){let e=(0,v.Tc)("demoeventstore","application_config");this.ValidateStoreDefault(e)&&e.forEach((e=>{this.m_mapAppToDemoInfo.set(e.appid,new Ce(e))}))}ValidateStoreDefault(e){const t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&"number"==typeof t[0].appid}async LoadAppIDsBatch(e,t){const a=new Array,o=new Array;if(e.forEach((e=>{this.m_mapAppIDToLoadPromise.has(e)?o.push(this.m_mapAppIDToLoadPromise.get(e)):this.m_mapAppToDemoInfo.has(e)||a.push(e)})),a.length>0){const e=this.InternalLoadAppIDsBatch(a,t);a.forEach((t=>this.m_mapAppIDToLoadPromise.set(t,e))),o.push(e)}return(await Promise.all(o)).every((e=>!!e))}async InternalLoadAppIDsBatch(e,t){try{for(e=e.sort();e.length>0;){const a=50,o=Math.min(a,e.length),n=e.slice(0,o);e=e.slice(o);const i=v.TS.STORE_BASE_URL+"saleaction/ajaxgetdemoevents",l=await s().get(i,{params:{appids:n,cc:v.TS.COUNTRY||"US",origin:self.origin},cancelToken:t?t.token:void 0});1===l?.data?.success||42===l?.data?.success?(0,r.h5)((()=>{l?.data?.info?.length&&l.data.info.forEach((e=>{this.m_mapAppToDemoInfo.set(e.appid,new Ce(e))}));for(const e of n)this.m_mapAppToDemoInfo.has(e)||this.m_mapAppToDemoInfo.set(e,new Ce({appid:e})),this.m_mapAppIDToLoadPromise.delete(e)})):console.log("Failed to call ajaxgetdemoevents with response:"+l?.data?.err_msg)}return!0}catch(e){console.log("Failed to call ajaxgetdemoevents:"+e)}return!1}}(0,o.Cg)([r.sH.shallow],ve.prototype,"m_mapAppToDemoInfo",void 0),(0,o.Cg)([r.XI],ve.prototype,"Init",null),(0,o.Cg)([r.XI],ve.prototype,"LoadAppIDsBatch",null);a(60876),a(48608);class we{m_mapAppResults=new Map;m_mapAppCallbackList=new Map;m_mapAppResultsPromises=new Map;GetCompatabilityResultForApp(e){return this.m_mapAppResults.get(e)}BHasCompatabilityResultForApp(e){return this.m_mapAppResults.has(e)}GetCallbackForAppList(e){return this.m_mapAppCallbackList.has(e)||this.m_mapAppCallbackList.set(e,new h.lu),this.m_mapAppCallbackList.get(e)}AddCompatabilityResult(e){this.m_mapAppResults.set(e.appid,e),this.GetCallbackForAppList(e.appid).Dispatch(e)}async LoadAppCompabitilityResult(e){return!!this.m_mapAppResults.has(e)||(this.m_mapAppResultsPromises.has(e)||this.m_mapAppResultsPromises.set(e,this.InternalLoadAppCompatability(e)),this.m_mapAppResultsPromises.get(e))}async InternalLoadAppCompatability(e){let t=null;try{const a={nAppID:e,l:v.TS.LANGUAGE,cc:v.TS.COUNTRY};let o=v.TS.STORE_BASE_URL+"saleaction/ajaxgetdeckappcompatibilityreport";const n=await s().get(o,{params:a,withCredentials:!0});if(200==n?.status&&1==n.data?.success&&n.data?.results)return this.AddCompatabilityResult(n.data.results),!0;t=(0,Z.H)(n)}catch(e){t=(0,Z.H)(e)}return console.error("CDeckVerifiedDetailsStore.InternalLoadAppCompatability failed: "+t?.strErrorMsg,t),!1}static s_Singleton;static Get(){return we.s_Singleton||(we.s_Singleton=new we,"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||(window.g_DeckVerifiedDetailStores=we.s_Singleton)),we.s_Singleton}constructor(){if(document.getElementById("application_config")){let e=(0,v.Tc)("deckcompatibility","application_config");we.ValidateCompatabilityResult(e)&&(this.AddCompatabilityResult(e),"dev"==v.TS.WEB_UNIVERSE&&console.log("CDeckCompatibilityDetailsStore compatability loaded: ",e))}}static ValidateCompatabilityResult(e){const t=e;return t&&"number"==typeof t.appid&&"number"==typeof t.resolved_category&&"object"==typeof t.resolved_items}}(0,o.Cg)([u.oI],we.prototype,"LoadAppCompabitilityResult",null);var be=a(97775),Ee=a(96665),Ie=a(15034),fe=a.n(Ie),ye=a(89096),Ae=a(7905),De=a(9404);function Be(e){const{results:t,appName:a,buttonProps:o,autoFocus:n,onOpenBlogPost:s}=e,[r,i]=l.useState(!1),c=l.useCallback((()=>r),[r]),d=l.useRef(),m=(0,v.Qn)();if(l.useEffect((()=>{i(d?.current?.scrollHeight>d?.current?.clientHeight)}),[]),!t)return null;const p=()=>{s?s():window.location.href=t.steam_deck_blog_url};let u=o??{},h=null;t.steam_deck_blog_url&&(u.onOptionsActionDescription=(0,P.we)("#SteamDeckVerified_ViewDeveloperPost"),u.onOptionsButton=p,h=l.createElement(ke,{blogURL:t.steam_deck_blog_url}));const g=-1!==t.resolved_items?.findIndex((e=>1==e.display_type));return t.resolved_items?.length?l.createElement(y.Z,{className:m?fe().CompatibilityDetailsContainer:fe().CompatibilityDetailsContainerDesktop,...u},l.createElement("div",null,l.createElement("div",{className:fe().DialogHeader},l.createElement("div",{className:fe().DialogTitle},(0,P.we)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),l.createElement("div",{className:fe().AppTitleCategory},l.createElement(Me,{category:t.resolved_category}))),l.createElement(Oe,{category:t.resolved_category,appName:a})),h,l.createElement("div",{className:fe().CompatibilityDetailsSeparator}),l.createElement(ye.Qg,{ref:d,className:c()?fe().CompatibilityDetailsInterior_Scroll:fe().CompatibilityDetailsInterior_NoScroll},l.createElement(y.Z,{autoFocus:n,focusableIfNoChildren:n||c(),noFocusRing:!0},t.resolved_items.filter((e=>1!==e.display_type)).map((e=>l.createElement("div",{key:e.loc_token+e.display_type,className:fe().CompatibilityDetailsRow},l.createElement(Te,{displaytype:e.display_type}),l.createElement("span",null,(0,P.we)(e.loc_token))))),g&&l.createElement("div",{className:fe().CompatibilityNotes},t.resolved_items.filter((e=>1==e.display_type)).map((e=>l.createElement("div",{key:e.loc_token+e.display_type,className:fe().CompatibilityDetailsNoteRow},l.createElement("span",null,(0,P.we)(e.loc_token))))))))):l.createElement(y.Z,{autoFocus:n,focusableIfNoChildren:n,noFocusRing:!0,className:fe().CompatibilityDetailsContainer,...u},l.createElement("div",null,l.createElement("div",{className:fe().DialogHeader},l.createElement("div",{className:fe().DialogTitle},(0,P.we)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),l.createElement("div",{className:fe().AppTitleCategory},l.createElement(Me,{category:t.resolved_category}))),l.createElement(Oe,{category:t.resolved_category,appName:a}),h))}function ke(e){const{blogURL:t}=e,a=(0,v.Qn)();return t?a?l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},(0,P.we)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog"),l.createElement("div",{className:fe().DeveloperBlogYButton},l.createElement(Ae.$m,{button:De.g4.Y,type:Ae.wt.Knockout}))):l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},(0,P.we)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog_Desktop"),l.createElement("a",{href:t,className:fe().DeveloperBlockLinkDesktop},(0,P.we)("#SteamDeckVerified_ViewDeveloperPost"))):null}function Te(e){const{displaytype:t}=e;switch(t){case 4:return l.createElement(k.o5Q,{className:fe().CompatibilityDetailsResultIcon});case 3:return l.createElement(k.aVR,{className:fe().CompatibilityDetailsResultIcon});case 2:return l.createElement(k.jIP,{className:fe().CompatibilityDetailsResultIcon});case 0:return l.createElement(k.WX$,{className:fe().CompatibilityDetailsResultIcon});case 1:return"dev"==v.TS.WEB_UNIVERSE&&console.error("deck verified banner shouldn't try to display the information display type for appid"),null}}var Pe=a(48896),Ge=a(6761),Le=a(37811);function Ne(e){const{storeItem:t}=e;if(0!==t.GetStoreItemType())return null;const a=t.GetPlatforms()?.steam_deck_compat_category||0;return l.createElement("div",{className:(0,B.A)(fe().LearnMoreCtn,"LearnMoreCtn")},l.createElement(G,{category:a}),l.createElement(f.Ii,{onClick:e=>{var a,o;e.preventDefault(),e.stopPropagation(),a=(0,te.uX)(e),o=t.GetAppID(),(0,Le.pg)(l.createElement(Re,{nAppID:o}),a)}},l.createElement("span",{className:fe().LearnMorePC},(0,P.we)("#SteamDeckVerified_Store_CompatSectionHeader_Desktop"))))}function Re(e){const{nAppID:t,closeModal:a}=e,o=function(e){const[t,a]=l.useState(we.Get().GetCompatabilityResultForApp(e));return(0,u.hL)(we.Get().GetCallbackForAppList(e),a),l.useEffect((()=>{we.Get().BHasCompatabilityResultForApp(e)||we.Get().LoadAppCompabitilityResult(e).then((()=>a(we.Get().GetCompatabilityResultForApp(e))))}),[e]),t}(t);return l.createElement(Ee.eV,{modalClassName:"DeckVerifiedModalDialog",closeModal:a,onCancel:a},l.createElement(be.nB,null,l.createElement(y.Z,{focusable:!1,"flow-children":"column"},Boolean(o)?l.createElement(Be,{results:o}):l.createElement(Pe.t,{size:"medium",position:"center",string:(0,P.we)("#Loading")}))))}function Me(e){const{category:t}=e;switch(t){case 3:return l.createElement(k.o5Q,{className:fe().CategoryIcon});case 2:return l.createElement(k.aVR,{className:fe().CategoryIcon});case 1:return l.createElement(k.jIP,{className:fe().CategoryIcon});case 0:return l.createElement(k.WX$,{className:fe().CategoryIcon})}}function Oe(e){const{category:t,appName:a,descriptionToken:o}=e;if(0==t)return l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},a?(0,P.PP)("#SteamDeckVerified_DescriptionHeader_Unknown_WithAppName",l.createElement("b",null,(0,Ge.EK)(a))):(0,P.we)("#SteamDeckVerified_DescriptionHeader_Unknown"));let n="",s=null;switch(t){case 3:n="#SteamDeckVerified_DescriptionHeader_Verified",s=fe().Verified;break;case 2:n="#SteamDeckVerified_DescriptionHeader_Playable",s=fe().Playable;break;case 1:n="#SteamDeckVerified_DescriptionHeader_Unsupported",s=fe().Unsupported}const r=l.createElement("span",{className:s},(0,P.we)(He(t))),i=l.createElement("span",{className:fe().CompatibilityDetailRatingSummary},(0,P.we)(o||n)),c=a?(0,P.PP)("#SteamDeckVerified_DescriptionHeader_WithAppName",l.createElement("b",null,(0,Ge.EK)(a)),r,i):(0,P.PP)("#SteamDeckVerified_DescriptionHeader",r,i);return l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},c)}function He(e){switch(e){case 3:return"#SteamDeckVerified_Category_Verified";case 2:return"#SteamDeckVerified_Category_Playable";case 1:return"#SteamDeckVerified_Category_Unsupported";default:return"#SteamDeckVerified_Category_Unknown"}}const Fe=(0,l.createContext)({}),Ve=()=>(0,l.useContext)(Fe);var xe=a(61416),Ue=a(51726),We=a(30568),ze=a(34233),je=a(6998),Xe=a(15489);const Ze={high_pending_orders:!1,inventory_available:!0};function Qe(e){const t=(0,We.rW)(),a=(0,xe.I)({queryKey:[e?.GetID()||ze.sc,e?.GetStoreItemType()||"invalid"],queryFn:()=>async function(e,t){if(!e||1!==e.GetStoreItemType()||10!==e.GetAppType())return Ze;const a=Ue.w.Init(je.MV);a.Body().set_packageid(e.GetID()),a.Body().set_country_code(Xe.iA.country_code);const o=await je.Hh.CheckInventoryAvailableByPackage(t,a);if(1!==o.GetEResult())throw console.error("Received error from FetchPhysicalGoodsStock",o.GetEResult()),new Error(`Error from FetchPhysicalGoodsStock: ${o.GetEResult()}`);return o.Body().toObject()}(e,t),enabled:Boolean(e?.GetID()&&10===e.GetAppType())});return a.isLoading?null:a.data}var Ye=a(35),qe=a(25509),Ke=a.n(qe);function Je(e){const{info:t,className:a}=e,o=(0,pe.n9)(),n=(0,l.useRef)({include_release:!0}),[s]=(0,O.G6)(t.id,(0,M.SW)(t.type),n.current),r=Qe(s);(0,l.useEffect)((()=>{se.Get().HintLoad()}),[]);const i=(0,l.useCallback)((()=>{(0,Ye.Id)(window,`steam://run/${s?.GetAppIDToRun()}`)}),[s]);if(!s||8==s.GetAppType())return null;const c=s.BIsFree()||"0"==s.GetBestPurchasePriceFormatted()||s.GetBestPurchaseOption().discount_pct>=100;if(1==s.GetStoreItemType())if(10==s.GetAppType()){if(!r)return l.createElement(Pe.t,{size:"small",position:"center"});if(!r.inventory_available)return l.createElement("div",{className:(0,B.A)(Ke().ActionOutOfStock,a)},l.createElement("span",null," ",(0,P.we)("#Sale_ReserveExhausted")))}else if(c&&s.GetIncludedAppIDs().length>1)return null;if(0==s.GetStoreItemType()){if(s.BIsComingSoon()&&!s.GetBestPurchaseOption()?.packageid)return null;const e=se.Get().BOwnsApp(s.GetAppID());if(e&&10===s.GetAppType())return null;if((e||c)&&!s.BIsComingSoon()){let t=(0,P.we)("#EventDisplay_CallToAction_PlayNowForFree");return e?t=(0,P.we)("#EventDisplay_CallToAction_PlayNow"):s.BIsFreeTemporary()&&(t=(0,P.we)("#EventDisplay_CallToAction_AddToAccount")),l.createElement("div",{className:(0,B.A)(Ke().Action,a),onClick:i},l.createElement("span",null,t))}if(""==s.GetBestPurchasePriceFormatted()){const e=(0,d.wJ)(s.GetStorePageURL(),o);return l.createElement("a",{href:e,className:(0,B.A)(Ke().Action,a)},(0,P.we)("#EventDisplay_CallToAction_VisitStore"))}}return l.createElement($e,{className:a,storeItem:s,info:t})}function $e(e){const{className:t,storeItem:a,info:o}=e,n=(0,pe.n9)(),s=Ve(),r=(0,l.useCallback)((e=>{let t,r;if(2==a?.GetStoreItemType()||a?.GetBestPurchaseOption().bundleid?t=2==a?.GetStoreItemType()?o.id:a?.GetBestPurchaseOption().bundleid:r=a?.GetBestPurchaseOption().packageid,void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart)return window.AddItemToCart(r,t,(0,pe.pn)(n)),!0;{const a=`${v.TS.STORE_BASE_URL}cart/addtocart`,o=`${v.TS.STORE_BASE_URL}cart`,i=(0,d.L3)(n);se.Get().AddToCart(e,r,a,o,i,t,s)}return!0}),[a,n,o.id,s]);return l.createElement("div",{className:(0,B.A)(Ke().Action,t),onClick:r},l.createElement("span",null,(0,P.we)("#Store_AddToCart")))}var et=a(31782),tt=a.n(et);async function at(e){v.TS.IN_CLIENT?(console.log(`Running game ${e} locally.`),window.location.href="steam://run/"+e):(console.log(`Cannot identify local client. Prompting user to launch ${e}.`),async function(e){await p.A.Get().QueueAppRequest(e,{});const t=p.A.Get().GetApp(e),a=t?.GetName()||"";console.log("prompting for",a);const o=v.TS.STORE_BASE_URL+"about/";(0,Le.mK)(l.createElement(ot,{appid:e,strGameName:a,strDownloadSteamUrl:o}),window)}(e))}const ot=e=>{const t=()=>e.closeModal&&e.closeModal();return l.createElement(Ee.x_,{onEscKeypress:t,className:tt().GotSteamDialog},l.createElement(be.UC,null,l.createElement(be.Y9,null," ",(0,P.we)("#GotSteam_Title")," "),l.createElement(be.nB,null,l.createElement(be.a3,null,(0,P.PP)("#GotSteam_PromptWithDownloadLink",l.createElement("a",{href:e.strDownloadSteamUrl,className:tt().DownloadSteamUrl},(0,P.we)("#GotSteam_DownloadLinkText")),l.createElement("span",{className:tt().GameName},e.strGameName))),l.createElement("div",{className:tt().Buttons},l.createElement("a",{href:"steam://run/"+e.appid,onClick:t,className:(0,B.A)(tt().Button,tt().LeftButton)},l.createElement("div",{className:tt().AnswerText}," ",(0,P.we)("#GotSteam_Yes")," "),l.createElement("div",{className:tt().ActionText}," ",(0,P.we)("#GotSteam_Yes_Play")," ")),l.createElement("a",{href:e.strDownloadSteamUrl,onClick:t,className:tt().Button},l.createElement("div",{className:tt().AnswerText}," ",(0,P.we)("#GotSteam_No")," "),l.createElement("div",{className:tt().ActionText}," ",(0,P.we)("#GotSteam_No_Download")," "))),l.createElement("div",{className:tt().Footer},l.createElement(k.Qte,{className:tt().Logo}),(0,P.we)("#GotSteam_Blurb")))))};var nt=a(74164),st=a.n(nt);function rt(e){const{info:t,className:a}=e,o=(0,l.useRef)({include_release:!0}),[n]=(0,O.G6)(t?.id,(0,M.SW)(t?.type),o.current),s=function(e){const[t,a]=(0,l.useState)(ve.Get().GetDemoEventInfo(e));return(0,l.useEffect)((()=>{!t&&e&&ve.Get().LoadAppIDsBatch([e]).then((()=>{ve.Get().BHasDemoEventInfo(e)&&a(ve.Get().GetDemoEventInfo(e))}))}),[e,t]),t}(t?.id),r=!!s?.demo_appid||1===n?.GetAppType(),i=r?(0,P.we)("#Sale_InstallDemo_ttip",n?.GetName()):s?(0,P.we)("#Sale_CannotInstallDemo_ttip",n?.GetName()):(0,P.we)("#Loading");return!r&&s&&n?.BIsFree()?l.createElement(Je,{info:t,className:a}):l.createElement(b.he,{toolTipContent:i,onClick:e=>{e.preventDefault(),e.stopPropagation(),r&&at(1===n?.GetAppType()?n.GetAppID():s.demo_appid)},className:(0,B.A)(a,st().DemoButton,!r&&st().DisabledButton)},r?(0,P.we)("#Sale_InstallDemo"):(0,P.we)("#Sale_DemoNotFound"))}var it=a(90095),lt=a(23568),ct=a.n(lt),dt=a(89150),mt=a(90890);function pt(e){const{size:t,color:a,trackColor:o}=e,n={borderColor:o,borderLeftColor:a};if("number"==typeof t){const e=`${t}px`;n.width=e,n.height=e,n.minHeight=e,n.minWidth=e,n.borderWidth=t/10+"px"}return l.createElement("div",{className:(0,B.A)(mt.Loading,"small"==t&&mt.Small,("medium"==t||!t)&&mt.Medium,"large"==t&&mt.Large),style:n})}function ut(e){(0,Le.pg)(l.createElement(Ee.KG,{strTitle:(0,P.we)("#Wishlist_Error"),strDescription:(0,P.we)("#Wishlist_Error_Desc")},l.createElement("br",null),l.createElement("br",null),e),window)}function ht(e){const[t,a]=l.useState(!1),[o,n]=l.useState(!se.Get().BIsLoaded()),s=(0,pe.n9)(),{appid:r,bIsFree:i,bIsComingSoon:c,className:m}=e,[p,u]=(0,it.q3)((()=>[se.Get().BIsGameWishlisted(r),se.Get().BOwnsApp(r)]));l.useEffect((()=>{(async()=>{await se.Get().HintLoad(),n(!1)})()}),[]);return u||!c&&i?i?l.createElement(gt,{possibleDemoAppID:r}):null:l.createElement(b.he,{toolTipContent:(0,P.we)("#AddToWishlist_ttip")},l.createElement("div",{className:(0,B.A)(x().WishList,ct().FlexRowContainer,m),onClick:async()=>{if(v.iA.logged_in){if(!t){a(!0);const e=!p;try{const t=await se.Get().UpdateGameWishlist(r,e,(0,d.L3)(s));a(!1),1!=t.success&&ut((0,Z.H)(t).strErrorMsg)}catch(e){a(!1),ut((0,Z.H)(e).strErrorMsg)}}}else(0,dt.vg)()}},(o||t)&&l.createElement("span",null,l.createElement(pt,{size:15})),!t&&p&&l.createElement(k.Jlk,null),l.createElement("span",null,(0,P.we)(t?"#Updating":o?"#Loading":p?"#Wishlisted_short":"#AddToWishlist_short"))))}function gt(e){const{possibleDemoAppID:t,className:a}=e,[o]=(0,O.t7)(t,{});return(1==o?.GetAppType()||12==o?.GetAppType())&&o?.GetParentAppID()>0?l.createElement(_t,{parentAppID:o?.GetParentAppID(),className:a}):null}function _t(e){const{parentAppID:t,className:a}=e,[o]=(0,O.t7)(t,{include_release:!0});return o?l.createElement(ht,{appid:t,bIsComingSoon:o.BIsComingSoon(),bIsFree:o.BIsFree(),className:a}):null}var St=a(50846);function Ct(e){const{info:t,bShowDemoButton:a,bShowPurchaseOptionsButton:o,fnOnPurchaseOptionsClick:n,bHidePrice:r,bHideWishlistButton:i,bShowDeckCompatibilityDialog:c,className:d}=e,m=(0,l.useRef)({include_release:!0}),[p]=(0,O.G6)(t.id,(0,M.SW)(t.type),m.current),u=de(t.type),[h,g]=l.useState(a&&u&&(1===p?.GetAppType()||ve.Get().BHasDemoAppID(t.id)));return l.useEffect((()=>{const e=s().CancelToken.source();return a&&u&&(1===p?.GetAppType()?g(!0):ve.Get().LoadAppIDsBatch([t.id]).then((()=>{e.token.reason||g(ve.Get().BHasDemoAppID(t.id))}))),()=>e?.cancel("StoreSalePriceActionWidget: unmounting")}),[a,u,t.id,p]),p?l.createElement("div",{className:(0,B.A)(x().StoreActionWidgetContainer,d)},l.createElement("div",{className:x().StoreSalePriceActionWidgetContainer},Boolean(!i&&de(t.type))&&l.createElement(ht,{appid:t.id,bIsFree:p.BIsFree(),bIsComingSoon:p.BIsComingSoon(),className:"WishlistBtn"}),Boolean(h)&&l.createElement(rt,{info:t,className:x().Action}),Boolean(!r)&&1!==p?.GetAppType()&&(Boolean(o&&!p.BIsFree())?l.createElement(vt,{fnOnPurchaseOptionsClick:n}):l.createElement(Je,{info:t,className:"CartBtn"})),Boolean(!r)&&l.createElement(wt,{info:t}),Boolean(c)&&l.createElement(Ne,{storeItem:p}))):null}function vt(e){return l.createElement("div",{className:x().Action,onClick:e.fnOnPurchaseOptionsClick},l.createElement("span",null,(0,P.we)("#EventDisplay_CallToAction_ShowPurchaseOptions_Button")))}function wt(e){const{info:t,...a}=e,o=(0,l.useRef)({include_release:!0}),[n]=(0,O.G6)(t?.id,(0,M.SW)(t?.type),o.current);return l.createElement(Et,{...a,storeItem:n})}const bt=7;function Et(e){const{bSingleLineMode:t,storeItem:a,onlyOneDiscountPct:o}=e,n=(0,j.f1)();if(!a)return null;const s=!a.BIsComingSoon()&&a.GetReleaseDateRTime()+bt*St.Kp.PerDay>n,r=(0,B.A)(x().StoreSalePriceWidgetContainer,t&&x().SingleLineMode,"StoreSalePriceWidgetContainer",s&&x().NewItem),i=2==a.GetStoreItemType()&&a.GetBestPurchaseOption()?.bundle_discount_pct;if(e.bShowInLibrary)return l.createElement("div",{className:r},l.createElement("div",{className:x().StoreSalePriceBox},(0,P.we)("#EventDisplay_CallToAction_InLibrary")));if(a.BIsComingSoon()&&!a.GetBestPurchaseOption()?.packageid)return l.createElement("div",{className:r},l.createElement("div",{className:x().StoreSalePriceBox},(0,P.we)("#EventDisplay_CallToAction_ComingSoon")));if(a.BIsFree()&&!a.BIsFreeTemporary())return 0==a.GetStoreItemType()&&1==a.GetAppType()?l.createElement("div",{className:r},s&&l.createElement("div",{className:x().StoreSaleNewItem},(0,P.we)("#Flag_New")),l.createElement("div",{className:x().StoreSalePriceBox},(0,P.we)("#EventDisplay_CallToAction_FreeDemo"))):l.createElement("div",{className:r},s&&l.createElement("div",{className:x().StoreSaleNewItem},(0,P.we)("#Flag_New")),l.createElement("div",{className:x().StoreSalePriceBox},(0,P.we)("#EventDisplay_CallToAction_FreeToPlay")));if(!a.GetBestPurchasePriceFormatted()||!a.GetBestPurchaseOption())return null;let c=a.GetBestPurchaseOption().discount_pct||i,d=c&&i&&c>i&&i,m=a.GetBestPurchasePriceFormatted();return o&&c>0&&(d=0),l.createElement(It,{bSingleLineMode:t,nBaseDiscountPercentage:d,nDiscountPercentage:c,bIsPrePurchase:a.BIsPrePurchase(),strBestPurchaseOriginalPriceFormatted:a.GetBestPurchaseOriginalPriceFormatted(),strBestPurchasePriceFormatted:m,bHideDiscountPercentForCompliance:a.GetBestPurchaseOption().hide_discount_pct_for_compliance,bShowNewFlag:s})}function It(e){const{bSingleLineMode:t,nDiscountPercentage:a,bIsPrePurchase:o,nBaseDiscountPercentage:n,strBestPurchaseOriginalPriceFormatted:s,strBestPurchasePriceFormatted:r,bHideDiscountPercentForCompliance:i,bShowNewFlag:c}=e,d=i&&!0;return l.createElement("div",{className:(0,B.A)({[x().StoreSalePriceWidgetContainer]:!0,[x().SingleLineMode]:t,StoreSalePriceWidgetContainer:!0,[x().Discounted]:Boolean(a),Discounted:Boolean(a),[x().PrePurchase]:Boolean(o),[x().NewItem]:Boolean(c)})},Boolean(o)&&l.createElement("div",{className:(0,B.A)(x().StoreSalePriceBox,x().StoreSalePrepurchaseLabel)},(0,P.we)("#EventDisplay_CallToAction_Prepurchase_Short")),Boolean(!o&&c)&&l.createElement("div",{className:x().StoreSaleNewItem},(0,P.we)("#Flag_New")),Boolean(n&&!d)&&l.createElement("span",{className:(0,B.A)(x().BaseDiscount)},`-${n}%`),Boolean(a&&!d)&&l.createElement("div",{className:x().StoreSaleDiscountBox},`-${a}%`),Boolean(d)&&l.createElement("div",{className:x().DiscountIconCtn},l.createElement(k.XH_,null)),Boolean(a&&s&&!d)?l.createElement("div",{className:(0,B.A)(x().StoreSaleDiscountedPriceCtn)},l.createElement("div",{className:(0,B.A)({[x().SingleLineOriginalPrice]:t,[x().StoreOriginalPrice]:!t})},s),l.createElement("div",{className:(0,B.A)({[x().StoreSalePriceBox]:!0,[x().SingleLineMode]:t})},r)):l.createElement("div",{className:x().StoreSalePriceBox},r))}var ft=a(32037);function yt(e,t,a,o,n){if(!a)return;var s;if(!(2==(s=e.GetStoreItemType())?"bundle":1==s?"sub":0==s?"app":null))return void(0,ft.w)(!1,"StoreItemWidgetSalePageAction: unexpected type: "+e.GetStoreItemType());const r=(0,d.wJ)(`${e.GetStorePageURL()}${o?`?${o}`:""}`,t);return{onClick:e=>{let t=(0,te.uX)(e)||window;n?n(void 0):r.startsWith("steam://")||(t.location.href=(0,C.NT)(r))},onOKActionDescription:(0,P.we)("#Sale_Gamepad_Action_Select")}}var At=a(34244),Dt=a(91246);a(6162);function Bt(e=v.TS.LANGUAGE){const t=(0,We.TR)(),a=(0,We.rX)();return(0,xe.I)(kt(t,a,e))}function kt(e,t,a){return{queryKey:["LocalizedTagNames",a],queryFn:async()=>{const o=`LocalizedTagNames_${a}`,n=await t.GetObject(o),s=Ue.w.Init(Dt.Gr);s.Body().set_language(a),n?.version_hash&&s.Body().set_have_version_hash(n.version_hash);const r=await Dt.nd.GetTagList(e.GetAnonymousServiceTransport(),s);let i;if(1==r.GetEResult())i=r.Body().toObject(),t.StoreObject(o,i);else if(29==r.GetEResult())i=n;else{if(!n)throw r.GetErrorMessage();console.warn("Couldn't load updated tag localization, will continue with what we have from storage."),i=n}const l=new Map;return i.tags.forEach((({tagid:e,name:t})=>l.set(e,{tagid:e,name:t}))),l},staleTime:36e5}}a(45090);function Tt(e){const{className:t,url:a,style:o,children:n,bSkipForcingStoreLink:s}=e,r=(0,pe.n9)(),i=s?a:(0,C.Ps)(a,v.TS.STORE_BASE_URL);if(i){const e=(0,d.wJ)(i,r);return l.createElement(f.Ii,{href:e,target:v.TS.IN_CLIENT?void 0:"_blank",className:t,style:o},n)}return l.createElement("span",{style:o,className:t},n)}function Pt(e){const{tagid:t,className:a}=e,o=function(e,t=v.TS.LANGUAGE){const{data:a}=Bt(t);return e?a?.get(e):void 0}(t);if(!o)return null;const n=(0,At.ww)((0,At.sf)(v.TS.LANGUAGE)),s=`${v.TS.STORE_BASE_URL}tags/${n}/${o?.name}`;return l.createElement(Tt,{url:s,className:(0,B.A)(x().Tag,"WidgetTag",a)},o.name)}const Gt=(0,i.PA)((e=>{const{appid:t,bIsMuted:a}=e,o=se.Get().BOwnsApp(t),n=(0,B.A)(x().CapsuleBottomBar,a&&x().Muted,o?x().PlayNowButton:x().AddToLibraryButton);return l.createElement("div",{onClick:e=>{e.preventDefault(),o?at(t):se.Get().AddLicenseForFreeGame(t)},className:n},(0,P.we)(o?"#Sale_PlayNow":"#Sale_AddToLibrary"))}));a(48036),a(47159);function Lt(e,t){l.useEffect((()=>{const a=a=>{a.key===e&&t(a)};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}),[e,t])}var Nt=a(49434),Rt=a.n(Nt);function Mt(e){const{closeModal:t,rgImageURL:a}=e,[o,n]=l.useState(0),s=l.useCallback((()=>{n(0==o?a.length-1:o-1)}),[o,a.length]),r=l.useCallback((()=>{o+1>=a.length?n(0):n(o+1)}),[o,a.length]);return l.createElement(Ee.eV,{bAllowFullSize:!0,bOKDisabled:!0,closeModal:t,bHideCloseIcon:!0,modalClassName:Rt().PopupScreenshotModal},l.createElement(Ot,{index:o,numElements:a.length,fnForward:r,fnBackwards:s,fnClose:t,bCircular:!0}),l.createElement("div",{className:Rt().PopupScreenshotContainer},l.createElement("img",{className:Rt().PopupScreenshot,src:a[o]})))}function Ot(e){const{index:t,numElements:a,fnForward:o,fnBackwards:n,fnClose:s,bCircular:r}=e;Lt("ArrowLeft",n),Lt("Left",n),Lt("ArrowRight",o),Lt("Right",o),Lt("Escape",(()=>s&&s())),Lt("Esc",(()=>s&&s()));let i=a>1;return l.createElement("div",{className:Rt().ButtonCtn},i&&l.createElement(l.Fragment,null,l.createElement("div",{className:(0,B.A)(Rt().ButtonIcon,0!==t||r?null:Rt().Disabled),onClick:n},l.createElement(k.V5W,{angle:270})),l.createElement("div",{className:(0,B.A)(Rt().ButtonIcon,t!==a-1||r?null:Rt().Disabled),onClick:o},l.createElement(k.V5W,{angle:90}))),l.createElement("div",{className:Rt().ButtonIcon,onClick:s},l.createElement(k.X,null)))}var Ht=a(33264),Ft=a.n(Ht);var Vt=a(83279);function xt(e){const[t,a]=(0,l.useState)(!1),[o,n]=(0,l.useState)({naturalWidth:0,naturalHeight:0,displayWidth:0,displayHeight:0}),s=(0,l.useRef)();return(0,l.useEffect)((()=>{if(o.naturalWidth>1.3*o.displayWidth&&o.naturalHeight>1.3*o.displayHeight&&o.naturalWidth>256){o.naturalWidth/o.naturalHeight<3&&a(!0)}}),[o]),t?l.createElement("div",{className:Vt.PreviewCtn},l.createElement("div",{className:Vt.SVG},l.createElement(k.YNO,null)),l.createElement("img",{...e,className:(0,B.A)({[e.className]:Boolean(e.className),[Vt.ExpandableHover]:!0}),onClick:t=>{return a=[e.src],void(0,Le.mK)(l.createElement(Mt,{rgImageURL:a}),window);var a}})):l.createElement("img",{...e,ref:s,onLoad:e=>{if(!(e.currentTarget.closest("a")||window.innerWidth<parseInt(Ft().strMaxMobileWidth))){const{naturalWidth:t,naturalHeight:a,width:o,height:s}=e.currentTarget;n({naturalWidth:t,naturalHeight:a,displayWidth:o,displayHeight:s})}}})}function Ut(e){const{className:t,srcs:a,lazyLoad:o,width:n,height:s,alt:r,crossOrigin:i}=e,[c,d]=l.useState(a.length),[m,p]=l.useState(0);l.useEffect((()=>{c!=a.length&&(d(a.length),p(0))}),[c,a.length]);const u=l.useCallback((()=>{e.onImageError&&e.onImageError(e.srcs[m]),m+1<e.srcs.length&&p(m+1)}),[m,e]);return l.createElement("img",{className:t,src:a[m],crossOrigin:i,onError:u,loading:o?"lazy":void 0,width:n,height:s,alt:r})}function Wt(e){const{info:t,bPreferLibrary:a}=e,[o]=(0,O.G6)(t.id,(0,M.SW)(t.type),{include_assets:!0}),[n,s]=l.useState(0);if(!o)return l.createElement("div",{className:x().HeroCapsuleImageContainer});let r=o.GetAssets().GetHeroCapsuleURL(),i=o.GetAssets().GetLibraryCapsuleURL();if(o.GetIncludedAppIDs()?.length>0&&!r){const e=p.A.Get().GetApp(o.GetIncludedAppIDs()[0]);e&&(r||(r=e.GetAssets().GetHeroCapsuleURL()),i||(i=e.GetAssets().GetLibraryCapsuleURL()))}if(r&&(!a||!i))return l.createElement("div",{className:(0,B.A)(x().HeroCapsuleImageContainer,"HeroCapsuleImageContainer")},l.createElement("img",{src:r,className:x().CapsuleImage,alt:o.GetName()}));if(i)return l.createElement("div",{className:(0,B.A)(x().LibraryFallbackAssetImageContainer,x().VerticalCapsule,a?x().ForceLibrarySizing:"")},l.createElement("div",{className:x().FallbackBackground,style:{backgroundImage:`url(${i})`}}),l.createElement("img",{src:i,className:x().CapsuleImage,alt:o.GetName()}));const c=zt(o,!0),d=c.length-1,m=e=>{const t=c.indexOf(e);t>=d&&t<c.length-1&&s(t+1)};if(n<c.length){const e=c[n];return l.createElement("div",{className:x().LibraryFallbackAssetImageContainer},l.createElement("div",{className:x().FallbackBackground,style:{backgroundImage:`url(${e})`}}),l.createElement(Ut,{lazyLoad:!0,srcs:c,className:x().CapsuleImage,alt:o.GetName(),onImageError:m}))}return l.createElement("div",{className:x().HeroCapsuleImageContainer})}function zt(e,t){let a=[];if(e.GetAssets()&&(t?a.push(e.GetAssets().GetHeaderURL(),e.GetAssets().GetMainCapsuleURL()):a.push(e.GetAssets().GetMainCapsuleURL(),e.GetAssets().GetHeaderURL())),1==e.GetIncludedAppIDs()?.length){const o=p.A.Get().GetApp(e.GetIncludedAppIDs()[0]);o&&o.GetAssets()?t?a.push(o.GetAssets().GetHeaderURL(),o.GetAssets().GetMainCapsuleURL()):a.push(o.GetAssets().GetMainCapsuleURL(),o.GetAssets().GetHeaderURL()):"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.log("PushDefaultCapsuleImages single app in package/bundle missing:",e.GetIncludedAppIDs()[0])}return a.filter((e=>!!e))}var jt=a(20516);function Xt(e){const{bAllowOutsideOfDeck:t}=e;if(!(0,v.Qn)()&&!t)return null;let a="unknown";switch(e.eDeckCompatibilityCategory){case 3:a="verified";break;case 2:a="playable";break;case 1:a="unsupported"}return l.createElement("div",{className:(0,B.A)(jt.CompatIcon,"ds_steam_deck_compat",a,e.className)})}a(78325);a(37889);var Zt=a(3205),Qt=(a(61232),a(42689)),Yt=a.n(Qt),qt=a(49453),Kt=a(25170),Jt=a(31673);class $t{m_HomeView;BHasHomeView(){return Boolean(this.m_HomeView)}GetHomeView(){return this.m_HomeView?.home}static s_globalSingletonStore;static Get(){return $t.s_globalSingletonStore||($t.s_globalSingletonStore=new $t,"dev"==v.TS.WEB_UNIVERSE&&(window.g_HomeViewSetting=$t.s_globalSingletonStore)),$t.s_globalSingletonStore}constructor(){"dev"===v.TS.WEB_UNIVERSE&&(window.g_HomeViewStore=this);const e=(0,v.Tc)("home_view_setting","application_config");this.ValidateHomeViewData(e)&&this.SetHomeViewSetting(e);const t=(0,v.Tc)("home_view_setting_override","application_config");this.ValidateHomeViewDataOverride(t)&&this.SetHomeViewSettingOverride(t)}ValidateHomeViewData(e){const t=e;return t&&"object"==typeof t.home&&"object"==typeof t.main_cluster}SetHomeViewSetting(e){this.m_HomeView=e}ValidateHomeViewDataOverride(e){const t=e;return t&&(!t.all||"object"==typeof t.all)&&(!t.maincap||"object"==typeof t.maincap)}SetHomeViewSettingOverride(e){this.m_HomeView.home={...this.m_HomeView.home,...e?.all,...e?.maincap}}}const ea={include_tag_count:20,include_basic_info:!0,include_supported_languages:!0};function ta(e){const t=se.Get(),a=e?.GetAllLanguagesWithSomeSupport()||[],o=$t.Get().GetHomeView()?.localized;return!e||0==e.GetStoreItemType()&&(t.BIsGameIgnored(e.GetAppID())||t.BIsGameIgnored(e.GetParentAppID()))||t.BExcludesContentDescriptor(e.GetContentDescriptorIDs())||t.BExcludeTagIDs(e.GetTagIDs())||e.GetAllCreatorClanIDs().some((e=>t.BIsIgnoringCurator(e)))||o&&!(0==a.length||e.BHasSomeLanguageSupport(0)||t.BIsAnyLanguageEnabled(a))}var aa,oa=a(63988),na=a(99838),sa=a(9337);a(49137);!function(e){e.Default="default",e.Upcoming="upcoming",e.Featured="featured",e.Press="press",e.Steam="steam",e.Halloween="halloween",e.Dev_All="all",e.Dev_AssociatedPress="associated_press",e.Dev_Sales="associated_sales"}(aa||(aa={}));new Map;class ra{constructor(){(0,r.Gn)(this)}m_mapBlockedAppIds=new Map;m_mapBlockedClanIds=new Map;static s_globalSingletonStore;static Get(){return ra.s_globalSingletonStore||(ra.s_globalSingletonStore=new ra,ra.s_globalSingletonStore.Init()),ra.s_globalSingletonStore}GetMutedSourceCount(){return this.m_mapBlockedAppIds.size+this.m_mapBlockedClanIds.size}Init(){const e=(0,v.Tc)("mutedcomminfo","application_config");this.ValidateStoreDefault(e)&&("dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.log("DEV_DEBUG: CMutedCommunicationStore loading bundles payload: "+JSON.stringify(e)),e.appids&&e.appids.forEach((e=>this.m_mapBlockedAppIds.set(e,!0))),e.clanids&&e.clanids.forEach((e=>this.m_mapBlockedClanIds.set(e,!0))))}ValidateStoreDefault(e){const t=e;return!(!t||"object"!=typeof t)&&(Array.isArray(t.appids)&&t.appids.length>0||Array.isArray(t.clanids)&&t.clanids.length>0)}BIsEventBlocked(e){return e.appid?this.m_mapBlockedAppIds.has(e.appid):!!e.clanInfo&&this.m_mapBlockedClanIds.has(e.clanInfo.clanid)}BIsMutedAppID(e){return this.m_mapBlockedAppIds.has(e)}BIsMutedClanID(e){return this.m_mapBlockedClanIds.has(e)}async UpdateCommunitionSetting(e,t,a){const o=v.TS.STORE_BASE_URL+"account/optoutappcommunication/",n=new FormData;if(n.append("sessionid",v.TS.SESSIONID),n.append("allowCommunication",e?"1":"0"),t){if(!e&&this.m_mapBlockedAppIds.has(t)||e&&!this.m_mapBlockedAppIds.has(t))return!0;e?this.m_mapBlockedAppIds.delete(t):this.m_mapBlockedAppIds.set(t,!0),n.append("appId",t.toString())}else{if(!a)return(0,ft.w)(!1,"BlockEventsFromCalenderEvent: Invalid AppID and ClanID"),!1;if(!e&&this.m_mapBlockedClanIds.has(a)||e&&!this.m_mapBlockedClanIds.has(a))return!0;e?this.m_mapBlockedClanIds.delete(a):this.m_mapBlockedClanIds.set(a,!0),n.append("clanId",a.toString())}try{return 1==(await s().post(o,n)).data.success}catch(e){return console.error("Blocking app id hit error "+(0,Z.H)(e).strErrorMsg),!1}}}(0,o.Cg)([r.sH],ra.prototype,"m_mapBlockedAppIds",void 0),(0,o.Cg)([r.sH],ra.prototype,"m_mapBlockedClanIds",void 0);function ia(e,t,a,o){return{strId:"section-"+t,strSectionLabel:t,rtSectionStart:a,rtSectionEnd:o,bIsFutureSection:a>=e,nRenderedHeight:2500,nTopOffset:0}}class la{m_nForwardStuckCount=0;m_nBackwardStuckCount=0;m_mapCalendarAppsByID=new Map;m_mapCalendarClansByID=new Map;m_mapCalendarEventsByGid=new Map;m_rgSortedCalendarEvents=new Array;m_visibilityStore;m_currentView=r.sH.box(null);m_bFinishedSearchingForward=!1;m_bFinishedSearchingBackward=!1;m_rgCalendarSections=[];m_rgFutureSections=[];m_dtInitTime;m_forwardRequestInFlight;m_backwardRequestInFlight;m_key;m_collectionMetaData=void 0;constructor(e,t){(0,r.Gn)(this),this.m_key=e,this.m_visibilityStore=new sa.vJ(t),se.Get().HintLoad()}GetNumEventsLoaded(){return this.m_mapCalendarEventsByGid.size}BIsGlobalCalendar(){return!(this.m_key.appids||this.m_key.clanaccountids||this.m_key.collectionid||this.m_key.saleid)}BIsShowingFeaturedFeed(){return Boolean(this.GetCollectionID()===aa.Featured||this.BIsGlobalCalendar()&&!v.iA.accountid)}BIsSingleSourceCalendar(){return Boolean(this.BIsSingleGroupCalendar()?!this.BIsSingleAppCalendar():this.BIsSingleAppCalendar())}GetKey(){return this.m_key}BEventMatchCalendarSingleSource(e){return this.BIsSingleAppCalendar()&&this.m_key.appids[0]==e.appid||this.BIsSingleGroupCalendar()&&this.m_key.clanaccountids[0]==e.clanid}BIsSingleSourceMuted(){return!!this.BIsSingleSourceCalendar()&&(this.BIsSingleAppCalendar()?ra.Get().BIsMutedAppID(this.GetSingleAppID()):ra.Get().BIsMutedClanID(this.GetSingleGroupID()))}BIsSingleGroupCalendar(){return Boolean(this.m_key.clanaccountids&&1==this.m_key.clanaccountids.length)}GetSingleGroupID(){return this.m_key.clanaccountids[0]}BIsSingleAppCalendar(){return Boolean(this.m_key.appids&&1==this.m_key.appids.length)}GetSingleAppID(){return this.m_key.appids[0]}BIsCollectionCalendar(){return!!this.m_key.collectionid}GetCollectionID(){return this.m_key.collectionid}BIsSaleCalendar(){return!!this.m_key.saleid}GetSaleID(){return this.m_key.saleid}BIsCalendarEndTimeSet(){return!!this.m_key.rtCalendarEnd}GetCalendarEndTime(){return this.m_key.rtCalendarEnd}SetCollectionMetaData(e){this.m_collectionMetaData=e}GetCollectionMetaData(){return this.m_collectionMetaData}BHasCollectionMetaData(){return Boolean(this.m_collectionMetaData)}ValidateCollectionMetadata(e){const t=e;return t&&"object"==typeof t&&t.clanid&&"number"==typeof t.clanid&&t.clan_event_gid&&"string"==typeof t.clan_event_gid}SetFilteredView(e,t){const a=this.m_currentView.get();a&&a.dispose();const o=this.BIsSingleSourceMuted(),n=new ca((()=>this.m_rgSortedCalendarEvents),this.LoadAdditionalEvents,this.BHitEventHorizon,e,t,o);this.m_currentView.set(n)}BIsFilteredViewEmpty(){return!!this.m_currentView.get()?.BIsViewEmpty()}GetCalendarItemsInTimeRange(e,t){const a=this.m_currentView.get();return a?a.GetCalendarItemsInTimeRange(e,t):(console.error("calendar view not yet initialized"),{rgCalendarItems:[],bIsComplete:!1})}GetActiveEventsAt(e){const t=this.m_currentView.get();return t?t.GetActiveEventsAt(e):(console.error("calendar view not yet initialized"),[])}GetCurrentlyLoadedEventCount(e,t){return this.m_currentView.get()?.GetCurrentlyLoadedEventCount(e,t)}GetCurrentlyLoadedItemsForStats(){return this.m_currentView.get()?.GetCurrentlyLoadedEvents()||[]}GetCalendarSections(e){return e?this.m_rgFutureSections:this.m_rgCalendarSections}GetStoreInitializationTimestamp(){return this.m_dtInitTime||(this.m_dtInitTime=j.HD.GetTimeNowWithOverrideAsDate()),this.m_dtInitTime}InitCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[],a=e.getTime()/1e3;t.push(ia(a,(0,P.we)("#EventCalendar_FutureEventsHeader"),a));const o=new Date(e);o.setHours(0,0,0,1);let n=o.getTime()/1e3;t.push(ia(a,(0,P.we)("#Time_Today"),n,a)),o.setDate(o.getDate()-1);let s=n;n=o.getTime()/1e3,t.push(ia(a,(0,P.we)("#Time_Yesterday"),n,s));const r=this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1],i=r?r.start_time:a;let l=i>n;for(let e=0;e<5&&!l;e++)o.setDate(o.getDate()-1),s=n,n=o.getTime()/1e3,t.push(ia(a,(0,P.cc)(o),n,s)),l=i>n;const c=new Date(o);let d=n;for(;c.getMonth()==e.getMonth()&&1!=c.getDate()&&!l;){c.setDate(c.getDate()-7);const e=c.getTime()/1e3;t.push(ia(a,(0,P.lQ)(d-1),e,d)),l=i>e,d=e}const m=new Date(e);m.setHours(0,0,0,1),m.setDate(1);let p=d;for(let o=1;!l;o++){const n=new Date(m);n.setMonth(e.getMonth()-o,1);const s=n.getTime()/1e3;t.push(ia(a,(0,P.lQ)(s),s,p)),l=i>s,p=s}this.m_rgCalendarSections.length>t.length?this.m_rgCalendarSections.splice(t.length,this.m_rgCalendarSections.length):t.splice(this.m_rgCalendarSections.length,t.length).forEach((e=>this.m_rgCalendarSections.push(e)))}InitFutureCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[];let a;this.m_key.rtCalendarEnd&&(a=this.m_key.rtCalendarEnd);const o=this.m_rgSortedCalendarEvents.length>0&&this.m_rgSortedCalendarEvents[0];o&&(a=o.start_time),a||(a=e.getTime()/1e3);const n=e.getTime()/1e3,s=new Date(e);s.setHours(24,0,0,0);let r=s.getTime()/1e3;t.push(ia(n,(0,P.we)(this.m_key.bSectionByDay?"#Time_UpNext":"#Time_Today"),n,r));let i=a<=r,l=r;s.setDate(s.getDate()+1),r=s.getTime()/1e3,i||t.push(ia(n,(0,P.we)("#Time_Tomorrow"),l,r)),i=a<=r;const c=6-Yt()(e).weekday();for(let e=2;e<=c&&!i;e++){l=r;const e=(0,P.cc)(s);s.setDate(s.getDate()+1),r=s.getTime()/1e3,t.push(ia(n,e,l,r)),i=a<=r}if(this.m_key.bSectionByDay)for(;!i;){l=r;const e=(0,P.$w)(s);s.setDate(s.getDate()+1),r=s.getTime()/1e3,t.push(ia(n,e,l,r)),i=a<=r}else{const o=new Date(s);let l=r;const c=Yt()(e).daysInMonth();if(o.getMonth()==e.getMonth()&&o.getDate()!=c&&!i){o.setDate(o.getDate()+7);const e=o.getTime()/1e3;t.push(ia(n,(0,P.we)("#EventCalendar_NextWeek"),l,e)),i=a<=e,l=e}const d=new Date(e);let m;if(d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0,0,0,0),o<d&&!i){const e=d.getTime()/1e3;t.push(ia(n,(0,P.we)("#EventCalendar_LaterThisMonth"),l,e)),i=a<=e,m=e}else m=l;for(let o=2;!i;o++){const s=new Date(d);s.setMonth(e.getMonth()+o);const r=s.getTime()/1e3;t.push(ia(n,(0,P.lQ)(m),m,r)),i=a<=r,m=r}}this.m_rgFutureSections.length>t.length?this.m_rgFutureSections.splice(t.length,this.m_rgFutureSections.length):t.splice(this.m_rgFutureSections.length,t.length).forEach((e=>this.m_rgFutureSections.push(e)))}async RegisterCalendarEventsAndModels(e){await se.Get().HintLoad(),(0,r.h5)((()=>{this.RegisterCalendarApps(e.apps),this.RegisterCalendarClans(e.clans),this.RegisterCalendarEvents(e.documents),Jt.O3.RegisterClanEvents(e.events),this.RegisterReadEvents(e.events_read),this.RegisterEventVotes(e.event_votes),e.forwardComplete&&(this.m_bFinishedSearchingForward=!0),e.backwardComplete&&(this.m_bFinishedSearchingBackward=!0),this.InitCalendarSections(),this.InitFutureCalendarSections(),this.SetCollectionMetaData(this.ValidateCollectionMetadata(e.metadatainfo)?e.metadatainfo:null)}))}RegisterCalendarApps(e){if(e)for(const t of e){if(this.m_mapCalendarAppsByID.has(t.appid))continue;const e=new qt.dF;e.appid=t.appid,e.source=t.source,e.playtime=t.playtime,e.last_played=t.last_played,e.wishlist_added=t.wishlist_added,this.m_mapCalendarAppsByID.set(t.appid,e),t.hidden&&this.m_visibilityStore.SetAppVisibility(t.appid,!1)}}RegisterCalendarClans(e){if(e)for(const t of e)if(!this.m_mapCalendarClansByID.has(t.clanid)){const e=new qt.w2;e.clanid=t.clanid,e.source=t.source,this.m_mapCalendarClansByID.set(t.clanid,e),t.hidden&&this.m_visibilityStore.SetClanVisibility(t.clanid,!1)}}RegisterReadEvents(e){if(!e)return;const t=Kt.KN.Get();for(const a of e)t.SetEventAsRead(a)}RegisterEventVotes(e){if(!e)return;const t=Kt.KN.Get();for(const a of e){const e=void 0===a.vote?void 0:Boolean(a.vote);t.SetVote(a.id,e)}}RegisterCalendarEvents(e){if(e){let t=!1;for(const a of e)this.BInternalInsertCalendarEventItem(a)&&(t=!0);t&&this.RebuildSortedCalendarEventList()}}BHitEventHorizon(e){return"forward"==e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward}GetTimeEdgeForDirection(e,t=void 0){return"forward"===e?this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[0].start_time:t:this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1].start_time:t}UpdateStuckCounters(e,t){const a="forward"===e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward,o=this.GetTimeEdgeForDirection(e,void 0);return a||o!==t?("forward"==e?this.m_nForwardStuckCount=0:this.m_nBackwardStuckCount=0,!1):("forward"==e?this.m_nForwardStuckCount++:this.m_nBackwardStuckCount++,!0)}GetRequestInFlight(e){return"forward"===e?this.m_forwardRequestInFlight:this.m_backwardRequestInFlight}SetRequestInFlight(e,t){(0,ft.w)(!t||!this.GetRequestInFlight(e),"Already have a request in flight for",e),"forward"===e?this.m_forwardRequestInFlight=t:this.m_backwardRequestInFlight=t}async LoadAdditionalEvents(e,t){if(this.BHitEventHorizon(e))return 1;let a=this.GetRequestInFlight(e);if(a)return a;const o=v.TS.STORE_BASE_URL+"events/ajaxgetusereventcalendarrange/",n="forward"===e?this.m_nForwardStuckCount:this.m_nBackwardStuckCount,r=n<3?n:0,i=n>=3?1:0,l=("dev"===v.TS.WEB_UNIVERSE?50:250)+50*r,c=this.GetTimeEdgeForDirection(e,j.HD.GetTimeNowWithOverride()),d={minTime:0,maxTime:0,ascending:!0,maxResults:l,populateEvents:15,appTypes:this.m_visibilityStore.GetGameSources().join(","),eventTypes:Array.from(this.m_visibilityStore.enabledEventTypeSet).join(","),appIdFilter:Boolean(this.m_key.appids&&this.m_key.appids.length>0)?this.m_key.appids.sort().join(","):void 0,clanIdFilter:Boolean(this.m_key.clanaccountids&&this.m_key.clanaccountids.length>0)?this.m_key.clanaccountids.sort().join(","):void 0,collectionID:this.m_key.collectionid,saleID:this.m_key.saleid,hubtype:this.m_key.hubtype,category_or_language:this.m_key.category_or_language,tag_name:this.m_key.tag_name,tags:this.m_key.rgTags?this.m_key.rgTags.slice().sort().join(","):void 0};"forward"===e?(d.minTime=Math.floor(c+i),d.ascending=!0):(d.maxTime=Math.floor(c-i),d.ascending=!1);return a=s().get(o,{params:d,cancelToken:t?t.token:void 0,withCredentials:!0}).then((async a=>{if(this.SetRequestInFlight(e,null),1==a.data.success){if(await this.RegisterCalendarEventsAndModels(a.data),this.UpdateStuckCounters(e,c))return this.LoadAdditionalEvents(e,t)}else console.error("LoadAdditionalEvents was not successful: Msg"+a.data.msg);return a.data.success})).catch((t=>{this.SetRequestInFlight(e,null);let a=(0,Z.H)(t);return console.error("LoadAdditionalEvents hit error "+a.strErrorMsg,a),"forward"==e?this.m_bFinishedSearchingForward=!0:this.m_bFinishedSearchingBackward=!0,2})),this.SetRequestInFlight(e,a),a}BInternalInsertCalendarEventItem(e){if(!e.unique_id)return(0,ft.w)(!1,"Attmpted to register a calendar event item with an invalid unique id!"),!1;if(this.m_mapCalendarEventsByGid.has(e.unique_id))return!1;const t=this.m_mapCalendarAppsByID.get(e.appid),a=this.m_mapCalendarClansByID.get(e.clanid);if(!t&&!a)return console.log("No AppInfo or ClanInfo For: ",e),!1;const o=new qt.NK;return o.clanid=e.clanid,o.unique_id=e.unique_id,o.event_type=e.event_type,o.appid=e.appid,o.start_time=e.start_time,o.score=e.score,o.appInfo=t,o.clanInfo=a,this.m_rgSortedCalendarEvents.push(o),this.m_mapCalendarEventsByGid.set(o.unique_id,o),!0}GetCalendarAppInfoForAppID(e){return this.m_mapCalendarAppsByID.get(e)}RebuildSortedCalendarEventList(){const e=this.m_rgSortedCalendarEvents.slice();this.m_rgSortedCalendarEvents=e.sort(((e,t)=>t.start_time-e.start_time))}async UpdateEventBlockFromCalendarEvent(e,t){let a=e.appInfo?e.appid:void 0,o=e.clanInfo?e.clanInfo.clanid:void 0;null!=a||null!=o?(await ra.Get().UpdateCommunitionSetting(t,a,o),na.V.RecordAppInteractionEvent(a,na.E.k_eMuted)):(0,ft.w)(!1,"Both clan id and account id are missing, cannot change communication status")}GetAllClans(){return Array.from(this.m_mapCalendarClansByID.keys())}GetAllApps(){return Array.from(this.m_mapCalendarAppsByID.keys())}}(0,o.Cg)([r.sH],la.prototype,"m_mapCalendarAppsByID",void 0),(0,o.Cg)([r.sH],la.prototype,"m_mapCalendarClansByID",void 0),(0,o.Cg)([r.sH],la.prototype,"m_mapCalendarEventsByGid",void 0),(0,o.Cg)([r.sH],la.prototype,"m_rgSortedCalendarEvents",void 0),(0,o.Cg)([r.sH],la.prototype,"m_bFinishedSearchingForward",void 0),(0,o.Cg)([r.sH],la.prototype,"m_bFinishedSearchingBackward",void 0),(0,o.Cg)([r.sH],la.prototype,"m_rgCalendarSections",void 0),(0,o.Cg)([r.sH],la.prototype,"m_rgFutureSections",void 0),(0,o.Cg)([r.sH],la.prototype,"m_collectionMetaData",void 0),(0,o.Cg)([r.XI],la.prototype,"InitCalendarSections",null),(0,o.Cg)([r.XI],la.prototype,"InitFutureCalendarSections",null),(0,o.Cg)([r.XI],la.prototype,"RegisterCalendarEventsAndModels",null),(0,o.Cg)([r.XI],la.prototype,"RegisterCalendarApps",null),(0,o.Cg)([r.XI],la.prototype,"RegisterCalendarClans",null),(0,o.Cg)([r.XI],la.prototype,"RegisterReadEvents",null),(0,o.Cg)([r.XI],la.prototype,"RegisterEventVotes",null),(0,o.Cg)([r.XI],la.prototype,"RegisterCalendarEvents",null),(0,o.Cg)([oa.o],la.prototype,"BHitEventHorizon",null),(0,o.Cg)([r.XI.bound],la.prototype,"LoadAdditionalEvents",null),(0,o.Cg)([r.XI],la.prototype,"UpdateEventBlockFromCalendarEvent",null);class ca{m_rgLoadedEventsBox=r.sH.box([]);m_lastLoadLatch=null;m_fnGetUnfilteredEvents;m_fnLoadAdditionalEvents;m_fnBHitEventHorizon;m_fnBIsEventInView;m_bSkipStorePreferenceCheck;m_bAllowMutedAndIgnoredSources;m_rgAutorunDisposer;constructor(e,t,a,o,n,s){(0,r.Gn)(this),this.m_fnGetUnfilteredEvents=e,this.m_fnLoadAdditionalEvents=t,this.m_fnBHitEventHorizon=a,this.m_fnBIsEventInView=o,this.m_bSkipStorePreferenceCheck=n,this.m_bAllowMutedAndIgnoredSources=s,this.m_rgAutorunDisposer=(0,r.fm)((async()=>{const e=this.viewFilteredEvents.slice();if(!this.m_bSkipStorePreferenceCheck){const t=Array.from(new Set(e.map((e=>e.appid)).filter(Boolean))).sort();if(this.m_lastLoadLatch=e,await p.A.Get().QueueMultipleAppRequests(t,{...ea,include_assets:!0}),this.m_lastLoadLatch!=e)return;this.m_lastLoadLatch=null}this.m_rgLoadedEventsBox.set(e)}))}dispose(){this.m_rgAutorunDisposer()}get viewFilteredEvents(){return this.m_fnGetUnfilteredEvents().filter((e=>this.m_fnBIsEventInView(e)))}get filteredAndCheckedEvents(){return this.m_rgLoadedEventsBox.get().filter((e=>{if(e.appid){if(!this.m_bAllowMutedAndIgnoredSources&&(ra.Get().BIsMutedAppID(e.appid)||se.Get().BIsGameIgnored(e.appid)))return!1;if(!this.m_bSkipStorePreferenceCheck&&ta(p.A.Get().GetApp(e.appid)))return!1}else if(!this.m_bAllowMutedAndIgnoredSources&&(ra.Get().BIsMutedClanID(e.clanid)||se.Get().BIsIgnoringCurator(z.b.InitFromClanID(e.clanid))))return!1;return!0}))}BIsCompleteThroughTime(e,t){if(this.m_fnBHitEventHorizon(e))return!0;const a=this.m_fnGetUnfilteredEvents();return"forward"===e?t&&a.length>0&&a[0].start_time>t:a.length>0&&a[a.length-1].start_time<t}async EnsureRangeIsLoaded(e,t){for(let e=0;e<100&&!this.BIsCompleteThroughTime("forward",t);e++)await this.m_fnLoadAdditionalEvents("forward");for(let t=0;t<100&&!this.BIsCompleteThroughTime("backward",e);t++)await this.m_fnLoadAdditionalEvents("backward")}GetCalendarItemsInTimeRange(e,t){this.EnsureRangeIsLoaded(e,t);const a=this.filteredAndCheckedEvents.filter((a=>a.start_time>=e&&(!t||a.start_time<t))),o=this.BIsCompleteThroughTime("forward",t),n=this.BIsCompleteThroughTime("backward",e);return{rgCalendarItems:a,bIsComplete:o&&n}}GetCurrentlyLoadedEvents(){return this.filteredAndCheckedEvents}GetCurrentlyLoadedEventCount(e,t){let a=0;this.filteredAndCheckedEvents.forEach((o=>{o.start_time>=e&&(!t||o.start_time<t)&&a++}));const o=this.BIsCompleteThroughTime("forward",t),n=this.BIsCompleteThroughTime("backward",e);return{nCount:a,bIsComplete:o&&n}}BIsViewEmpty(){return this.filteredAndCheckedEvents.length>0}GetActiveEventsAt(e){return this.filteredAndCheckedEvents.map((e=>Jt.O3.GetClanEventModel(e.unique_id))).filter((t=>{if(t){const a=t.endTime||t.startTime+3600;return e>=t.startTime&&e<a}return!1}))}}(0,o.Cg)([r.EW.struct],ca.prototype,"viewFilteredEvents",null),(0,o.Cg)([r.EW.struct],ca.prototype,"filteredAndCheckedEvents",null);const da=r.sH.box(null),ma=new Map;function pa(){return null==da.get()&&function(e,t){let a="";e.appids&&e.appids.length>0&&(a+="appids:"+e.appids.sort().join(",")),e.clanaccountids&&e.clanaccountids.length>0&&(a+="clanids:"+e.clanaccountids.sort().join(",")),e.collectionid&&(a+="collection:"+e.collectionid),e.saleid&&(a+="sale:"+e.saleid),e.bSectionByDay&&(a+="_sectionbyday"),e.rtCalendarEnd&&(a+="_end:"+e.rtCalendarEnd),e.rgTags&&e.rgTags.length>0&&(a+="_tags:"+e.rgTags.slice().sort().join(",")),e.hubtype&&(a+="_hubtype:"+e.hubtype+"_"+e.category_or_language+"_"+e.tag_name),da.get()!==a&&(da.set(a),ma.has(a)||ma.set(a,new la(e,t)))}({}),ma.get(da.get())}window.g_EventCalendarMap=ma;var ua=a(15515);const ha=e=>{let t=v.TS.HELP_BASE_URL+"wizard/HelpWithLimitedAccount";return l.createElement(Ee.o0,{strTitle:(0,P.we)("#Informational_Message"),onCancel:e.closeModal,onOK:e.closeModal,bAlertDialog:!0},l.createElement("div",null,(0,P.PP)(e.strTokenOverride||"#User_LimitedAccount",l.createElement("a",{href:t,target:v.TS.IN_CLIENT?void 0:"_blank"},(0,P.we)("#User_LimitedAccount_UrlInfo")))))},ga=(0,i.PA)((e=>{const{closeModal:t}=e;return l.createElement(Ee.o0,{strTitle:(0,P.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_Title"),strDescription:(0,P.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_Description"),strOKButtonText:(0,P.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_OKButton"),strCancelButtonText:(0,P.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_CancelButton"),onOK:()=>{pa().m_visibilityStore.SetGameSourceAllowed(sa.FD.k_ECurator,!0),t()},onCancel:()=>{pa().m_visibilityStore.SetCuratorUnhideOnFollowDialogDismissed(!0),t()}})}));function _a(e){e||null!==da&&(pa().m_visibilityStore.BCuratorUnhideOnFollowDialogDismissed()||pa().m_visibilityStore.BIsGameSourceAllowed(sa.FD.k_ECurator)||(0,Le.pg)(l.createElement(ga,null),window))}function Sa(){return!!Kt.KN.Get().BIsUserLoggedIn()||((0,Le.pg)(l.createElement(Ee.o0,{strTitle:(0,P.we)("#EventDisplay_Share_NotLoggedIn"),strDescription:(0,P.we)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:(0,P.we)("#MobileLogin_SignIn"),onOK:()=>(0,dt.vg)()}),window),!1)}function Ca(e){const t=z.b.InitFromClanID(e),a=Kt.KN.Get().GetPartnerEventPermissions(t);return!a||!a.limited_user||((0,Le.pg)(l.createElement(ha,null),window),!1)}const va=e=>{const{className:t,bIgnored:a,bApplyingFollowing:o,bFollowing:n,onFollowClick:s}=e;return j.HD.bIsFollowingEnabled?l.createElement(f.ml,{className:(0,B.A)(lt.Button,ua.FollowButton,t,n?"Followed":""),onClick:s},o&&l.createElement(pt,{size:15}),!o&&(n||a)&&l.createElement(k.Jlk,null),l.createElement("div",{className:ua.FollowBtnText},!o&&(n?(0,P.we)("#Button_Followed"):a?(0,P.we)("#Button_Ignored"):(0,P.we)("#Button_Follow")))):null},wa=e=>{const[t,a]=l.useState(!1),{clanAccountID:o,className:n}=e,s=z.b.InitFromClanID(o),r=se.Get().BIsFollowingCurator(s),i=!r&&se.Get().BIsIgnoringCurator(s);return l.createElement(va,{className:n,bIgnored:i,bFollowing:r,bApplyingFollowing:t,onFollowClick:()=>{const{clanAccountID:t}=e;Sa()&&Ca(t)&&(a(!0),(()=>{const{clanAccountID:t,creatorID:o}=e,n=z.b.InitFromClanID(t),s=se.Get().BIsFollowingCurator(n),r=!s&&se.Get().BIsIgnoringCurator(n);se.Get().UpdateFollowOrIgnoreCurator(n,!r,!(r||s)).then((e=>{if(o){let e=Zt.pF.GetCreatorHomeByID(o);r||e.AdjustFollower(s?-1:1)}a(!1)})).then((()=>{_a(s)})).catch((e=>{a(!1);let t=(0,Z.H)(e);console.error("CuratorFollowButton hit error: "+t.strErrorMsg,t)}))})())}})};var ba=a(24121);const Ea="DEBUG_UseNewGameHover";window.SetHoverPresentation=function(e){window.sessionStorage.setItem(Ea,e)};const Ia=5500,fa=2e3,ya=10;function Aa(e,t,a){const o=[];if(1==e.length){const t=p.A.Get().GetApp(e[0]);t.GetMicroTrailer()&&o.push({rctImage:l.createElement(U,{appInfo:{id:t.GetID(),type:"game"}}),nDurationMs:Ia}),t.GetOnlyAllAgesSafeScreenshots().slice(0,ya).forEach(((e,t)=>{o.push({rctImage:l.createElement("img",{key:e,className:F().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:fa})}))}if(0==o.length)for(const t of e){const e=p.A.Get().GetApp(t),a=e?.GetAssets()?.GetMainCapsuleURL();a&&o.push({rctImage:l.createElement("img",{key:"fallback",className:F().FullDivImage,loading:"lazy",src:a,alt:e.GetName()}),nDurationMs:fa})}o.length>0?(t(o),a(!0)):"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: GameHoverImages for id/type no images: (might be not age safe screenshots)",(0,r.HO)(e))}function Da(e){const{info:t}=e,a=(0,l.useRef)({include_assets:!0,include_trailers:!0,include_screenshots:!0}),[o,n]=(0,O.G6)(t.id,(0,M.SW)(t.type),a.current),s=(0,l.useRef)(o),[r,i]=(0,l.useState)([]),c=(0,l.useRef)(0),d=(0,u.CH)(),[m]=l.useState(new h.LU),g=(0,l.useCallback)(((e=!1)=>{if(e&&(c.current=0),r?.length>0){const e=r[c.current].nDurationMs;m.Schedule(e,(()=>{const e=c.current;c.current=(c.current+1)%r.length,e!=c.current&&(g(),d())}))}}),[r,m,d]);return(0,l.useEffect)((()=>(!o||r&&0!=r.length&&s.current===o?2==n&&0==r.length?i([{rctImage:l.createElement("img",{key:"default",className:F().FullDivImage,loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXsAAADXCAIAAAB09WZ9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA26SURBVHhe7d1JjyPHEYbhIfkrvAiWLI32BfIGnwwfbNgHAwJsQBfDJ5/8/6/TRUcVE8LMsPL7OBWdUezp91GpWVTkxmJlzHQ7mj788J//vUg4HA7tbI2OHo/HdrZG9w22wWZ63HN77DLXpD1uMe4l7+t8thdVUZ3dyKmJ3cr1+6X7ZqJhmqZ29u704NMU8W6DCD08PLQna9SeB4DHRcYBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pBxANTZM+PYKia8hSt2jSvytJw++/Z37fTdJUtgM92HVt+am9hNPXBlI1/1UHFJxRGp9NJsA99TDr594kXmzwDd1448dOqI948l3BEhXe58+vSb37bTNXZj6wbjosE2GMQvrD2u236b2Kn790Gz0xUL4h4daq95L5K36I4XTcxsV6Ub8HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOqdPv7E1x90qpsPB1Dj5YrlhNWnjRg5DB9dSE++37OdJ3CdLlZ2qlNPRJDd1O9lGD356+bWqOU7f4ar7jvs2467TzdO8pEN3V8aO215LLiy6ixGSg09n9VsOfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQ5/Ty69+00yumfm8+ZIOR5X+ZwZNTa0MHxzaZkjbR177Xdt5BC7Oi76Cp53GnCHcbqL/j6DVFbG4wP/SPPj24ZdaWiCYNHRwb2JtBa+3W6KhlB9dau46I6+Ptrfr6IempL2ubk07nGPhdVbyudgbsJG7+doYq+przcxwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgDhkHQB3zqaOmeFc3mCPd6A2luapFdDdrS0SThg6Oa3dbdGMXNmjhMWz6mqjuevBpUp86evrkq+5vOXjLvm/nV/S+G3Stb5HMCGSrDYYmhXGDJ0fW3SMoGrjtYxbmptbdI95tEBEZvWhPrw38rsq8qP2o67G3e14bHtfdvtduYWbZujc/xwFQh4wDoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+PuP/22na3Th42HRnlxZQqq/6HsLu7Z2dmVedGLqTN+h7nZhQReVPdlaOEPX++fGNh/qO6UuuIpHTIQj9OrVq/ZkzcC/44hl7etuF5b0vr6uJ2rs2zF07JGD810VgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHf85x7KQNWKZ4t35y+V8A11he3AjqwZuUfdc3XufqE6stOPVjqmnSc1++vhLlXHG7awY2e3bgbtaTz0nI1LKoxq6B3b8A0C9rogMe9HzwPKS6guejIpwBKcH9bsdfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQZ7eMcz4vpUTz1/VjIFcwFvO3M2Any+7omhvIY5x58Nc36luHc/r4y+/b6bs7LNqTd5csFdXd52jvsFProO7rXG6XXSRXjmLiVrF3UeY2M30jLBemP0+e76oA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq7JlxdKGRjiZlhs4sbOiLQrWRb+Zet1n2FnW9T7/+4rulVe9IMWXB8W+8vM6RKZCNnrqzKTl+T2tzh76uZ5pM5YuO+7idrZkv2Gs3/PUhOievtu5+mXz5unLYyak5xnDmHnyWYnu2s577vWhqYclVk3EA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXuOONQ4oH7xg26wemjz7+Lrb163CJa9Q5T2Btc5W876XprwtcOM7AZmZpjXOjKxmWbzC1Wj7nBFC3e/K+vH/OX5WFNN3AbvfJpmuaVd9kX3o3GuG3o5SVcH+rvOMvE7XyVDJpFj6WX7Ra258rx3rC3mdlAu9H3f3L78HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOnPNcTt9bKbC1Rf+tpOO7QW0rmfEtw69SHYf524XNpQvxOtb+nYbRNQUy7XHIYbW6Ymo7Wg+5zh6bz60mPut9m8cOrockom/Ps5bxyQvWTRZxMP6gSck+X493TshVqcOufrlRV91eeP46Rq8fSxxhe+qANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pia46VItVuoepjjqozVRGUF7Dy4bmAqaHVUrW0Z2XTvMYtqg+/jWdYcm4K0s4lrqc4ZlyK9rjms4+3k0cW8uub49OFn37bTdeYeTd3CsvMN215F9e7S42aMey+DzuCzxAuz+UjfxBk7jmzj7XFN9B23cr32iOipM1FdlL/07TaIoPkth/YIAOORcQDUIeMAqEPGAVCHjAOgDhkHQB0yDoA6ZBwAdU4f+prjniXYb6HryQ6XgrN+o6WBGkNXrJloe1y3zKybKK7r9pF11/lypcZWnZcPlLxTsmAtbeTgYuUR0nV62nna2PeGbqa6cJqiQbfF6Vem5lg4L7do9zZ1Sz+nUkYqJ5jBU0Pv6ezWPe51mXc7E7bJTm+A9rjJvHNSAyixM9vZmnnX9l/YHBBRl61yUdUgXtTDw0N7sobvqoA+tfV2JZPCPSPjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq3G/G0WVIz5O+JM/zej3R2+Tp3t7JlR/+9I9/t9Nrrq53qdzttojoUfY/HlW+Ox5V31y9sn5ZpnvGPPKosWeZladXpm5ElysHbj+/QbZuoejmynPNyKKBHVmPrUe+aM+vLL+lYLq3J1fOS82xaCD/jhO9uh1n/WEXJpwiXlLIRIfacerB7vR1+ev9/G4G/8dSbmH6dfFzHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnD15+PX9uaefQpUKmkEgXGs0FzaqBq1LKOveP+aVnJAp/ndFXZTNzxfQVdZd7+9tx0zu59e2eZEdb4Kcb2KgeXofnlXcaxH/VY5+Xzu3JlQiKwcOccdrpmrjBVfF75AydNfrRiGzuO1xyYcNWbqfOzWw7i/vQ2N7zBmp/WLKz2dauge2uie6ZgaNrjCwGmKNi6uWfnohM09SerOG7KgB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnDz75qp2u0Z99qyvGXLmaibtyNBfv0xNHVA89F1D1j9Hk0tvjTtSrz5XChWGDy86XSrjecWmwPHapsJ26H78E1dFv0Lq7lQuq71JzLBpExlE1x/NNLDbgvDvlFuhHl4FVXzXvwnwSeD8YFyM5tbAM3s47tg9uLrc1bGHL6+6LYOL+zjHz6vBcsJ+gOyejOmX4qGjg+oqi4whN00N7sobvqgC8QeWbNDIOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6DObhnnvJQStSdrZPDZGnpRRg3OO7nCXhTdILE99L4b7fDHv/3YTtccj6rMdY7JIlgdjcHb2ZrDQWXD6DlyahW1xnW3A7upUwtTm8Ddw5l4ZoPY3eUayIXZtcnwNMnB55V1G8xRObUO648itn1Fgwi9evWqPVnDd1UA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1UhnHFCE5rndqcC238N3suuynecmGSlwS+1aK8r+k5LbV7OCnX378ZTvtmD8QtW9u0HcZYRvd+xKMr73D1N7K2tzMwvetV96NvGQ3XE7ZPfF2jL0J56zQb7FEI7x+tH+7lmC3ga1Xbmdrlq3ZbXCJCsvUorspaI6Mo/6/HPTGtdtDN8hEteg7cvB20pMZPOS661fdTjq2z6tu8BvIDeLFNmhnj80P3G8QEd3dj627y/C4qI1HUmpna/g5DoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgzuCMY/53/fb4+ExBga04UBJd8V6xdSntZJPMLarpkZPz2u6HP/z1X+10hSkns1V2R/FZxYcXKhpkPdoNU8sGRzW1nNlPLfrrkYMe3Ep2H2rgFmqP6/y8/QYR2bw/I7C5b4ioaSDLjidZhqcH19Eg4hF4eHiIx/b8yukX5rcczB0sbvElI6nuZnu4vSOndszUKmyW7RrYtdnxhUzfofQdPI6dVzewUdEgArZ7O1uTiQb16xfpqfXk+rcc+DkOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAncPv//LPdrrOFLMdjt0Gh0V7skZHj7IsOIjuZmHzP9sXZl6V795O1um+7XGdW9eeTNFYgh3Y1LPZSrl+fC6F6w8eARG9UN31shftyRpdhqf6LmXWosEkoxFaao67Tj//6It2usbcwiPv8Hljb95Cru/2kS9S3RN93bqzr2srcQvewvV2YRnXa9ND698kiJjurtmLpje27p6MigY2ulvNsVgWurhmj4qbcAP9974kfo4DoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+tlHn7fTd6c+0bdVo9kG24nuemo7rV5YZtm+r576py/3J1P4kqya0d3N0Km5B44dfUX3OdQfeykbbuerXFg1iJCNhvb8yuH7P//QTte4vacaROggPzv92P9FhOCmnrUnV2y0nXXoBr57e1xnurupzdxPk7hBg9wci0R3PbXuHV11d119q0VfMfgc6s8cET21WViM3p/6lt9y6C9t5HdV8r3Yk7he+7vntT1BO17Nu77NpOTKdWd+jgOgDhkHQB0yDoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVDlxYv/A7Ox9ZVdSuKwAAAAAElFTkSuQmCC",alt:"default"}),nDurationMs:fa}]):r?.length&&g():(s.current=o,2==o.GetStoreItemType()||1==o.GetStoreItemType()?((0,ft.w)(o.GetIncludedAppIDs().length>0,"expected included apps "+o.GetID()+" "+o.GetStoreItemType()),p.A.Get().QueueMultipleAppRequests(o.GetIncludedAppIDs(),{include_assets:!0}).then((()=>Aa(o.GetIncludedAppIDs(),i,g)))):1==o.GetAppType()&&o.GetParentAppID()&&!o.GetAllTrailers().BHasTrailers()?p.A.Get().QueueAppRequest(o.GetParentAppID(),a.current).then((()=>function(e,t,a,o){const n=[],s=p.A.Get().GetApp(t);s.GetMicroTrailer()&&n.push({rctImage:l.createElement(U,{appInfo:{id:s.GetID(),type:"game"}}),nDurationMs:Ia});const r=p.A.Get().GetApp(e).GetOnlyAllAgesSafeScreenshots();r.slice(0,ya).forEach(((e,t)=>{n.push({rctImage:l.createElement("img",{key:e,className:F().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:fa})})),ya-r.length>0&&s.GetOnlyAllAgesSafeScreenshots().slice(0,ya).forEach(((e,t)=>{n.push({rctImage:l.createElement("img",{key:e,className:F().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:fa})})),n.length>0?(a(n),o(!0)):"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: Demo GameHoverImages for id/type no images: (might be not age safe screenshots)",e,t)}(o.GetID(),o.GetParentAppID(),i,g))):Aa([o.GetID()],i,g)),()=>m.Cancel())),[r,o,n,m,g,s]),l.createElement("div",{className:F().TrailerCtn},r?.map(((e,a)=>l.createElement("div",{key:"e-"+a+"-"+t.id+"_"+t.type,className:(0,B.A)(F().FullDivImage,a!=c.current&&F().Transparent)},e.rctImage))))}function Ba(e){const{rgTagIDs:t}=e;return l.createElement("div",{className:F().TagRow},l.createElement("div",{className:F().Tags},t.map((e=>l.createElement(Pt,{key:"tag_"+e,tagid:e,className:F().Tag})))))}function ka(e){const{appInfo:t,bTruncateTotalReviews:a,bShowTooltip:o}=e,[n]=(0,O.G6)(t?.id,(0,M.SW)(t?.type),{include_reviews:!0});if(!n)return null;const s=se.Get().BShowFilteredUserReviewScores()?n.GetFilteredReviewSummary():n.GetUnfilteredReviewSummary();if(!s||0==s.review_score)return null;let r=F().ReviewScoreNone;r=s.review_score>0&&s.review_score<5?F().ReviewScoreLow:5==s.review_score?F().ReviewScoreMixed:F().ReviewScoreHigh;const i=`${v.TS.STORE_BASE_URL}app/${t.id}/#app_reviews_hash`,c=l.createElement("div",{className:(0,B.A)(F().ReviewScoreValue,r)},l.createElement("div",{className:F().ReviewScoreLabel},s.review_score_label),l.createElement("div",{className:F().ReviewScoreCount},a?"("+s.review_count.toLocaleString()+")":(0,P.we)("#GameHover_UserReviewCount",s.review_count.toLocaleString())),!a&&l.createElement("div",{className:F().ReviewScoreHeader}," ",(0,P.we)("#GameHover_UserReviewsHeader")));let d="#ReviewScore_PercentPositive";if(2===n.GetStoreItemType())d="#ReviewScore_PercentPositive_bundle";else if(0===n.GetStoreItemType())switch(n.GetAppType()){case 6:d="#ReviewScore_PercentPositive_software";break;case 7:d="#ReviewScore_PercentPositive_video";break;case 10:d="#ReviewScore_PercentPositive_hardware";break;case 8:d="#ReviewScore_PercentPositive_series"}return l.createElement(Tt,{url:i,className:(0,B.A)(F().ReviewScore,"ReviewScore")},o&&null!=s.percent_positive&&null!=s.review_count&&Boolean(d)?l.createElement(b.he,{bTopmost:!0,toolTipContent:(0,P.we)(d,s.percent_positive,s.review_count)},c):c)}const Ta=(0,i.PA)((e=>{const{appID:t,snr:a,classOverride:o}=e,[n]=(0,O.t7)(t,{}),[s,r]=(0,l.useState)((()=>!n||1!=n?.GetAppType()&&12!=n?.GetAppType()?t:n.GetParentAppID()||t)),i=s&&se.Get().BIsGameWishlisted(s),c=s&&se.Get().BOwnsApp(s),[d,m]=(0,l.useState)(!1),p=(0,ba.m)("GameHoverWishlistButton");if((0,l.useEffect)((()=>{1!=n?.GetAppType()&&12!=n?.GetAppType()||r(n.GetParentAppID()||t)}),[t,n]),c)return null;return l.createElement("div",{className:(0,B.A)(F().WishlistButton,o),onClick:async e=>{e.preventDefault(),e.stopPropagation(),v.iA.logged_in?(m(!0),await se.Get().UpdateGameWishlist(s,!i,a),p.token.reason||m(!1)):(0,dt.vg)()}},l.createElement(k.ari,null),l.createElement("div",{className:(0,B.A)(F().WishlistButtonText,d&&F().WishlistLoadingText)},(0,P.we)(i?"#Sale_RemoveFromWishlist":"#Sale_AddToWishlist")))})),Pa=e=>{const{nCreatorAccountID:t}=e,[a,o]=(0,R.TB)(t),n=(0,Zt.FV)(t);return l.createElement("div",{className:F().GameHoverCreatorFollowButtonCtn},l.createElement("a",{href:n?.GetCreatorHomeURL("developer")},l.createElement("img",{src:a?(0,D.t)(null,"medium"):o.avatar_medium_url})),l.createElement(wa,{clanAccountID:t}))},Ga=(0,i.PA)((e=>{const{info:t,name:a,strStoreUrl:o,elElementToAppend:n,bShowDemoButton:s,bHideBottomHalf:r,bHidePrice:i,bShowDeckCompatibilityDialog:c,bUseSubscriptionLayout:d,nCreatorAccountID:m,bPreventNavigation:p}=e,[u,h]=(0,l.useState)(!1),[g,_]=(0,l.useState)(""),[S]=(0,O.G6)(t.id,(0,M.SW)(t.type),{include_assets:!0,include_release:!0,include_platforms:!0,include_tag_count:20}),C=!d&&!s&&!n,w=0==S?.GetStoreItemType();return l.createElement("div",{className:F().BottomShelf,style:{transform:r&&u?g:""},onMouseEnter:()=>h(!0),onFocus:()=>h(!0),onMouseLeave:()=>h(!1),onBlur:()=>h(!1)},l.createElement("a",{href:p?null:o,target:v.TS.IN_CLIENT?void 0:"_blank",className:F().Midline},Boolean(S)&&l.createElement("div",{className:F().CapsuleImageAnchorPoint},l.createElement("div",{className:(0,B.A)(F().CapsuleImageCtn,F().WithCornerShine)},l.createElement("img",{loading:"lazy",src:S?.GetAssets().GetHeaderURL(),alt:S?.GetName()}))),Boolean(!i&&!d)&&l.createElement("div",{className:F().Price},l.createElement(wt,{info:t,onlyOneDiscountPct:!0}))),l.createElement("div",{className:F().BottomShelfOffScreen,ref:e=>_(`translateY( -${e?.clientHeight||0}px )`)},l.createElement("div",{className:F().TextContent},l.createElement("a",{href:p?null:o,target:v.TS.IN_CLIENT?void 0:"_blank"},l.createElement("div",{className:F().GameTitle},S?.GetName()||a)),Boolean(S)&&l.createElement(Ba,{rgTagIDs:S.GetTagIDs()}),Boolean(!c&&S)&&l.createElement(ka,{appInfo:t}),Boolean(!c&&C)&&l.createElement("div",{className:F().ReviewsAndRelease},l.createElement(W,{item:t,strClassName:F().PlatformDisplay}),Boolean(S?.GetFormattedSteamReleaseDate())&&l.createElement("div",{className:F().ReleaseDate},S?.GetFormattedSteamReleaseDate())),s&&l.createElement(rt,{info:t,className:F().DemoButton}),Boolean(c&&w)&&l.createElement(Ne,{storeItem:S}),Boolean(n)&&n,Boolean(d&&w)&&l.createElement(Gt,{appid:t.id,bIsMuted:!1}),m&&l.createElement(Pa,{nCreatorAccountID:m}))))}));(0,i.PA)((e=>{l.useEffect((()=>{se.Get().HintLoad()}),[]);const{info:t,strStoreUrl:a,bHideBottomHalf:o,bShowDeckCompatibilityDialog:n,bShowWishlistButton:s=!0}=e;let r;return t.overrideNavigation&&(r=e=>t.overrideNavigation()),l.createElement("div",{className:(0,B.A)(F().GameHoverCapsuleCtn,x().InGameHover,o&&F().UseHidingBottomHalf),onClick:r},l.createElement("a",{href:r?null:a,target:v.TS.IN_CLIENT?void 0:"_blank",className:F().TrailerAnchorStoreLink},Boolean(s&&!n&&!r)&&l.createElement(Ta,{appID:t.id,snr:e.strSNR}),l.createElement(Da,{info:t})),l.createElement(Ga,{...e,bPreventNavigation:Boolean(r)}))}));function La(e){const{type:t,id:a,hoverClassName:o,fnGetIDOverride:n,fnHoverState:s,children:r}=e,i=l.useRef(null),c=l.useCallback((e=>{"clan"!=t&&(s&&s(!0),window.GameHover&&window.GameHover(n?n():i.current,e,"global_hover",{type:t,id:a,v6:1}))}),[t,s,n,a]),d=l.useCallback((e=>{"clan"!=t&&(s&&e.relatedTarget&&s(!1),window.HideGameHover&&window.HideGameHover(n?n():i.current,e,"global_hover"))}),[t,s,n]);return"dev"==v.TS.WEB_UNIVERSE&&(0,ft.w)("store"==(0,v.yK)(),"StoreGameHoverAnchorSource only works on Store web properties"),l.createElement("div",{ref:i,className:o,onMouseEnter:c,onMouseLeave:d,onFocus:c,onBlur:d},r)}function Na(e){const{id:t,type:a,strExtraParams:o}=e,n=(0,pe.n9)(),s="clan"==a?(0,d.wJ)(`${v.TS.STORE_BASE_URL}curator/${t}${o?`?${o}`:""}`,n):(0,d.wJ)(`${v.TS.STORE_BASE_URL}${a}/${t}${o?`?${o}`:""}`,n);return l.createElement(La,{...e},l.createElement(f.Ii,{className:e.className,href:s,target:v.TS.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"},e.children))}const Ra=(0,i.PA)((e=>{const{myInstance:t,bIsHovered:a,setIsHovered:o,displayStoreItem:n,baseGameStoreItem:r,displayInfo:i,purchaseInfo:c,hoverType:m,nHoverId:p,artworkInfo:u,artworkStoreItem:h}=function(e,t){const a=(0,l.useRef)(s().CancelToken.source()),{id:o,type:n}=e,r=t?{...ce,...t}:ce,i=(0,l.useMemo)((()=>({id:o,type:n})),[o,n]),[c]=(0,O.G6)(i.id,(0,M.SW)(i.type),r),[d,m]=(0,l.useState)({id:o,type:n}),[p]=(0,O.G6)(d?.id,(0,M.SW)(d?.type),r),u=(0,l.useMemo)((()=>p?.GetIncludedAppIDs()?.length>1&&null==p?.GetAssets().GetMainCapsuleURL()&&null==p?.GetAssets().GetHeaderURL()?{id:p.GetIncludedAppIDs()[0],type:"game"}:d),[d,p]),[h]=(0,O.t7)(u?.id,r),g=(0,l.useMemo)((()=>({id:p?.GetParentAppID()!=p?.GetID()?p?.GetParentAppID():void 0,type:"game"})),[p]),[_]=(0,O.t7)(g.id,r),[S]=(0,l.useState)(++Se.instance_count),[C,v]=(0,l.useState)(!1),[w,b]=(0,l.useState)(ge(n)),[E,I]=(0,l.useState)(o);return(0,l.useEffect)((()=>{if(se.Get().HintLoad(),1==c?.GetStoreItemType()&&1==c.GetIncludedAppIDs().length&&(d.id!=c.GetIncludedAppIDs()[0]||"game"!=d.type)&&10!=c.GetAppType()&&!a?.current.token.reason){const e=c.GetIncludedAppIDs()[0];m({id:e,type:"game"}),b("app"),I(e)}}),[d.id,d.type,c]),(0,l.useEffect)((()=>()=>a?.current.cancel("StoreSalePreviewWidget: unmounting")),[]),{myInstance:S,bIsHovered:C,setIsHovered:v,purchaseInfo:i,displayInfo:d,displayStoreItem:p,baseGameStoreItem:_,baseGameInfo:g,hoverType:w,nHoverId:E,artworkInfo:u,artworkStoreItem:h}}(e),{bShowDemoButton:g,bHidePrice:_,bUseSubscriptionLayout:S,bHidePlatforms:C,bHideContainedApps:w,bAllowTwoLinesForHeader:b,bShowReviewSummary:E,bShowDeckCompatibilityDialog:D,bAutoFocus:k,fnOnClickOverride:T,bIsMarketingMessage:L}=e,N=(0,pe.n9)(),R=l.useMemo((()=>n?.GetIncludedAppIDsOrSelf()),[n]),H=(0,l.useRef)(null),[V,z]=(0,l.useState)(!1),j=(0,v.Qn)();if((0,l.useEffect)((()=>{H.current&&z(H.current.offsetWidth<370)}),[H]),!n)return null;const X=n.GetBestPurchaseOption().discount_pct,Z=n.GetIncludedAppIDs().length;let Q=n.GetShortDescription();2!=n.GetStoreItemType()&&1!=n.GetStoreItemType()||(Q=X?(0,P.we)("#Sale_BundleSave_WithDiscount",X,Z):(0,P.we)("#Sale_BundleSave",Z));const Y=(0,d.L3)(N),q=I(n.GetStorePageURL()),K=Boolean(!w&&Z>0),J=n.BHasTags()?n.GetTagIDs():r?.BHasTags()?r.GetTagIDs():[],$=0==n.GetStoreItemType(),ee=(0,d.wJ)(q,N),te=j||n.BIsReleased()||n.BIsPrePurchase();return l.createElement(_e,{appid:$?n.GetAppID():void 0},l.createElement(y.Z,{className:(0,B.A)({[x().StoreSaleWidgetOuterContainer]:!0,[x().AllowTwoLineHeader]:b}),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),"flow-children":"grid",navEntryPreferPosition:A.iU.PREFERRED_CHILD,autoFocus:k,navKey:"preview_widget_"+n.GetID()},l.createElement(f.ml,{onClick:L?T:null,className:(0,B.A)(x().StoreSaleWidgetContainer,x().SaleItemDefaultCapsuleDisplay,L?x().MarketingMessage:""),...yt(n,N,j,void 0,T),preferredFocus:K},l.createElement("div",{className:(0,B.A)(x().StoreSaleWidgetHalfLeft)},l.createElement("a",{href:T?void 0:ee,target:v.TS.IN_CLIENT||T?void 0:"_blank",onClick:T},l.createElement("div",{className:x().StoreSaleWidgetImage},l.createElement(le,{appids:R}),l.createElement(Fa,{info:u,imageType:"header"}),l.createElement(Xt,{eDeckCompatibilityCategory:n.GetPlatforms()?.steam_deck_compat_category}),Boolean(i&&a)&&l.createElement(U,{appInfo:i})))),l.createElement("div",{className:(0,B.A)(x().StoreSaleWidgetRight,K?x().Bundle:"")},Boolean($&&!T)&&l.createElement(Ta,{appID:i.id,classOverride:(0,B.A)(F().WishlistButtonNotTop,"WishlistButton"),snr:Y}),l.createElement("div",{className:x().TitleCtn},l.createElement("a",{href:T?void 0:ee,target:v.TS.IN_CLIENT?void 0:"_blank",onClick:T},l.createElement("div",{className:(0,B.A)(x().StoreSaleWidgetTitle,"StoreSaleWidgetTitle")},n.GetName()))),l.createElement("div",{className:x().StoreSaleWidgetReleaseAndTags},J&&l.createElement("div",{className:x().StoreSaleWidgetTags},J.map((e=>l.createElement(Pt,{key:"tag_"+e,tagid:e,className:x().AppTag})))),l.createElement("div",{className:x().WidgetReleaseDateAndPlatformCtn,ref:H},$&&l.createElement("div",{className:x().StoreSaleWidgetRelease},n.GetFormattedSteamReleaseDate()),!C&&l.createElement(l.Fragment,null,l.createElement(W,{item:i,bMinimizePlatforms:V}),Boolean(D&&0==n?.GetStoreItemType()&&n.GetPlatforms())&&l.createElement(G,{className:x().DeckCompatIcon,category:n.GetPlatforms().steam_deck_compat_category}))),E&&l.createElement(ka,{appInfo:i})),K&&l.createElement(Oa,{info:c}),Boolean($&&Q)&&l.createElement("div",{className:(0,B.A)(x().StoreSaleWidgetShortDesc,"StoreSaleWidgetShortDesc")},Boolean(Q.startsWith("#")&&-1==Q.indexOf(" "))?l.createElement("span",{className:x().LocalizationSpan},(0,P.oW)(Q,l.createElement("i",null),l.createElement("i",null),l.createElement("i",null),l.createElement("i",null))):Q),Boolean(!T)?l.createElement(l.Fragment,null,Boolean(S&&$)?l.createElement(Gt,{appid:i.id,bIsMuted:a}):l.createElement(Ct,{info:c,bShowDemoButton:g,bHidePrice:_,bHideWishlistButton:te,bShowDeckCompatibilityDialog:D})):l.createElement("div",{className:x().StoreActionWidgetContainer},l.createElement("div",{className:x().StoreSalePriceActionWidgetContainer},l.createElement(wt,{info:c}))),l.createElement("div",{className:x().StoreSaleWidgetBgTint},l.createElement(Fa,{info:i,imageType:"header"}))))),Boolean(e.strReason)&&e.strReason.length>0&&l.createElement("div",{className:x().RecommendationReason},e.strReason))})),Ma=6;function Oa(e){const{info:t}=e,[a]=(0,O.G6)(t.id,(0,M.SW)(t.type),{}),[o,n]=l.useState(null);return l.useEffect((()=>{a&&(1==a.GetStoreItemType()||2==a.GetStoreItemType()?n(a.GetIncludedAppIDs().map((e=>({id:e,type:"game"})))):console.error("ContentsPreviewList unexpected store item type: ",a.GetStoreItemType()))}),[a]),o?l.createElement("div",{className:x().BundleContentPreview},l.createElement("div",{className:x().ContentsCount},(0,P.Yp)("#Sale_ContentPreview",o.length)),l.createElement("div",{className:x().PreviewCtn},o.slice(0,Ma).map((e=>l.createElement(Ha,{key:`preview${e.id}_${e.type}`,info:e}))))):null}function Ha(e){const{info:t}=e,[a]=(0,O.mZ)(t.id,(0,M.SW)(t.type),{include_assets:!0}),o=a?.GetAssets().GetSmallCapsuleURL();return l.createElement(Na,{type:ge(t.type),id:t.id,hoverClassName:x().PreviewItem},l.createElement("img",{src:o,className:x().PreviewImg,loading:"lazy",alt:a?.GetName()}))}function Fa(e){const{info:t,imageType:a}=e,[o]=(0,O.G6)(t.id,(0,M.SW)(t.type),{include_assets:!0});if(!o)return l.createElement(Pe.t,{size:"small",position:"center",string:(0,P.we)("#Loading")});if("library"===a)return l.createElement(Wt,{info:t});let n,s,r=zt(o,"header"===a),i="";if("main"===a)n=x().mainCapsuleImgWidth,s=x().mainCapsuleImgHeight,i=x().MainCapsuleImageContainer;else n=x().headerCapsuleImgWidth,s=x().headerCapsuleImgHeight,i=x().HeaderCapsuleImageContainer;return l.createElement("div",{className:(0,B.A)(i,"CapsuleImageCtn")},l.createElement(Ut,{lazyLoad:!0,srcs:r,className:(0,B.A)(x().CapsuleImage),width:n,height:s,alt:o.GetName()}))}(0,i.PA)((e=>{const t=P.NT.GetWithFallback(e.link.localized_link_capsule,e.language);return l.createElement(Tt,{url:e.link.url,className:e.strClassName?e.strClassName:void 0,bSkipForcingStoreLink:!0},l.createElement("div",{className:x().CapsuleContainer},Boolean(e.link.localized_link_capsule)&&l.createElement(xt,{className:x().LinkCapsuleImage,src:`${(0,N.mJ)()}${e.clanAccountID}/${t}`}),Boolean(e.link.materialized_link_capsule)&&l.createElement("img",{className:x().LinkCapsuleImage,src:e.link.materialized_link_capsule})))}));var Va=a(51573),xa=a(95623);function Ua(e){const{gidEvent:t}=e,a=(0,Va.RR)(t),[o,n]=(0,l.useMemo)((()=>{if(a?.jsondata?.localized_sale_product_banner?.length>0&&a?.jsondata?.localized_sale_product_mobile_banner?.length>0){const e=(0,At.sf)(v.TS.LANGUAGE),t=P.NT.GetWithFallback(a.jsondata.localized_sale_product_banner,e),o=P.NT.GetWithFallback(a.jsondata.localized_sale_product_mobile_banner,e);if(t?.length>0&&o?.length>0){const e=a.clanSteamID.GetAccountID();return[`${(0,N.mJ)()}${e}/${t}`,`${(0,N.mJ)()}${e}/${o}`]}}return[null,null]}),[a]);return o?.length>0&&n?.length>0?l.createElement("a",{href:(0,C.k2)(a.GetSaleURL()),className:xa.Link},l.createElement("img",{src:o,className:(0,B.A)(xa.Banner,xa.Big)}),l.createElement("img",{src:n,className:(0,B.A)(xa.Banner,xa.Mobile)})):null}var Wa,za=a(73280),ja=a.n(za),Xa=a(29080);!function(e){e.topleft="topleft",e.top="top",e.topright="topright",e.left="left",e.middle="middle",e.right="right",e.bottomleft="bottomleft",e.bottom="bottom",e.bottomright="bottomright"}(Wa||(Wa={}));let Za=class extends l.Component{m_rectLinkRegion;m_elLinkRegionBox;m_nLocalOffsetXPct;m_nLocalOffsetYPct;m_fnMouseUp=null;m_fnMouseMove=null;m_listeners=new h.Ji;m_strDescription="";m_aspectRatio=1;componentWillUnmount(){this.m_listeners.Unregister()}constructor(e){super(e),this.state={curLeftPosPct:this.props.xPosPct,curTopPosPct:this.props.yPosPct,curRightPosPct:100-(this.props.widthPct+this.props.xPosPct),curBottomPosPct:100-(this.props.yPosPct+this.props.heightPct),curWidthPct:this.props.widthPct,curHeightPct:this.props.heightPct,EdgeDown:null,text_link_url:this.props.link_url,text_link_description:this.props.link_description,bEditingLink:!1,valid_link:this.validateUrl(this.props.link_url)},this.m_strDescription=this.props.link_description,this.m_aspectRatio=this.props.heightPct>0&&this.props.widthPct>0?this.props.widthPct/this.props.heightPct:1}LinkRegionBoxRef(e){this.m_elLinkRegionBox=e}OnMouseDown(e,t){this.m_fnMouseUp=e=>{this.OnMouseUp(e,t)},this.m_fnMouseMove=e=>{this.OnMouseMove(e,t)},this.setState({EdgeDown:t}),this.m_rectLinkRegion=this.m_elLinkRegionBox.parentElement.getBoundingClientRect(),this.m_nLocalOffsetXPct=(e.clientX-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.state.curLeftPosPct,this.m_nLocalOffsetYPct=(e.clientY-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.state.curTopPosPct,this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mousemove",this.m_fnMouseMove),this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mouseup",this.m_fnMouseUp),e.preventDefault(),e.stopPropagation()}OnMouseMove(e,t){if(void 0!==this.state.EdgeDown){switch(e.shiftKey&&this.m_fnMouseUp(),t){case Wa.left:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case Wa.right:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX)});break;case Wa.top:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY)});break;case Wa.bottom:this.UpdateState({curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Wa.topleft:this.UpdateState({curTopPosPct:this.CalcBottomEdge(e.clientY),curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case Wa.topright:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.CalcRightEdge(e.clientX)});break;case Wa.bottomleft:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Wa.bottomright:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Wa.middle:{const t=(0,Xa.OQ)(this.CalcLeftEdge(e.clientX),0,100-this.state.curWidthPct),a=100-(t+this.state.curWidthPct),o=(0,Xa.OQ)(this.CalcTopEdge(e.clientY),0,100-this.state.curHeightPct),n={curLeftPosPct:t,curRightPosPct:a,curTopPosPct:o,curBottomPosPct:100-(o+this.state.curHeightPct)};this.setState(n);break}}e.preventDefault(),e.stopPropagation()}}IsValidPct(e){return e>=0&&e<=100}UpdateState(e){let t=void 0!==e.curTopPosPct?e.curTopPosPct:this.state.curTopPosPct,a=void 0!==e.curBottomPosPct?e.curBottomPosPct:this.state.curBottomPosPct,o=void 0!==e.curLeftPosPct?e.curLeftPosPct:this.state.curLeftPosPct,n=void 0!==e.curRightPosPct?e.curRightPosPct:this.state.curRightPosPct,s=(0,Xa.OQ)(100-n-o,this.props.widthMinPct||0,this.props.widthMaxPct||100),r=(0,Xa.OQ)(100-a-t,this.props.heightMinPct||0,this.props.heightMaxPct||100);this.props.bLockAspectRatio&&(void 0!==e.curLeftPosPct||void 0!==e.curRightPosPct?r=s/this.m_aspectRatio:s=r*this.m_aspectRatio),void 0!==e.curLeftPosPct?o=100-n-s:n=100-(o+s),void 0!==e.curTopPosPct?t=100-a-r:a=100-(t+r);const i=100-n-o,l=100-a-t;this.IsValidPct(o)&&this.IsValidPct(n)&&this.IsValidPct(t)&&this.IsValidPct(a)&&this.IsValidPct(i)&&this.IsValidPct(l)&&this.setState({curLeftPosPct:o,curRightPosPct:n,curTopPosPct:t,curBottomPosPct:a})}GetXPercent(e){return(e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.m_nLocalOffsetXPct}GetYPercent(e){return(e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.m_nLocalOffsetYPct}CalcLeftEdge(e){return(0,Xa.OQ)(this.GetXPercent(e),0,100)}CalcRightEdge(e){return(0,Xa.OQ)(100-(this.GetXPercent(e)+this.state.curWidthPct),0,100)}CalcTopEdge(e){return(0,Xa.OQ)(this.GetYPercent(e),0,100)}CalcBottomEdge(e){return(0,Xa.OQ)(100-(this.GetYPercent(e)+this.state.curHeightPct),0,100)}OnMouseUp(e,t){this.setState({curWidthPct:100-this.state.curRightPosPct-this.state.curLeftPosPct}),this.setState({curHeightPct:100-this.state.curBottomPosPct-this.state.curTopPosPct}),this.setState({EdgeDown:void 0}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description}),this.m_listeners.Unregister()}async HandleDelete(){this.props.deleteFn&&this.props.deleteFn(this.props.index)}OnSetLinkURLChange(e){this.setState({text_link_url:e.target.value,valid_link:this.validateUrl(e.target.value)})}OnSetLinkDescriptionChange(e){this.setState({text_link_description:e.target.value})}validateUrl(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)}OnSaveLink(){this.m_strDescription=this.state.text_link_description,this.setState({bEditingLink:!this.state.bEditingLink}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description})}OnEditLink(){this.setState({bEditingLink:!this.state.bEditingLink})}render(){let e={left:this.state.curLeftPosPct+"%",top:this.state.curTopPosPct+"%",right:this.state.curRightPosPct+"%",bottom:this.state.curBottomPosPct+"%"},t=ja().LinkRegionDragBox;return null!==this.state.EdgeDown&&(t+=` ${ja().EdgeDown} `+ja()[this.state.EdgeDown]),l.createElement("div",{className:t,style:e,ref:this.LinkRegionBoxRef,draggable:!1},l.createElement("div",{className:ja().LinkRegionGridBox},l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().TopLeft}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.topleft)},draggable:!1}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().Top}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.top)}}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().TopRight}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.topright)},draggable:!1}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().Left}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.left)},draggable:!1}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().Middle}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.middle)},draggable:!1},this.props.deleteFn&&l.createElement("div",{className:ja().LinkRegionDelete,onClick:this.HandleDelete},l.createElement(k.sED,null)),!this.props.bDisableLink&&l.createElement("div",{className:ja().LinkRegionSettings,onClick:this.OnEditLink},l.createElement(k.xv8,null)),l.createElement("div",{className:ja().LinkText}," ",this.m_strDescription," ")),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().Right}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.right)},draggable:!1}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().BottomLeft}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.bottomleft)},draggable:!1}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().Bottom}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.bottom)},draggable:!1}),l.createElement("div",{className:`${ja().LinkRegionEdge} ${ja().BottomRight}`,onMouseDown:e=>{this.OnMouseDown(e,Wa.bottomright)},draggable:!1})),this.state.bEditingLink&&l.createElement("div",{className:ja().LinkRegionInfo},l.createElement(be.pd,{className:ja().LinkRegionInput,type:"text",name:"link_url",value:this.state.text_link_url,label:(0,P.we)("#SteamTV_LinkURL"),placeholder:"https://www.example.com",onChange:this.OnSetLinkURLChange,mustBeURL:!0}),l.createElement(be.pd,{className:ja().LinkRegionInput,type:"text",name:"link_description",value:this.state.text_link_description,label:(0,P.we)("#SteamTV_LinkDescription"),placeholder:(0,P.we)("#SteamTV_LinkDescription_Placeholder"),onChange:this.OnSetLinkDescriptionChange}),l.createElement("div",{className:ja().LinkRegionButtonContainer},l.createElement(be.$n,{disabled:!this.state.valid_link,onClick:this.OnSaveLink}," ",(0,P.we)("#Button_OK")," "),l.createElement(be.$n,{onClick:this.OnEditLink}," ",(0,P.we)("#Button_Cancel")))))}};(0,o.Cg)([u.oI],Za.prototype,"LinkRegionBoxRef",null),(0,o.Cg)([u.oI],Za.prototype,"OnMouseDown",null),(0,o.Cg)([u.oI],Za.prototype,"OnMouseMove",null),(0,o.Cg)([u.oI],Za.prototype,"OnMouseUp",null),(0,o.Cg)([u.oI],Za.prototype,"HandleDelete",null),(0,o.Cg)([u.oI],Za.prototype,"OnSetLinkURLChange",null),(0,o.Cg)([u.oI],Za.prototype,"OnSetLinkDescriptionChange",null),(0,o.Cg)([u.oI],Za.prototype,"OnSaveLink",null),(0,o.Cg)([u.oI],Za.prototype,"OnEditLink",null),Za=(0,o.Cg)([i.PA],Za);var Qa=a(34370),Ya=a(51320),qa=a(79897),Ka=a(32654),Ja=a.n(Ka);function $a(){return l.createElement("div",{className:"STV_ReplayBanner"},(0,P.we)("#DASHPlayerControls_IsReplay"))}const eo=(0,i.PA)((e=>{let t=e.video;if(t&&(t.IsBroadcastClip()||t.IsBroadcastVOD()))return null;let a=m.fK.Loading,o="";if(t){a=t.GetBroadcastState(),o=t.GetBroadcastStateDescription();let e=t.IsBuffering();a==m.fK.Unlocking&&(a=m.fK.Loading,o=""),a==m.fK.Ready&&e&&(a=m.fK.Loading,o="")}if(t&&a!=m.fK.Error&&t.GetUserInputNeeded())return null;if(a==m.fK.Ready)return null;let n=a==m.fK.Loading;return l.createElement("div",{className:"BroadcastVideoWatchState",style:{filter:"hue-rotate(40deg)"}},n&&l.createElement(Pe.t,null),!n&&l.createElement("div",{className:"BroadcastVideoWatchState_Text"},o))}));class to extends l.Component{OnClick(){m.BroadcastWatchStore.UserInputClickVideo(this.props.video)}render(){return l.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},l.createElement(k.jGG,null),l.createElement("span",null,(0,P.we)("#DASHPlayerControls_ClickToPlay")))}}(0,o.Cg)([u.oI],to.prototype,"OnClick",null);let ao=class extends l.Component{constructor(e){super(e)}HideStats(){this.props.closeStats&&this.props.closeStats()}render(){let e=this.props.stats;return l.createElement("div",{className:"dash_video_stats"},l.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},l.createElement(k.sED,null)),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_BufferingResolution")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_PlaybackResolution")," ",l.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_HtmlResolution")," ",l.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_ContentServer")," ",l.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_StallEvents")," ",l.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_FailedDownloads")," ",l.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_TimeToFirstFrame")," ",l.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_PlaybackRate")," ",l.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),l.createElement(oo,{stats:e}))}};(0,o.Cg)([u.oI],ao.prototype,"HideStats",null),ao=(0,o.Cg)([i.PA],ao);let oo=class extends l.Component{constructor(e){super(e)}createBufferedRange(e){let t=this.props.stats,a=[],o=e?"vidbuf":"audbuf",n=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(n>0)for(let s=0;s<n;++s){let n=(0,P.we)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",s),r=e?t.GetBufferedVideoSegmentForDisplay(s):t.GetBufferedAudioSegmentForDisplay(s);a.push(l.createElement("div",{key:o+s},n," ",l.createElement("span",{className:"videoStatsValue"},r)))}else{let t=(0,P.we)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");a.push(l.createElement("div",{key:o+"none"},t))}return a}render(){let e=this.props.stats;return l.createElement("div",{className:"dash_video_quick_stats"},l.createElement("div",null,(0,P.we)("#DASHPlayerStats_BytesReceived")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&l.createElement("div",null,(0,P.we)("#DASHPlayerStats_DroppedFrames")," ",l.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_VideoBuffered")," ",l.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_AudioBuffered")," ",l.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_BandwidthRequired")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_BandwidthVideo")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_BandwidthNums")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_DownloadNums")," ",l.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_ActiveDownloads")," ",l.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_VideoDownloadProgress")," ",l.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_DroppingFrames")," ",l.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),l.createElement("div",null,(0,P.we)("#DASHPlayerStats_CurrentFPS")," ",l.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))}};oo=(0,o.Cg)([i.PA],oo);var no=a(786);class so extends l.Component{m_elSettingsButton;m_SettingsButtonPos;m_elClickListener;m_elSettingsPanel;m_elSubtitlesButton=l.createRef();m_elSubtitlesPanel=l.createRef();m_SubtitlesButtonPos;constructor(e){super(e),this.state={bSettingsOpen:!1,bSubtitlesOpen:!1}}OnVideoControlClick(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnSubtitlesClick(e){this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen}),this.m_SubtitlesButtonPos=[this.m_elSubtitlesButton.current.offsetLeft,this.m_elSubtitlesButton.current.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnMouseUp(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),(0,te.id)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1}),(0,te.id)(this.m_elSubtitlesPanel.current,e.target)||this.setState({bSubtitlesOpen:!1})}bindSettingsButton(e){this.m_elSettingsButton=e}BindSettingsPanel(e){this.m_elSettingsPanel=e}OnShowStats(e){this.props.onShowStats(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})}render(){let e=!1,t=!1;const{video:a,actions:o}=this.props;let n,s,r=0,i=l.createElement("div",{key:"separator",className:"settingsMenuSeparator"});if(this.state.bSettingsOpen&&(e=!0,n=this.props.video.GetVideoRepresentations(),s=n.map((e=>l.createElement(no.n,{key:e.id,onClick:()=>{this.props.video.SetVideoRepresentation(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})},bChecked:e.selected},e.displayName))),s.push(i),s.push(l.createElement(no.D,{key:"statsToggle",onClick:this.OnShowStats},(0,P.we)("#Broadcast_VideoContext_ToggleStats"),"\t")),r=0-(21*s.length+32)),this.state.bSubtitlesOpen){t=!0,s=[],s.push(l.createElement(no.n,{key:"none",onClick:()=>{this.props.video.SetSubtitles(null),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},className:"NoSubtitles",bChecked:!1},(0,P.we)("#Broadcast_None")));for(let e=0;e<this.props.video.ListSubtitles().length;e++){const t=this.props.video.ListSubtitles()[e];s.push(l.createElement(no.n,{key:t.language,onClick:()=>{this.props.video.SetSubtitles(t.language),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},bChecked:"showing"===t.mode},t.label))}r=-292}const c=this.props.video.BHasPlayer()&&this.props.video.BHasTimedText();return l.createElement("div",{className:"STV_BroadcastSettings"},c&&l.createElement("div",{className:"videoControlButton"+(c?" ClosedCaptionsActive":""),onClick:this.OnSubtitlesClick,ref:this.m_elSubtitlesButton},l.createElement(k.N8C,null)),l.createElement("div",{className:"videoControlButton VideoSettings "+(e?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},l.createElement(k.wB_,null)),l.createElement(ro,{video:a}),o&&o.map((e=>l.createElement("div",{key:e.key,className:"videoControlButton videoControlFitWidth"},e))),e&&l.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:r}},l.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},s)),t&&l.createElement("div",{ref:this.m_elSubtitlesPanel,className:"STV_BroadcastSettingsPanel SubtitlesMenu",style:{maxHeight:"260px",left:this.m_SubtitlesButtonPos[0],top:this.m_SubtitlesButtonPos[1],marginTop:r}},l.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},s)))}}(0,o.Cg)([u.oI],so.prototype,"OnVideoControlClick",null),(0,o.Cg)([u.oI],so.prototype,"OnSubtitlesClick",null),(0,o.Cg)([u.oI],so.prototype,"OnMouseUp",null),(0,o.Cg)([u.oI],so.prototype,"bindSettingsButton",null),(0,o.Cg)([u.oI],so.prototype,"BindSettingsPanel",null),(0,o.Cg)([u.oI],so.prototype,"OnShowStats",null);let ro=class extends l.Component{constructor(e){super(e),(0,r.Gn)(this)}k_nHideSliderTimeout=1500;m_bShowSlider=true;m_schHideSlider=new h.LU;m_bChildDragging=!1;m_bMouseOver=!1;componentWillUnmount(){this.m_schHideSlider.Cancel()}ToggleMute(){let e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)}OnMouseEnter(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()}OnMouseLeave(e){this.m_bMouseOver=!1,this.ScheduleHide()}OnChildDrag(e){this.m_bChildDragging=e,this.ScheduleHide()}ScheduleHide(){this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,(()=>this.m_bShowSlider=true))}render(){let e=this.props.video,t=e.IsMuted(),a=100*e.GetVolume(),o="videoControlButton";a>65?o+=" HighestVolume":a>45?o+=" HighVolume":a<46&&a>24?o+=" MedVolume":a<25&&(o+=" LowVolume");let n="BroadcastVolumeControl";return this.m_bShowSlider&&(n+=" ShowVolumeSlider"),t&&(n+=" muted"),l.createElement("div",{className:n,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},l.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},l.createElement("div",{className:o,onClick:this.ToggleMute},l.createElement(k.fSs,null)),l.createElement(io,{video:e,onDrag:this.OnChildDrag})))}};(0,o.Cg)([r.sH],ro.prototype,"m_bShowSlider",void 0),(0,o.Cg)([u.oI],ro.prototype,"ToggleMute",null),(0,o.Cg)([u.oI],ro.prototype,"OnMouseEnter",null),(0,o.Cg)([u.oI],ro.prototype,"OnMouseLeave",null),(0,o.Cg)([u.oI],ro.prototype,"OnChildDrag",null),ro=(0,o.Cg)([i.PA],ro);let io=class extends l.Component{constructor(e){super(e),(0,r.Gn)(this)}m_elSlider=null;m_nVolumeStartOfDrag=0;OnMouseDown(e){let t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)}OnMouseMove(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)}OnMouseUp(e){if(!this.m_elSlider)return;this.SetVolumeWithCoord(this.m_elSlider,e.clientX);let t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}SetVolumeWithCoord(e,t){let a=e.getBoundingClientRect(),o=Xa.Fu(t,a.left,a.right,0,1),n=Xa.OQ(o,0,1),s=this.props.video;s.SetMute(o<.01),s.SetVolume(n)}render(){let e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);let a={left:`${t}%`},o={width:`${t}%`};return l.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},l.createElement("div",{className:"BroadcastVolumeSlider_Track"}),l.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:o}),l.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:a}))}};(0,o.Cg)([u.oI],io.prototype,"OnMouseDown",null),(0,o.Cg)([u.oI],io.prototype,"OnMouseMove",null),(0,o.Cg)([u.oI],io.prototype,"OnMouseUp",null),(0,o.Cg)([r.XI],io.prototype,"SetVolumeWithCoord",null),io=(0,o.Cg)([i.PA],io);const lo=15;let co=class extends l.Component{m_schHideControls=new h.LU;m_schUnmountControls=new h.LU;m_elVideo=null;m_elBroadcastPlayer=null;m_bMouseDown=!1;m_elMouseDown=null;m_listeners=new h.Ji;m_cancelSignal=s().CancelToken.source();constructor(e){super(e),this.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1}}StopVideo(){let e=this.state.video;e&&(m.BroadcastWatchStore.StopVideo(e),this.setState({video:null}))}IsMuted(){let e=this.state.video;return!e||e.IsMuted()}StopPlaybackTillUserInput(){let e=this.state.video;e&&e.StopPlaybackTillUserInput()}componentDidUpdate(e,t){!t.bMountControls&&this.state.bMountControls?setTimeout((()=>{this.setState((e=>({bControlsVisible:e.bMountControls})))}),15):t.bControlsVisible&&!this.state.bControlsVisible&&this.state.video&&!this.state.video.IsPaused()&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls),this.props.steamIDBroadcast!==e.steamIDBroadcast&&this.BindVideoRef(this.m_elVideo),!this.props.nAppIDVOD||void 0!==t.strInitialCapsuleImageUrl&&e.nAppIDVOD==this.props.nAppIDVOD||p.A.Get().QueueAppRequest(this.props.nAppIDVOD,{include_assets:!0,include_trailers:!0}).then((()=>{const e=p.A.Get().GetApp(this.props.nAppIDVOD),t=e?.GetAssets().GetMainCapsuleURL()||"";this.setState({strInitialCapsuleImageUrl:t})}))}componentWillUnmount(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()}BindBroadcastPlayerRef(e){this.m_listeners.Unregister(),this.m_elBroadcastPlayer=e,e&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))}BindVideoRef(e){let t;this.StopVideo(),this.props.steamIDBroadcast?e&&(t=m.BroadcastWatchStore.CreateBroadcastVideo(e,this.props.steamIDBroadcast,this.props.watchLocation,this.props.bWebRTC)):this.props.broadcastClipID?e&&(t=m.BroadcastWatchStore.CreateClipVideo(e,this.props.broadcastClipID,this.props.watchLocation)):this.props.nAppIDVOD&&e&&(t=m.BroadcastWatchStore.CreateVODVideo(e,this.props.nAppIDVOD,this.props.watchLocation),this.props.fnOnVideoEnd&&t.SetOnVideoCallback(this.props.fnOnVideoEnd)),t&&(this.props.bStartMuted&&t.SetMute(!0),this.props.bStartPaused?t.StopPlaybackTillUserInput():t.Play()),this.setState({video:t}),this.m_elVideo=e}OnMouseDown(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}OnMouseUp(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseMove(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseLeave(e){this.HideControls()}HideControls(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1})}UmountControls(){this.setState((e=>{if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}}))}ShowStatsView(){let e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))}OnContextMenu(e){this.state.bFullscreen||((0,c.lX)(l.createElement(_.tz,null,this.GetContextMenuItems()),e),e.preventDefault())}ToggleStatsView(e){let t=!this.state.bShowStats;this.setState({bShowStats:t});let a=this.state.video;a&&a.SetStatsViewIsVisible(t)}ShowStorePage(e){let t=this.state.video;if(!t||!this.props.onOpenLinkInNewWindow)return;let a=t.GetBroadcastInfo();if(!a)return;let o=(0,d.k2)(`${v.TS.STORE_BASE_URL}app/${a.m_strAppId}`);this.props.onOpenLinkInNewWindow(e,o),e.stopPropagation()}GetContextMenuItems(){let e=[],t=this.state.video;if(!t)return e;let a=t.GetBroadcastInfo();return e.push(l.createElement(_.IK,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:e=>{this.ToggleStatsView(e)}},(0,P.we)("#Broadcast_VideoContext_ToggleStats"))),a&&"0"!=a.m_strAppId&&Number.parseInt(a.m_strAppId)!=m.fO&&e.push(l.createElement(_.kt,{key:"visitstore",onSelected:e=>{this.ShowStorePage(e)}},(0,P.we)("#Broadcast_VideoContext_OpenStore"))),e}CloseStats(){let e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))}OnToggleFullscreen(){this.m_elBroadcastPlayer&&((0,te.ww)(this.m_elBroadcastPlayer)?(0,te.MS)(this.m_elBroadcastPlayer):(0,te.tl)(this.m_elBroadcastPlayer,this.m_elVideo))}OnFullscreenChange(e){if(!this.m_elBroadcastPlayer)return;let t=(0,te.ww)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}BHideVideoControls(){let e=this.state.video;return!e||(!!e.GetUserInputNeeded()||m.BroadcastWatchStore.GetBroadcastState(e)==m.fK.Error)}render(){const e=this.state.video,t=e&&e.IsPaused(),a=e&&e.BHasDASHStats()&&this.state.bShowStats,o=Boolean(e&&e.IsReplay()),n=this.state.bMountControls,s=this.state.bControlsVisible||t,r=e&&e.GetUserInputNeeded(),i=e?.IsBroadcastVOD()&&r&&this.state.strInitialCapsuleImageUrl;let c="videoContainer";s||(c+=" HidePlayerControls"),t&&(c+=" VideoPaused"),this.state.bFullscreen&&(c+=" fullscreenVideo"),this.props.classes&&(c+=" "+this.props.classes);let d=[];!this.state.bFullscreen&&this.props.actions&&(d=d.concat(this.props.actions)),!this.state.bFullscreen&&this.props.onTheaterMode&&d.push(l.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:(0,P.we)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),d.push(l.createElement("div",{key:"FullscreenToggle",title:(0,P.we)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));const m=n&&!this.BHideVideoControls(),p=n&&!this.state.bFullscreen,u=this.props.fnRenderBroadcastContext&&this.props.fnRenderBroadcastContext();return l.createElement("div",{ref:this.BindBroadcastPlayerRef,className:c,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},u&&l.createElement("div",{className:Ja().BroadcastContext},u),o&&l.createElement($a,null),this.props.showVideoBackgroundBlur&&l.createElement(g,{className:"videoBlur",elementRef:this.m_elVideo,updateRate:33,width:320,height:180,reductionFactor:10,blurAmount:5}),l.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:!0,autoPlay:!0,playsInline:!0,controls:!1}),this.props.linkRegions?l.createElement(fo,{linkRegions:this.props.linkRegions,editMode:this.props.editMode,onSaveLinkRegions:this.props.onSaveLinkRegions}):null,this.props.linkElement,i&&l.createElement("img",{loading:"lazy",className:(0,B.A)(Ja().BroadcastPlaceholderImg,"BroadcastPlaceholderImg"),src:this.state.strInitialCapsuleImageUrl}),m&&l.createElement(po,{video:e,actions:d,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow,onShowStats:this.ToggleStatsView,bIncludeClipEditor:this.props.bIncludeClipEditor}),p&&l.createElement(uo,{onClick:this.props.onRequestClose}),a&&l.createElement(ao,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),l.createElement(eo,{video:e}),r&&l.createElement(to,{video:e}))}};(0,o.Cg)([u.oI],co.prototype,"BindBroadcastPlayerRef",null),(0,o.Cg)([u.oI],co.prototype,"BindVideoRef",null),(0,o.Cg)([u.oI],co.prototype,"OnMouseDown",null),(0,o.Cg)([u.oI],co.prototype,"OnMouseUp",null),(0,o.Cg)([u.oI],co.prototype,"OnMouseMove",null),(0,o.Cg)([u.oI],co.prototype,"OnMouseLeave",null),(0,o.Cg)([u.oI],co.prototype,"HideControls",null),(0,o.Cg)([u.oI],co.prototype,"UmountControls",null),(0,o.Cg)([u.oI],co.prototype,"ShowStatsView",null),(0,o.Cg)([u.oI],co.prototype,"OnContextMenu",null),(0,o.Cg)([u.oI],co.prototype,"ToggleStatsView",null),(0,o.Cg)([u.oI],co.prototype,"ShowStorePage",null),(0,o.Cg)([u.oI],co.prototype,"CloseStats",null),(0,o.Cg)([u.oI],co.prototype,"OnToggleFullscreen",null),(0,o.Cg)([u.oI],co.prototype,"OnFullscreenChange",null),co=(0,o.Cg)([i.PA],co);const mo=co;let po=class extends l.Component{render(){const{video:e}=this.props;if(!e)return null;let t=e.has_segments;return l.createElement("div",{className:"videoControls"},l.createElement(Eo,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0,bVerticalBroadcastChat:!0,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow}),l.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},l.createElement(bo,{video:e,bIncludeClipEditor:this.props.bIncludeClipEditor}),l.createElement("div",{className:"STV_BroadcastController"},l.createElement("div",{className:"videoControlsButtons LeftSpacer"}),l.createElement(ho,{video:e}),l.createElement(go,{video:e}),l.createElement(so,{video:e,actions:this.props.actions,onShowStats:this.props.onShowStats}))))}};po=(0,o.Cg)([i.PA],po);class uo extends l.PureComponent{render(){return this.props.onClick?l.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},l.createElement(k.sED,null)):null}}class ho extends l.Component{OnJumpBackward(){this.props.video.JumpTime(-15)}OnJumpForward(){this.props.video.JumpTime(lo)}render(){let e=this.props.video,t=e.CanSeek();return l.createElement("div",{className:"videoControlsButtons PlayControls"},l.createElement(So,{video:e}),t&&l.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},l.createElement(k.tID,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),l.createElement("div",{className:"jumpAheadValue"},lo)),l.createElement(_o,{video:e}),t&&l.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},l.createElement(k.tID,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),l.createElement("div",{className:"jumpAheadValue"},lo)),t&&l.createElement(Co,{video:e}))}}(0,o.Cg)([u.oI],ho.prototype,"OnJumpBackward",null),(0,o.Cg)([u.oI],ho.prototype,"OnJumpForward",null);const go=(0,i.PA)((e=>{if(e.video.IsBroadcastClip()||e.video.IsBroadcastVOD())return null;let t=e.video.IsOnLiveEdge();return l.createElement("div",{className:"videoControlsButtons GoLive"},l.createElement("div",{className:"videoControlButton videoControlGoLive"+(t?" isLiveEdge":""),onClick:t?null:t=>{e.video.JumpToLiveEdge()}},l.createElement(k.tID,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),l.createElement("div",{className:"jumpGoLive"},(0,P.we)(t?"#DASHPlayerControls_IsLive":"#DASHPlayerControls_GoLive"))))}));let _o=class extends l.Component{OnTogglePlayPause(){this.props.video.TogglePlayPause()}render(){let e=this.props.video.IsPaused();return l.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},e?l.createElement(k.jGG,null):l.createElement(k.vRz,null))}};(0,o.Cg)([u.oI],_o.prototype,"OnTogglePlayPause",null),_o=(0,o.Cg)([i.PA],_o);let So=class extends l.Component{constructor(e){super(e),(0,r.Gn)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}video=void 0;get has_previous_marker(){return void 0!==this.GetPreviousMarkerTime()}GetPreviousMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=e.length-1;a>=0;a--)if(!(e[a].nTime>=t))return e[a].nTime}OnJumpToPreviousMarkerClicked(e){let t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)}render(){let e=this.props.video.BHasMarkersOrSegments();return l.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},l.createElement(k.tID,{bHidePostArrow:!0,bFlipHorizontal:!0}))}};(0,o.Cg)([r.sH],So.prototype,"video",void 0),(0,o.Cg)([r.EW],So.prototype,"has_previous_marker",null),(0,o.Cg)([u.oI],So.prototype,"OnJumpToPreviousMarkerClicked",null),So=(0,o.Cg)([i.PA],So);let Co=class extends l.Component{constructor(e){super(e),(0,r.Gn)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}video=void 0;get has_next_marker(){return void 0!==this.GetNextMarkerTime()}GetNextMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=0;a<e.length;a++)if(!(e[a].nTime<=t))return e[a].nTime}OnJumpToNextMarkerClicked(e){let t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)}render(){let e=this.props.video.BHasMarkersOrSegments();return l.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},l.createElement(k.tID,{bHidePostArrow:!0,bFlipHorizontal:!1}))}};(0,o.Cg)([r.sH],Co.prototype,"video",void 0),(0,o.Cg)([r.EW],Co.prototype,"has_next_marker",null),(0,o.Cg)([u.oI],Co.prototype,"OnJumpToNextMarkerClicked",null),Co=(0,o.Cg)([i.PA],Co);const vo=e=>l.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:()=>e.onMouseEnter(e.pos),onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown?e.onMouseDown:void 0},l.createElement("div",{className:"timelineMarkerIcon"},l.createElement(k.Dp6,null)));function wo(e){let t=e.startPos,a=e.endPos,o="",n=1;return t<0&&(n=(a-t)/10,t=0,o=" hideFront"),l.createElement("div",{className:"STV_timelineSegment"+o,style:{left:t+"%",width:a-t+"%",opacity:n},onClick:e.onClick},l.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),l.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),l.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}let bo=class extends l.Component{m_elSlider=l.createRef();m_rectSlider=void 0;constructor(e){super(e),this.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0,hoverX:0,bStartMouseDown:!1,bEndMouseDown:!1,thumbnailURL:""}}OnMouseDown(e,t){if(this.m_elSlider){e.persist(),this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();let a={};"start"===t?(a={bStartMouseDown:!0},e.stopPropagation()):"end"===t?(a={bEndMouseDown:!0},e.stopPropagation()):a={bGrabberMouseDown:!0},this.setState(a,(()=>this.AdjustSliderForClientX(e.clientX))),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}}OnMouseMove(e){this.AdjustSliderForClientX(e.clientX)}OnMouseUp(e){this.state.bStartMouseDown?this.setState({bStartMouseDown:!1}):this.state.bEndMouseDown?this.setState({bEndMouseDown:!1}):(this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nGrabberMouseDownTime:0})),this.m_elSlider.current&&(this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp))}OnKeyDown(e){37==e.keyCode?(this.props.video.JumpTime(-15),e.preventDefault()):39==e.keyCode&&(this.props.video.JumpTime(15),e.preventDefault())}AdjustSliderForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration(),n=t.GetTimeAtMousePosition(e,this.m_rectSlider,a,o);if(this.state.bStartMouseDown){const e=Xa.OQ(n,a,t.m_editorEndTime-5);t.m_editorStartTime=e}else if(this.state.bEndMouseDown){const e=Xa.OQ(n,t.m_editorStartTime+5,o);t.m_editorEndTime=e}else n!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:n})}OnMouseHoverMove(e){this.AdjustHoverForClientX(e.clientX)}OnMouseHoverLeave(e){this.setState({hoverX:0})}AdjustHoverForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),o=t.GetTimelineStartPos()+t.GetTimelineDuration();this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();t.GetTimeAtMousePosition(e,this.m_rectSlider,a,o)}OnSegmentClick(e){this.props.video.Seek(e)}OnMarkerMouseEnter(e){this.setState({nHoverValue:e})}OnMarkerMouseLeave(){this.setState({nHoverValue:void 0})}render(){let e=this.props.video,t=this.state.bGrabberMouseDown,a=e.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,m.a0.Timeline),o=e.GetPercentOffsetFromTime(e.GetPlaybackTime(),m.a0.Timeline),n=e.GetPercentOffsetFromTime(e.GetVideoAvailableStartTime(),m.a0.Timeline);n<.05&&(n=0);let s=Xa.OQ(a,0,100).toFixed(1)+"%",r=Xa.OQ(o,0,100).toFixed(1)+"%",i=Xa.OQ(n,0,100).toFixed(1)+"%",c={},d={},p={},u={};t?(u.left=s,c.width=s,d.width=r,p.width=i):(u.left=r,d.width=r,p.width=i);let h=(0,qa.ap)(e.GetPlaybackTime()),g=(0,qa.ap)(this.state.nHoverValue),_="STV_timelineContainer";this.state.bGrabberMouseDown&&(_+=" grabberDown"),e.IsTimelineMapActive()&&(_+=" minimapActive");let S="";a=t?a:o,a>100?S=" grabberOffScreenRight grabberOffscreen":a<0&&(S=" grabberOffScreenLeft grabberOffscreen");let C=[];e.GetTimelineMarkers().forEach(((t,a)=>{let o=e.GetPercentOffsetFromTime(t.nTime,m.a0.Timeline);o<0||o>100||C.push(l.createElement(vo,{key:a,pos:o,label:t.strTemplateName,onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave}))}));let v=[];e.GetTimelineSegments().forEach(((t,a)=>{let o=e.GetPercentOffsetFromTime(t.nTimeStart,m.a0.Timeline);if(o>100)return;let n=e.GetPercentOffsetFromTime(t.nTimeEnd,m.a0.Timeline);n<0||v.push(l.createElement(wo,{key:a,startPos:o,endPos:n,label:t.strTemplateName,color:t.color,onClick:e=>this.OnSegmentClick(t.nTimeStart)}))}));const w=e.GetPercentOffsetFromTime(e.m_editorStartTime,m.a0.Timeline),b=e.GetPercentOffsetFromTime(e.m_editorEndTime,m.a0.Timeline),E=this.props.bIncludeClipEditor?[l.createElement(vo,{key:"start",pos:w,label:(0,P.we)("#DASHPlayerControls_Start"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"start")}),l.createElement(vo,{key:"end",pos:b,label:(0,P.we)("#DASHPlayerControls_End"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"end")})]:[];return l.createElement("div",{className:"videoTimelineMain",tabIndex:0,onKeyDown:this.OnKeyDown},l.createElement("div",{className:_},l.createElement("div",{className:"DialogLabel"},h),l.createElement("div",{className:"STV_timelineSegmentsContainer"},v),l.createElement("div",{onMouseDown:this.OnMouseDown,onMouseMove:this.OnMouseHoverMove,onMouseLeave:this.OnMouseHoverLeave,ref:this.m_elSlider},l.createElement("div",{className:"VideoTimelineSlider"},l.createElement("div",{className:"STV_timelineValue",style:c}),l.createElement("div",{className:"STV_timelineGhostValue",style:d}),l.createElement("div",{className:"STV_timelineNoVideo",style:p}),C,E,Boolean(this.state.hoverX)&&l.createElement("div",{key:"grabbertime",style:{position:"absolute",left:this.state.hoverX-75,bottom:"30px"}},l.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center"}},this.state.thumbnailURL&&l.createElement("img",{style:{width:"150px"},src:this.state.thumbnailURL}),l.createElement("span",{className:"STV_timelineGrabberValue",style:{position:"absolute",bottom:"4px"}},g))),l.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:u},l.createElement("div",{className:"STV_timelineGrabber"+S},l.createElement("div",{className:"STV_timelineGrabberArrow"},l.createElement(k.apU,null))))))))}};(0,o.Cg)([u.oI],bo.prototype,"OnMouseDown",null),(0,o.Cg)([u.oI],bo.prototype,"OnMouseMove",null),(0,o.Cg)([u.oI],bo.prototype,"OnMouseUp",null),(0,o.Cg)([u.oI],bo.prototype,"OnKeyDown",null),(0,o.Cg)([u.oI],bo.prototype,"OnMouseHoverMove",null),(0,o.Cg)([u.oI],bo.prototype,"OnMouseHoverLeave",null),(0,o.Cg)([u.oI],bo.prototype,"AdjustHoverForClientX",null),(0,o.Cg)([u.oI],bo.prototype,"OnSegmentClick",null),(0,o.Cg)([u.oI],bo.prototype,"OnMarkerMouseEnter",null),(0,o.Cg)([u.oI],bo.prototype,"OnMarkerMouseLeave",null),bo=(0,o.Cg)([i.PA],bo);let Eo=class extends l.Component{state={info:null};static getDerivedStateFromProps(e,t){if((!t.info||t.info.m_steamIDBroadcast!==e.steamID)&&(t.info&&(m.BroadcastWatchStore.StopInfo(t.info),t.info=null),e.steamID)){return{info:m.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&m.BroadcastWatchStore.StopInfo(this.state.info)}RenderStreamSwitcher(){const e=this.props.steamID;return Ya.td.stream[e]?l.createElement(Io,{value:e,options:Ya.td.stream,onChange:this.props.onLocalStreamChange}):null}render(){let{info:e}=this.state;if(!e)return null;let t="";e.m_nViewerCount&&(t=(0,Qa.Dq)(e.m_nViewerCount));let a=Ya.td.bValid&&Ya.td.stream&&Ya.td.stream[e.m_steamIDBroadcast],o=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&(parseInt(e.m_strAppId)>0||a);const n=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&a&&Ya.td.gidEvent;return l.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&l.createElement(S.y,{className:"broadcastDetailsThumbBlur",src:e.m_strThumbnailUrl,draggable:!1,duration:2500}),l.createElement("div",{className:"BroadcastDetailsHeader"},e&&e.m_strAppTitle&&l.createElement("div",{className:"displayColumn"},l.createElement("div",{className:"Info"},l.createElement("span",{className:"AppTitle"},e.m_strAppTitle),e.m_strTitle&&l.createElement("span",{className:"BroadcastTitle"}," - ",e.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),t&&l.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},l.createElement(k.y_e,null),(0,P.Yp)("#Broadcast_ViewerCount",t))),a&&this.props.onOpenLinkInNewWindow&&l.createElement("div",{className:"Actions"},l.createElement("div",{onClick:e=>this.props.onOpenLinkInNewWindow(e,Ya.td.link),className:"BroadcastLink"},Ya.td.linkName))),n&&l.createElement(Ua,{gidEvent:Ya.td.gidEvent}),o&&l.createElement(Ra,{id:Ya.td.bValid&&Ya.td.stream&&Ya.td.stream[e.m_steamIDBroadcast]?Ya.td.appID:parseInt(e.m_strAppId),type:"game"}))}};Eo=(0,o.Cg)([i.PA],Eo);class Io extends l.Component{showContextMenu(e){const{options:t,value:a,onChange:o}=this.props,n=Object.keys(t).map((e=>l.createElement(_.IK,{key:e,onSelected:()=>o(e),bChecked:e===a},(0,P.we)(t[e]))));(0,c.lX)(l.createElement(_.tz,null,n),e)}render(){const{value:e,options:t}=this.props,a=t[e];return l.createElement("div",{className:"BroadcastLanguage",onClick:this.showContextMenu},l.createElement("span",null," - ",(0,P.we)(a)),l.createElement("div",{className:"ContextMenuButton"},l.createElement(k.GB9,null)))}}(0,o.Cg)([u.oI],Io.prototype,"showContextMenu",null);let fo=class extends l.Component{constructor(e){super(e),this.state={sizableRegion:[]}}async AddLinkRegion(){let e=this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:2.5+e,yPosPct:2.5+e,widthPct:20,heightPct:15}),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}componentDidUpdate(e){0==e.linkRegions.length&&this.props.linkRegions.forEach(((e,t)=>{this.LoadLinkRegion(e,t)}))}async LoadLinkRegion(e,t){this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:e.left,yPosPct:e.top,widthPct:e.width,heightPct:e.height,link_url:e.url,link_description:e.link_description,link_index:e.link_index}),await this.setState({sizableRegion:this.state.sizableRegion})}OnSaveRegions(){let e;e={links:[]};for(let t=0;t<this.state.sizableRegion.length;t++){let a;a={left:Math.floor(100*this.state.sizableRegion[t].xPosPct),top:Math.floor(100*this.state.sizableRegion[t].yPosPct),width:Math.floor(100*this.state.sizableRegion[t].widthPct),height:Math.floor(100*this.state.sizableRegion[t].heightPct),url:this.state.sizableRegion[t].link_url,link_description:this.state.sizableRegion[t].link_description,link_index:t},e.links.push(a)}this.props.onSaveLinkRegions(e)}async DeleteRegion(e){this.state.sizableRegion.splice(e,1),console.log("keys: ",this.state.sizableRegion.keys),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}async UpdatePanel(e,t){const a=[...this.state.sizableRegion];a[e]=t,this.setState({sizableRegion:a},(()=>this.OnSaveRegions()))}render(){return l.createElement("div",{className:"LinkOverlayContainer"},l.createElement("div",{className:"LinkOverlayValidRegion"},!this.props.editMode&&this.props.linkRegions?this.props.linkRegions.map((e=>{const t=(0,w.p)(e.url);return l.createElement(Ye.uU,{key:e.link_index,href:e.url,bForceExternal:t,bUseLinkFilter:t},l.createElement("div",{className:"LinkRegion",style:{left:e.left+"%",top:e.top+"%",width:e.width+"%",height:e.height+"%"}},l.createElement("div",{className:"LinkRegionText"},e.link_description," ")))})):null,this.props.editMode&&this.state.sizableRegion.map(((e,t)=>l.createElement(Za,{key:100*t+e.xPosPct,index:t,deleteFn:this.DeleteRegion,updateFn:this.UpdatePanel,xPosPct:e.xPosPct,yPosPct:e.yPosPct,widthPct:e.widthPct,heightPct:e.heightPct,link_url:e.link_url,link_description:e.link_description}))),this.props.editMode&&l.createElement("div",{className:"AddLinkRegion",onClick:this.AddLinkRegion},(0,P.we)("#SteamTV_AddLinkRegion"))),l.createElement("div",{className:"LinkOverlayInvalidRegion"},l.createElement("div",null,(0,P.we)("#SteamTV_LinkRegionReserved"))))}};(0,o.Cg)([u.oI],fo.prototype,"AddLinkRegion",null),(0,o.Cg)([u.oI],fo.prototype,"LoadLinkRegion",null),(0,o.Cg)([u.oI],fo.prototype,"OnSaveRegions",null),(0,o.Cg)([u.oI],fo.prototype,"DeleteRegion",null),(0,o.Cg)([u.oI],fo.prototype,"UpdatePanel",null),fo=(0,o.Cg)([i.PA],fo)},40222:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var o=a(32858),n=a(71342),s=a(83957),r=a.n(s);class i extends o.p{constructor(){super()}BInitialized(){return!0}GetServerTime(){return n.TS.PAGE_TIMESTAMP+Math.floor(performance.now()/1e3)}async RequestEmoticonListInternal(){let e=[];try{let t=await r().get(n.TS.CHAT_BASE_URL+"actions/EmoticonData",{withCredentials:!0});if(t.data.emoticons)for(let a of t.data.emoticons){let t=a.name;if(t.startsWith("^"))e.push({name:t});else{let o={name:t.substr(1,t.length-2)},n=o.name.toLowerCase();n!=o.name&&(o.name_normalized=n),a.time_last_used&&(o.last_used=a.time_last_used),a.use_count&&(o.use_count=a.use_count),a.time_received&&(o.time_received=a.time_received),a.appid&&(o.appid=a.appid),e.push(o)}}}catch(e){console.error("error loading emoticon list",e)}this.OnEmoticonListReceived(e)}}new i}}]);