










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
(self.webpackChunk_steam_friendsui=self.webpackChunk_steam_friendsui||[]).push([[4679],{30773:e=>{e.exports={BroadcastPlayerLite:"broadcastplayer_BroadcastPlayerLite_SAxf3",BroadcastPlayerLiteVideo:"broadcastplayer_BroadcastPlayerLiteVideo_yCd0z",BroadcastContext:"broadcastplayer_BroadcastContext_3TnYL",BroadcastPlaceholderImg:"broadcastplayer_BroadcastPlaceholderImg_3hxn9"}},49474:e=>{e.exports={GotSteamDialog:"gameactions_GotSteamDialog_2Qusm",DownloadSteamUrl:"gameactions_DownloadSteamUrl_10lP7",GameName:"gameactions_GameName_1_uzw",Buttons:"gameactions_Buttons_2_Obm",Button:"gameactions_Button_2nVaF",LeftButton:"gameactions_LeftButton_3WYyu",AnswerText:"gameactions_AnswerText_hCqVo",ActionText:"gameactions_ActionText_2s5Ns",Footer:"gameactions_Footer_3OKQs",Logo:"gameactions_Logo_2AEA_"}},59090:e=>{e.exports={"duration-app-launch":"800ms",BannerContainer:"deckverified_BannerContainer_29jK3",BannerHeader:"deckverified_BannerHeader_3yxJH",BannerContentDesktop:"deckverified_BannerContentDesktop_Cek1s",BannerContent:"deckverified_BannerContent_2dGPT",LearnMore:"deckverified_LearnMore_2gXzK",DeveloperBlockLinkDesktop:"deckverified_DeveloperBlockLinkDesktop_1lpfU",CategoryIcon:"deckverified_CategoryIcon_3qF71",LearnMoreCtn:"deckverified_LearnMoreCtn_2IcEu",LearnMorePC:"deckverified_LearnMorePC_CrSPf",DialogHeader:"deckverified_DialogHeader_ZEuE1",DialogTitle:"deckverified_DialogTitle_2WJTd",AppTitleCategory:"deckverified_AppTitleCategory_23sFZ",CompatibilityDetailsStillLearning:"deckverified_CompatibilityDetailsStillLearning_1WWwt",CompatibilityDetailsContainerDesktop:"deckverified_CompatibilityDetailsContainerDesktop_2ADsv",CompatibilityDetailsContainer:"deckverified_CompatibilityDetailsContainer_1-O8t",CompatibilityDetailsInterior_NoScroll:"deckverified_CompatibilityDetailsInterior_NoScroll_3oQPV",CompatibilityDetailsInterior_Scroll:"deckverified_CompatibilityDetailsInterior_Scroll_2uCLc",CompatibilityDetailsRow:"deckverified_CompatibilityDetailsRow_32fPp",CompatibilityDetailRatingSummary:"deckverified_CompatibilityDetailRatingSummary_mJGYS",Verified:"deckverified_Verified_ewmg-",Playable:"deckverified_Playable_1n8va",Unsupported:"deckverified_Unsupported_2Q0ld",CompatibilityDetailRatingDescription:"deckverified_CompatibilityDetailRatingDescription_3456E",CompatibilityDetailsSeparator:"deckverified_CompatibilityDetailsSeparator_2mwbd",CompatibilityDetailsResultIcon:"deckverified_CompatibilityDetailsResultIcon_-L3Xu",CompatabilityDetailsNoteContainer:"deckverified_CompatabilityDetailsNoteContainer_6_voo",CompatibilityNotes:"deckverified_CompatibilityNotes_1aoam",CompatibilityDetailsNoteRow:"deckverified_CompatibilityDetailsNoteRow_1Wu_j",DeveloperBlogYButton:"deckverified_DeveloperBlogYButton_3avWD",Divider:"deckverified_Divider_1ikdM",DeveloperComments_Anchor:"deckverified_DeveloperComments_Anchor__JTh9",DeveloperComments_Icon:"deckverified_DeveloperComments_Icon_2R6eC",DeveloperComments_LinkNoIcon:"deckverified_DeveloperComments_LinkNoIcon_1zjwW",DeveloperComments_LinkIcon:"deckverified_DeveloperComments_LinkIcon_3OZNU"}},10859:e=>{e.exports={AddToCartAnchorCtn:"addtocartbutton_AddToCartAnchorCtn_2ZqO4",Action:"addtocartbutton_Action_yoe6d",ActionOutOfStock:"addtocartbutton_ActionOutOfStock_3XwnF"}},23574:e=>{e.exports={DevSummaryCtn:"creatorhomeembed_DevSummaryCtn_1k0S-",LargeFormat:"creatorhomeembed_LargeFormat_1090T",CreatorDescCtn:"creatorhomeembed_CreatorDescCtn_3nKoQ",SmallFormat:"creatorhomeembed_SmallFormat_18tLe",DevSummaryWidgetCtn:"creatorhomeembed_DevSummaryWidgetCtn_A2B2V",DevSummaryBackground:"creatorhomeembed_DevSummaryBackground_1TsqA",DevSummaryContent:"creatorhomeembed_DevSummaryContent_23xa4",Avatar:"creatorhomeembed_Avatar_3Jepb",CreatorTitleCtn:"creatorhomeembed_CreatorTitleCtn_2T8Ub",CreatorNameName:"creatorhomeembed_CreatorNameName_8196l",CreatorTagline:"creatorhomeembed_CreatorTagline_NX5We",Title:"creatorhomeembed_Title_37vyV",Followers:"creatorhomeembed_Followers_2ZpFi",SocialFollowersCtn:"creatorhomeembed_SocialFollowersCtn_BT3Bj",FollowBtnCtn:"creatorhomeembed_FollowBtnCtn_2artm",FollowButton:"creatorhomeembed_FollowButton_1HwWX",FollowBtnText:"creatorhomeembed_FollowBtnText_1a5dj",SocialContainer:"creatorhomeembed_SocialContainer_1o1Ds",SocialImg:"creatorhomeembed_SocialImg_2v_K1",SocialLink:"creatorhomeembed_SocialLink_3eCVb",CuratorHoverCtn:"creatorhomeembed_CuratorHoverCtn_30j_R",AvatarLink:"creatorhomeembed_AvatarLink_1N0rY",MembersListLink:"creatorhomeembed_MembersListLink_3DO0N"}},67988:e=>{e.exports={DemoButton:"demobutton_DemoButton_3euSF",DisabledButton:"demobutton_DisabledButton_3Fsf5"}},40508:e=>{e.exports={"duration-app-launch":"800ms",HoverContentTransition:"gamehover_HoverContentTransition_3-pnC",Opening:"gamehover_Opening_3A24v",Open:"gamehover_Open_1rWYa",ItemHoverSource:"gamehover_ItemHoverSource_2ByoT",Selectable:"gamehover_Selectable_Hvshc",GameHoverCapsuleCtn:"gamehover_GameHoverCapsuleCtn_2jsr3",UseHidingBottomHalf:"gamehover_UseHidingBottomHalf_5hPHC",TrailerAnchorStoreLink:"gamehover_TrailerAnchorStoreLink_OxANH",TrailerCtn:"gamehover_TrailerCtn_1I27K",FullDivImage:"gamehover_FullDivImage_2jpCs",Transparent:"gamehover_Transparent_AZ9GL",Midline:"gamehover_Midline_Xwe3c",Price:"gamehover_Price_2Eh6G",CapsuleImageAnchorPoint:"gamehover_CapsuleImageAnchorPoint_1OMas",CapsuleImageCtn:"gamehover_CapsuleImageCtn_wm-2T",WithCornerShine:"gamehover_WithCornerShine_2kRKA",DemoButton:"gamehover_DemoButton_2V6ci",WishlistButton:"gamehover_WishlistButton_3notz",WishlistButtonText:"gamehover_WishlistButtonText_VI5mZ",WishlistLoadingText:"gamehover_WishlistLoadingText_7-s8T",WishlistButtonNotTop:"gamehover_WishlistButtonNotTop_3VcyY",BottomShelf:"gamehover_BottomShelf_oAqlZ",BottomShelfOffScreen:"gamehover_BottomShelfOffScreen_36zpR",TextContent:"gamehover_TextContent_2VvFL",GameTitle:"gamehover_GameTitle_405wj",TagRow:"gamehover_TagRow_2SWQM",Tags:"gamehover_Tags_fTGVi",Tag:"gamehover_Tag_1wO-t",PlatformDisplay:"gamehover_PlatformDisplay_2UG4_",ReviewsAndRelease:"gamehover_ReviewsAndRelease_1HFUC",ReleaseDate:"gamehover_ReleaseDate_35Bya",ReleasePrefix:"gamehover_ReleasePrefix_2ZKEX",ReviewScore:"gamehover_ReviewScore_3qvpp",ReviewScoreHeader:"gamehover_ReviewScoreHeader_2t-0j",ReviewScoreCount:"gamehover_ReviewScoreCount_1wXL_",ReviewScoreValue:"gamehover_ReviewScoreValue_3ZWs0",ReviewScoreNone:"gamehover_ReviewScoreNone_3TKyM",ReviewScoreLow:"gamehover_ReviewScoreLow_3nU5I",ReviewScoreMixed:"gamehover_ReviewScoreMixed_11Q2_",ReviewScoreHigh:"gamehover_ReviewScoreHigh_3wXHC",ReviewScorePercentage:"gamehover_ReviewScorePercentage_38dPa",GameHoverCreatorFollowButtonCtn:"gamehover_GameHoverCreatorFollowButtonCtn_1mQuB"}},68156:e=>{e.exports={"duration-app-launch":"800ms",SaleSection:"partnersaledisplay_SaleSection_1cOoC",CarouselDisplay:"partnersaledisplay_CarouselDisplay_mntHD",SaleHeaderContainer:"partnersaledisplay_SaleHeaderContainer_W4mvn",SaleViewAll:"partnersaledisplay_SaleViewAll_1bsBz",SaleSectionLoginPrompt:"partnersaledisplay_SaleSectionLoginPrompt_2-dSB",LoginButton:"partnersaledisplay_LoginButton_3h6sH",SaleOverlayCtn:"partnersaledisplay_SaleOverlayCtn_3GTIc",SaleOverlay:"partnersaledisplay_SaleOverlay_1sZo8",CarouselCapsuleBordered:"partnersaledisplay_CarouselCapsuleBordered_31OAy",CarouselCapsuleAnimated:"partnersaledisplay_CarouselCapsuleAnimated_3V1O5",AppSummaryWidgetCtn:"partnersaledisplay_AppSummaryWidgetCtn_2H8Bm",CarouselSalePageCapsule:"partnersaledisplay_CarouselSalePageCapsule_3r4Ny",SaleBroadcastCtn:"partnersaledisplay_SaleBroadcastCtn_1SFMh",PresenterDisclaimer:"partnersaledisplay_PresenterDisclaimer_3BWjv",PresenterLabel:"partnersaledisplay_PresenterLabel_cNRBo",SaleOuterContainer:"partnersaledisplay_SaleOuterContainer_150kd",CustomStyle_together:"partnersaledisplay_CustomStyle_together_1lAyg",SalePageLogoSet:"partnersaledisplay_SalePageLogoSet_JxIGH",SaleNewSizing:"partnersaledisplay_SaleNewSizing_1v-BV",SaleBackground:"partnersaledisplay_SaleBackground_2N8Se",SaleSectionTitleCtn:"partnersaledisplay_SaleSectionTitleCtn_bE2EA",SaleSectionSubtext:"partnersaledisplay_SaleSectionSubtext_17Fnl",SaleSectionContainer:"partnersaledisplay_SaleSectionContainer_W9_WA",vr_supported:"partnersaledisplay_vr_supported_1BDSJ",vr_required:"partnersaledisplay_vr_required_1P__h",preview_placeholder_section:"partnersaledisplay_preview_placeholder_section_3QLsj",LinkCapsule:"partnersaledisplay_LinkCapsule_2zVSa",fullscreen_bg:"partnersaledisplay_fullscreen_bg_j2ykT",fullscreen_bg_video:"partnersaledisplay_fullscreen_bg_video_3BU-y",SalePageBroadcastContextHover:"partnersaledisplay_SalePageBroadcastContextHover_hbVdl",AlbumCoverImage:"partnersaledisplay_AlbumCoverImage_2JfUA",AlbumTitle:"partnersaledisplay_AlbumTitle_keaMw",SaleSectionTabs:"partnersaledisplay_SaleSectionTabs_1FPIV",DesktopTabs:"partnersaledisplay_DesktopTabs_2utXv",SaleSectionTabsTab:"partnersaledisplay_SaleSectionTabsTab_3BgHm",SaleSectionTabContainer:"partnersaledisplay_SaleSectionTabContainer_1Svj0",SaleSectionTabsRow:"partnersaledisplay_SaleSectionTabsRow_30oGT",SaleTab:"partnersaledisplay_SaleTab_gc-rq",SaleTabLabel:"partnersaledisplay_SaleTabLabel_2mYMQ",SaleSectionTabListContainer:"partnersaledisplay_SaleSectionTabListContainer_2VZtq",MobileTabSelector:"partnersaledisplay_MobileTabSelector_2fm5T",Visible:"partnersaledisplay_Visible_2Jmo5",MobileTabSelectorButton:"partnersaledisplay_MobileTabSelectorButton_1t4-3",MobileTabSelectorShortcut:"partnersaledisplay_MobileTabSelectorShortcut_1P5tc",MobileTabSelectorDropDown:"partnersaledisplay_MobileTabSelectorDropDown_3KO7Y",MobileTabSelectorOption:"partnersaledisplay_MobileTabSelectorOption_GiTJl",TabContentsContainer:"partnersaledisplay_TabContentsContainer_2xJbu",HorizontalScrollInDragForceCursor:"partnersaledisplay_HorizontalScrollInDragForceCursor_nemO6",SaleBroadcastSection:"partnersaledisplay_SaleBroadcastSection_1u0IZ",CarouselPage:"partnersaledisplay_CarouselPage_Hlkuk",TabButtonsCtn:"partnersaledisplay_TabButtonsCtn_21-6t",TabButton:"partnersaledisplay_TabButton_1Gz4s",DefaultCreatorCtn:"partnersaledisplay_DefaultCreatorCtn_3KzJ1",EventSectionViewAllCtn:"partnersaledisplay_EventSectionViewAllCtn_1B6gV"}},14757:e=>{e.exports={"duration-app-launch":"800ms",headerCapsuleImgWidth:"460",headerCapsuleImgHeight:"215",mainCapsuleImgWidth:"616",mainCapsuleImgHeight:"353",libraryAssetImgWidth:"300",libraryAssetImgHeight:"450",heroCapsuleImgWidth:"374",heroCapsuleImgHeight:"448",StoreSaleWidgetContainer:"salepreviewwidgets_StoreSaleWidgetContainer_2hhNO",LibraryAssetExpandedDisplay:"salepreviewwidgets_LibraryAssetExpandedDisplay_PZY_7",SaleItemDefaultCapsuleDisplay:"salepreviewwidgets_SaleItemDefaultCapsuleDisplay_37igg",MarketingMessage:"salepreviewwidgets_MarketingMessage_3_q87",StoreSaleWidgetRight:"salepreviewwidgets_StoreSaleWidgetRight_v9uRg",StoreSaleWidgetHalfLeft:"salepreviewwidgets_StoreSaleWidgetHalfLeft_111nf",StoreSaleWidgetTitle:"salepreviewwidgets_StoreSaleWidgetTitle_2ekpT",StoreSaleDiscountBox:"salepreviewwidgets_StoreSaleDiscountBox_cnkoF",StoreSaleWidgetLibraryAssetExtendedTop:"salepreviewwidgets_StoreSaleWidgetLibraryAssetExtendedTop_1uLNB",StoreSaleWidgetImage:"salepreviewwidgets_StoreSaleWidgetImage_yvqq8",CapsuleMicroTrailer:"salepreviewwidgets_CapsuleMicroTrailer_1M7n5",CapsulePlatform:"salepreviewwidgets_CapsulePlatform_2bCf9",StoreSaleWidgetContents:"salepreviewwidgets_StoreSaleWidgetContents_Agwfe",StoreMetaDataCtn:"salepreviewwidgets_StoreMetaDataCtn_2W2g3",StoreSaleItemRelease:"salepreviewwidgets_StoreSaleItemRelease_vCEpe",StoreSaleItemDev:"salepreviewwidgets_StoreSaleItemDev_3tIbO",StoreSaleItemReview:"salepreviewwidgets_StoreSaleItemReview_Kx5Nf",StoreSaleWidgetLeft:"salepreviewwidgets_StoreSaleWidgetLeft_3DkfN",TitleCtn:"salepreviewwidgets_TitleCtn_3rrH9",StoreSaleWidgetCrossCenterRight:"salepreviewwidgets_StoreSaleWidgetCrossCenterRight_oW0H1",CapsuleBottomBar:"salepreviewwidgets_CapsuleBottomBar_3lmdE",PlayNowButton:"salepreviewwidgets_PlayNowButton_38ePa",AddToLibraryButton:"salepreviewwidgets_AddToLibraryButton_1DrDh",StoreActionWidgetContainer:"salepreviewwidgets_StoreActionWidgetContainer_kW6m4",StoreSalePriceWidgetContainer:"salepreviewwidgets_StoreSalePriceWidgetContainer_2s-O5",StoreSaleWidgetBgTint:"salepreviewwidgets_StoreSaleWidgetBgTint_MvLJD",LibraryFallbackAssetImageContainer:"salepreviewwidgets_LibraryFallbackAssetImageContainer_1APLS",FallbackBackground:"salepreviewwidgets_FallbackBackground_3chRZ",SaleTagBlockCtn:"salepreviewwidgets_SaleTagBlockCtn_1ZqQL",StoreSaleWidgetCenter:"salepreviewwidgets_StoreSaleWidgetCenter_2asUT",StoreSaleWidgetReleaseAndTags:"salepreviewwidgets_StoreSaleWidgetReleaseAndTags_3wryh",Bundle:"salepreviewwidgets_Bundle_2GbhL",WidgetReleaseDateAndPlatformCtn:"salepreviewwidgets_WidgetReleaseDateAndPlatformCtn_3a6HR",SaleItemBrowserRow:"salepreviewwidgets_SaleItemBrowserRow_gASJ2",StoreSaleWidgetRelease:"salepreviewwidgets_StoreSaleWidgetRelease_1qvTF",StoreSaleWidgetTags:"salepreviewwidgets_StoreSaleWidgetTags_2bkP-",AppTag:"salepreviewwidgets_AppTag_3FJnZ",StoreSaleWidgetShortDesc:"salepreviewwidgets_StoreSaleWidgetShortDesc_3AsE5",TagTitle:"salepreviewwidgets_TagTitle_v1i4W",TagBox:"salepreviewwidgets_TagBox_1lqaD",SaleItemFullCapsuleDisplay:"salepreviewwidgets_SaleItemFullCapsuleDisplay_2sVvR",Tag:"salepreviewwidgets_Tag_33yqk",BundleContentPreview:"salepreviewwidgets_BundleContentPreview_jQ5Ga",StoreSaleBroadcastWidgetRight:"salepreviewwidgets_StoreSaleBroadcastWidgetRight_9VjYX",StoreSalePriceActionWidgetContainer:"salepreviewwidgets_StoreSalePriceActionWidgetContainer_1JuIp",Discounted:"salepreviewwidgets_Discounted_1g0B-",WishList:"salepreviewwidgets_WishList_1djkd",Action:"salepreviewwidgets_Action_2zssE",SingleLineMode:"salepreviewwidgets_SingleLineMode_1ZlGJ",StoreSaleDiscountedPriceCtn:"salepreviewwidgets_StoreSaleDiscountedPriceCtn_3NhLu",StoreSalePriceBox:"salepreviewwidgets_StoreSalePriceBox_3j4dI",StoreSaleNewItem:"salepreviewwidgets_StoreSaleNewItem_2_KY_",StoreOriginalPrice:"salepreviewwidgets_StoreOriginalPrice_3fFFs",PrePurchase:"salepreviewwidgets_PrePurchase_2f7BM",NewItem:"salepreviewwidgets_NewItem_2xCT1",InGameHover:"salepreviewwidgets_InGameHover_axjdi",StoreSalePrepurchaseLabel:"salepreviewwidgets_StoreSalePrepurchaseLabel_1Fru-",SingleLineOriginalPrice:"salepreviewwidgets_SingleLineOriginalPrice_t7Gt8",BaseDiscount:"salepreviewwidgets_BaseDiscount_3mInD",StoreSalePriceButton:"salepreviewwidgets_StoreSalePriceButton_1BejQ",OuterCapsuleContainer:"salepreviewwidgets_OuterCapsuleContainer_1dKR2",BottomBarPriceInfo:"salepreviewwidgets_BottomBarPriceInfo_1X3j2",CapsuleContainer:"salepreviewwidgets_CapsuleContainer_22Acx",EventRow:"salepreviewwidgets_EventRow_1UMFn",Muted:"salepreviewwidgets_Muted_1HVwz",BottomCreatorRow:"salepreviewwidgets_BottomCreatorRow_1JrUu",CreatorLogo:"salepreviewwidgets_CreatorLogo_3Krfu",CreatorName:"salepreviewwidgets_CreatorName_Fmi-a",HeaderCapsuleImageContainer:"salepreviewwidgets_HeaderCapsuleImageContainer_2oW_y",MainCapsuleImageContainer:"salepreviewwidgets_MainCapsuleImageContainer_1vpxH",HeroCapsuleImageContainer:"salepreviewwidgets_HeroCapsuleImageContainer_vnhlb",DiscoveryQueueCtn:"salepreviewwidgets_DiscoveryQueueCtn_2uX2G",VerticalCapsule:"salepreviewwidgets_VerticalCapsule_3sy8X",ForceLibrarySizing:"salepreviewwidgets_ForceLibrarySizing_25KI3",CapsuleImage:"salepreviewwidgets_CapsuleImage_2eQ4m",LinkCapsuleImage:"salepreviewwidgets_LinkCapsuleImage_2xO8H",CapsuleParentInfo:"salepreviewwidgets_CapsuleParentInfo_2erfW",ParentType:"salepreviewwidgets_ParentType_3FCPP",Banner:"salepreviewwidgets_Banner_2gxv9",Blue:"salepreviewwidgets_Blue_2o-5t",LinesImg:"salepreviewwidgets_LinesImg_3LecB",CapsuleDecorators:"salepreviewwidgets_CapsuleDecorators_1xNQc",BundleContentsCtnTransition:"salepreviewwidgets_BundleContentsCtnTransition_24KNc",Expanding:"salepreviewwidgets_Expanding_38KIq",Expanded:"salepreviewwidgets_Expanded_hPc1l",Collapsing:"salepreviewwidgets_Collapsing_2NmI1",BundleContentsCtn:"salepreviewwidgets_BundleContentsCtn_34acu",BundleContentsTitle:"salepreviewwidgets_BundleContentsTitle_hhdk8",BundleShowButton:"salepreviewwidgets_BundleShowButton_2Vu78",ShowContentsButton:"salepreviewwidgets_ShowContentsButton_-VlK4",ShowContentsSection:"salepreviewwidgets_ShowContentsSection_fsPeL",BundleContentItem:"salepreviewwidgets_BundleContentItem_2sdNO",StoreSaleWidgetOuterContainer:"salepreviewwidgets_StoreSaleWidgetOuterContainer_1_P15",ContentsCount:"salepreviewwidgets_ContentsCount_353Lz",PreviewCtn:"salepreviewwidgets_PreviewCtn_1NM53",PreviewItem:"salepreviewwidgets_PreviewItem_2yhQb",DeckCompatIcon:"salepreviewwidgets_DeckCompatIcon_1Nju8",PreviewImg:"salepreviewwidgets_PreviewImg_1jx70",DemoLayoutPopup:"salepreviewwidgets_DemoLayoutPopup_2tmp2",FreeWeekendBar:"salepreviewwidgets_FreeWeekendBar_2SCof",FreeWeekendLabel:"salepreviewwidgets_FreeWeekendLabel_21B6L",RecommendationReason:"salepreviewwidgets_RecommendationReason_3Q_ta",LocalizationSpan:"salepreviewwidgets_LocalizationSpan_3bCSm",CapsuleName:"salepreviewwidgets_CapsuleName_31P1R",DiscountIconCtn:"salepreviewwidgets_DiscountIconCtn_3Qt9S"}},54752:e=>{e.exports={bordered_live_stream_icon:"liveicon_bordered_live_stream_icon_2R1rY"}},61185:e=>{e.exports={Link:"salebanner_Link_-HlDB",Banner:"salebanner_Banner_2bT8i",Big:"salebanner_Big_sGy-b",Mobile:"salebanner_Mobile_mhii5"}},59563:e=>{e.exports={PopupScreenshotModal:"screenshotpopout_PopupScreenshotModal_yloqx",PopupScreenshotContainer:"screenshotpopout_PopupScreenshotContainer_1wwvw",PopupScreenshot:"screenshotpopout_PopupScreenshot_31XZu",ButtonCtn:"screenshotpopout_ButtonCtn_3Mysp",ButtonIcon:"screenshotpopout_ButtonIcon_1tCO1",Disabled:"screenshotpopout_Disabled_1a_f8"}},32013:e=>{e.exports={CompatIcon:"deckcompaticons_CompatIcon_3cEK5"}},30355:e=>{e.exports={ErrorDiv:"image_ErrorDiv_2FXME"}},6995:e=>{e.exports={PreviewCtn:"expandableimage_PreviewCtn_16Skn",SVG:"expandableimage_SVG_3Mns5"}},83556:e=>{e.exports={LinkRegionDragBox:"linkregionbox_LinkRegionDragBox_Rtlc-",EdgeDown:"linkregionbox_EdgeDown_i9zrH",LinkRegionGridBox:"linkregionbox_LinkRegionGridBox_1Ob4A",LinkRegionEdge:"linkregionbox_LinkRegionEdge_2stP4",TopLeft:"linkregionbox_TopLeft_Clgi-",Top:"linkregionbox_Top_2Z9Vy",TopRight:"linkregionbox_TopRight_2-8Db",Left:"linkregionbox_Left_3ZwUw",Middle:"linkregionbox_Middle_1Heco",LinkRegionDelete:"linkregionbox_LinkRegionDelete_3Hb3w",LinkRegionSettings:"linkregionbox_LinkRegionSettings_VazMl",Right:"linkregionbox_Right_3h5fK",BottomLeft:"linkregionbox_BottomLeft_2CQe0",Bottom:"linkregionbox_Bottom_sIHlK",BottomRight:"linkregionbox_BottomRight_3lnwj",topleft:"linkregionbox_topleft_3W096",top:"linkregionbox_top_1iRW1",topright:"linkregionbox_topright_1Yrl7",left:"linkregionbox_left_2iBrm",right:"linkregionbox_right_15t6A",bottomleft:"linkregionbox_bottomleft_3SdBc",bottom:"linkregionbox_bottom_2kzZ9",bottomright:"linkregionbox_bottomright_2AKXk",middle:"linkregionbox_middle_1CS75",LinkRegionButtonContainer:"linkregionbox_LinkRegionButtonContainer_1ZJ42",DialogButton:"linkregionbox_DialogButton_nN2Q1",LinkRegionInfo:"linkregionbox_LinkRegionInfo_3TiV7",LinkText:"linkregionbox_LinkText_2TAc2"}},50418:e=>{e.exports={strMaxMobileWidth:"700px"}},89620:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BroadcastLogonDialog:()=>j,BroadcastTab:()=>U,CBroadcastApp:()=>N,StandaloneBroadcastModalOverlay:()=>Z,StandaloneBroadcastViewer:()=>R});var n=a(85556),o=a(5442),i=a(70317),s=a(27378),r=a(18195),l=a(22872),c=a(37990),d=a(5096),m=a(33038),p=a(8574),u=a(9405),h=a(45536);const g=({group:e,onClick:t})=>{const a=e.watching_broadcast_steamid;return s.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:t},s.createElement("div",{className:"ChatRoomListGroupItem_header"},s.createElement(u._P,{group:e,small:!0}),s.createElement("div",{className:"groupNameStatusContainer"},s.createElement("div",{className:"chatRoomName"},e.name),a&&s.createElement("div",{className:"chatRoomDetails"},(0,d.Xx)("#Broadcast_WatchParty_Viewers_NoneActive")))))};class _ extends s.Component{CreateWatchParty(e=!1){const{browserContext:t,ownerWindow:a,broadcastAccountId:n,initialFriend:i}=this.props;this.Close();const r=e&&i?[i.accountid]:[];!function(e,t,a,n){(0,l.BR)(s.createElement(m.KG,{browserContext:e,bHideChatNameEntry:!1,vecInvitePlayers:n,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:a},strTitle:(0,d.Xx)("#Broadcast_CreateWatchParty")}),t,"CreateChatDialog",{strTitle:(0,d.Xx)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600},(0,o.Og)(t))}(t,a||window,n,r)}WatchAlone(){this.Close()}UpgradeExisting(e){const{broadcastAccountId:t,browserContext:a,broadcastChannelID:n,broadcastTabId:o}=this.props;this.Close(),n?e.SetChatRoomGroupWatchingBroadcast(void 0,n):e.SetChatRoomGroupWatchingBroadcast(t);const s=i.Ul.UIStore.ShowAndOrActivateChatRoomGroup(a,e,!0);o&&i.Ul.UIStore.CloseTabByID(o),this.props.bIsNewSteamTVDialog||s.ShowBroadcast()}Close(){const{closeModal:e}=this.props;e&&e()}render(){const{closeModal:e,initialFriend:t}=this.props,a=i.Ul.ChatStore.currentChatRoomGroups.filter((e=>e.BCanIAssociateBroadcast())),n=t;return s.createElement("div",{className:"chatModalCover"},s.createElement(l.e1,{onEscKeypress:e},s.createElement(c.VY,{className:"watchPartyDialog"},s.createElement(c.uT,null,s.createElement("div",{className:"watchPartyPrompt"},(0,d.Xx)("#Broadcast_WatchPrompt")),s.createElement(c.HV,null,!this.props.bIsNewSteamTVDialog&&s.createElement(c.zx,{svgicon:r.pUF,className:"watchHowButton",onClick:this.WatchAlone},(0,d.Xx)("#Broadcast_WatchAlone")),n&&s.createElement(c.zx,{className:"watchHowButton",onClick:()=>this.CreateWatchParty(!0)},s.createElement(h.o2,{friend:n,context:null,bLarge:!1}),(0,d.kQ)("#Broadcast_WatchWith",s.createElement("span",{className:"highlight"}," ",n.display_name))),0!==a.length&&s.createElement(s.Fragment,null,s.createElement(c.__,null,(0,d.Xx)("#Broadcast_WatchWithExistingWatchParty")),a.map((e=>s.createElement(g,{key:e.unique_id,group:e,onClick:()=>this.UpgradeExisting(e)})))),s.createElement(c.zx,{className:"watchHowButton newWatchGroup",svgicon:r.k4w,onClick:()=>this.CreateWatchParty(!1)},(0,d.Xx)("#Broadcast_LinkBroadcastToGroup_New")))),s.createElement(c.$_,null))))}}(0,n.gn)([p.ak],_.prototype,"WatchAlone",null),(0,n.gn)([p.ak],_.prototype,"Close",null);var v=a(79588),S=a(50649),C=a(37634),b=a(70158),w=a(20698),f=a.n(w),E=a(16677),y=a(5341),D=a(71494),I=a(58951),k=a(5777),B=a(42770),A=a(91004),L=a(92256),P=a(99377),T=a(28793),G=a(66866);class N{constructor(){this.m_iTimeoutLogin=void 0,this.m_eLogonState=0,this.m_bLogonDialogVisisible=!1,this.m_steamID=void 0,(0,v.rC)(this)}Init(e){this.m_fnLaunchChat=e,this.m_steamID=G.dk.steamid,window.addEventListener("message",this.HandlePostMessage),this.m_reactRoot=C.s(document.getElementById("friendslist-container")),this.m_reactRoot.render(s.createElement(R,{app:this})),this.m_iTimeoutLogin=window.setTimeout((()=>{0==this.m_eLogonState&&(this.m_eLogonState=1)}),2500)}LaunchChat(){this.m_reactRoot.unmount(),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),(0,o.yz)(G.dk.steamid),this.m_fnLaunchChat()}GetLoginURL(){return`${G.De.STORE_BASE_URL}login/?steamtv`}BIsPerformingLogonCheck(){return 0==this.m_eLogonState||1==this.m_eLogonState}BIsLogonDialogVisible(){return this.m_bLogonDialogVisisible}ShowLogonDialog(){this.m_bLogonDialogVisisible=!0}BReadyToRender(){return 0!=this.m_eLogonState}DismissLogonDialog(){this.m_bLogonDialogVisisible=!1}GetSteamIDWatched(){return this.m_steamID}ExtractOrigin(e){return e.replace(/^(https?:\/\/[^/]*).*$/,"$1")}HandlePostMessage(e){if(e.origin!=this.ExtractOrigin(G.De.STORE_BASE_URL)&&e.origin!=this.ExtractOrigin(G.De.CHAT_BASE_URL))return void console.warn(`Ignoring message from untrusted domain "${e.origin}"`);let t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()}}(0,n.gn)([v.LO],N.prototype,"m_eLogonState",void 0),(0,n.gn)([v.LO],N.prototype,"m_bLogonDialogVisisible",void 0),(0,n.gn)([v.LO],N.prototype,"m_steamID",void 0),(0,n.gn)([v.aD],N.prototype,"LaunchChat",null),(0,n.gn)([v.aD.bound],N.prototype,"HandlePostMessage",null);let R=class extends s.Component{constructor(e){super(e),this.m_broadcastInfo=null,this.m_broadcastInfo=B.BroadcastWatchStore.StartInfo(this.props.app.GetSteamIDWatched()),this.state={bChatCollapsed:!1,bTheaterMode:!1}}componentWillUnmount(){this.m_broadcastInfo&&(B.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnShowLogin(){this.props.app.ShowLogonDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){this.setState({bTheaterMode:!this.state.bTheaterMode})}render(){const e=this.props.app;let t=this.m_broadcastInfo,a=F();return s.createElement(O,null,e.BReadyToRender()&&s.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},s.createElement(A.m,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),s.createElement("div",{className:"BroadcastTab"},s.createElement("div",{className:"StandalonePlayerHeader"},s.createElement("div",{className:"STV_Logo"},s.createElement(r.hLd,null)),s.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},s.createElement(H,{onClick:this.OnShowLogin}),s.createElement(V,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),s.createElement(W,{steamID:e.GetSteamIDWatched(),watchLocation:a,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},s.createElement(Z,{app:e})))),s.createElement(x,{app:e}))}};function M(){const e=(0,G.ip)("loyalty_webapi_token","application_config");return new k.J(G.De.WEBAPI_BASE_URL,e)}function O(e){const{children:t}=e,a=s.useCallback((()=>null===i.Ul||void 0===i.Ul?void 0:i.Ul.CMInterface),[]),n=(0,p.kD)(s.useCallback((()=>new I.Z),[])),o=(0,p.kD)(M);return s.createElement(T.R,null,s.createElement(G.fI,null,G.L7.logged_in?s.createElement(D.Ub,{useActiveCMInterface:a,useStorage:n},t):s.createElement(D.Ub,{useActiveSteamInterface:o,useStorage:n},t)))}(0,n.gn)([p.ak],R.prototype,"OnShowLogin",null),(0,n.gn)([p.ak],R.prototype,"ToggleChat",null),(0,n.gn)([p.ak],R.prototype,"ToggleTheaterMode",null),R=(0,n.gn)([S.Pi],R);let x=(0,S.Pi)((({app:e})=>e.BIsPerformingLogonCheck()?s.createElement("div",null,s.createElement("iframe",{style:{display:"none"},src:e.GetLoginURL()})):null));function H(e){return s.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},s.createElement(r.lsH,null),(0,d.Xx)("#Broadcast_WatchWithFriends"))}function V(e){return s.createElement("div",{className:"ToggleBroadcastChat",title:(0,d.Xx)("#Broadcast_ToggleChat"),onClick:e.onClick},s.createElement(r.QlI,{showChat:e.hideIcon}))}function F(){return G.De.STEAM_TV?1:3}let U=class extends s.Component{constructor(e){super(e),this.m_broadcastInfo=null;let t=this.props.broadcastView.GetSteamID().ConvertTo64BitString();this.m_broadcastInfo=B.BroadcastWatchStore.StartInfo(t),this.state={bChatCollapsed:!1}}componentWillUnmount(){this.m_broadcastInfo&&(B.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnWatchWithFriends(){this.props.broadcastView.ShowWatchPromptDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){i.Ul.UIStore.SetTheaterMode(!i.Ul.UIStore.GetTheaterMode())}render(){const{broadcastView:e,popup:t,style:a}=this.props,n=e.GetSteamID().ConvertTo64BitString();let o=F();const r=e.m_bShowWatchPromptDialog?s.createElement(_,{closeModal:()=>e.HideWatchPromptDialog(),broadcastAccountId:e.GetSteamID().GetAccountID(),broadcastTabId:e.GetUniqueID(),initialFriend:e.m_watchPromptInitialFriend,browserContext:i.D,ownerWindow:t}):null;return s.createElement("div",{className:"BroadcastTab",style:a},s.createElement(A.m,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),s.createElement("div",{className:"BroadcastTab_OverBackground"},s.createElement("div",{className:"BroadcastTabHeaderContainer"},s.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},s.createElement(H,{onClick:this.OnWatchWithFriends}),s.createElement(V,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),s.createElement(W,{steamID:n,watchLocation:o,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},r)))}};(0,n.gn)([p.ak],U.prototype,"OnWatchWithFriends",null),(0,n.gn)([p.ak],U.prototype,"ToggleChat",null),(0,n.gn)([p.ak],U.prototype,"ToggleTheaterMode",null),U=(0,n.gn)([S.Pi],U);let W=class extends s.Component{constructor(e){super(e),this.m_strLocalSteamID="",this.m_refBroadcastContainer=s.createRef(),(0,v.rC)(this),this.state={info:null}}componentDidMount(){E.rr.stream["76561198208088121"]&&"chinese"===G.De.LANGUAGE?this.OnLocalStreamChange("76561198208088121"):E.rr.stream["76561198207552741"]&&"russian"===G.De.LANGUAGE&&this.OnLocalStreamChange("76561198207552741")}static getDerivedStateFromProps(e,t){if(!t.info||t.info.m_steamIDBroadcast!==e.steamID){t.info&&B.BroadcastWatchStore.StopInfo(t.info);return{info:B.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&B.BroadcastWatchStore.StopInfo(this.state.info)}OnLocalStreamChange(e){this.m_strLocalSteamID=e}SetMainContentRef(e){this.m_elMainContent=e}CalculateBroadcastSectionStyles(e){if(this.props.bHideChat)return{width:"100%",height:"100%"};let t,a;o.g_FriendsUIDesktopApp&&(t=o.g_FriendsUIDesktopApp.UIDisplayPrefs.nWatchPartyBroadcastHeightPercentage,a=o.g_FriendsUIDesktopApp.UIDisplayPrefs.nWatchPartyBroadcastWidthPercentage);const n={};if(e){const e=t||66;if(n.height=`${e}%`,this.m_elMainContent){const{clientWidth:t,clientHeight:a}=this.m_elMainContent,o=9/16*t+50,i=(0,P.Lh)(e,1,o/a*100);n.height=`${i}%`}}else n.width=a?`${a}%`:"66%",n.minWidth=a?`${a}%`:"66%",n.maxWidth="calc( 100% - 316px )",n.overflowY="auto";return n}OnGrabberMouseDown(e){let t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})}HandleMouseMove(e){e.preventDefault(),e.stopPropagation();let t=this.m_refBroadcastContainer.current.getBoundingClientRect(),a=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect();const n=t.left,i=e.clientX,s=a.width,r=(0,P.Lh)((i-n)/s*100,1,100);o.g_FriendsUIDesktopApp.SetUIDisplayPref("nWatchPartyBroadcastWidthPercentage",r)}UnregisterDragEvents(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})}render(){let{steamID:e,children:t}=this.props,a=this.m_strLocalSteamID||e,n=this.state.info.m_bIsOnline,o=null;const r=this.CalculateBroadcastSectionStyles(!1);r.flexGrow=this.props.bHideChat?1:null,E.rr.bValid&&(o=s.createElement(X,{info:E.rr}));const l=new N,c=s.createElement("div",{className:"LoginDiv"},s.createElement("a",{onClick:()=>l.ShowLogonDialog(),className:f().ChatLoginButton,href:"#"},(0,d.Xx)("#BroadcastChat_Login")),s.createElement(Z,{app:l})),m=B.BroadcastWatchStore.GetBroadcast(a)?B.BroadcastWatchStore.GetBroadcast(a).m_ulBroadcastID:"0";return s.createElement("div",{className:"BroadcastContainer"},s.createElement("div",{className:"BroadcastContainerSection",ref:this.m_refBroadcastContainer,style:r},s.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},n&&s.createElement(y.default,{key:a,steamIDBroadcast:a,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!n&&o,s.createElement("div",{className:"videoContainerSizer"})),t,s.createElement("div",{className:"BroadcastDetailsSection"},s.createElement(y.BroadcastDetails,{steamID:a,onLocalStreamChange:this.OnLocalStreamChange,bVerticalBroadcastChat:!0}))),!this.props.bHideChat&&s.createElement("div",{className:"BroadcastChatDivider horizontal",onMouseDown:this.OnGrabberMouseDown}),s.createElement("div",{className:"BroadcastChatDiv",style:{display:this.props.bHideChat?"none":"flex",flexDirection:"column",width:"100%",minWidth:"300px"}},s.createElement(b.c,{emoticonStore:i.Ul?i.Ul.ChatStore.EmoticonStore:null,broadcastID:m,steamID:a,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}),G.L7&&G.L7.logged_in?null:c))}};function X(e){let t=`url( "${G.De.CHAT_BASE_URL+e.info.offlineImage}" )`;return s.createElement("div",{style:{backgroundImage:t},className:"BroadcastOffline"})}(0,n.gn)([v.LO],W.prototype,"m_strLocalSteamID",void 0),(0,n.gn)([p.ak],W.prototype,"OnLocalStreamChange",null),(0,n.gn)([p.ak],W.prototype,"SetMainContentRef",null),(0,n.gn)([p.ak],W.prototype,"OnGrabberMouseDown",null),(0,n.gn)([p.ak],W.prototype,"HandleMouseMove",null),(0,n.gn)([p.ak],W.prototype,"UnregisterDragEvents",null),W=(0,n.gn)([S.Pi],W);class j extends s.Component{Dismiss(){this.props.app.DismissLogonDialog()}render(){return s.createElement(L.e1,{onEscKeypress:this.Dismiss},s.createElement(c.VY,{className:"SteamTVLoginDialog"},s.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))}}(0,n.gn)([p.ak],j.prototype,"Dismiss",null);let Z=class extends s.Component{render(){if(!this.props.app.BIsLogonDialogVisible())return null;let e=s.createElement(j,{app:this.props.app});return s.createElement("div",{className:"FullModalOverlay"},s.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),s.createElement("div",{className:"ModalOverlayContent active"},e))}};Z=(0,n.gn)([S.Pi],Z)},80332:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(85556),o=a(27378),i=a(89620),s=a(50649),r=a(57269);let l=class extends o.Component{render(){let e=this.props.broadcastView;if(!(e&&e instanceof r.v))return null;let t={};return this.props.isActive||(t.display="none"),o.createElement(i.BroadcastTab,{style:t,broadcastView:e,popup:this.props.popup})}};l=(0,n.gn)([s.Pi],l);const c=l},12340:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var n=a(27378),o=a(5341),i=a(37442);const s=n.forwardRef((function({steamID:e,localSteamID:t,watchLocation:a,bWebRTC:s,style:r,onRequestClose:l,actions:c,onTheaterMode:d,onLocalStreamChange:m,bVerticalBroadcastChat:p},u){const h=t||e;return n.createElement("div",{ref:u,style:Object.assign({display:"flex",flexDirection:"column"},r)},n.createElement("div",{className:"BroadcastSection"},n.createElement(o.default,{key:h,steamIDBroadcast:h,watchLocation:a,bWebRTC:s,onRequestClose:l,actions:c,onTheaterMode:d,onOpenLinkInNewWindow:i.b8}),n.createElement("div",{className:"videoContainerSizer"})),n.createElement("div",{className:"BroadcastDetailsSection"},n.createElement(o.BroadcastDetails,{steamID:h,onLocalStreamChange:m,bVerticalBroadcastChat:p})))}))},5341:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BroadcastDetails:()=>rn,LinkOverlay:()=>cn,default:()=>Qa});var n=a(85556),o=a(14206),i=a.n(o),s=a(79588),r=a(50649),l=a(27378),c=a(47200),d=a(30942),m=a(42770),p=a(90850),u=a(8574),h=a(40499);class g extends l.Component{constructor(){super(...arguments),this.m_schUpdate=new h.Ar,this.m_bSetupComplete=!1}componentDidMount(){0==this.props.updateRate&&this.updateCanvas()}componentWillUnmount(){this.m_schUpdate.Cancel()}componentDidUpdate(){this.updateCanvas()}BindCanvasRef(e){this.m_elCanvas=e}updateCanvas(){if(null==this.props.elementRef||null==this.m_elCanvas||this.m_bSetupComplete)return;let e=this.props.scaleFactor||[1,1],t=this.props.elementRef,a=this.props.updateRate;this.m_Context=this.m_elCanvas.getContext("2d");let n=Math.floor(this.m_elCanvas.clientWidth/this.props.reductionFactor),o=Math.floor(this.m_elCanvas.clientHeight/this.props.reductionFactor);this.m_elCanvas.width=n,this.m_elCanvas.height=o,this.props.blurAmount>0&&(this.m_Context.filter="blur("+this.props.blurAmount+"px)");let i=()=>{this.m_Context.drawImage(t,0,0,n*e[0],o*e[1]),a>0&&this.m_schUpdate.Schedule(a,i)};i(),this.m_bSetupComplete=!0}render(){return l.createElement("canvas",{id:this.props.id,className:this.props.className,ref:this.BindCanvasRef,width:this.props.width,height:this.props.height})}}(0,n.gn)([u.ak],g.prototype,"BindCanvasRef",null),(0,n.gn)([u.ak],g.prototype,"updateCanvas",null);var _=a(47445),v=a(91004),S=a(89035),C=a(66866),b=a(61467);function w(e,t){return(0,b.A)(e,function(e){var t;return[(null===(t=null==e?void 0:e.jsondata)||void 0===t?void 0:t.read_more_link)?(0,S.FM)(e.jsondata.read_more_link).toLocaleLowerCase():void 0]}(t))}function f(e,t){return e=w(e,t)?(C.De.IN_CLIENT?"steam://openurl_external/":"")+(0,b.d)(e):(0,S.bk)(e)}var E=a(80798),y=a(71680),D=a(82689),I=a(44685),k=a(27562),B=a(18195),A=a(35313),L=a(5096);l.createContext({bShowCompatInfo:!1});const P=e=>{const t=(a=e.category,T[a]||B.z5E);var a;return l.createElement("div",{className:(0,k.Z)(A.SteamDeckCompatInfo,e.className)},l.createElement(B.j7C,null),l.createElement(t,{className:A.SteamDeckCompatIcon}))},T={1:B.vyu,2:B.KKY,3:B.YVI,0:B.z5E};var G=a(38148),N=a(71793),R=a(21859),M=a(60280),O=a(40508),x=a.n(O),H=a(14757),V=a.n(H);function F(e){const{appInfo:t}=e,a=(0,l.useRef)({include_trailers:!0}),[n]=(0,M.jk)(null==t?void 0:t.id,(0,R.TM)(null==t?void 0:t.type),a.current);if(!n)return null;const o=n.GetMicroTrailer();return o?l.createElement("video",{className:V().CapsuleMicroTrailer,loop:!0,muted:!0,autoPlay:!0,key:"mtv-"+o.strMP4URL},l.createElement("source",{src:o.strWebMURL,type:"video/webm"}),!C.De.IN_CLIENT&&l.createElement("source",{src:o.strMP4URL,type:"video/mp4"})):null}function U(e){var t;const{item:a,strClassName:n,bMinimizePlatforms:o}=e,[i]=(0,M.jk)(null==a?void 0:a.id,(0,R.TM)(null==a?void 0:a.type),{include_platforms:!0});if(!i)return null;const s=i.GetPlatforms();if(o){let e=s.windows&&l.createElement("span",{title:(0,L.Xx)("#Platform_Windows")},l.createElement(B.Bh5,null));return(0,C.Uy)()&&s.mac?e=l.createElement("span",{title:(0,L.Xx)("#Platform_Mac")},l.createElement(B.uZu,null)):((0,C.eG)()||(0,C.wg)()||(0,C.S$)())&&s.steamos_linux&&(e=l.createElement("span",{title:(0,L.Xx)("#Platform_Linux")},l.createElement(B.ui7,null))),e?l.createElement("span",{className:(0,k.Z)(V().CapsulePlatform,n)},e):null}return l.createElement("span",{className:(0,k.Z)(V().CapsulePlatform,n)},s.windows&&l.createElement("span",{title:(0,L.Xx)("#Platform_Windows")},l.createElement(B.Bh5,null)),s.mac&&l.createElement("span",{title:(0,L.Xx)("#Platform_Mac")},l.createElement(B.uZu,null)),s.steamos_linux&&l.createElement("span",{title:(0,L.Xx)("#Platform_Linux")},l.createElement(B.ui7,null)),(null===(t=s.vr_support)||void 0===t?void 0:t.vrhmd)&&l.createElement("span",{title:(0,L.Xx)("#Platform_VR")},l.createElement(B.VR,null)))}var W=a(67889),X=a(96952),j=a(45922),Z=a(88500);var z;function Y(e){switch(e){case"primary":return z.k_ePrimary;case"featured":return z.k_eFeatured;case"default_featured":return z.k_eDefaultFeatured;default:return z.k_eGeneral}}!function(e){e[e.k_ePrimary=3]="k_ePrimary",e[e.k_eFeatured=2]="k_eFeatured",e[e.k_eDefaultFeatured=1]="k_eDefaultFeatured",e[e.k_eGeneral=0]="k_eGeneral"}(z||(z={}));class Q{constructor(){this.title=void 0,this.viewer_count=void 0,this.gamedata_subtitle=void 0,this.default_selection_priority=z.k_eGeneral,this.current_selection_priority=z.k_eGeneral,(0,s.rC)(this)}}(0,n.gn)([s.LO],Q.prototype,"title",void 0),(0,n.gn)([s.LO],Q.prototype,"viewer_count",void 0),(0,n.gn)([s.LO],Q.prototype,"gamedata_subtitle",void 0),(0,n.gn)([s.LO],Q.prototype,"current_selection_priority",void 0);function q(e){return Boolean(e&&e.thumbnail_http_address)}class J{constructor(){this.m_inFlightRequests=new Map,this.m_lookupKeyToEmbedStreamDef=new Map,this.m_lookupStreams=new Map,this.m_playReadyStream=new Map,this.m_bMapHasStartedVideo=new Map,this.m_mapBroadcastChecked=new Map,this.m_pageChatStatus="hide",this.m_streamChatStatus="hide",this.m_bUserChatExpanded=void 0,this.m_bUserPreferenceHideBroadcastByDefault=void 0,this.m_bCollapsed=void 0,this.m_setStreamChangedListeners=new Set,this.m_bUseFakeData=!1,this.m_onLoadContextCall=new Map,(0,s.rC)(this)}BHasStreams(e){const t=this.GetStreams(e);return Boolean(t&&t.length>0)}AddCallbackOnNewContext(e,t,a){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),{name:t,fnCallback:a})}ClearCallbackOnNewContext(e){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),null)}GetPlayReadyStream(e){let t=this.GetStreamsLookupKeyFromDef(e);return this.m_playReadyStream.get(t)}BIsEmbeddedBroadcastHiddenByDefaultUserSettings(){return Boolean(this.m_bUserPreferenceHideBroadcastByDefault)}BIsEmbeddedStreamCollapsed(){return Boolean(this.m_bCollapsed)}SetEmbeddedStreamCollapsed(e){this.m_bCollapsed!=e&&(this.m_bCollapsed=e)}GetConcurrentStreams(e){const t=this.GetStreams(e);return t?t.filter((e=>q(e))).length:0}GetChatVisibility(){return"remove"===this.m_pageChatStatus||"remove"===this.m_streamChatStatus?"remove":void 0!==this.m_bUserChatExpanded?this.m_bUserChatExpanded?"show":"hide":"show"===this.m_pageChatStatus?"show":"hide"===this.m_pageChatStatus||"hide"===this.m_streamChatStatus?"hide":"show"}ToggleChatVisibility(){const e=this.GetChatVisibility();"remove"!==e&&(this.m_bUserChatExpanded="hide"===e)}DebugDumpContextAndAvailableContext(e){console.log("Requested context",this.GetStreamsLookupKeyFromDef(e)),console.log("Available context count: ",this.m_lookupStreams.size),this.m_lookupStreams.forEach(((e,t)=>{console.log(t,e.length)}))}GetStreams(e){const t=this.GetStreamsLookupKeyFromDef(e);return this.m_lookupStreams.get(t)}GetBroadcastURL(e){let t=null;return t=e.steamid?new W.K(e.steamid):W.K.InitFromAccountID(e.accountid),C.De.COMMUNITY_BASE_URL+"broadcast/watch/"+t.ConvertTo64BitString()}BIsAppStreaming(e){let t=!1;return this.m_lookupStreams.forEach((a=>{t||(t=Boolean(a)&&a.some((t=>m.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID===e)))})),t}GetStreamsForAppID(e){const t=new Array;return this.m_lookupStreams.forEach((a=>{null==a||a.forEach((a=>{m.BroadcastWatchStore.GetOrCreateBroadcastInfo(a.steamid).m_nAppID===e&&t.push(a)}))})),t}AddStreamChangedListener(e){this.m_setStreamChangedListeners.add(e)}RemoveStreamChangedListener(e){this.m_setStreamChangedListeners.delete(e)}LoadBIsEmbeddedBroadcastHidden(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(void 0===this.m_bUserPreferenceHideBroadcastByDefault){let t=(0,C.kQ)("broadcastuser","application_config");if(!t)try{let a=C.De.STORE_BASE_URL+"broadcast/ajaxgetuserbroadcastpreferences",n=yield i().get(a,{params:{},cancelToken:e.token});t=n.data}catch(e){console.log("LoadBIsEmbeddedBroadcastHidden: "+(0,Z.l)(e).strErrorMsg),t={bHideStoreBroadcast:!1}}(0,s.z)((()=>{this.m_bUserPreferenceHideBroadcastByDefault=t.bHideStoreBroadcast,this.m_bCollapsed=t.bHideStoreBroadcast}))}return this.m_bUserPreferenceHideBroadcastByDefault}))}SetupEmbeddableVOD(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){this.m_bUseFakeData=!1,this.m_streamChatStatus="remove",yield p.Z.Get().QueueAppRequest(e.nAppIDVOD,{include_assets:!0,include_trailers:!0});const a=p.Z.Get().GetApp(e.nAppIDVOD),n=new Q;if(n.accountid=0,n.nAppIDVOD=e.nAppIDVOD,n.default_selection_priority=z.k_ePrimary,n.current_selection_priority=z.k_ePrimary,n.thumbnail_http_address=(null==a?void 0:a.GetAssets().GetHeaderURL())||"",n.title=(null==a?void 0:a.GetName())||"",this.GetStreams(e).unshift(n),t){const t=this.GetStreamsLookupKeyFromDef(e);this.m_playReadyStream.set(t,n)}}))}HintLoadEmbeddablePreviewStreams(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t=null,a={eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0};try{return t=yield i().get(C.De.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpreview",{params:a}),this.HandleHintLoadBroadcastResponse(e,t.data)}catch(e){let t=(0,Z.l)(e);console.error("HintLoadEmbeddablePreviewStreams hit error loading: "+t.strErrorMsg,t)}return[]}))}HintLoadEmbeddableStreams(e){return(0,n.mG)(this,void 0,void 0,(function*(){let t=this.MapEmbeddableStreamToRequest(e),a=this.GetStreamsLookupKeyFromParam(t);if(!this.m_inFlightRequests.has(a)){this.m_lookupKeyToEmbedStreamDef.set(a,e);const n=this.InternalHintLoadEmbeddableStreams(e,t);this.m_inFlightRequests.set(a,n)}return this.m_inFlightRequests.get(a)}))}ValidateBroadcastPageStreamers(e){const t=e;return!!(t&&"number"==typeof t.success&&t.filtered&&Array.isArray(t.filtered)&&t.broadcast_chat_visibility)&&(0==t.filtered.length||"string"==typeof t.filtered[0].accountid)}InternalHintLoadEmbeddableStreams(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let a=(0,C.kQ)("broadcast_available_for_page","application_config");if(this.ValidateBroadcastPageStreamers(a))return this.HandleHintLoadBroadcastResponse(e,a);try{let a=null;return a=yield i().get(C.De.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpage",{params:t}),this.HandleHintLoadBroadcastResponse(e,a.data)}catch(e){let t=(0,Z.l)(e);console.error("HintLoadEmbeddableStreams hit error loading: "+t.strErrorMsg,t)}return[]}))}HandleHintLoadBroadcastResponse(e,t){var a;return(0,n.mG)(this,void 0,void 0,(function*(){this.m_bUseFakeData=!1,e.bIsPreview&&((null===(a=null==t?void 0:t.filtered)||void 0===a?void 0:a.length)>0?this.ExtractBroadcastPrioritiesFromPartnerEventForPreview(e.event,t.filtered):(t={filtered:[{}],success:1,total_count:1,err_msg:"",broadcast_chat_visibility:"hide"},this.m_bUseFakeData=!0)),t.broadcast_chat_visibility&&(this.m_pageChatStatus=t.broadcast_chat_visibility);const n=new Array;(0,s.z)((()=>{t.filtered.forEach((e=>{if(!e.steamid){const t=W.K.InitFromAccountID(e.accountid);e.steamid=t.ConvertTo64BitString()}const t=m.BroadcastWatchStore.GetOrCreateBroadcastInfo(e.steamid),a=e.appid?Number(e.appid):m.k_nDefaultBroadcastAppID;t.m_nAppID=a,t.m_strAppId=""+a,void 0===e.current_selection_priority&&(e.current_selection_priority=e.default_selection_priority),a!=m.k_nDefaultBroadcastAppID&&n.push(a)}))}));const o=this.GetStreamsLookupKeyFromDef(e);if(this.m_lookupStreams.set(o,t.filtered),this.m_onLoadContextCall.has(o)){const e=this.m_onLoadContextCall.get(o);e?("dev"==C.De.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller using callback to "+e.name),e.fnCallback()):"dev"==C.De.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller, however callback is since cleared")}const i=this.GetStreams(e);return yield this.AutoStartVideoStream(e,i),i}))}ExtractBroadcastPrioritiesFromPartnerEventForPreview(e,t){var a,n;const o=Array.from(null!==(a=e.jsondata.broadcast_whitelist)&&void 0!==a?a:[]),i=Array.from(null!==(n=e.jsondata.broadcast_priority)&&void 0!==n?n:[]),s=new Map;for(let e=0;e<o.length&&!(e>=i.length);e++)s.set(o[e],Y(i[e]));t.forEach((e=>{const t=Number(e.accountid);s.has(t)&&(e.current_selection_priority=s.get(t))}))}AutoStartVideoStream(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.get(a))return null;if(this.m_bUseFakeData){if(!this.m_playReadyStream.get(a)){const e={accountid:0,thumbnail_http_address:"",default_selection_priority:z.k_eGeneral,current_selection_priority:z.k_eGeneral};this.m_playReadyStream.set(a,e)}return this.m_playReadyStream}return this.PlayFromAvailableStreams(e,t)}))}PlayFromAvailableStreams(e,t,a=!1){return(0,n.mG)(this,void 0,void 0,(function*(){const n=new Set;for(;;){const o=t.filter((e=>!(n.has(e)||a&&e.nAppIDVOD))),i=this.GetAutoStartStream(o);if(!i)return null;if(yield this.AttemptToPlayStream(e,i))return i;n.add(i)}}))}AttemptToPlayStream(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.set(a,!0),this.m_mapBroadcastChecked.has(t.accountid)||this.m_mapBroadcastChecked.set(t.accountid,this.InternalAttemptToPlayStream(e,t)),t.nAppIDVOD)this.m_playReadyStream.set(a,t);else{const o=yield this.m_mapBroadcastChecked.get(t.accountid);if(1!=(null==o?void 0:o.success))return null;t.steamid=o.steamid,this.m_playReadyStream.set(a,t),this.GetConcurrentStreams(e)>1?this.m_streamChatStatus="hide":this.m_streamChatStatus=t.broadcast_chat_visibility,this.m_setStreamChangedListeners.forEach((e=>e(t)));!function(e,t,a){(0,n.mG)(this,void 0,void 0,(function*(){if(e>0&&7!=e&&a){let n=new URLSearchParams;n.append("page_action",""+t),n.append("snr",a),i().post(C.De.STORE_BASE_URL+"ajaxreportproductaction/"+e+"/",n)}}))}(m.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID,1,t.snr)}return t}))}InternalAttemptToPlayStream(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){this.GetStreamsLookupKeyFromDef(e);let a=null;try{const e=C.De.STORE_BASE_URL+"broadcast/ajaxcheckbroadcast";let n={broadcastaccountid:t.accountid,viewer_token:m.BroadcastWatchStore.GetViewerToken(),origin:self.origin};return a=yield i().get(e,{params:n}),a.data}catch(e){let t=(0,Z.l)(e);console.error("Broadcast.AttemptToPlayStream: "+t.strErrorMsg,t)}return null}))}GetAutoStartStream(e){if(!e)return null;const t=e.filter((e=>q(e))),a=t.reduce(((e,t)=>Math.max(e,K(t))),0),n=t.filter((e=>K(e)===a));if(0===n.length)return null;return n[Math.floor(Math.random()*n.length)]}MapEmbeddableStreamToRequest(e){var t,a,n;return{appid:e.appid,promotionName:e.bIsPreview?"preview":e.promotionName,clanid:e.clanid?e.clanid:e.event?e.event.clanSteamID.GetAccountID():void 0,listid:e.listid,subid:e.subid,bundleid:e.bundleid,eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0,test:false,cc:C.De.COUNTRY,l:C.De.LANGUAGE,hubtype:null===(t=e.event)||void 0===t?void 0:t.GetContentHubType(),hubcategory:null===(a=e.event)||void 0===a?void 0:a.GetContentHubCategory(),hubtagid:null===(n=e.event)||void 0===n?void 0:n.GetContentHubTag(),tabuniqueid:e.tabuniqueid,tabfilter:e.tabfilter,rt_now_override_test:X.JW.BHasTimeOverride()?X.JW.GetTimeNowWithOverride():void 0}}GetStreamsLookupKeyFromDef(e){return this.GetStreamsLookupKeyFromParam(this.MapEmbeddableStreamToRequest(e))}GetStreamsLookupKeyFromParam(e){return JSON.stringify(e)}static Get(){return J.s_GlobalStore||(J.s_GlobalStore=new J,"dev"==C.De.WEB_UNIVERSE&&(window.g_BroadcastEmbeddableStore=J.s_GlobalStore),J.s_GlobalStore.Init()),J.s_GlobalStore}Init(){}}function K(e){return e.current_selection_priority||z.k_eGeneral}(0,n.gn)([s.LO],J.prototype,"m_lookupStreams",void 0),(0,n.gn)([s.LO],J.prototype,"m_playReadyStream",void 0),(0,n.gn)([s.LO],J.prototype,"m_pageChatStatus",void 0),(0,n.gn)([s.LO],J.prototype,"m_streamChatStatus",void 0),(0,n.gn)([s.LO],J.prototype,"m_bUserChatExpanded",void 0),(0,n.gn)([s.LO],J.prototype,"m_bUserPreferenceHideBroadcastByDefault",void 0),(0,n.gn)([s.LO],J.prototype,"m_bCollapsed",void 0),(0,n.gn)([s.aD],J.prototype,"HintLoadEmbeddablePreviewStreams",null),(0,n.gn)([s.aD],J.prototype,"AttemptToPlayStream",null);new j.M;var $,ee=a(70926);!function(e){e[e.AnyController=0]="AnyController",e[e.XboxController=1]="XboxController",e[e.Ps3Controller=2]="Ps3Controller",e[e.Ps4Controller=3]="Ps4Controller",e[e.Ps5Controller=4]="Ps5Controller",e[e.SwitchController=5]="SwitchController",e[e.SteamController=6]="SteamController",e[e.SteamDeckNeptune=7]="SteamDeckNeptune",e[e.SteamDeckGalileo=8]="SteamDeckGalileo"}($||($={}));const te={any_controller:$.AnyController,xbox_controller:$.XboxController,ps3_controller:$.Ps3Controller,ps4_controller:$.Ps4Controller,ps5_controller:$.Ps5Controller,switch_controller:$.SwitchController,steam_controller:$.SteamController,steam_deck_neptune:$.SteamDeckNeptune,steam_deck_galileo:$.SteamDeckGalileo},ae="unUserdataVersion";class ne{BIsLoaded(){return this.m_bIsLoaded}GetWishlistGamesInUserOrder(){return this.m_wishlistInOrder}GetWishlistGameCount(){return this.m_setWishList.size}GetRecommendedGamesInIRPriorityOrder(){return this.m_recAppInOrder}GetFollowedCuratorCount(){return this.m_setCuratorsFollowed.size}GetFollowedCuratorsAccountID(){return Array.from(this.m_setCuratorsFollowed)}GetPackagesInCartCount(){return this.m_setPackagesInCart.size}GetAppInCartCount(){return this.m_setAppsInCart.size}GetCartLineItemCount(){return this.m_nCartLineItemCount}GetIgnoredAppsCount(){return this.m_mapIgnoredApps.size}BIsFollowingCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsFollowed.has(t)}BIsFollowingCreator(e){return this.BIsFollowingCurator(e)}BIsIgnoringCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsIgnored.has(t)}get ExcludedContentDescriptor(){return Array.from(this.m_setExcludedContentDescriptors)}BExcludesTag(e){return e.some((e=>this.m_setExcludedTagsIds.has(Number(e.tagid))))}BExcludeTagIDs(e){return e.some((e=>this.m_setExcludedTagsIds.has(e)))}GetExcludedTagsSortedByID(){return Array.from(this.m_setExcludedTagsIds).sort()}BExcludesContentDescriptor(e){return e.some((e=>this.m_setExcludedContentDescriptors.has(e)))}BIncludesContentDescriptor(e){return!this.m_setExcludedContentDescriptors.has(e)}BIsGameWishlisted(e){return this.m_setWishList.has(Number(e))}BIsGameRecommended(e){return this.m_setRecommendedApps.has(Number(e))}BIsGameIgnored(e){return this.m_mapIgnoredApps&&this.m_mapIgnoredApps.has(e)}BIsPackageIgnored(e){var t;return null===(t=this.m_mapIgnoredPackages)||void 0===t?void 0:t.has(e)}BIsGameOwned(e){return this.m_setOwnedApps.has(Number(e))}BOwnsApp(e){return this.m_setOwnedApps.has(Number(e))}BFollowsApp(e){return this.m_setFollowedApps.has(Number(e))}BOwnsPackage(e){return this.m_setOwnedPackages.has(Number(e))}BHasUsedHardware(e){return this.m_rgHardwareUsed.has(e)}BShowFilteredUserReviewScores(){return this.m_bShowFilteredUserReviewScores}BAppImpressionsAllowed(){return this.m_bAllowAppImpressions}GetPrimaryLanguage(){return this.m_primaryLanguage}GetSecondaryLanguages(){return this.m_secondaryLanguages}BIsAnyLanguageEnabled(e){return null==this.m_primaryLanguage||(this.m_primaryLanguage<=-1||31<=this.m_primaryLanguage||e.some((e=>this.m_primaryLanguage===e||this.m_secondaryLanguages.has(e))))}GetRecommendedTags(){return this.m_setRecommendedTags}BIsAjaxInFlight(){return this.m_bAjaxInFlight}BIsAppRecommendedBySomeCurator(e){return this.m_mapRecommendingCuratorsForApp.has(e)}GetRecommendingCuratorsForApp(e){return this.m_mapRecommendingCuratorsForApp.get(e)}GetOwnedApps(){return this.m_setOwnedApps}GetWishlistedApps(){return this.m_setWishList}HintLoad(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.m_promise||(this.m_promise=this.InternalLoad()),this.m_promise}))}InternalLoad(){return(0,n.mG)(this,void 0,void 0,(function*(){let e=window.localStorage.getItem(ae)||"0",t={v:"0"==e?void 0:e,id:""+C.L7.accountid,cc:""+C.De.COUNTRY,origin:self.origin},a=C.De.STORE_BASE_URL+"dynamicstore/userdata/";try{let e=yield i().get(a,{params:t,withCredentials:!0});e&&200==e.status&&(0,s.z)((()=>{if(this.m_bIsLoaded=!0,e.data.rgCurators){this.m_setCuratorsFollowed=new Set;for(const t in e.data.rgCurators)this.m_setCuratorsFollowed.add(Number(t))}if(e.data.rgCuratorsIgnored&&(this.m_setCuratorsIgnored=new Set(e.data.rgCuratorsIgnored.map((e=>Number(e))))),e.data.rgWishlist&&(this.m_wishlistInOrder=e.data.rgWishlist.map((e=>Number(e))),this.m_setWishList=new Set(e.data.rgWishlist.map((e=>Number(e))))),e.data.rgFollowedApps&&(this.m_setFollowedApps=new Set(e.data.rgFollowedApps.map((e=>Number(e))))),e.data.rgOwnedApps&&(this.m_setOwnedApps=new Set(e.data.rgOwnedApps.map((e=>Number(e))))),e.data.rgOwnedPackages&&(this.m_setOwnedPackages=new Set(e.data.rgOwnedPackages.map((e=>Number(e))))),e.data.rgIgnoredApps){const t=e.data.rgIgnoredApps;this.m_mapIgnoredApps=new Map;for(const e in t)this.m_mapIgnoredApps.set(Number(e),Number(t[e]))}if(e.data.rgIgnoredPackages){const t=e.data.rgIgnoredPackages;this.m_mapIgnoredPackages=new Map;for(const e in t)this.m_mapIgnoredPackages.set(Number(e),Number(t[e]))}if(e.data.rgExcludedTags&&(this.m_setExcludedTagsIds=new Set(e.data.rgExcludedTags.map((e=>Number(e.tagid))))),e.data.rgExcludedContentDescriptorIDs&&(this.m_setExcludedContentDescriptors=new Set(e.data.rgExcludedContentDescriptorIDs.map((e=>Number(e))))),e.data.rgRecommendedApps&&(this.m_recAppInOrder=e.data.rgRecommendedApps.map((e=>Number(e))),this.m_setRecommendedApps=new Set(e.data.rgRecommendedApps.map((e=>Number(e))))),e.data.rgPreferredPlatforms&&(this.m_setPreferredPlatforms=new Set(e.data.rgPreferredPlatforms)),e.data.bAllowAppImpressions&&(this.m_bAllowAppImpressions=e.data.bAllowAppImpressions),this.m_bShowFilteredUserReviewScores=!!e.data.bShowFilteredUserReviewScores,void 0!==e.data.rgPrimaryLanguage&&(this.m_primaryLanguage=e.data.rgPrimaryLanguage),e.data.rgSecondaryLanguages&&(this.m_secondaryLanguages=new Set(e.data.rgSecondaryLanguages)),e.data.rgRecommendedTags&&(this.m_setRecommendedTags=new Set(e.data.rgRecommendedTags.map((e=>e.tagid)))),e.data.rgAppsInCart&&(this.m_setAppsInCart=new Set(e.data.rgAppsInCart)),e.data.rgPackagesInCart&&(this.m_setPackagesInCart=new Set(e.data.rgPackagesInCart)),e.data.nCartLineItemCount&&(this.m_nCartLineItemCount=e.data.nCartLineItemCount),e.data.rgCurations)for(const t of Object.keys(e.data.rgCurations)){const a=[];for(const n of Object.keys(e.data.rgCurations[t]))0===e.data.rgCurations[t][n]&&a.push(Number(n));this.m_mapRecommendingCuratorsForApp.set(Number(t),a)}if(e.data.rgHardwareUsed)for(const t of e.data.rgHardwareUsed){const e=te[t];e&&this.m_rgHardwareUsed.add(e)}}))}catch(e){let t=(0,Z.l)(e);console.error("CDynamicStore.InternalLoad",t.strErrorMsg,t)}return this}))}UpdateFollowOrIgnoreCurator(e,t,a){return(0,n.mG)(this,void 0,void 0,(function*(){let n=C.De.STORE_BASE_URL+"curators/"+(t?"ajaxfollow/":"ajaxignore/");const o=e.GetAccountID(),s=new FormData;s.append("clanid",""+o),s.append("sessionid",C.De.SESSIONID),s.append(t?"follow":"ignore",a?"1":"0");let r=yield i().post(n,s,{withCredentials:!0});if(r&&200==r.status){this.InvalidateCache();const e=t?this.m_setCuratorsFollowed:this.m_setCuratorsIgnored;a?e.add(o):e.delete(o)}return r.data}))}UpdateAppIgnore(e,t,a=0){return(0,n.mG)(this,void 0,void 0,(function*(){let n=C.De.STORE_BASE_URL+"recommended/ignorerecommendation";const o=new FormData;o.append("sessionid",C.De.SESSIONID),o.append("appid",""+e),o.append("remove",t?"0":"1"),o.append("snr",C.De.SNR),o.append("ignore_reason",""+a);try{this.m_bAjaxInFlight=!0;let r=yield i().post(n,o,{withCredentials:!0});return r&&200==r.status&&(0,s.z)((()=>{this.InvalidateCache(),t?this.m_mapIgnoredApps.set(e,a):this.m_mapIgnoredApps.delete(e)})),this.m_bAjaxInFlight=!1,r.data}catch(e){let t=(0,Z.l)(e);console.error("UpdateAppIgnore",t.strErrorMsg,t)}return this.m_bAjaxInFlight=!1,{success:2}}))}UpdateGameWishlist(e,t,a,o){return(0,n.mG)(this,void 0,void 0,(function*(){let n=C.De.STORE_BASE_URL+"api/"+(t?"addtowishlist":"removefromwishlist");const s=new FormData;s.append("appid",""+e),s.append("sessionid",C.De.SESSIONID),a&&s.append("snr",a),this.m_bAjaxInFlight=!0;let r=yield i().post(n,s,{withCredentials:!0,cancelToken:o?o.token:void 0});if(this.m_bAjaxInFlight=!1,o&&o.token.reason)return{success:52};if(r.data.success=1==r.data.success?1:2,1==r.data.success)if(this.InvalidateCache(),e=Number(e),t)this.m_setWishList.has(e)||this.m_wishlistInOrder.push(e),this.m_setWishList.add(e);else{if(this.m_setWishList.has(e)){const t=this.m_wishlistInOrder.findIndex((t=>t==e));-1!=t&&this.m_wishlistInOrder.splice(t,1)}this.m_setWishList.delete(e)}return r.data}))}AddToCart(e,t,a,o,s,r,l){return(0,n.mG)(this,void 0,void 0,(function*(){if(void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart){let e;return s&&(yield d.ZP.Load(),e=d.ZP.ParseSNR(s)),window.AddItemToCart(t,r,e),!0}const n=new FormData;n.append("action","add_to_cart"),r?n.append("bundleid",r.toString()):n.append("subid",""+t),s&&n.append("snr",s),n.append("sessionid",C.De.SESSIONID),n.append("quantity","1");const c=(0,ee.RA)(e);e.preventDefault();try{yield i().post(a,n,{withCredentials:!0}),this.InvalidateCache(c),(null==l?void 0:l.fnSetURL)?l.fnSetURL(o):c.location.href=o}catch(e){return console.log("HandleOnAddToCart",e),!1}return!0}))}AddLicenseForFreeGame(e){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.BOwnsApp(e))return 1;try{const t=new FormData;t.append("sessionid",C.De.SESSIONID),t.append("appid",""+e),t.append("cc",C.De.COUNTRY);let a=C.De.STORE_BASE_URL+"actions/addappformastersubscription",n=yield i().post(a,t,{withCredentials:!0});if(this.InvalidateCache(),!n.data.success||1!==n.data.success)return n.data.success?n.data.success:2;this.m_setOwnedApps.add(Number(e))}catch(e){let t=(0,Z.l)(e);return console.log("AddLicense request failed:",t.strErrorMsg,t),2}return 1}))}UpdateFollowingApp(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){try{const a=C.De.STORE_BASE_URL+"explore/followgame",n=new FormData;n.append("appid",""+e),n.append("sessionid",C.De.SESSIONID),t||n.append("unfollow","1");const o=yield i().post(a,n,{withCredentials:!0});if(!o.data)return 2;this.InvalidateCache(),t?this.m_setFollowedApps.add(Number(e)):this.m_setFollowedApps.delete(Number(e))}catch(e){return console.log("Follow game request failed"),2}return 1}))}BHasPlatformPreferenceSet(){return this.m_setPreferredPlatforms.size>0&&this.m_setPreferredPlatforms.size<3}BIsPreferredPlatform(e){return this.m_setPreferredPlatforms.has(e)}InvalidateCache(e){const t=e||window;t.localStorage.setItem(ae,(Number.parseInt(t.localStorage.getItem(ae)||"0")+1).toString())}static Get(){return ne.s_globalSingletonStore||(ne.s_globalSingletonStore=new ne,"dev"==C.De.WEB_UNIVERSE&&(window.DUS=ne.s_globalSingletonStore)),ne.s_globalSingletonStore}constructor(){this.m_setWishList=new Set,this.m_wishlistInOrder=Array(),this.m_setOwnedPackages=new Set,this.m_setOwnedApps=new Set,this.m_setFollowedApps=new Set,this.m_setExcludedTagsIds=new Set,this.m_setExcludedContentDescriptors=new Set,this.m_setRecommendedApps=new Set,this.m_recAppInOrder=new Array,this.m_mapIgnoredApps=new Map,this.m_mapIgnoredPackages=new Map,this.m_setCuratorsFollowed=new Set,this.m_setCuratorsIgnored=new Set,this.m_bShowFilteredUserReviewScores=!0,this.m_setPreferredPlatforms=new Set,this.m_bAllowAppImpressions=!1,this.m_primaryLanguage=-1,this.m_secondaryLanguages=new Set,this.m_setRecommendedTags=new Set,this.m_mapRecommendingCuratorsForApp=new Map,this.m_setPackagesInCart=new Set,this.m_setAppsInCart=new Set,this.m_nCartLineItemCount=0,this.m_rgHardwareUsed=new Set,this.m_bIsLoaded=!1,this.m_bAjaxInFlight=!1,(0,s.rC)(this)}}(0,n.gn)([s.LO],ne.prototype,"m_setWishList",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setOwnedPackages",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setOwnedApps",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setFollowedApps",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setExcludedTagsIds",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setExcludedContentDescriptors",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setRecommendedApps",void 0),(0,n.gn)([s.LO],ne.prototype,"m_mapIgnoredApps",void 0),(0,n.gn)([s.LO],ne.prototype,"m_mapIgnoredPackages",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setCuratorsFollowed",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setCuratorsIgnored",void 0),(0,n.gn)([s.LO],ne.prototype,"m_bShowFilteredUserReviewScores",void 0),(0,n.gn)([s.LO],ne.prototype,"m_primaryLanguage",void 0),(0,n.gn)([s.LO],ne.prototype,"m_secondaryLanguages",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setRecommendedTags",void 0),(0,n.gn)([s.LO],ne.prototype,"m_mapRecommendingCuratorsForApp",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setPackagesInCart",void 0),(0,n.gn)([s.LO],ne.prototype,"m_setAppsInCart",void 0),(0,n.gn)([s.LO],ne.prototype,"m_nCartLineItemCount",void 0),(0,n.gn)([s.LO],ne.prototype,"m_rgHardwareUsed",void 0),(0,n.gn)([s.LO],ne.prototype,"m_bAjaxInFlight",void 0),(0,n.gn)([s.Fl],ne.prototype,"ExcludedContentDescriptor",null),(0,n.gn)([s.aD],ne.prototype,"UpdateAppIgnore",null);var oe=a(54752);function ie(){return l.createElement("div",{className:oe.bordered_live_stream_icon},(0,L.Xx)("#home_page_live_broadcast"))}function se(e){const{appids:t,hide_status_banners:a}=e,n=t.every((e=>ne.Get().BOwnsApp(e))),o=t.every((e=>ne.Get().BIsGameWishlisted(e))),i=t.some((e=>{const t=p.Z.Get().GetApp(e);return t&&function(e,t){if(t||e){const a=t||e;return a&&J.Get().BIsAppStreaming(a)}return!1}(e,null==t?void 0:t.GetParentAppID())})),s=n&&!a,r=o&&!a;return l.createElement("div",{className:(0,k.Z)(V().CapsuleDecorators,"CapsuleDecorators")},s&&l.createElement("span",{className:(0,k.Z)(V().Banner,V().Blue)},l.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUNDNzBFNTUyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUNDNzBFNTYyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Q0M3MEU1MzIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0M3MEU1NDIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv3vUKAAAAAlSURBVHjaYvz//z8DsYARpFhISAivjnfv3jGSp3jUGeQ4AyDAADZHNe2nyOBrAAAAAElFTkSuQmCC",className:V().LinesImg}),(0,L.Xx)("#Sale_InLibrary")),r&&l.createElement("span",{className:V().Banner},l.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTM3OEVDNTUyMUM0MTFFNDgxN0ZEN0MzNjYzNzcxOTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTM3OEVDNTYyMUM0MTFFNDgxN0ZEN0MzNjYzNzcxOTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMzc4RUM1MzIxQzQxMUU0ODE3RkQ3QzM2NjM3NzE5NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMzc4RUM1NDIxQzQxMUU0ODE3RkQ3QzM2NjM3NzE5NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps9jzFQAAACPSURBVHjaYvz//z+DkJDQdQYGhpsMCMAKxMZAHPXu3bt9cFGQYkFBwQ0gGoaBfAEgzgfibUDsBxNnYsAOfgKxJBBvAeIZMEEWZBVA52xA5gOdUAEUc8NQDBTkBEoGMOAByCYLAjUsRzM5AKtioMQzIEW0ydjcHIBTMSE3M0Ij5RKQfQ6HGiOgIXogBkCAAQDGVT+0v+n6EQAAAABJRU5ErkJggg==",className:V().LinesImg}),(0,L.Xx)("#Sale_OnWishlist")),i&&l.createElement(ie,null))}const re={include_assets:!0,include_release:!0,include_platforms:!0,include_tag_count:20,include_basic_info:!0,include_trailers:!0,include_reviews:!0,include_screenshots:!0,include_supported_languages:!0};function le(e){return"game"===e||"dlc"===e||"software"===e||"music"===e||"application"===e||"demo"===e||"hardware"===e||"mod"===e||"video"==e||"beta"===e||"advertising"===e}var ce=a(70756),de=a(32531);const me=l.createContext({AddImpression:()=>{console.log("Impression Tracking not enabled")},BIsValid:()=>!1});function pe(e){const{appID:t,feature:a,depth:n,children:o}=e,i=(0,de.PZ)(a,n),s=l.useContext(me),r=l.useCallback((()=>t&&s.AddImpression(t,i)),[s,t,i]);return l.createElement(ce.h,{onEnter:r},o)}function ue(e){return"bundle"==e?"bundle":"sub"==e?"sub":le(e)?"app":null}const he=e=>{const{appid:t}=e,a=l.createElement("div",{className:"ImpressionTrackedElement"},e.children);return t?l.createElement(pe,{appID:t},a):a};class ge{}ge.instance_count=0;class _e{constructor(e){this.appid=e.appid,this.demo_appid=e.demo_appid,this.demo_package_id=0}}class ve{constructor(){this.m_mapAppToDemoInfo=new Map,this.m_mapAppIDToLoadPromise=new Map,(0,s.rC)(this)}static Get(){return ve.s_DemoEventStore||(ve.s_DemoEventStore=new ve,ve.s_DemoEventStore.Init()),ve.s_DemoEventStore}BHasDemoEventInfo(e){return this.m_mapAppToDemoInfo.has(e)}GetDemoEventInfo(e){return this.m_mapAppToDemoInfo.get(e)}GetAllDemoInfo(){return this.m_mapAppToDemoInfo}BHasDemoAppID(e){var t;return Boolean(null===(t=this.m_mapAppToDemoInfo.get(e))||void 0===t?void 0:t.demo_appid)}GetNumDemos(){let e=0;return this.m_mapAppToDemoInfo.forEach((t=>{t.demo_appid>0&&(e+=1)})),e}Init(){let e=(0,C.kQ)("demoeventstore","application_config");this.ValidateStoreDefault(e)&&e.forEach((e=>{this.m_mapAppToDemoInfo.set(e.appid,new _e(e))}))}ValidateStoreDefault(e){const t=e;return!!(t&&Array.isArray(t)&&t.length>0&&"object"==typeof t[0])&&"number"==typeof t[0].appid}LoadAppIDsBatch(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const a=new Array,n=new Array;if(e.forEach((e=>{this.m_mapAppIDToLoadPromise.has(e)?n.push(this.m_mapAppIDToLoadPromise.get(e)):this.m_mapAppToDemoInfo.has(e)||a.push(e)})),a.length>0){const e=this.InternalLoadAppIDsBatch(a,t);a.forEach((t=>this.m_mapAppIDToLoadPromise.set(t,e))),n.push(e)}return(yield Promise.all(n)).every((e=>!!e))}))}InternalLoadAppIDsBatch(e,t){var a,o,r;return(0,n.mG)(this,void 0,void 0,(function*(){try{for(e=e.sort();e.length>0;){const n=50,l=Math.min(n,e.length),c=e.slice(0,l);e=e.slice(l);const d=C.De.STORE_BASE_URL+"saleaction/ajaxgetdemoevents",m=yield i().get(d,{params:{appids:c,cc:C.De.COUNTRY||"US",origin:self.origin},cancelToken:t?t.token:void 0});1===(null===(a=null==m?void 0:m.data)||void 0===a?void 0:a.success)||42===(null===(o=null==m?void 0:m.data)||void 0===o?void 0:o.success)?(0,s.z)((()=>{var e,t;(null===(t=null===(e=null==m?void 0:m.data)||void 0===e?void 0:e.info)||void 0===t?void 0:t.length)&&m.data.info.forEach((e=>{this.m_mapAppToDemoInfo.set(e.appid,new _e(e))}));for(const e of c)this.m_mapAppToDemoInfo.has(e)||this.m_mapAppToDemoInfo.set(e,new _e({appid:e})),this.m_mapAppIDToLoadPromise.delete(e)})):console.log("Failed to call ajaxgetdemoevents with response:"+(null===(r=null==m?void 0:m.data)||void 0===r?void 0:r.err_msg))}return!0}catch(e){console.log("Failed to call ajaxgetdemoevents:"+e)}return!1}))}}(0,n.gn)([s.LO.shallow],ve.prototype,"m_mapAppToDemoInfo",void 0),(0,n.gn)([s.aD],ve.prototype,"Init",null),(0,n.gn)([s.aD],ve.prototype,"LoadAppIDsBatch",null);a(93920),a(36239);class Se{GetCompatabilityResultForApp(e){return this.m_mapAppResults.get(e)}BHasCompatabilityResultForApp(e){return this.m_mapAppResults.has(e)}GetCallbackForAppList(e){return this.m_mapAppCallbackList.has(e)||this.m_mapAppCallbackList.set(e,new h.pB),this.m_mapAppCallbackList.get(e)}AddCompatabilityResult(e){this.m_mapAppResults.set(e.appid,e),this.GetCallbackForAppList(e.appid).Dispatch(e)}LoadAppCompabitilityResult(e){return(0,n.mG)(this,void 0,void 0,(function*(){return!!this.m_mapAppResults.has(e)||(this.m_mapAppResultsPromises.has(e)||this.m_mapAppResultsPromises.set(e,this.InternalLoadAppCompatability(e)),this.m_mapAppResultsPromises.get(e))}))}InternalLoadAppCompatability(e){var t,a;return(0,n.mG)(this,void 0,void 0,(function*(){let n=null;try{const o={nAppID:e,l:C.De.LANGUAGE,cc:C.De.COUNTRY};let s=C.De.STORE_BASE_URL+"saleaction/ajaxgetdeckappcompatibilityreport";const r=yield i().get(s,{params:o,withCredentials:!0});if(200==(null==r?void 0:r.status)&&1==(null===(t=r.data)||void 0===t?void 0:t.success)&&(null===(a=r.data)||void 0===a?void 0:a.results))return this.AddCompatabilityResult(r.data.results),!0;n=(0,Z.l)(r)}catch(e){n=(0,Z.l)(e)}return console.error("CDeckVerifiedDetailsStore.InternalLoadAppCompatability failed: "+(null==n?void 0:n.strErrorMsg),n),!1}))}static Get(){return Se.s_Singleton||(Se.s_Singleton=new Se,"dev"!=C.De.WEB_UNIVERSE&&"beta"!=C.De.WEB_UNIVERSE||(window.g_DeckVerifiedDetailStores=Se.s_Singleton)),Se.s_Singleton}constructor(){if(this.m_mapAppResults=new Map,this.m_mapAppCallbackList=new Map,this.m_mapAppResultsPromises=new Map,document.getElementById("application_config")){let e=(0,C.kQ)("deckcompatibility","application_config");Se.ValidateCompatabilityResult(e)&&(this.AddCompatabilityResult(e),"dev"==C.De.WEB_UNIVERSE&&console.log("CDeckCompatibilityDetailsStore compatability loaded: ",e))}}static ValidateCompatabilityResult(e){const t=e;return t&&"number"==typeof t.appid&&"number"==typeof t.resolved_category&&"object"==typeof t.resolved_items}}(0,n.gn)([u.ak],Se.prototype,"LoadAppCompabitilityResult",null);var Ce=a(37990),be=a(92256),we=a(59090),fe=a.n(we),Ee=a(15594),ye=a(29488),De=a(78242);function Ie(e){var t,a;const{results:n,appName:o,buttonProps:i,autoFocus:s,onOpenBlogPost:r}=e,[c,d]=l.useState(!1),m=l.useCallback((()=>c),[c]),p=l.useRef(),u=(0,C.id)();if(l.useEffect((()=>{var e,t;d((null===(e=null==p?void 0:p.current)||void 0===e?void 0:e.scrollHeight)>(null===(t=null==p?void 0:p.current)||void 0===t?void 0:t.clientHeight))}),[]),!n)return null;const h=()=>{r?r():window.location.href=n.steam_deck_blog_url};let g=null!=i?i:{},_=null;n.steam_deck_blog_url&&(g.onOptionsActionDescription=(0,L.Xx)("#SteamDeckVerified_ViewDeveloperPost"),g.onOptionsButton=h,_=l.createElement(ke,{blogURL:n.steam_deck_blog_url}));const v=-1!==(null===(t=n.resolved_items)||void 0===t?void 0:t.findIndex((e=>1==e.display_type)));return(null===(a=n.resolved_items)||void 0===a?void 0:a.length)?l.createElement(y.s,Object.assign({className:u?fe().CompatibilityDetailsContainer:fe().CompatibilityDetailsContainerDesktop},g),l.createElement("div",null,l.createElement("div",{className:fe().DialogHeader},l.createElement("div",{className:fe().DialogTitle},(0,L.Xx)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),l.createElement("div",{className:fe().AppTitleCategory},l.createElement(Ne,{category:n.resolved_category}))),l.createElement(Re,{category:n.resolved_category,appName:o})),_,l.createElement("div",{className:fe().CompatibilityDetailsSeparator}),l.createElement(Ee.TN,{ref:p,className:m()?fe().CompatibilityDetailsInterior_Scroll:fe().CompatibilityDetailsInterior_NoScroll},l.createElement(y.s,{autoFocus:s,focusableIfNoChildren:s||m(),noFocusRing:!0},n.resolved_items.filter((e=>1!==e.display_type)).map((e=>l.createElement("div",{key:e.loc_token+e.display_type,className:fe().CompatibilityDetailsRow},l.createElement(Be,{displaytype:e.display_type}),l.createElement("span",null,(0,L.Xx)(e.loc_token))))),v&&l.createElement("div",{className:fe().CompatibilityNotes},n.resolved_items.filter((e=>1==e.display_type)).map((e=>l.createElement("div",{key:e.loc_token+e.display_type,className:fe().CompatibilityDetailsNoteRow},l.createElement("span",null,(0,L.Xx)(e.loc_token))))))))):l.createElement(y.s,Object.assign({autoFocus:s,focusableIfNoChildren:s,noFocusRing:!0,className:fe().CompatibilityDetailsContainer},g),l.createElement("div",null,l.createElement("div",{className:fe().DialogHeader},l.createElement("div",{className:fe().DialogTitle},(0,L.Xx)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),l.createElement("div",{className:fe().AppTitleCategory},l.createElement(Ne,{category:n.resolved_category}))),l.createElement(Re,{category:n.resolved_category,appName:o}),_))}function ke(e){const{blogURL:t}=e,a=(0,C.id)();return t?a?l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},(0,L.Xx)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog"),l.createElement("div",{className:fe().DeveloperBlogYButton},l.createElement(ye.VC,{button:De.FX.Y,type:ye.yV.Knockout}))):l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},(0,L.Xx)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog_Desktop"),l.createElement("a",{href:t,className:fe().DeveloperBlockLinkDesktop},(0,L.Xx)("#SteamDeckVerified_ViewDeveloperPost"))):null}function Be(e){const{displaytype:t}=e;switch(t){case 4:return l.createElement(B.YVI,{className:fe().CompatibilityDetailsResultIcon});case 3:return l.createElement(B.KKY,{className:fe().CompatibilityDetailsResultIcon});case 2:return l.createElement(B.vyu,{className:fe().CompatibilityDetailsResultIcon});case 0:return l.createElement(B.z5E,{className:fe().CompatibilityDetailsResultIcon});case 1:return"dev"==C.De.WEB_UNIVERSE&&console.error("deck verified banner shouldn't try to display the information display type for appid"),null}}var Ae=a(99113),Le=a(27785),Pe=a(22872);function Te(e){var t;const{storeItem:a}=e;if(0!==a.GetStoreItemType())return null;const n=(null===(t=a.GetPlatforms())||void 0===t?void 0:t.steam_deck_compat_category)||0;return l.createElement("div",{className:(0,k.Z)(fe().LearnMoreCtn,"LearnMoreCtn")},l.createElement(P,{category:n}),l.createElement(E.IS,{onClick:e=>{var t,n;e.preventDefault(),e.stopPropagation(),t=(0,ee.RA)(e),n=a.GetAppID(),(0,Pe.AM)(l.createElement(Ge,{nAppID:n}),t)}},l.createElement("span",{className:fe().LearnMorePC},(0,L.Xx)("#SteamDeckVerified_Store_CompatSectionHeader_Desktop"))))}function Ge(e){const{nAppID:t,closeModal:a}=e,n=function(e){const[t,a]=l.useState(Se.Get().GetCompatabilityResultForApp(e));return(0,u.Qg)(Se.Get().GetCallbackForAppList(e),a),l.useEffect((()=>{Se.Get().BHasCompatabilityResultForApp(e)||Se.Get().LoadAppCompabitilityResult(e).then((()=>a(Se.Get().GetCompatabilityResultForApp(e))))}),[e]),t}(t);return l.createElement(be.RG,{modalClassName:"DeckVerifiedModalDialog",closeModal:a,onCancel:a},l.createElement(Ce.uT,null,l.createElement(y.s,{focusable:!1,"flow-children":"column"},Boolean(n)?l.createElement(Ie,{results:n}):l.createElement(Ae.V,{size:"medium",position:"center",string:(0,L.Xx)("#Loading")}))))}function Ne(e){const{category:t}=e;switch(t){case 3:return l.createElement(B.YVI,{className:fe().CategoryIcon});case 2:return l.createElement(B.KKY,{className:fe().CategoryIcon});case 1:return l.createElement(B.vyu,{className:fe().CategoryIcon});case 0:return l.createElement(B.z5E,{className:fe().CategoryIcon})}}function Re(e){const{category:t,appName:a,descriptionToken:n}=e;if(0==t)return l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},a?(0,L.kQ)("#SteamDeckVerified_DescriptionHeader_Unknown_WithAppName",l.createElement("b",null,(0,Le.HA)(a))):(0,L.Xx)("#SteamDeckVerified_DescriptionHeader_Unknown"));let o="",i=null;switch(t){case 3:o="#SteamDeckVerified_DescriptionHeader_Verified",i=fe().Verified;break;case 2:o="#SteamDeckVerified_DescriptionHeader_Playable",i=fe().Playable;break;case 1:o="#SteamDeckVerified_DescriptionHeader_Unsupported",i=fe().Unsupported}const s=l.createElement("span",{className:i},(0,L.Xx)(Me(t))),r=l.createElement("span",{className:fe().CompatibilityDetailRatingSummary},(0,L.Xx)(n||o)),c=a?(0,L.kQ)("#SteamDeckVerified_DescriptionHeader_WithAppName",l.createElement("b",null,(0,Le.HA)(a)),s,r):(0,L.kQ)("#SteamDeckVerified_DescriptionHeader",s,r);return l.createElement("div",{className:fe().CompatibilityDetailRatingSummary},c)}function Me(e){switch(e){case 3:return"#SteamDeckVerified_Category_Verified";case 2:return"#SteamDeckVerified_Category_Playable";case 1:return"#SteamDeckVerified_Category_Unsupported";default:return"#SteamDeckVerified_Category_Unknown"}}const Oe=(0,l.createContext)({}),xe=()=>(0,l.useContext)(Oe);var He=a(56552),Ve=a(87180),Fe=a(71494),Ue=a(51463),We=a(93547),Xe=a(44650);const je={high_pending_orders:!1,inventory_available:!0};function Ze(e){const t=(0,Fe.be)(),a=(0,He.useQuery)([(null==e?void 0:e.GetID())||Ue.kI,(null==e?void 0:e.GetStoreItemType())||"invalid"],(()=>function(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(!e||1!==e.GetStoreItemType()||10!==e.GetAppType())return je;const a=Ve.gA.Init(We.yl);a.Body().set_packageid(e.GetID()),a.Body().set_country_code(Xe.L7.country_code);const n=yield We.I3.CheckInventoryAvailableByPackage(t,a);if(1!==n.GetEResult())throw console.error("Received error from FetchPhysicalGoodsStock",n.GetEResult()),new Error(`Error from FetchPhysicalGoodsStock: ${n.GetEResult()}`);return n.Body().toObject()}))}(e,t)),{enabled:Boolean((null==e?void 0:e.GetID())&&10===e.GetAppType())});return a.isLoading?null:a.data}var ze=a(37442),Ye=a(10859),Qe=a.n(Ye);function qe(e){var t;const{info:a,className:n}=e,o=(0,de.bJ)(),i=(0,l.useRef)({include_release:!0}),[s]=(0,M.jk)(a.id,(0,R.TM)(a.type),i.current),r=Ze(s);(0,l.useEffect)((()=>{ne.Get().HintLoad()}),[]);const c=(0,l.useCallback)((()=>{(0,ze.R6)(window,`steam://run/${null==s?void 0:s.GetAppIDToRun()}`)}),[s]);if(!s||8==s.GetAppType())return null;const m=s.BIsFree()||"0"==s.GetBestPurchasePriceFormatted()||s.GetBestPurchaseOption().discount_pct>=100;if(1==s.GetStoreItemType())if(10==s.GetAppType()){if(!r)return l.createElement(Ae.V,{size:"small",position:"center"});if(!r.inventory_available)return l.createElement("div",{className:(0,k.Z)(Qe().ActionOutOfStock,n)},l.createElement("span",null," ",(0,L.Xx)("#Sale_ReserveExhausted")))}else if(m&&s.GetIncludedAppIDs().length>1)return null;if(0==s.GetStoreItemType()){if(s.BIsComingSoon()&&!(null===(t=s.GetBestPurchaseOption())||void 0===t?void 0:t.packageid))return null;const e=ne.Get().BOwnsApp(s.GetAppID());if(e&&10===s.GetAppType())return null;if((e||m)&&!s.BIsComingSoon()){const t=e&&(0,L.Xx)("#EventDisplay_CallToAction_PlayNow")||(0,L.Xx)("#EventDisplay_CallToAction_PlayNowForFree");return l.createElement("div",{className:(0,k.Z)(Qe().Action,n),onClick:c},l.createElement("span",null,t))}if(""==s.GetBestPurchasePriceFormatted()){const e=(0,d.Hf)(s.GetStorePageURL(),o);return l.createElement("a",{href:e,className:(0,k.Z)(Qe().Action,n)},(0,L.Xx)("#EventDisplay_CallToAction_VisitStore"))}}return l.createElement(Je,{className:n,storeItem:s,info:a})}function Je(e){const{className:t,storeItem:a,info:n}=e,o=(0,de.bJ)(),i=xe(),s=(0,l.useCallback)((e=>{let t,s;if(2==(null==a?void 0:a.GetStoreItemType())||(null==a?void 0:a.GetBestPurchaseOption().bundleid)?t=2==(null==a?void 0:a.GetStoreItemType())?n.id:null==a?void 0:a.GetBestPurchaseOption().bundleid:s=null==a?void 0:a.GetBestPurchaseOption().packageid,void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart)return window.AddItemToCart(s,t,(0,de.zv)(o)),!0;{const a=`${C.De.STORE_BASE_URL}cart/addtocart`,n=`${C.De.STORE_BASE_URL}cart`,r=(0,d.mY)(o);ne.Get().AddToCart(e,s,a,n,r,t,i)}return!0}),[a,o,n.id,i]);return l.createElement("div",{className:(0,k.Z)(Qe().Action,t),onClick:s},l.createElement("span",null,(0,L.Xx)("#Store_AddToCart")))}var Ke=a(49474),$e=a.n(Ke);function et(e){return(0,n.mG)(this,void 0,void 0,(function*(){C.De.IN_CLIENT?(console.log(`Running game ${e} locally.`),window.location.href="steam://run/"+e):(console.log(`Cannot identify local client. Prompting user to launch ${e}.`),function(e){(0,n.mG)(this,void 0,void 0,(function*(){yield p.Z.Get().QueueAppRequest(e,{});const t=p.Z.Get().GetApp(e),a=(null==t?void 0:t.GetName())||"";console.log("prompting for",a);const n=C.De.STORE_BASE_URL+"about/";(0,Pe.x1)(l.createElement(tt,{appid:e,strGameName:a,strDownloadSteamUrl:n}),window)}))}(e))}))}const tt=e=>{const t=()=>e.closeModal&&e.closeModal();return l.createElement(be.e1,{onEscKeypress:t,className:$e().GotSteamDialog},l.createElement(Ce.VY,null,l.createElement(Ce.h4,null," ",(0,L.Xx)("#GotSteam_Title")," "),l.createElement(Ce.uT,null,l.createElement(Ce.Ac,null,(0,L.kQ)("#GotSteam_PromptWithDownloadLink",l.createElement("a",{href:e.strDownloadSteamUrl,className:$e().DownloadSteamUrl},(0,L.Xx)("#GotSteam_DownloadLinkText")),l.createElement("span",{className:$e().GameName},e.strGameName))),l.createElement("div",{className:$e().Buttons},l.createElement("a",{href:"steam://run/"+e.appid,onClick:t,className:(0,k.Z)($e().Button,$e().LeftButton)},l.createElement("div",{className:$e().AnswerText}," ",(0,L.Xx)("#GotSteam_Yes")," "),l.createElement("div",{className:$e().ActionText}," ",(0,L.Xx)("#GotSteam_Yes_Play")," ")),l.createElement("a",{href:e.strDownloadSteamUrl,onClick:t,className:$e().Button},l.createElement("div",{className:$e().AnswerText}," ",(0,L.Xx)("#GotSteam_No")," "),l.createElement("div",{className:$e().ActionText}," ",(0,L.Xx)("#GotSteam_No_Download")," "))),l.createElement("div",{className:$e().Footer},l.createElement(B.ui7,{className:$e().Logo}),(0,L.Xx)("#GotSteam_Blurb")))))};var at=a(19565),nt=a(67988),ot=a.n(nt);function it(e){const{info:t,className:a}=e,n=(0,l.useRef)({include_release:!0}),[o]=(0,M.jk)(null==t?void 0:t.id,(0,R.TM)(null==t?void 0:t.type),n.current),i=function(e){const[t,a]=(0,l.useState)(ve.Get().GetDemoEventInfo(e));return(0,l.useEffect)((()=>{!t&&e&&ve.Get().LoadAppIDsBatch([e]).then((()=>{ve.Get().BHasDemoEventInfo(e)&&a(ve.Get().GetDemoEventInfo(e))}))}),[e,t]),t}(null==t?void 0:t.id),s=!!(null==i?void 0:i.demo_appid)||1===(null==o?void 0:o.GetAppType()),r=s?(0,L.Xx)("#Sale_InstallDemo_ttip",null==o?void 0:o.GetName()):i?(0,L.Xx)("#Sale_CannotInstallDemo_ttip",null==o?void 0:o.GetName()):(0,L.Xx)("#Loading");return!s&&i&&(null==o?void 0:o.BIsFree())?l.createElement(qe,{info:t,className:a}):l.createElement(at.HP,{toolTipContent:r,onClick:e=>{e.preventDefault(),e.stopPropagation(),s&&et(1===(null==o?void 0:o.GetAppType())?o.GetAppID():i.demo_appid)},className:(0,k.Z)(a,ot().DemoButton,!s&&ot().DisabledButton)},s?(0,L.Xx)("#Sale_InstallDemo"):(0,L.Xx)("#Sale_DemoNotFound"))}var st=a(41370),rt=a(70404),lt=a.n(rt),ct=a(92562);function dt(e){(0,Pe.AM)(l.createElement(be.JX,{strTitle:(0,L.Xx)("#Wishlist_Error"),strDescription:(0,L.Xx)("#Wishlist_Error_Desc")},l.createElement("br",null),l.createElement("br",null),e),window)}function mt(e){const[t,a]=l.useState(!1),[o,i]=l.useState(!ne.Get().BIsLoaded()),s=(0,de.bJ)(),{appid:r,bIsFree:c,bIsComingSoon:m,className:p}=e,[u,h]=(0,st.SZ)((()=>[ne.Get().BIsGameWishlisted(r),ne.Get().BOwnsApp(r)]));l.useEffect((()=>{(()=>{(0,n.mG)(this,void 0,void 0,(function*(){yield ne.Get().HintLoad(),i(!1)}))})()}),[]);return h||!m&&c?c?l.createElement(pt,{possibleDemoAppID:r}):null:l.createElement("div",{className:(0,k.Z)(V().WishList,lt().FlexRowContainer,p),onClick:()=>(0,n.mG)(this,void 0,void 0,(function*(){if(C.L7.logged_in){if(!t){a(!0);const e=!u;try{const t=yield ne.Get().UpdateGameWishlist(r,e,(0,d.mY)(s));a(!1),1!=t.success&&dt((0,Z.l)(t).strErrorMsg)}catch(e){a(!1),dt((0,Z.l)(e).strErrorMsg)}}}else(0,ct.Xt)()})),"data-tooltip-text":(0,L.Xx)("#AddToWishlist_ttip")},l.createElement("span",null,(o||t)&&l.createElement(Ae.V,{size:"small"})),!t&&u&&l.createElement(B.JrY,null),l.createElement("span",null,(0,L.Xx)(t?"#Updating":o?"#Loading":u?"#Wishlisted_short":"#AddToWishlist_short")))}function pt(e){const{possibleDemoAppID:t,className:a}=e,[n]=(0,M.vs)(t,{});return(1==(null==n?void 0:n.GetAppType())||12==(null==n?void 0:n.GetAppType()))&&(null==n?void 0:n.GetParentAppID())>0?l.createElement(ut,{parentAppID:null==n?void 0:n.GetParentAppID(),className:a}):null}function ut(e){const{parentAppID:t,className:a}=e,[n]=(0,M.vs)(t,{include_release:!0});return n?l.createElement(mt,{appid:t,bIsComingSoon:n.BIsComingSoon(),bIsFree:n.BIsFree(),className:a}):null}var ht=a(85789);function gt(e){const{info:t,bShowDemoButton:a,bShowPurchaseOptionsButton:n,fnOnPurchaseOptionsClick:o,bHidePrice:s,bHideWishlistButton:r,bShowDeckCompatibilityDialog:c,className:d}=e,m=(0,l.useRef)({include_release:!0}),[p]=(0,M.jk)(t.id,(0,R.TM)(t.type),m.current),u=le(t.type),[h,g]=l.useState(a&&u&&(1===(null==p?void 0:p.GetAppType())||ve.Get().BHasDemoAppID(t.id)));return l.useEffect((()=>{const e=i().CancelToken.source();return a&&u&&(1===(null==p?void 0:p.GetAppType())?g(!0):ve.Get().LoadAppIDsBatch([t.id]).then((()=>{e.token.reason||g(ve.Get().BHasDemoAppID(t.id))}))),()=>null==e?void 0:e.cancel("StoreSalePriceActionWidget: unmounting")}),[a,u,t.id,p]),p?l.createElement("div",{className:(0,k.Z)(V().StoreActionWidgetContainer,d)},l.createElement("div",{className:V().StoreSalePriceActionWidgetContainer},Boolean(!r&&le(t.type))&&l.createElement(mt,{appid:t.id,bIsFree:p.BIsFree(),bIsComingSoon:p.BIsComingSoon(),className:"WishlistBtn"}),Boolean(h)&&l.createElement(it,{info:t,className:V().Action}),Boolean(!s)&&1!==(null==p?void 0:p.GetAppType())&&(Boolean(n&&!p.BIsFree())?l.createElement(_t,{fnOnPurchaseOptionsClick:o}):l.createElement(qe,{info:t,className:"CartBtn"})),Boolean(!s)&&l.createElement(vt,{info:t}),Boolean(c)&&l.createElement(Te,{storeItem:p}))):null}function _t(e){return l.createElement("div",{className:V().Action,onClick:e.fnOnPurchaseOptionsClick},l.createElement("span",null,(0,L.Xx)("#EventDisplay_CallToAction_ShowPurchaseOptions_Button")))}function vt(e){const{info:t}=e,a=(0,n._T)(e,["info"]),o=(0,l.useRef)({include_release:!0}),[i]=(0,M.jk)(null==t?void 0:t.id,(0,R.TM)(null==t?void 0:t.type),o.current);return l.createElement(Ct,Object.assign({},a,{storeItem:i}))}const St=7;function Ct(e){var t,a;const{bSingleLineMode:n,storeItem:o,onlyOneDiscountPct:i}=e,s=(0,X.zD)();if(!o)return null;const r=!o.BIsComingSoon()&&o.GetReleaseDateRTime()+St*ht._H.PerDay>s,c=(0,k.Z)(V().StoreSalePriceWidgetContainer,n&&V().SingleLineMode,"StoreSalePriceWidgetContainer",r&&V().NewItem),d=2==o.GetStoreItemType()&&(null===(t=o.GetBestPurchaseOption())||void 0===t?void 0:t.bundle_discount_pct);if(e.bShowInLibrary)return l.createElement("div",{className:c},l.createElement("div",{className:V().StoreSalePriceBox},(0,L.Xx)("#EventDisplay_CallToAction_InLibrary")));if(o.BIsComingSoon()&&!(null===(a=o.GetBestPurchaseOption())||void 0===a?void 0:a.packageid))return l.createElement("div",{className:c},l.createElement("div",{className:V().StoreSalePriceBox},(0,L.Xx)("#EventDisplay_CallToAction_ComingSoon")));if(o.BIsFree())return 0==o.GetStoreItemType()&&1==o.GetAppType()?l.createElement("div",{className:c},r&&l.createElement("div",{className:V().StoreSaleNewItem},(0,L.Xx)("#Flag_New")),l.createElement("div",{className:V().StoreSalePriceBox},(0,L.Xx)("#EventDisplay_CallToAction_FreeDemo"))):l.createElement("div",{className:c},r&&l.createElement("div",{className:V().StoreSaleNewItem},(0,L.Xx)("#Flag_New")),l.createElement("div",{className:V().StoreSalePriceBox},(0,L.Xx)("#EventDisplay_CallToAction_FreeToPlay")));if(!o.GetBestPurchasePriceFormatted()||!o.GetBestPurchaseOption())return null;let m=o.GetBestPurchaseOption().discount_pct||d,p=m&&d&&m>d&&d;return i&&m>0&&(p=0),l.createElement(bt,{bSingleLineMode:n,nBaseDiscountPercentage:p,nDiscountPercentage:m,bIsPrePurchase:o.BIsPrePurchase(),strBestPurchaseOriginalPriceFormatted:o.GetBestPurchaseOriginalPriceFormatted(),strBestPurchasePriceFormatted:o.GetBestPurchasePriceFormatted(),bHideDiscountPercentForCompliance:o.GetBestPurchaseOption().hide_discount_pct_for_compliance,bShowNewFlag:r})}function bt(e){const{bSingleLineMode:t,nDiscountPercentage:a,bIsPrePurchase:n,nBaseDiscountPercentage:o,strBestPurchaseOriginalPriceFormatted:i,strBestPurchasePriceFormatted:s,bHideDiscountPercentForCompliance:r,bShowNewFlag:c}=e,d=r&&!0;return l.createElement("div",{className:(0,k.Z)({[V().StoreSalePriceWidgetContainer]:!0,[V().SingleLineMode]:t,StoreSalePriceWidgetContainer:!0,[V().Discounted]:Boolean(a),Discounted:Boolean(a),[V().PrePurchase]:Boolean(n),[V().NewItem]:Boolean(c)})},Boolean(n)&&l.createElement("div",{className:(0,k.Z)(V().StoreSalePriceBox,V().StoreSalePrepurchaseLabel)},(0,L.Xx)("#EventDisplay_CallToAction_Prepurchase_Short")),Boolean(!n&&c)&&l.createElement("div",{className:V().StoreSaleNewItem},(0,L.Xx)("#Flag_New")),Boolean(o&&!d)&&l.createElement("span",{className:(0,k.Z)(V().BaseDiscount)},`-${o}%`),Boolean(a&&!d)&&l.createElement("div",{className:V().StoreSaleDiscountBox},`-${a}%`),Boolean(d)&&l.createElement("div",{className:V().DiscountIconCtn},l.createElement(B.dCe,null)),Boolean(a&&i&&!d)?l.createElement("div",{className:(0,k.Z)(V().StoreSaleDiscountedPriceCtn)},l.createElement("div",{className:(0,k.Z)({[V().SingleLineOriginalPrice]:t,[V().StoreOriginalPrice]:!t})},i),l.createElement("div",{className:(0,k.Z)({[V().StoreSalePriceBox]:!0,[V().SingleLineMode]:t})},s)):l.createElement("div",{className:V().StoreSalePriceBox},s))}var wt=a(63692);var ft=a(28379),Et=a(98319);a(28793);function yt(e=C.De.LANGUAGE){const t=(0,Fe.lS)(),a=(0,Fe.y$)();return(0,He.useQuery)(Dt(t,a,e))}function Dt(e,t,a){return{queryKey:["LocalizedTagNames",a],queryFn:()=>(0,n.mG)(this,void 0,void 0,(function*(){const n=`LocalizedTagNames_${a}`,o=yield t.GetObject(n),i=Ve.gA.Init(Et.GJ);i.Body().set_language(a),(null==o?void 0:o.version_hash)&&i.Body().set_have_version_hash(o.version_hash);const s=yield Et.d6.GetTagList(e.GetAnonymousServiceTransport(),i);let r;if(1==s.GetEResult())r=s.Body().toObject(),t.StoreObject(n,r);else if(29==s.GetEResult())r=o;else{if(!o)throw s.GetErrorMessage();console.warn("Couldn't load updated tag localization, will continue with what we have from storage."),r=o}const l=new Map;return r.tags.forEach((({tagid:e,name:t})=>l.set(e,{tagid:e,name:t}))),l})),staleTime:36e5}}a(68156);function It(e){const{className:t,url:a,style:n,children:o,bSkipForcingStoreLink:i}=e,s=(0,de.bJ)(),r=i?a:(0,S.md)(a,C.De.STORE_BASE_URL);if(r){const e=(0,d.Hf)(r,s);return l.createElement(E.IS,{href:e,target:C.De.IN_CLIENT?void 0:"_blank",className:t,style:n},o)}return l.createElement(l.Fragment,null,e.children)}function kt(e){const{tagid:t,className:a}=e,n=function(e,t=C.De.LANGUAGE){const{data:a}=yt(t);return e?null==a?void 0:a.get(e):void 0}(t);if(!n)return null;const o=(0,ft.dt)((0,ft.jM)(C.De.LANGUAGE)),i=`${C.De.STORE_BASE_URL}tags/${o}/${null==n?void 0:n.name}`;return l.createElement(It,{url:i,className:(0,k.Z)(V().Tag,"WidgetTag",a)},n.name)}const Bt=(0,r.Pi)((e=>{const{appid:t,bIsMuted:a}=e,n=ne.Get().BOwnsApp(t),o=(0,k.Z)(V().CapsuleBottomBar,a&&V().Muted,n?V().PlayNowButton:V().AddToLibraryButton);return l.createElement("div",{onClick:e=>{e.preventDefault(),n?et(t):ne.Get().AddLicenseForFreeGame(t)},className:o},(0,L.Xx)(n?"#Sale_PlayNow":"#Sale_AddToLibrary"))}));a(30355),a(81520);a(59563);a(50418);a(6995);function At(e){const{className:t,srcs:a,lazyLoad:n,width:o,height:i,alt:s,crossOrigin:r}=e,[c,d]=l.useState(a.length),[m,p]=l.useState(0);l.useEffect((()=>{c!=a.length&&(d(a.length),p(0))}),[c,a.length]);const u=l.useCallback((()=>{e.onImageError&&e.onImageError(e.srcs[m]),m+1<e.srcs.length&&p(m+1)}),[m,e]);return l.createElement("img",{className:t,src:a[m],crossOrigin:r,onError:u,loading:n?"lazy":void 0,width:o,height:i,alt:s})}function Lt(e){var t;const{info:a,bPreferLibrary:n}=e,[o]=(0,M.jk)(a.id,(0,R.TM)(a.type),{include_assets:!0}),[i,s]=l.useState(0);if(!o)return l.createElement("div",{className:V().HeroCapsuleImageContainer});let r=o.GetAssets().GetHeroCapsuleURL(),c=o.GetAssets().GetLibraryCapsuleURL();if((null===(t=o.GetIncludedAppIDs())||void 0===t?void 0:t.length)>0&&!r){const e=p.Z.Get().GetApp(o.GetIncludedAppIDs()[0]);e&&(r||(r=e.GetAssets().GetHeroCapsuleURL()),c||(c=e.GetAssets().GetLibraryCapsuleURL()))}if(r&&(!n||!c))return l.createElement("div",{className:(0,k.Z)(V().HeroCapsuleImageContainer,"HeroCapsuleImageContainer")},l.createElement("img",{src:r,className:V().CapsuleImage,alt:o.GetName()}));if(c)return l.createElement("div",{className:(0,k.Z)(V().LibraryFallbackAssetImageContainer,V().VerticalCapsule,n?V().ForceLibrarySizing:"")},l.createElement("div",{className:V().FallbackBackground,style:{backgroundImage:`url(${c})`}}),l.createElement("img",{src:c,className:V().CapsuleImage,alt:o.GetName()}));const d=Pt(o,!0),m=d.length-1,u=e=>{const t=d.indexOf(e);t>=m&&t<d.length-1&&s(t+1)};if(i<d.length){const e=d[i];return l.createElement("div",{className:V().LibraryFallbackAssetImageContainer},l.createElement("div",{className:V().FallbackBackground,style:{backgroundImage:`url(${e})`}}),l.createElement(At,{lazyLoad:!0,srcs:d,className:V().CapsuleImage,alt:o.GetName(),onImageError:u}))}return l.createElement("div",{className:V().HeroCapsuleImageContainer})}function Pt(e,t){var a;let n=[];if(e.GetAssets()&&(t?n.push(e.GetAssets().GetHeaderURL(),e.GetAssets().GetMainCapsuleURL()):n.push(e.GetAssets().GetMainCapsuleURL(),e.GetAssets().GetHeaderURL())),1==(null===(a=e.GetIncludedAppIDs())||void 0===a?void 0:a.length)){const a=p.Z.Get().GetApp(e.GetIncludedAppIDs()[0]);a&&a.GetAssets()?t?n.push(a.GetAssets().GetHeaderURL(),a.GetAssets().GetMainCapsuleURL()):n.push(a.GetAssets().GetMainCapsuleURL(),a.GetAssets().GetHeaderURL()):"dev"!=C.De.WEB_UNIVERSE&&"beta"!=C.De.WEB_UNIVERSE||console.log("PushDefaultCapsuleImages single app in package/bundle missing:",e.GetIncludedAppIDs()[0])}return n.filter((e=>!!e))}var Tt=a(32013);function Gt(e){const{bAllowOutsideOfDeck:t}=e;if(!(0,C.id)()&&!t)return null;let a="unknown";switch(e.eDeckCompatibilityCategory){case 3:a="verified";break;case 2:a="playable";break;case 1:a="unsupported"}return l.createElement("div",{className:(0,k.Z)(Tt.CompatIcon,"ds_steam_deck_compat",a,e.className)})}a(31542);var Nt=a(29512),Rt=a(68205),Mt=a(64672),Ot=(a(28841),a(61320)),xt=a.n(Ot),Ht=a(76939),Vt=a(26845),Ft=a(42204);class Ut{BHasHomeView(){return Boolean(this.m_HomeView)}GetHomeView(){var e;return null===(e=this.m_HomeView)||void 0===e?void 0:e.home}static Get(){return Ut.s_globalSingletonStore||(Ut.s_globalSingletonStore=new Ut,"dev"==C.De.WEB_UNIVERSE&&(window.g_HomeViewSetting=Ut.s_globalSingletonStore)),Ut.s_globalSingletonStore}constructor(){"dev"===C.De.WEB_UNIVERSE&&(window.g_HomeViewStore=this);const e=(0,C.kQ)("home_view_setting","application_config");this.ValidateHomeViewData(e)&&this.SetHomeViewSetting(e);const t=(0,C.kQ)("home_view_setting_override","application_config");this.ValidateHomeViewDataOverride(t)&&this.SetHomeViewSettingOverride(t)}ValidateHomeViewData(e){const t=e;return t&&"object"==typeof t.home&&"object"==typeof t.main_cluster}SetHomeViewSetting(e){this.m_HomeView=e}ValidateHomeViewDataOverride(e){const t=e;return t&&(!t.all||"object"==typeof t.all)&&(!t.maincap||"object"==typeof t.maincap)}SetHomeViewSettingOverride(e){this.m_HomeView.home=Object.assign(Object.assign(Object.assign({},this.m_HomeView.home),null==e?void 0:e.all),null==e?void 0:e.maincap)}}const Wt={include_tag_count:20,include_basic_info:!0,include_supported_languages:!0};function Xt(e){var t;const a=ne.Get(),n=(null==e?void 0:e.GetAllLanguagesWithSomeSupport())||[],o=null===(t=Ut.Get().GetHomeView())||void 0===t?void 0:t.localized;return!e||0==e.GetStoreItemType()&&(a.BIsGameIgnored(e.GetAppID())||a.BIsGameIgnored(e.GetParentAppID()))||a.BExcludesContentDescriptor(e.GetContentDescriptorIDs())||a.BExcludeTagIDs(e.GetTagIDs())||e.GetAllCreatorClanIDs().some((e=>a.BIsIgnoringCurator(e)))||o&&!(0==n.length||e.BHasSomeLanguageSupport(0)||a.BIsAnyLanguageEnabled(n))}var jt,Zt=a(14785),zt=a(99812),Yt=a(18955);a(79847);!function(e){e.Default="default",e.Upcoming="upcoming",e.Featured="featured",e.Press="press",e.Steam="steam",e.Halloween="halloween",e.Dev_All="all",e.Dev_AssociatedPress="associated_press",e.Dev_Sales="associated_sales"}(jt||(jt={}));new Map;class Qt{constructor(){this.m_mapBlockedAppIds=new Map,this.m_mapBlockedClanIds=new Map,(0,s.rC)(this)}static Get(){return Qt.s_globalSingletonStore||(Qt.s_globalSingletonStore=new Qt,Qt.s_globalSingletonStore.Init()),Qt.s_globalSingletonStore}GetMutedSourceCount(){return this.m_mapBlockedAppIds.size+this.m_mapBlockedClanIds.size}Init(){const e=(0,C.kQ)("mutedcomminfo","application_config");this.ValidateStoreDefault(e)&&("dev"!=C.De.WEB_UNIVERSE&&"beta"!=C.De.WEB_UNIVERSE||console.log("DEV_DEBUG: CMutedCommunicationStore loading bundles payload: "+JSON.stringify(e)),e.appids&&e.appids.forEach((e=>this.m_mapBlockedAppIds.set(e,!0))),e.clanids&&e.clanids.forEach((e=>this.m_mapBlockedClanIds.set(e,!0))))}ValidateStoreDefault(e){const t=e;return!(!t||"object"!=typeof t)&&(Array.isArray(t.appids)&&t.appids.length>0||Array.isArray(t.clanids)&&t.clanids.length>0)}BIsEventBlocked(e){return e.appid?this.m_mapBlockedAppIds.has(e.appid):!!e.clanInfo&&this.m_mapBlockedClanIds.has(e.clanInfo.clanid)}BIsMutedAppID(e){return this.m_mapBlockedAppIds.has(e)}BIsMutedClanID(e){return this.m_mapBlockedClanIds.has(e)}UpdateCommunitionSetting(e,t,a){return(0,n.mG)(this,void 0,void 0,(function*(){const n=C.De.STORE_BASE_URL+"account/optoutappcommunication/",o=new FormData;if(o.append("sessionid",C.De.SESSIONID),o.append("allowCommunication",e?"1":"0"),t){if(!e&&this.m_mapBlockedAppIds.has(t)||e&&!this.m_mapBlockedAppIds.has(t))return!0;e?this.m_mapBlockedAppIds.delete(t):this.m_mapBlockedAppIds.set(t,!0),o.append("appId",t.toString())}else{if(!a)return(0,wt.X)(!1,"BlockEventsFromCalenderEvent: Invalid AppID and ClanID"),!1;if(!e&&this.m_mapBlockedClanIds.has(a)||e&&!this.m_mapBlockedClanIds.has(a))return!0;e?this.m_mapBlockedClanIds.delete(a):this.m_mapBlockedClanIds.set(a,!0),o.append("clanId",a.toString())}try{return 1==(yield i().post(n,o)).data.success}catch(e){return console.error("Blocking app id hit error "+(0,Z.l)(e).strErrorMsg),!1}}))}}(0,n.gn)([s.LO],Qt.prototype,"m_mapBlockedAppIds",void 0),(0,n.gn)([s.LO],Qt.prototype,"m_mapBlockedClanIds",void 0);function qt(e,t,a,n){return{strId:"section-"+t,strSectionLabel:t,rtSectionStart:a,rtSectionEnd:n,bIsFutureSection:a>=e,nRenderedHeight:2500,nTopOffset:0}}class Jt{constructor(e,t){this.m_nForwardStuckCount=0,this.m_nBackwardStuckCount=0,this.m_mapCalendarAppsByID=new Map,this.m_mapCalendarClansByID=new Map,this.m_mapCalendarEventsByGid=new Map,this.m_rgSortedCalendarEvents=new Array,this.m_currentView=s.LO.box(null),this.m_bFinishedSearchingForward=!1,this.m_bFinishedSearchingBackward=!1,this.m_rgCalendarSections=[],this.m_rgFutureSections=[],this.m_collectionMetaData=void 0,(0,s.rC)(this),this.m_key=e,this.m_visibilityStore=new Yt.RC(t),ne.Get().HintLoad()}GetNumEventsLoaded(){return this.m_mapCalendarEventsByGid.size}BIsGlobalCalendar(){return!(this.m_key.appids||this.m_key.clanaccountids||this.m_key.collectionid||this.m_key.saleid)}BIsShowingFeaturedFeed(){return Boolean(this.GetCollectionID()===jt.Featured||this.BIsGlobalCalendar()&&!C.L7.accountid)}BIsSingleSourceCalendar(){return Boolean(this.BIsSingleGroupCalendar()?!this.BIsSingleAppCalendar():this.BIsSingleAppCalendar())}GetKey(){return this.m_key}BEventMatchCalendarSingleSource(e){return this.BIsSingleAppCalendar()&&this.m_key.appids[0]==e.appid||this.BIsSingleGroupCalendar()&&this.m_key.clanaccountids[0]==e.clanid}BIsSingleSourceMuted(){return!!this.BIsSingleSourceCalendar()&&(this.BIsSingleAppCalendar()?Qt.Get().BIsMutedAppID(this.GetSingleAppID()):Qt.Get().BIsMutedClanID(this.GetSingleGroupID()))}BIsSingleGroupCalendar(){return Boolean(this.m_key.clanaccountids&&1==this.m_key.clanaccountids.length)}GetSingleGroupID(){return this.m_key.clanaccountids[0]}BIsSingleAppCalendar(){return Boolean(this.m_key.appids&&1==this.m_key.appids.length)}GetSingleAppID(){return this.m_key.appids[0]}BIsCollectionCalendar(){return!!this.m_key.collectionid}GetCollectionID(){return this.m_key.collectionid}BIsSaleCalendar(){return!!this.m_key.saleid}GetSaleID(){return this.m_key.saleid}BIsCalendarEndTimeSet(){return!!this.m_key.rtCalendarEnd}GetCalendarEndTime(){return this.m_key.rtCalendarEnd}SetCollectionMetaData(e){this.m_collectionMetaData=e}GetCollectionMetaData(){return this.m_collectionMetaData}BHasCollectionMetaData(){return Boolean(this.m_collectionMetaData)}ValidateCollectionMetadata(e){const t=e;return t&&"object"==typeof t&&t.clanid&&"number"==typeof t.clanid&&t.clan_event_gid&&"string"==typeof t.clan_event_gid}SetFilteredView(e,t){const a=this.m_currentView.get();a&&a.dispose();const n=this.BIsSingleSourceMuted(),o=new Kt((()=>this.m_rgSortedCalendarEvents),this.LoadAdditionalEvents,this.BHitEventHorizon,e,t,n);this.m_currentView.set(o)}BIsFilteredViewEmpty(){var e;return!!(null===(e=this.m_currentView.get())||void 0===e?void 0:e.BIsViewEmpty())}GetCalendarItemsInTimeRange(e,t){const a=this.m_currentView.get();return a?a.GetCalendarItemsInTimeRange(e,t):(console.error("calendar view not yet initialized"),{rgCalendarItems:[],bIsComplete:!1})}GetActiveEventsAt(e){const t=this.m_currentView.get();return t?t.GetActiveEventsAt(e):(console.error("calendar view not yet initialized"),[])}GetCurrentlyLoadedEventCount(e,t){var a;return null===(a=this.m_currentView.get())||void 0===a?void 0:a.GetCurrentlyLoadedEventCount(e,t)}GetCurrentlyLoadedItemsForStats(){var e;return(null===(e=this.m_currentView.get())||void 0===e?void 0:e.GetCurrentlyLoadedEvents())||[]}GetCalendarSections(e){return e?this.m_rgFutureSections:this.m_rgCalendarSections}GetStoreInitializationTimestamp(){return this.m_dtInitTime||(this.m_dtInitTime=X.JW.GetTimeNowWithOverrideAsDate()),this.m_dtInitTime}InitCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[],a=e.getTime()/1e3;t.push(qt(a,(0,L.Xx)("#EventCalendar_FutureEventsHeader"),a));const n=new Date(e);n.setHours(0,0,0,1);let o=n.getTime()/1e3;t.push(qt(a,(0,L.Xx)("#Time_Today"),o,a)),n.setDate(n.getDate()-1);let i=o;o=n.getTime()/1e3,t.push(qt(a,(0,L.Xx)("#Time_Yesterday"),o,i));const s=this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1],r=s?s.start_time:a;let l=r>o;for(let e=0;e<5&&!l;e++)n.setDate(n.getDate()-1),i=o,o=n.getTime()/1e3,t.push(qt(a,(0,L.Mh)(n),o,i)),l=r>o;const c=new Date(n);let d=o;for(;c.getMonth()==e.getMonth()&&1!=c.getDate()&&!l;){c.setDate(c.getDate()-7);const e=c.getTime()/1e3;t.push(qt(a,(0,L.jr)(d-1),e,d)),l=r>e,d=e}const m=new Date(e);m.setHours(0,0,0,1),m.setDate(1);let p=d;for(let n=1;!l;n++){const o=new Date(m);o.setMonth(e.getMonth()-n,1);const i=o.getTime()/1e3;t.push(qt(a,(0,L.jr)(i),i,p)),l=r>i,p=i}this.m_rgCalendarSections.length>t.length?this.m_rgCalendarSections.splice(t.length,this.m_rgCalendarSections.length):t.splice(this.m_rgCalendarSections.length,t.length).forEach((e=>this.m_rgCalendarSections.push(e)))}InitFutureCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[];let a;this.m_key.rtCalendarEnd&&(a=this.m_key.rtCalendarEnd);const n=this.m_rgSortedCalendarEvents.length>0&&this.m_rgSortedCalendarEvents[0];n&&(a=n.start_time),a||(a=e.getTime()/1e3);const o=e.getTime()/1e3,i=new Date(e);i.setHours(24,0,0,0);let s=i.getTime()/1e3;t.push(qt(o,(0,L.Xx)(this.m_key.bSectionByDay?"#Time_UpNext":"#Time_Today"),o,s));let r=a<=s,l=s;i.setDate(i.getDate()+1),s=i.getTime()/1e3,r||t.push(qt(o,(0,L.Xx)("#Time_Tomorrow"),l,s)),r=a<=s;const c=6-xt()(e).weekday();for(let e=2;e<=c&&!r;e++){l=s;const e=(0,L.Mh)(i);i.setDate(i.getDate()+1),s=i.getTime()/1e3,t.push(qt(o,e,l,s)),r=a<=s}if(this.m_key.bSectionByDay)for(;!r;){l=s;const e=(0,L.XG)(i);i.setDate(i.getDate()+1),s=i.getTime()/1e3,t.push(qt(o,e,l,s)),r=a<=s}else{const n=new Date(i);let l=s;const c=xt()(e).daysInMonth();if(n.getMonth()==e.getMonth()&&n.getDate()!=c&&!r){n.setDate(n.getDate()+7);const e=n.getTime()/1e3;t.push(qt(o,(0,L.Xx)("#EventCalendar_NextWeek"),l,e)),r=a<=e,l=e}const d=new Date(e);let m;if(d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0,0,0,0),n<d&&!r){const e=d.getTime()/1e3;t.push(qt(o,(0,L.Xx)("#EventCalendar_LaterThisMonth"),l,e)),r=a<=e,m=e}else m=l;for(let n=2;!r;n++){const i=new Date(d);i.setMonth(e.getMonth()+n);const s=i.getTime()/1e3;t.push(qt(o,(0,L.jr)(m),m,s)),r=a<=s,m=s}}this.m_rgFutureSections.length>t.length?this.m_rgFutureSections.splice(t.length,this.m_rgFutureSections.length):t.splice(this.m_rgFutureSections.length,t.length).forEach((e=>this.m_rgFutureSections.push(e)))}RegisterCalendarEventsAndModels(e){return(0,n.mG)(this,void 0,void 0,(function*(){yield ne.Get().HintLoad(),(0,s.z)((()=>{this.RegisterCalendarApps(e.apps),this.RegisterCalendarClans(e.clans),this.RegisterCalendarEvents(e.documents),Ft.j1.RegisterClanEvents(e.events),this.RegisterReadEvents(e.events_read),this.RegisterEventVotes(e.event_votes),e.forwardComplete&&(this.m_bFinishedSearchingForward=!0),e.backwardComplete&&(this.m_bFinishedSearchingBackward=!0),this.InitCalendarSections(),this.InitFutureCalendarSections(),this.SetCollectionMetaData(this.ValidateCollectionMetadata(e.metadatainfo)?e.metadatainfo:null)}))}))}RegisterCalendarApps(e){if(e)for(const t of e){if(this.m_mapCalendarAppsByID.has(t.appid))continue;const e=new Ht.LH;e.appid=t.appid,e.source=t.source,e.playtime=t.playtime,e.last_played=t.last_played,e.wishlist_added=t.wishlist_added,this.m_mapCalendarAppsByID.set(t.appid,e),t.hidden&&this.m_visibilityStore.SetAppVisibility(t.appid,!1)}}RegisterCalendarClans(e){if(e)for(const t of e)if(!this.m_mapCalendarClansByID.has(t.clanid)){const e=new Ht.Gk;e.clanid=t.clanid,e.source=t.source,this.m_mapCalendarClansByID.set(t.clanid,e),t.hidden&&this.m_visibilityStore.SetClanVisibility(t.clanid,!1)}}RegisterReadEvents(e){if(!e)return;const t=Vt.cb.Get();for(const a of e)t.SetEventAsRead(a)}RegisterEventVotes(e){if(!e)return;const t=Vt.cb.Get();for(const a of e){const e=void 0===a.vote?void 0:Boolean(a.vote);t.SetVote(a.id,e)}}RegisterCalendarEvents(e){if(e){let t=!1;for(const a of e)this.BInternalInsertCalendarEventItem(a)&&(t=!0);t&&this.RebuildSortedCalendarEventList()}}BHitEventHorizon(e){return"forward"==e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward}GetTimeEdgeForDirection(e,t=void 0){return"forward"===e?this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[0].start_time:t:this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1].start_time:t}UpdateStuckCounters(e,t){const a="forward"===e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward,n=this.GetTimeEdgeForDirection(e,void 0);return a||n!==t?("forward"==e?this.m_nForwardStuckCount=0:this.m_nBackwardStuckCount=0,!1):("forward"==e?this.m_nForwardStuckCount++:this.m_nBackwardStuckCount++,!0)}GetRequestInFlight(e){return"forward"===e?this.m_forwardRequestInFlight:this.m_backwardRequestInFlight}SetRequestInFlight(e,t){(0,wt.X)(!t||!this.GetRequestInFlight(e),"Already have a request in flight for",e),"forward"===e?this.m_forwardRequestInFlight=t:this.m_backwardRequestInFlight=t}LoadAdditionalEvents(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){if(this.BHitEventHorizon(e))return 1;let a=this.GetRequestInFlight(e);if(a)return a;const o=C.De.STORE_BASE_URL+"events/ajaxgetusereventcalendarrange/",s="forward"===e?this.m_nForwardStuckCount:this.m_nBackwardStuckCount,r=s<3?s:0,l=s>=3?1:0,c=("dev"===C.De.WEB_UNIVERSE?50:250)+50*r,d=this.GetTimeEdgeForDirection(e,X.JW.GetTimeNowWithOverride()),m={minTime:0,maxTime:0,ascending:!0,maxResults:c,populateEvents:15,appTypes:this.m_visibilityStore.GetGameSources().join(","),eventTypes:Array.from(this.m_visibilityStore.enabledEventTypeSet).join(","),appIdFilter:Boolean(this.m_key.appids&&this.m_key.appids.length>0)?this.m_key.appids.sort().join(","):void 0,clanIdFilter:Boolean(this.m_key.clanaccountids&&this.m_key.clanaccountids.length>0)?this.m_key.clanaccountids.sort().join(","):void 0,collectionID:this.m_key.collectionid,saleID:this.m_key.saleid,hubtype:this.m_key.hubtype,category_or_language:this.m_key.category_or_language,tag_name:this.m_key.tag_name,tags:this.m_key.rgTags?this.m_key.rgTags.slice().sort().join(","):void 0};"forward"===e?(m.minTime=Math.floor(d+l),m.ascending=!0):(m.maxTime=Math.floor(d-l),m.ascending=!1);return a=i().get(o,{params:m,cancelToken:t?t.token:void 0,withCredentials:!0}).then((a=>(0,n.mG)(this,void 0,void 0,(function*(){if(this.SetRequestInFlight(e,null),1==a.data.success){if(yield this.RegisterCalendarEventsAndModels(a.data),this.UpdateStuckCounters(e,d))return this.LoadAdditionalEvents(e,t)}else console.error("LoadAdditionalEvents was not successful: Msg"+a.data.msg);return a.data.success})))).catch((t=>{this.SetRequestInFlight(e,null);let a=(0,Z.l)(t);return console.error("LoadAdditionalEvents hit error "+a.strErrorMsg,a),"forward"==e?this.m_bFinishedSearchingForward=!0:this.m_bFinishedSearchingBackward=!0,2})),this.SetRequestInFlight(e,a),a}))}BInternalInsertCalendarEventItem(e){if(!e.unique_id)return(0,wt.X)(!1,"Attmpted to register a calendar event item with an invalid unique id!"),!1;if(this.m_mapCalendarEventsByGid.has(e.unique_id))return!1;const t=this.m_mapCalendarAppsByID.get(e.appid),a=this.m_mapCalendarClansByID.get(e.clanid);if(!t&&!a)return console.log("No AppInfo or ClanInfo For: ",e),!1;const n=new Ht.xM;return n.clanid=e.clanid,n.unique_id=e.unique_id,n.event_type=e.event_type,n.appid=e.appid,n.start_time=e.start_time,n.score=e.score,n.appInfo=t,n.clanInfo=a,this.m_rgSortedCalendarEvents.push(n),this.m_mapCalendarEventsByGid.set(n.unique_id,n),!0}GetCalendarAppInfoForAppID(e){return this.m_mapCalendarAppsByID.get(e)}RebuildSortedCalendarEventList(){const e=this.m_rgSortedCalendarEvents.slice();this.m_rgSortedCalendarEvents=e.sort(((e,t)=>t.start_time-e.start_time))}UpdateEventBlockFromCalendarEvent(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){let a=e.appInfo?e.appid:void 0,n=e.clanInfo?e.clanInfo.clanid:void 0;null!=a||null!=n?(yield Qt.Get().UpdateCommunitionSetting(t,a,n),zt.Y.RecordAppInteractionEvent(a,zt.g.k_eMuted)):(0,wt.X)(!1,"Both clan id and account id are missing, cannot change communication status")}))}GetAllClans(){return Array.from(this.m_mapCalendarClansByID.keys())}GetAllApps(){return Array.from(this.m_mapCalendarAppsByID.keys())}}(0,n.gn)([s.LO],Jt.prototype,"m_mapCalendarAppsByID",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_mapCalendarClansByID",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_mapCalendarEventsByGid",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_rgSortedCalendarEvents",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_bFinishedSearchingForward",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_bFinishedSearchingBackward",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_rgCalendarSections",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_rgFutureSections",void 0),(0,n.gn)([s.LO],Jt.prototype,"m_collectionMetaData",void 0),(0,n.gn)([s.aD],Jt.prototype,"InitCalendarSections",null),(0,n.gn)([s.aD],Jt.prototype,"InitFutureCalendarSections",null),(0,n.gn)([s.aD],Jt.prototype,"RegisterCalendarEventsAndModels",null),(0,n.gn)([s.aD],Jt.prototype,"RegisterCalendarApps",null),(0,n.gn)([s.aD],Jt.prototype,"RegisterCalendarClans",null),(0,n.gn)([s.aD],Jt.prototype,"RegisterReadEvents",null),(0,n.gn)([s.aD],Jt.prototype,"RegisterEventVotes",null),(0,n.gn)([s.aD],Jt.prototype,"RegisterCalendarEvents",null),(0,n.gn)([Zt.a],Jt.prototype,"BHitEventHorizon",null),(0,n.gn)([s.aD.bound],Jt.prototype,"LoadAdditionalEvents",null),(0,n.gn)([s.aD],Jt.prototype,"UpdateEventBlockFromCalendarEvent",null);class Kt{constructor(e,t,a,o,i,r){this.m_rgLoadedEventsBox=s.LO.box([]),this.m_lastLoadLatch=null,(0,s.rC)(this),this.m_fnGetUnfilteredEvents=e,this.m_fnLoadAdditionalEvents=t,this.m_fnBHitEventHorizon=a,this.m_fnBIsEventInView=o,this.m_bSkipStorePreferenceCheck=i,this.m_bAllowMutedAndIgnoredSources=r,this.m_rgAutorunDisposer=(0,s.EH)((()=>(0,n.mG)(this,void 0,void 0,(function*(){const e=this.viewFilteredEvents.slice();if(!this.m_bSkipStorePreferenceCheck){const t=Array.from(new Set(e.map((e=>e.appid)).filter(Boolean))).sort();if(this.m_lastLoadLatch=e,yield p.Z.Get().QueueMultipleAppRequests(t,Object.assign(Object.assign({},Wt),{include_assets:!0})),this.m_lastLoadLatch!=e)return;this.m_lastLoadLatch=null}this.m_rgLoadedEventsBox.set(e)}))))}dispose(){this.m_rgAutorunDisposer()}get viewFilteredEvents(){return this.m_fnGetUnfilteredEvents().filter((e=>this.m_fnBIsEventInView(e)))}get filteredAndCheckedEvents(){return this.m_rgLoadedEventsBox.get().filter((e=>{if(e.appid){if(!this.m_bAllowMutedAndIgnoredSources&&(Qt.Get().BIsMutedAppID(e.appid)||ne.Get().BIsGameIgnored(e.appid)))return!1;if(!this.m_bSkipStorePreferenceCheck&&Xt(p.Z.Get().GetApp(e.appid)))return!1}else if(!this.m_bAllowMutedAndIgnoredSources&&(Qt.Get().BIsMutedClanID(e.clanid)||ne.Get().BIsIgnoringCurator(W.K.InitFromClanID(e.clanid))))return!1;return!0}))}BIsCompleteThroughTime(e,t){if(this.m_fnBHitEventHorizon(e))return!0;const a=this.m_fnGetUnfilteredEvents();return"forward"===e?t&&a.length>0&&a[0].start_time>t:a.length>0&&a[a.length-1].start_time<t}EnsureRangeIsLoaded(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){for(let e=0;e<100&&!this.BIsCompleteThroughTime("forward",t);e++)yield this.m_fnLoadAdditionalEvents("forward");for(let t=0;t<100&&!this.BIsCompleteThroughTime("backward",e);t++)yield this.m_fnLoadAdditionalEvents("backward")}))}GetCalendarItemsInTimeRange(e,t){this.EnsureRangeIsLoaded(e,t);const a=this.filteredAndCheckedEvents.filter((a=>a.start_time>=e&&(!t||a.start_time<t))),n=this.BIsCompleteThroughTime("forward",t),o=this.BIsCompleteThroughTime("backward",e);return{rgCalendarItems:a,bIsComplete:n&&o}}GetCurrentlyLoadedEvents(){return this.filteredAndCheckedEvents}GetCurrentlyLoadedEventCount(e,t){let a=0;this.filteredAndCheckedEvents.forEach((n=>{n.start_time>=e&&(!t||n.start_time<t)&&a++}));const n=this.BIsCompleteThroughTime("forward",t),o=this.BIsCompleteThroughTime("backward",e);return{nCount:a,bIsComplete:n&&o}}BIsViewEmpty(){return this.filteredAndCheckedEvents.length>0}GetActiveEventsAt(e){return this.filteredAndCheckedEvents.map((e=>Ft.j1.GetClanEventModel(e.unique_id))).filter((t=>{if(t){const a=t.endTime||t.startTime+3600;return e>=t.startTime&&e<a}return!1}))}}(0,n.gn)([s.Fl.struct],Kt.prototype,"viewFilteredEvents",null),(0,n.gn)([s.Fl.struct],Kt.prototype,"filteredAndCheckedEvents",null);const $t=s.LO.box(null),ea=new Map;function ta(){return null==$t.get()&&function(e,t){let a="";e.appids&&e.appids.length>0&&(a+="appids:"+e.appids.sort().join(",")),e.clanaccountids&&e.clanaccountids.length>0&&(a+="clanids:"+e.clanaccountids.sort().join(",")),e.collectionid&&(a+="collection:"+e.collectionid),e.saleid&&(a+="sale:"+e.saleid),e.bSectionByDay&&(a+="_sectionbyday"),e.rtCalendarEnd&&(a+="_end:"+e.rtCalendarEnd),e.rgTags&&e.rgTags.length>0&&(a+="_tags:"+e.rgTags.slice().sort().join(",")),e.hubtype&&(a+="_hubtype:"+e.hubtype+"_"+e.category_or_language+"_"+e.tag_name),$t.get()!==a&&($t.set(a),ea.has(a)||ea.set(a,new Jt(e,t)))}({}),ea.get($t.get())}window.g_EventCalendarMap=ea;var aa=a(23574);const na=e=>{let t=C.De.HELP_BASE_URL+"wizard/HelpWithLimitedAccount";return l.createElement(be.uH,{strTitle:(0,L.Xx)("#Informational_Message"),onCancel:e.closeModal,onOK:e.closeModal,bAlertDialog:!0},l.createElement("div",null,(0,L.kQ)(e.strTokenOverride||"#User_LimitedAccount",l.createElement("a",{href:t,target:C.De.IN_CLIENT?void 0:"_blank"},(0,L.Xx)("#User_LimitedAccount_UrlInfo")))))},oa=(0,r.Pi)((e=>{const{closeModal:t}=e;return l.createElement(be.uH,{strTitle:(0,L.Xx)("#EventCalendar_GameSource_UnhideCuratorsDialog_Title"),strDescription:(0,L.Xx)("#EventCalendar_GameSource_UnhideCuratorsDialog_Description"),strOKButtonText:(0,L.Xx)("#EventCalendar_GameSource_UnhideCuratorsDialog_OKButton"),strCancelButtonText:(0,L.Xx)("#EventCalendar_GameSource_UnhideCuratorsDialog_CancelButton"),onOK:()=>{ta().m_visibilityStore.SetGameSourceAllowed(Yt.Gf.k_ECurator,!0),t()},onCancel:()=>{ta().m_visibilityStore.SetCuratorUnhideOnFollowDialogDismissed(!0),t()}})}));function ia(e){e||null!==$t&&(ta().m_visibilityStore.BCuratorUnhideOnFollowDialogDismissed()||ta().m_visibilityStore.BIsGameSourceAllowed(Yt.Gf.k_ECurator)||(0,Pe.AM)(l.createElement(oa,null),window))}function sa(){return!!Vt.cb.Get().BIsUserLoggedIn()||((0,Pe.AM)(l.createElement(be.uH,{strTitle:(0,L.Xx)("#EventDisplay_Share_NotLoggedIn"),strDescription:(0,L.Xx)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:(0,L.Xx)("#MobileLogin_SignIn"),onOK:()=>(0,ct.Xt)()}),window),!1)}function ra(e){const t=W.K.InitFromClanID(e),a=Vt.cb.Get().GetPartnerEventPermissions(t);return!a||!a.limited_user||((0,Pe.AM)(l.createElement(na,null),window),!1)}const la=e=>{const{className:t,bIgnored:a,bApplyingFollowing:n,bFollowing:o,onFollowClick:i}=e;return X.JW.bIsFollowingEnabled?l.createElement(E.Ks,{className:(0,k.Z)(rt.Button,aa.FollowButton,t,o?"Followed":""),onClick:i},n&&l.createElement(Ae.V,{size:"small"}),!n&&(o||a)&&l.createElement("img",{style:{height:"16px"},src:C.De.STORE_CDN_URL+"public/images/v6/ico/ico_selected.png"}),l.createElement("div",{className:aa.FollowBtnText},!n&&(o?(0,L.Xx)("#Button_Followed"):a?(0,L.Xx)("#Button_Ignored"):(0,L.Xx)("#Button_Follow")))):null},ca=e=>{const[t,a]=l.useState(!1),{clanAccountID:n,className:o}=e,i=W.K.InitFromClanID(n),s=ne.Get().BIsFollowingCurator(i),r=!s&&ne.Get().BIsIgnoringCurator(i);return l.createElement(la,{className:o,bIgnored:r,bFollowing:s,bApplyingFollowing:t,onFollowClick:()=>{const{clanAccountID:t}=e;sa()&&ra(t)&&(a(!0),(()=>{const{clanAccountID:t,creatorID:n}=e,o=W.K.InitFromClanID(t),i=ne.Get().BIsFollowingCurator(o),s=!i&&ne.Get().BIsIgnoringCurator(o);ne.Get().UpdateFollowOrIgnoreCurator(o,!s,!(s||i)).then((e=>{if(n){let e=Mt.bq.GetCreatorHomeByID(n);s||e.AdjustFollower(i?-1:1)}a(!1)})).then((()=>{ia(i)})).catch((e=>{a(!1);let t=(0,Z.l)(e);console.error("CuratorFollowButton hit error: "+t.strErrorMsg,t)}))})())}})};function da(e){const{type:t,id:a,hoverClassName:n,fnGetIDOverride:o,fnHoverState:i,children:s}=e,r=l.useRef(null),c=l.useCallback((e=>{"clan"!=t&&(i&&i(!0),window.GameHover&&window.GameHover(o?o():r.current,e,"global_hover",{type:t,id:a,v6:1}))}),[t,i,o,a]),d=l.useCallback((e=>{"clan"!=t&&(i&&e.relatedTarget&&i(!1),window.HideGameHover&&window.HideGameHover(o?o():r.current,e,"global_hover"))}),[t,i,o]);return"dev"==C.De.WEB_UNIVERSE&&(0,wt.X)("store"==(0,C.Zv)(),"StoreGameHoverAnchorSource only works on Store web properties"),l.createElement("div",{ref:r,className:n,onMouseEnter:c,onMouseLeave:d,onFocus:c,onBlur:d},s)}function ma(e){const{id:t,type:a,strExtraParams:n}=e,o=(0,de.bJ)(),i="clan"==a?(0,d.Hf)(`${C.De.STORE_BASE_URL}curator/${t}${n?`?${n}`:""}`,o):(0,d.Hf)(`${C.De.STORE_BASE_URL}${a}/${t}${n?`?${n}`:""}`,o);return l.createElement(da,Object.assign({},e),l.createElement(E.IS,{className:e.className,href:i,target:C.De.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"},e.children))}const pa="DEBUG_UseNewGameHover";window.SetHoverPresentation=function(e){window.sessionStorage.setItem(pa,e)};const ua=2e3;function ha(e){const{info:t}=e,a=(0,l.useRef)({include_assets:!0,include_trailers:!0,include_screenshots:!0}),[n,o]=(0,M.jk)(t.id,(0,R.TM)(t.type),a.current),i=(0,l.useRef)(n),[r,c]=(0,l.useState)([]),d=(0,l.useRef)(0),m=(0,u.NW)(),[g]=l.useState(new h.Ar),_=(0,l.useCallback)((()=>{if((null==r?void 0:r.length)>0){const e=r[d.current].nDurationMs;g.Schedule(e,(()=>{const e=d.current;d.current=(d.current+1)%r.length,e!=d.current&&(_(),m())}))}}),[r,g,m]),v=(0,l.useCallback)((e=>{var a;const n=[];if(1==e.length){const t=p.Z.Get().GetApp(e[0]);t.GetMicroTrailer()&&n.push({rctImage:l.createElement(F,{appInfo:{id:t.GetID(),type:"game"}}),nDurationMs:5500}),t.GetOnlyAllAgesSafeScreenshots().slice(0,10).forEach(((e,t)=>{n.push({rctImage:l.createElement("img",{key:e,className:x().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:ua})}))}if(0==n.length)for(const t of e){const e=p.Z.Get().GetApp(t),o=null===(a=null==e?void 0:e.GetAssets())||void 0===a?void 0:a.GetMainCapsuleURL();o&&n.push({rctImage:l.createElement("img",{key:"fallback",className:x().FullDivImage,loading:"lazy",src:o,alt:e.GetName()}),nDurationMs:ua})}n.length>0?(c(n),d.current=0,_()):"dev"!=C.De.WEB_UNIVERSE&&"beta"!=C.De.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: GameHoverImages for id/type no images: (might be not age safe screenshots)",(0,s.ZN)(e),(0,s.ZN)(t))}),[_]);return(0,l.useEffect)((()=>(!n||r&&0!=r.length&&i.current===n?2==o&&0==r.length?c([{rctImage:l.createElement("img",{key:"default",className:x().FullDivImage,loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXsAAADXCAIAAAB09WZ9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA26SURBVHhe7d1JjyPHEYbhIfkrvAiWLI32BfIGnwwfbNgHAwJsQBfDJ5/8/6/TRUcVE8LMsPL7OBWdUezp91GpWVTkxmJlzHQ7mj788J//vUg4HA7tbI2OHo/HdrZG9w22wWZ63HN77DLXpD1uMe4l7+t8thdVUZ3dyKmJ3cr1+6X7ZqJhmqZ29u704NMU8W6DCD08PLQna9SeB4DHRcYBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pBxANTZM+PYKia8hSt2jSvytJw++/Z37fTdJUtgM92HVt+am9hNPXBlI1/1UHFJxRGp9NJsA99TDr594kXmzwDd1448dOqI948l3BEhXe58+vSb37bTNXZj6wbjosE2GMQvrD2u236b2Kn790Gz0xUL4h4daq95L5K36I4XTcxsV6Ub8HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOqdPv7E1x90qpsPB1Dj5YrlhNWnjRg5DB9dSE++37OdJ3CdLlZ2qlNPRJDd1O9lGD356+bWqOU7f4ar7jvs2467TzdO8pEN3V8aO215LLiy6ixGSg09n9VsOfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQ5/Ty69+00yumfm8+ZIOR5X+ZwZNTa0MHxzaZkjbR177Xdt5BC7Oi76Cp53GnCHcbqL/j6DVFbG4wP/SPPj24ZdaWiCYNHRwb2JtBa+3W6KhlB9dau46I6+Ptrfr6IempL2ubk07nGPhdVbyudgbsJG7+doYq+przcxwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgDhkHQB3zqaOmeFc3mCPd6A2luapFdDdrS0SThg6Oa3dbdGMXNmjhMWz6mqjuevBpUp86evrkq+5vOXjLvm/nV/S+G3Stb5HMCGSrDYYmhXGDJ0fW3SMoGrjtYxbmptbdI95tEBEZvWhPrw38rsq8qP2o67G3e14bHtfdvtduYWbZujc/xwFQh4wDoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+PuP/22na3Th42HRnlxZQqq/6HsLu7Z2dmVedGLqTN+h7nZhQReVPdlaOEPX++fGNh/qO6UuuIpHTIQj9OrVq/ZkzcC/44hl7etuF5b0vr6uJ2rs2zF07JGD810VgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHf85x7KQNWKZ4t35y+V8A11he3AjqwZuUfdc3XufqE6stOPVjqmnSc1++vhLlXHG7awY2e3bgbtaTz0nI1LKoxq6B3b8A0C9rogMe9HzwPKS6guejIpwBKcH9bsdfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQZ7eMcz4vpUTz1/VjIFcwFvO3M2Any+7omhvIY5x58Nc36luHc/r4y+/b6bs7LNqTd5csFdXd52jvsFProO7rXG6XXSRXjmLiVrF3UeY2M30jLBemP0+e76oA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq7JlxdKGRjiZlhs4sbOiLQrWRb+Zet1n2FnW9T7/+4rulVe9IMWXB8W+8vM6RKZCNnrqzKTl+T2tzh76uZ5pM5YuO+7idrZkv2Gs3/PUhOievtu5+mXz5unLYyak5xnDmHnyWYnu2s577vWhqYclVk3EA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXuOONQ4oH7xg26wemjz7+Lrb163CJa9Q5T2Btc5W876XprwtcOM7AZmZpjXOjKxmWbzC1Wj7nBFC3e/K+vH/OX5WFNN3AbvfJpmuaVd9kX3o3GuG3o5SVcH+rvOMvE7XyVDJpFj6WX7Ra258rx3rC3mdlAu9H3f3L78HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOnPNcTt9bKbC1Rf+tpOO7QW0rmfEtw69SHYf524XNpQvxOtb+nYbRNQUy7XHIYbW6Ymo7Wg+5zh6bz60mPut9m8cOrockom/Ps5bxyQvWTRZxMP6gSck+X493TshVqcOufrlRV91eeP46Rq8fSxxhe+qANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pia46VItVuoepjjqozVRGUF7Dy4bmAqaHVUrW0Z2XTvMYtqg+/jWdYcm4K0s4lrqc4ZlyK9rjms4+3k0cW8uub49OFn37bTdeYeTd3CsvMN215F9e7S42aMey+DzuCzxAuz+UjfxBk7jmzj7XFN9B23cr32iOipM1FdlL/07TaIoPkth/YIAOORcQDUIeMAqEPGAVCHjAOgDhkHQB0yDoA6ZBwAdU4f+prjniXYb6HryQ6XgrN+o6WBGkNXrJloe1y3zKybKK7r9pF11/lypcZWnZcPlLxTsmAtbeTgYuUR0nV62nna2PeGbqa6cJqiQbfF6Vem5lg4L7do9zZ1Sz+nUkYqJ5jBU0Pv6ezWPe51mXc7E7bJTm+A9rjJvHNSAyixM9vZmnnX9l/YHBBRl61yUdUgXtTDw0N7sobvqoA+tfV2JZPCPSPjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq3G/G0WVIz5O+JM/zej3R2+Tp3t7JlR/+9I9/t9Nrrq53qdzttojoUfY/HlW+Ox5V31y9sn5ZpnvGPPKosWeZladXpm5ElysHbj+/QbZuoejmynPNyKKBHVmPrUe+aM+vLL+lYLq3J1fOS82xaCD/jhO9uh1n/WEXJpwiXlLIRIfacerB7vR1+ev9/G4G/8dSbmH6dfFzHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnD15+PX9uaefQpUKmkEgXGs0FzaqBq1LKOveP+aVnJAp/ndFXZTNzxfQVdZd7+9tx0zu59e2eZEdb4Kcb2KgeXofnlXcaxH/VY5+Xzu3JlQiKwcOccdrpmrjBVfF75AydNfrRiGzuO1xyYcNWbqfOzWw7i/vQ2N7zBmp/WLKz2dauge2uie6ZgaNrjCwGmKNi6uWfnohM09SerOG7KgB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnDz75qp2u0Z99qyvGXLmaibtyNBfv0xNHVA89F1D1j9Hk0tvjTtSrz5XChWGDy86XSrjecWmwPHapsJ26H78E1dFv0Lq7lQuq71JzLBpExlE1x/NNLDbgvDvlFuhHl4FVXzXvwnwSeD8YFyM5tbAM3s47tg9uLrc1bGHL6+6LYOL+zjHz6vBcsJ+gOyejOmX4qGjg+oqi4whN00N7sobvqgC8QeWbNDIOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6DObhnnvJQStSdrZPDZGnpRRg3OO7nCXhTdILE99L4b7fDHv/3YTtccj6rMdY7JIlgdjcHb2ZrDQWXD6DlyahW1xnW3A7upUwtTm8Ddw5l4ZoPY3eUayIXZtcnwNMnB55V1G8xRObUO648itn1Fgwi9evWqPVnDd1UA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1UhnHFCE5rndqcC238N3suuynecmGSlwS+1aK8r+k5LbV7OCnX378ZTvtmD8QtW9u0HcZYRvd+xKMr73D1N7K2tzMwvetV96NvGQ3XE7ZPfF2jL0J56zQb7FEI7x+tH+7lmC3ga1Xbmdrlq3ZbXCJCsvUorspaI6Mo/6/HPTGtdtDN8hEteg7cvB20pMZPOS661fdTjq2z6tu8BvIDeLFNmhnj80P3G8QEd3dj627y/C4qI1HUmpna/g5DoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgzuCMY/53/fb4+ExBga04UBJd8V6xdSntZJPMLarpkZPz2u6HP/z1X+10hSkns1V2R/FZxYcXKhpkPdoNU8sGRzW1nNlPLfrrkYMe3Ep2H2rgFmqP6/y8/QYR2bw/I7C5b4ioaSDLjidZhqcH19Eg4hF4eHiIx/b8yukX5rcczB0sbvElI6nuZnu4vSOndszUKmyW7RrYtdnxhUzfofQdPI6dVzewUdEgArZ7O1uTiQb16xfpqfXk+rcc+DkOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAncPv//LPdrrOFLMdjt0Gh0V7skZHj7IsOIjuZmHzP9sXZl6V795O1um+7XGdW9eeTNFYgh3Y1LPZSrl+fC6F6w8eARG9UN31shftyRpdhqf6LmXWosEkoxFaao67Tj//6It2usbcwiPv8Hljb95Cru/2kS9S3RN93bqzr2srcQvewvV2YRnXa9ND698kiJjurtmLpje27p6MigY2ulvNsVgWurhmj4qbcAP9974kfo4DoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+tlHn7fTd6c+0bdVo9kG24nuemo7rV5YZtm+r576py/3J1P4kqya0d3N0Km5B44dfUX3OdQfeykbbuerXFg1iJCNhvb8yuH7P//QTte4vacaROggPzv92P9FhOCmnrUnV2y0nXXoBr57e1xnurupzdxPk7hBg9wci0R3PbXuHV11d119q0VfMfgc6s8cET21WViM3p/6lt9y6C9t5HdV8r3Yk7he+7vntT1BO17Nu77NpOTKdWd+jgOgDhkHQB0yDoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVDlxYv/A7Ox9ZVdSuKwAAAAAElFTkSuQmCC",alt:"default"}),nDurationMs:ua}]):(null==r?void 0:r.length)&&_():(i.current=n,2==n.GetStoreItemType()||1==n.GetStoreItemType()?((0,wt.X)(n.GetIncludedAppIDs().length>0,"expected included apps "+n.GetID()+" "+n.GetStoreItemType()),p.Z.Get().QueueMultipleAppRequests(n.GetIncludedAppIDs(),{include_assets:!0}).then((()=>v(n.GetIncludedAppIDs())))):v([n.GetID()])),()=>g.Cancel())),[v,r,n,o,g,_,i]),l.createElement("div",{className:x().TrailerCtn},null==r?void 0:r.map(((e,a)=>l.createElement("div",{key:"e-"+a+"-"+t.id+"_"+t.type,className:(0,k.Z)(x().FullDivImage,a!=d.current&&x().Transparent)},e.rctImage))))}function ga(e){const{rgTagIDs:t}=e;return l.createElement("div",{className:x().TagRow},l.createElement("div",{className:x().Tags},t.map((e=>l.createElement(kt,{key:"tag_"+e,tagid:e,className:x().Tag})))))}function _a(e){const{appInfo:t,bTruncateTotalReviews:a,bShowTooltip:n}=e,[o]=(0,M.jk)(null==t?void 0:t.id,(0,R.TM)(null==t?void 0:t.type),{include_reviews:!0});if(!o)return null;const i=ne.Get().BShowFilteredUserReviewScores()?o.GetFilteredReviewSummary():o.GetUnfilteredReviewSummary();if(!i||0==i.review_score)return null;let s=x().ReviewScoreNone;s=i.review_score>0&&i.review_score<5?x().ReviewScoreLow:5==i.review_score?x().ReviewScoreMixed:x().ReviewScoreHigh;const r=`${C.De.STORE_BASE_URL}app/${t.id}/#app_reviews_hash`,c=l.createElement("div",{className:(0,k.Z)(x().ReviewScoreValue,s)},l.createElement("div",{className:x().ReviewScoreLabel},i.review_score_label),l.createElement("div",{className:x().ReviewScoreCount},a?"("+i.review_count.toLocaleString()+")":(0,L.Xx)("#GameHover_UserReviewCount",i.review_count.toLocaleString())),!a&&l.createElement("div",{className:x().ReviewScoreHeader}," ",(0,L.Xx)("#GameHover_UserReviewsHeader")));let d="#ReviewScore_PercentPositive";if(2===o.GetStoreItemType())d="#ReviewScore_PercentPositive_bundle";else if(0===o.GetStoreItemType())switch(o.GetAppType()){case 6:d="#ReviewScore_PercentPositive_software";break;case 7:d="#ReviewScore_PercentPositive_video";break;case 10:d="#ReviewScore_PercentPositive_hardware";break;case 8:d="#ReviewScore_PercentPositive_series"}return l.createElement(It,{url:r,className:(0,k.Z)(x().ReviewScore,"ReviewScore")},n&&null!=i.percent_positive&&null!=i.review_count&&Boolean(d)?l.createElement(at.HP,{bTopmost:!0,toolTipContent:(0,L.Xx)(d,i.percent_positive,i.review_count)},c):c)}const va=(0,r.Pi)((e=>{const{appID:t,snr:a,classOverride:o}=e,s=t&&ne.Get().BIsGameWishlisted(t),r=t&&ne.Get().BOwnsApp(t),[c,d]=(0,l.useState)(!1),m=l.useRef(i().CancelToken.source());if(l.useEffect((()=>{const e=m;return()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.cancel("GameHoverWishlistButton unmounted")}}),[]),r)return null;return l.createElement("div",{className:(0,k.Z)(x().WishlistButton,o),onClick:e=>(0,n.mG)(void 0,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation(),C.L7.logged_in?(d(!0),yield ne.Get().UpdateGameWishlist(t,!s,a),m.current.token.reason||d(!1)):(0,ct.Xt)()}))},l.createElement(B.sqQ,null),l.createElement("div",{className:(0,k.Z)(x().WishlistButtonText,c&&x().WishlistLoadingText)},(0,L.Xx)(s?"#Sale_RemoveFromWishlist":"#Sale_AddToWishlist")))})),Sa=e=>{const{nCreatorAccountID:t}=e,[a,n]=(0,N.KU)(t),o=(0,Mt.iG)(t);return l.createElement("div",{className:x().GameHoverCreatorFollowButtonCtn},l.createElement("a",{href:null==o?void 0:o.GetCreatorHomeURL("developer")},l.createElement("img",{src:a?(0,I.U)(null,"medium"):n.avatar_medium_url})),l.createElement(ca,{clanAccountID:t}))},Ca=(0,r.Pi)((e=>{const{info:t,name:a,strStoreUrl:n,elElementToAppend:o,bShowDemoButton:i,bHideBottomHalf:s,bHidePrice:r,bShowDeckCompatibilityDialog:c,bUseSubscriptionLayout:d,nCreatorAccountID:m,bPreventNavigation:p}=e,[u,h]=(0,l.useState)(!1),[g,_]=(0,l.useState)(""),[v]=(0,M.jk)(t.id,(0,R.TM)(t.type),{include_assets:!0,include_release:!0,include_platforms:!0,include_tag_count:20}),S=!d&&!i&&!o,b=0==(null==v?void 0:v.GetStoreItemType());return l.createElement("div",{className:x().BottomShelf,style:{transform:s&&u?g:""},onMouseEnter:()=>h(!0),onFocus:()=>h(!0),onMouseLeave:()=>h(!1),onBlur:()=>h(!1)},l.createElement("a",{href:p?null:n,target:C.De.IN_CLIENT?void 0:"_blank",className:x().Midline},Boolean(v)&&l.createElement("div",{className:x().CapsuleImageAnchorPoint},l.createElement("div",{className:(0,k.Z)(x().CapsuleImageCtn,x().WithCornerShine)},l.createElement("img",{loading:"lazy",src:null==v?void 0:v.GetAssets().GetHeaderURL(),alt:null==v?void 0:v.GetName()}))),Boolean(!r&&!d)&&l.createElement("div",{className:x().Price},l.createElement(vt,{info:t,onlyOneDiscountPct:!0}))),l.createElement("div",{className:x().BottomShelfOffScreen,ref:e=>_(`translateY( -${(null==e?void 0:e.clientHeight)||0}px )`)},l.createElement("div",{className:x().TextContent},l.createElement("a",{href:p?null:n,target:C.De.IN_CLIENT?void 0:"_blank"},l.createElement("div",{className:x().GameTitle},(null==v?void 0:v.GetName())||a)),Boolean(v)&&l.createElement(ga,{rgTagIDs:v.GetTagIDs()}),Boolean(!c&&v)&&l.createElement(_a,{appInfo:t}),Boolean(!c&&S)&&l.createElement("div",{className:x().ReviewsAndRelease},l.createElement(U,{item:t,strClassName:x().PlatformDisplay}),Boolean(null==v?void 0:v.GetFormattedSteamReleaseDate())&&l.createElement("div",{className:x().ReleaseDate},null==v?void 0:v.GetFormattedSteamReleaseDate())),i&&l.createElement(it,{info:t,className:x().DemoButton}),Boolean(c&&b)&&l.createElement(Te,{storeItem:v}),Boolean(o)&&o,Boolean(d&&b)&&l.createElement(Bt,{appid:t.id,bIsMuted:!1}),m&&l.createElement(Sa,{nCreatorAccountID:m}))))}));(0,r.Pi)((e=>{l.useEffect((()=>{ne.Get().HintLoad()}),[]);const{info:t,strStoreUrl:a,bHideBottomHalf:n,bShowDeckCompatibilityDialog:o,bShowWishlistButton:i=!0}=e;let s;return t.overrideNavigation&&(s=e=>t.overrideNavigation()),l.createElement("div",{className:(0,k.Z)(x().GameHoverCapsuleCtn,V().InGameHover,n&&x().UseHidingBottomHalf),onClick:s},l.createElement("a",{href:s?null:a,target:C.De.IN_CLIENT?void 0:"_blank",className:x().TrailerAnchorStoreLink},Boolean(i&&!o&&!s)&&l.createElement(va,{appID:t.id,snr:e.strSNR}),l.createElement(ha,{info:t})),l.createElement(Ca,Object.assign({},e,{bPreventNavigation:Boolean(s)})))}));l.forwardRef((function(e,t){const{hoverProps:a,children:n}=e,o=l.useCallback((e=>null==e?void 0:e.focus()),[]);return l.createElement(Rt.T,Object.assign({},a),l.createElement(Nt.Z,{timeout:500,in:!0,appear:!0,classNames:{appearActive:x().Opening,enterDone:x().Open}},l.createElement("div",{ref:o,className:x().HoverContentTransition,tabIndex:-1},n)))}));const ba=(0,r.Pi)((e=>{var t;const{myInstance:a,bIsHovered:n,setIsHovered:o,displayStoreItem:s,baseGameStoreItem:r,displayInfo:c,purchaseInfo:m,hoverType:p,nHoverId:u,artworkInfo:h,artworkStoreItem:g}=function(e,t){const a=(0,l.useRef)(i().CancelToken.source()),{id:n,type:o}=e,s=t?Object.assign(Object.assign({},re),t):re,r=(0,l.useMemo)((()=>({id:n,type:o})),[n,o]),[c]=(0,M.jk)(r.id,(0,R.TM)(r.type),s),[d,m]=(0,l.useState)({id:n,type:o}),[p]=(0,M.jk)(null==d?void 0:d.id,(0,R.TM)(null==d?void 0:d.type),s),u=(0,l.useMemo)((()=>{var e;return(null===(e=null==p?void 0:p.GetIncludedAppIDs())||void 0===e?void 0:e.length)>1&&null==(null==p?void 0:p.GetAssets().GetMainCapsuleURL())&&null==(null==p?void 0:p.GetAssets().GetHeaderURL())?{id:p.GetIncludedAppIDs()[0],type:"game"}:d}),[d,p]),[h]=(0,M.vs)(null==u?void 0:u.id,s),g=(0,l.useMemo)((()=>({id:(null==p?void 0:p.GetParentAppID())!=(null==p?void 0:p.GetID())?null==p?void 0:p.GetParentAppID():void 0,type:"game"})),[p]),[_]=(0,M.vs)(g.id,s),[v]=(0,l.useState)(++ge.instance_count),[S,C]=(0,l.useState)(!1),[b,w]=(0,l.useState)(ue(o)),[f,E]=(0,l.useState)(n);return(0,l.useEffect)((()=>{if(ne.Get().HintLoad(),1==(null==c?void 0:c.GetStoreItemType())&&1==c.GetIncludedAppIDs().length&&(d.id!=c.GetIncludedAppIDs()[0]||"game"!=d.type)&&10!=c.GetAppType()&&!(null==a?void 0:a.current.token.reason)){const e=c.GetIncludedAppIDs()[0];m({id:e,type:"game"}),w("app"),E(e)}}),[d.id,d.type,c]),(0,l.useEffect)((()=>()=>null==a?void 0:a.current.cancel("StoreSalePreviewWidget: unmounting")),[]),{myInstance:v,bIsHovered:S,setIsHovered:C,purchaseInfo:r,displayInfo:d,displayStoreItem:p,baseGameStoreItem:_,baseGameInfo:g,hoverType:b,nHoverId:f,artworkInfo:u,artworkStoreItem:h}}(e),{bShowDemoButton:_,bHidePrice:v,bUseSubscriptionLayout:b,bHidePlatforms:w,bHideContainedApps:I,bAllowTwoLinesForHeader:B,bShowReviewSummary:A,bShowDeckCompatibilityDialog:T,bAutoFocus:G,fnOnClickOverride:N,bIsMarketingMessage:O}=e,H=(0,de.bJ)(),W=l.useMemo((()=>null==s?void 0:s.GetIncludedAppIDsOrSelf()),[s]),X=(0,l.useRef)(null),[j,Z]=(0,l.useState)(!1),z=(0,C.id)();if((0,l.useEffect)((()=>{X.current&&Z(X.current.offsetWidth<370)}),[X]),!s)return null;const Y=s.GetBestPurchaseOption().discount_pct,Q=s.GetIncludedAppIDs().length;let q=s.GetShortDescription();2!=s.GetStoreItemType()&&1!=s.GetStoreItemType()||(q=Y?(0,L.Xx)("#Sale_BundleSave_WithDiscount",Y,Q):(0,L.Xx)("#Sale_BundleSave",Q));const J=(0,d.mY)(H),K=f(s.GetStorePageURL()),$=Boolean(!I&&Q>0),te=s.BHasTags()?s.GetTagIDs():(null==r?void 0:r.BHasTags())?r.GetTagIDs():[],ae=0==s.GetStoreItemType(),oe=(0,d.Hf)(K,H),ie=z||s.BIsReleased()||s.BIsPrePurchase();return l.createElement(he,{appid:ae?s.GetAppID():void 0},l.createElement(y.s,{className:(0,k.Z)({[V().StoreSaleWidgetOuterContainer]:!0,[V().AllowTwoLineHeader]:B}),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),"flow-children":"grid",navEntryPreferPosition:D.c4.PREFERRED_CHILD,autoFocus:G,navKey:"preview_widget_"+s.GetID()},l.createElement(E.Ks,Object.assign({onClick:O?N:null,className:(0,k.Z)(V().StoreSaleWidgetContainer,V().SaleItemDefaultCapsuleDisplay,O?V().MarketingMessage:"")},function(e,t,a,n,o){if(!a)return;var i;if(2!=(i=e.GetStoreItemType())&&(1!=i&&0!=i))return void(0,wt.X)(!1,"StoreItemWidgetSalePageAction: unexpected type: "+e.GetStoreItemType());const s=(0,d.Hf)(`${e.GetStorePageURL()}${n?`?${n}`:""}`,t);return{onClick:e=>{let t=(0,ee.RA)(e)||window;o?o(void 0):s.startsWith("steam://")||(t.location.href=(0,S.bk)(s))},onOKActionDescription:(0,L.Xx)("#Sale_Gamepad_Action_Select")}}(s,H,z,void 0,N),{preferredFocus:$}),l.createElement("div",{className:(0,k.Z)(V().StoreSaleWidgetHalfLeft)},l.createElement("a",{href:N?void 0:oe,target:C.De.IN_CLIENT||N?void 0:"_blank",onClick:N},l.createElement("div",{className:V().StoreSaleWidgetImage},l.createElement(se,{appids:W}),l.createElement(ya,{info:h,imageType:"header"}),l.createElement(Gt,{eDeckCompatibilityCategory:null===(t=s.GetPlatforms())||void 0===t?void 0:t.steam_deck_compat_category}),Boolean(c&&n)&&l.createElement(F,{appInfo:c})))),l.createElement("div",{className:(0,k.Z)(V().StoreSaleWidgetRight,$?V().Bundle:"")},Boolean(ae&&!N)&&l.createElement(va,{appID:c.id,classOverride:(0,k.Z)(x().WishlistButtonNotTop,"WishlistButton"),snr:J}),l.createElement("div",{className:V().TitleCtn},l.createElement("a",{href:N?void 0:oe,target:C.De.IN_CLIENT?void 0:"_blank",onClick:N},l.createElement("div",{className:(0,k.Z)(V().StoreSaleWidgetTitle,"StoreSaleWidgetTitle")},s.GetName()))),l.createElement("div",{className:V().StoreSaleWidgetReleaseAndTags},te&&l.createElement("div",{className:V().StoreSaleWidgetTags},te.map((e=>l.createElement(kt,{key:"tag_"+e,tagid:e,className:V().AppTag})))),l.createElement("div",{className:V().WidgetReleaseDateAndPlatformCtn,ref:X},ae&&l.createElement("div",{className:V().StoreSaleWidgetRelease},s.GetFormattedSteamReleaseDate()),!w&&l.createElement(l.Fragment,null,l.createElement(U,{item:c,bMinimizePlatforms:j}),Boolean(T&&0==(null==s?void 0:s.GetStoreItemType())&&s.GetPlatforms())&&l.createElement(P,{className:V().DeckCompatIcon,category:s.GetPlatforms().steam_deck_compat_category}))),A&&l.createElement(_a,{appInfo:c})),$&&l.createElement(fa,{info:m}),Boolean(ae&&q)&&l.createElement("div",{className:(0,k.Z)(V().StoreSaleWidgetShortDesc,"StoreSaleWidgetShortDesc")},Boolean(q.startsWith("#")&&-1==q.indexOf(" "))?l.createElement("span",{className:V().LocalizationSpan},(0,L.yu)(q,l.createElement("i",null),l.createElement("i",null),l.createElement("i",null),l.createElement("i",null))):q),Boolean(!N)?l.createElement(l.Fragment,null,Boolean(b&&ae)?l.createElement(Bt,{appid:c.id,bIsMuted:n}):l.createElement(gt,{info:m,bShowDemoButton:_,bHidePrice:v,bHideWishlistButton:ie,bShowDeckCompatibilityDialog:T})):l.createElement("div",{className:V().StoreActionWidgetContainer},l.createElement("div",{className:V().StoreSalePriceActionWidgetContainer},l.createElement(vt,{info:m}))),l.createElement("div",{className:V().StoreSaleWidgetBgTint},l.createElement(ya,{info:c,imageType:"header"}))))),Boolean(e.strReason)&&e.strReason.length>0&&l.createElement("div",{className:V().RecommendationReason},e.strReason))})),wa=6;function fa(e){const{info:t}=e,[a]=(0,M.jk)(t.id,(0,R.TM)(t.type),{}),[n,o]=l.useState(null);return l.useEffect((()=>{a&&(1==a.GetStoreItemType()||2==a.GetStoreItemType()?o(a.GetIncludedAppIDs().map((e=>({id:e,type:"game"})))):console.error("ContentsPreviewList unexpected store item type: ",a.GetStoreItemType()))}),[a]),n?l.createElement("div",{className:V().BundleContentPreview},l.createElement("div",{className:V().ContentsCount},(0,L.kb)("#Sale_ContentPreview",n.length)),l.createElement("div",{className:V().PreviewCtn},n.slice(0,wa).map((e=>l.createElement(Ea,{key:`preview${e.id}_${e.type}`,info:e}))))):null}function Ea(e){const{info:t}=e,[a]=(0,M.Vm)(t.id,(0,R.TM)(t.type),{include_assets:!0}),n=null==a?void 0:a.GetAssets().GetSmallCapsuleURL();return l.createElement(ma,{type:ue(t.type),id:t.id,hoverClassName:V().PreviewItem},l.createElement("img",{src:n,className:V().PreviewImg,loading:"lazy",alt:null==a?void 0:a.GetName()}))}function ya(e){const{info:t,imageType:a}=e,[n]=(0,M.jk)(t.id,(0,R.TM)(t.type),{include_assets:!0});if(!n)return l.createElement(Ae.V,{size:"small",position:"center",string:(0,L.Xx)("#Loading")});if("library"===a)return l.createElement(Lt,{info:t});let o,i,s=Pt(n,"header"===a),r="";if("main"===a)o=V().mainCapsuleImgWidth,i=V().mainCapsuleImgHeight,r=V().MainCapsuleImageContainer;else o=V().headerCapsuleImgWidth,i=V().headerCapsuleImgHeight,r=V().HeaderCapsuleImageContainer;return l.createElement("div",{className:(0,k.Z)(r,"CapsuleImageCtn")},l.createElement(At,{lazyLoad:!0,srcs:s,className:(0,k.Z)(V().CapsuleImage),width:o,height:i,alt:n.GetName()}))}(0,r.Pi)((e=>{const t=L.LZ.GetWithFallback(e.link.localized_link_capsule,e.language);return l.createElement(It,{url:e.link.url,className:e.strClassName?e.strClassName:void 0,bSkipForcingStoreLink:!0},l.createElement("div",{className:V().CapsuleContainer},Boolean(e.link.localized_link_capsule)&&l.createElement("img",{className:V().LinkCapsuleImage,src:`${(0,G.OL)()}${e.clanAccountID}/${t}`}),Boolean(e.link.materialized_link_capsule)&&l.createElement("img",{className:V().LinkCapsuleImage,src:e.link.materialized_link_capsule})))}));var Da=a(75134),Ia=a(61185);function ka(e){const{gidEvent:t}=e,a=(0,Da.XC)(t),[n,o]=(0,l.useMemo)((()=>{var e,t,n,o;if((null===(t=null===(e=null==a?void 0:a.jsondata)||void 0===e?void 0:e.localized_sale_product_banner)||void 0===t?void 0:t.length)>0&&(null===(o=null===(n=null==a?void 0:a.jsondata)||void 0===n?void 0:n.localized_sale_product_mobile_banner)||void 0===o?void 0:o.length)>0){const e=(0,ft.jM)(C.De.LANGUAGE),t=L.LZ.GetWithFallback(a.jsondata.localized_sale_product_banner,e),n=L.LZ.GetWithFallback(a.jsondata.localized_sale_product_mobile_banner,e);if((null==t?void 0:t.length)>0&&(null==n?void 0:n.length)>0){const e=a.clanSteamID.GetAccountID();return[`${(0,G.OL)()}${e}/${t}`,`${(0,G.OL)()}${e}/${n}`]}}return[null,null]}),[a]);return(null==n?void 0:n.length)>0&&(null==o?void 0:o.length)>0?l.createElement("a",{href:(0,S.OL)(a.GetSaleURL()),className:Ia.Link},l.createElement("img",{src:n,className:(0,k.Z)(Ia.Banner,Ia.Big)}),l.createElement("img",{src:o,className:(0,k.Z)(Ia.Banner,Ia.Mobile)})):null}var Ba,Aa=a(83556),La=a.n(Aa),Pa=a(99377);!function(e){e.topleft="topleft",e.top="top",e.topright="topright",e.left="left",e.middle="middle",e.right="right",e.bottomleft="bottomleft",e.bottom="bottom",e.bottomright="bottomright"}(Ba||(Ba={}));let Ta=class extends l.Component{componentWillUnmount(){this.m_listeners.Unregister()}constructor(e){super(e),this.m_fnMouseUp=null,this.m_fnMouseMove=null,this.m_listeners=new h.G_,this.m_strDescription="",this.m_aspectRatio=1,this.state={curLeftPosPct:this.props.xPosPct,curTopPosPct:this.props.yPosPct,curRightPosPct:100-(this.props.widthPct+this.props.xPosPct),curBottomPosPct:100-(this.props.yPosPct+this.props.heightPct),curWidthPct:this.props.widthPct,curHeightPct:this.props.heightPct,EdgeDown:null,text_link_url:this.props.link_url,text_link_description:this.props.link_description,bEditingLink:!1,valid_link:this.validateUrl(this.props.link_url)},this.m_strDescription=this.props.link_description,this.m_aspectRatio=this.props.heightPct>0&&this.props.widthPct>0?this.props.widthPct/this.props.heightPct:1}LinkRegionBoxRef(e){this.m_elLinkRegionBox=e}OnMouseDown(e,t){this.m_fnMouseUp=e=>{this.OnMouseUp(e,t)},this.m_fnMouseMove=e=>{this.OnMouseMove(e,t)},this.setState({EdgeDown:t}),this.m_rectLinkRegion=this.m_elLinkRegionBox.parentElement.getBoundingClientRect(),this.m_nLocalOffsetXPct=(e.clientX-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.state.curLeftPosPct,this.m_nLocalOffsetYPct=(e.clientY-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.state.curTopPosPct,this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mousemove",this.m_fnMouseMove),this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mouseup",this.m_fnMouseUp),e.preventDefault(),e.stopPropagation()}OnMouseMove(e,t){if(void 0!==this.state.EdgeDown){switch(e.shiftKey&&this.m_fnMouseUp(),t){case Ba.left:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case Ba.right:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX)});break;case Ba.top:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY)});break;case Ba.bottom:this.UpdateState({curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Ba.topleft:this.UpdateState({curTopPosPct:this.CalcBottomEdge(e.clientY),curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case Ba.topright:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.CalcRightEdge(e.clientX)});break;case Ba.bottomleft:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Ba.bottomright:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case Ba.middle:{const t=(0,Pa.Lh)(this.CalcLeftEdge(e.clientX),0,100-this.state.curWidthPct),a=100-(t+this.state.curWidthPct),n=(0,Pa.Lh)(this.CalcTopEdge(e.clientY),0,100-this.state.curHeightPct),o={curLeftPosPct:t,curRightPosPct:a,curTopPosPct:n,curBottomPosPct:100-(n+this.state.curHeightPct)};this.setState(o);break}}e.preventDefault(),e.stopPropagation()}}IsValidPct(e){return e>=0&&e<=100}UpdateState(e){let t=void 0!==e.curTopPosPct?e.curTopPosPct:this.state.curTopPosPct,a=void 0!==e.curBottomPosPct?e.curBottomPosPct:this.state.curBottomPosPct,n=void 0!==e.curLeftPosPct?e.curLeftPosPct:this.state.curLeftPosPct,o=void 0!==e.curRightPosPct?e.curRightPosPct:this.state.curRightPosPct,i=(0,Pa.Lh)(100-o-n,this.props.widthMinPct||0,this.props.widthMaxPct||100),s=(0,Pa.Lh)(100-a-t,this.props.heightMinPct||0,this.props.heightMaxPct||100);this.props.bLockAspectRatio&&(void 0!==e.curLeftPosPct||void 0!==e.curRightPosPct?s=i/this.m_aspectRatio:i=s*this.m_aspectRatio),void 0!==e.curLeftPosPct?n=100-o-i:o=100-(n+i),void 0!==e.curTopPosPct?t=100-a-s:a=100-(t+s);const r=100-o-n,l=100-a-t;this.IsValidPct(n)&&this.IsValidPct(o)&&this.IsValidPct(t)&&this.IsValidPct(a)&&this.IsValidPct(r)&&this.IsValidPct(l)&&this.setState({curLeftPosPct:n,curRightPosPct:o,curTopPosPct:t,curBottomPosPct:a})}GetXPercent(e){return(e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.m_nLocalOffsetXPct}GetYPercent(e){return(e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.m_nLocalOffsetYPct}CalcLeftEdge(e){return(0,Pa.Lh)(this.GetXPercent(e),0,100)}CalcRightEdge(e){return(0,Pa.Lh)(100-(this.GetXPercent(e)+this.state.curWidthPct),0,100)}CalcTopEdge(e){return(0,Pa.Lh)(this.GetYPercent(e),0,100)}CalcBottomEdge(e){return(0,Pa.Lh)(100-(this.GetYPercent(e)+this.state.curHeightPct),0,100)}OnMouseUp(e,t){this.setState({curWidthPct:100-this.state.curRightPosPct-this.state.curLeftPosPct}),this.setState({curHeightPct:100-this.state.curBottomPosPct-this.state.curTopPosPct}),this.setState({EdgeDown:void 0}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description}),this.m_listeners.Unregister()}HandleDelete(){return(0,n.mG)(this,void 0,void 0,(function*(){this.props.deleteFn&&this.props.deleteFn(this.props.index)}))}OnSetLinkURLChange(e){this.setState({text_link_url:e.target.value,valid_link:this.validateUrl(e.target.value)})}OnSetLinkDescriptionChange(e){this.setState({text_link_description:e.target.value})}validateUrl(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)}OnSaveLink(){this.m_strDescription=this.state.text_link_description,this.setState({bEditingLink:!this.state.bEditingLink}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description})}OnEditLink(){this.setState({bEditingLink:!this.state.bEditingLink})}render(){let e={left:this.state.curLeftPosPct+"%",top:this.state.curTopPosPct+"%",right:this.state.curRightPosPct+"%",bottom:this.state.curBottomPosPct+"%"},t=La().LinkRegionDragBox;return null!==this.state.EdgeDown&&(t+=` ${La().EdgeDown} `+La()[this.state.EdgeDown]),l.createElement("div",{className:t,style:e,ref:this.LinkRegionBoxRef,draggable:!1},l.createElement("div",{className:La().LinkRegionGridBox},l.createElement("div",{className:`${La().LinkRegionEdge} ${La().TopLeft}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.topleft)},draggable:!1}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().Top}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.top)}}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().TopRight}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.topright)},draggable:!1}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().Left}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.left)},draggable:!1}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().Middle}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.middle)},draggable:!1},this.props.deleteFn&&l.createElement("div",{className:La().LinkRegionDelete,onClick:this.HandleDelete},l.createElement(B.pVO,null)),!this.props.bDisableLink&&l.createElement("div",{className:La().LinkRegionSettings,onClick:this.OnEditLink},l.createElement(B.pkz,null)),l.createElement("div",{className:La().LinkText}," ",this.m_strDescription," ")),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().Right}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.right)},draggable:!1}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().BottomLeft}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.bottomleft)},draggable:!1}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().Bottom}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.bottom)},draggable:!1}),l.createElement("div",{className:`${La().LinkRegionEdge} ${La().BottomRight}`,onMouseDown:e=>{this.OnMouseDown(e,Ba.bottomright)},draggable:!1})),this.state.bEditingLink&&l.createElement("div",{className:La().LinkRegionInfo},l.createElement(Ce.II,{className:La().LinkRegionInput,type:"text",name:"link_url",value:this.state.text_link_url,label:(0,L.Xx)("#SteamTV_LinkURL"),placeholder:"https://www.example.com",onChange:this.OnSetLinkURLChange,mustBeURL:!0}),l.createElement(Ce.II,{className:La().LinkRegionInput,type:"text",name:"link_description",value:this.state.text_link_description,label:(0,L.Xx)("#SteamTV_LinkDescription"),placeholder:(0,L.Xx)("#SteamTV_LinkDescription_Placeholder"),onChange:this.OnSetLinkDescriptionChange}),l.createElement("div",{className:La().LinkRegionButtonContainer},l.createElement(Ce.zx,{disabled:!this.state.valid_link,onClick:this.OnSaveLink}," ",(0,L.Xx)("#Button_OK")," "),l.createElement(Ce.zx,{onClick:this.OnEditLink}," ",(0,L.Xx)("#Button_Cancel")))))}};(0,n.gn)([u.ak],Ta.prototype,"LinkRegionBoxRef",null),(0,n.gn)([u.ak],Ta.prototype,"OnMouseDown",null),(0,n.gn)([u.ak],Ta.prototype,"OnMouseMove",null),(0,n.gn)([u.ak],Ta.prototype,"OnMouseUp",null),(0,n.gn)([u.ak],Ta.prototype,"HandleDelete",null),(0,n.gn)([u.ak],Ta.prototype,"OnSetLinkURLChange",null),(0,n.gn)([u.ak],Ta.prototype,"OnSetLinkDescriptionChange",null),(0,n.gn)([u.ak],Ta.prototype,"OnSaveLink",null),(0,n.gn)([u.ak],Ta.prototype,"OnEditLink",null),Ta=(0,n.gn)([r.Pi],Ta);var Ga=a(76366),Na=a(16677),Ra=a(53925),Ma=a(30773),Oa=a.n(Ma);function xa(){return l.createElement("div",{className:"STV_ReplayBanner"},(0,L.Xx)("#DASHPlayerControls_IsReplay"))}const Ha=(0,r.Pi)((e=>{let t=e.video;if(t&&(t.IsBroadcastClip()||t.IsBroadcastVOD()))return null;let a=m.EBroadcastWatchState.Loading,n="";if(t){a=t.GetBroadcastState(),n=t.GetBroadcastStateDescription();let e=t.IsBuffering();a==m.EBroadcastWatchState.Unlocking&&(a=m.EBroadcastWatchState.Loading,n=""),a==m.EBroadcastWatchState.Ready&&e&&(a=m.EBroadcastWatchState.Loading,n="")}if(t&&a!=m.EBroadcastWatchState.Error&&t.GetUserInputNeeded())return null;if(a==m.EBroadcastWatchState.Ready)return null;let o=a==m.EBroadcastWatchState.Loading;return l.createElement("div",{className:"BroadcastVideoWatchState",style:{filter:"hue-rotate(40deg)"}},o&&l.createElement(Ae.V,null),!o&&l.createElement("div",{className:"BroadcastVideoWatchState_Text"},n))}));class Va extends l.Component{OnClick(){m.BroadcastWatchStore.UserInputClickVideo(this.props.video)}render(){return l.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},l.createElement(B.shV,null),l.createElement("span",null,(0,L.Xx)("#DASHPlayerControls_ClickToPlay")))}}(0,n.gn)([u.ak],Va.prototype,"OnClick",null);let Fa=class extends l.Component{constructor(e){super(e)}HideStats(){this.props.closeStats&&this.props.closeStats()}render(){let e=this.props.stats;return l.createElement("div",{className:"dash_video_stats"},l.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},l.createElement(B.pVO,null)),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_BufferingResolution")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_PlaybackResolution")," ",l.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_HtmlResolution")," ",l.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_ContentServer")," ",l.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_StallEvents")," ",l.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_FailedDownloads")," ",l.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_TimeToFirstFrame")," ",l.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_PlaybackRate")," ",l.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),l.createElement(Ua,{stats:e}))}};(0,n.gn)([u.ak],Fa.prototype,"HideStats",null),Fa=(0,n.gn)([r.Pi],Fa);let Ua=class extends l.Component{constructor(e){super(e)}createBufferedRange(e){let t=this.props.stats,a=[],n=e?"vidbuf":"audbuf",o=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(o>0)for(let i=0;i<o;++i){let o=(0,L.Xx)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",i),s=e?t.GetBufferedVideoSegmentForDisplay(i):t.GetBufferedAudioSegmentForDisplay(i);a.push(l.createElement("div",{key:n+i},o," ",l.createElement("span",{className:"videoStatsValue"},s)))}else{let t=(0,L.Xx)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");a.push(l.createElement("div",{key:n+"none"},t))}return a}render(){let e=this.props.stats;return l.createElement("div",{className:"dash_video_quick_stats"},l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_BytesReceived")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_DroppedFrames")," ",l.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_VideoBuffered")," ",l.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_AudioBuffered")," ",l.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_BandwidthRequired")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_BandwidthVideo")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_BandwidthNums")," ",l.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_DownloadNums")," ",l.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_ActiveDownloads")," ",l.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_VideoDownloadProgress")," ",l.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_DroppingFrames")," ",l.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),l.createElement("div",null,(0,L.Xx)("#DASHPlayerStats_CurrentFPS")," ",l.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))}};Ua=(0,n.gn)([r.Pi],Ua);var Wa=a(51772);class Xa extends l.Component{constructor(e){super(e),this.m_elSubtitlesButton=l.createRef(),this.m_elSubtitlesPanel=l.createRef(),this.state={bSettingsOpen:!1,bSubtitlesOpen:!1}}OnVideoControlClick(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnSubtitlesClick(e){this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen}),this.m_SubtitlesButtonPos=[this.m_elSubtitlesButton.current.offsetLeft,this.m_elSubtitlesButton.current.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnMouseUp(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),(0,ee.ni)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1}),(0,ee.ni)(this.m_elSubtitlesPanel.current,e.target)||this.setState({bSubtitlesOpen:!1})}bindSettingsButton(e){this.m_elSettingsButton=e}BindSettingsPanel(e){this.m_elSettingsPanel=e}OnShowStats(e){this.props.onShowStats(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})}render(){let e=!1,t=!1;const{video:a,actions:n}=this.props;let o,i,s=0,r=l.createElement("div",{key:"separator",className:"settingsMenuSeparator"});if(this.state.bSettingsOpen&&(e=!0,o=this.props.video.GetVideoRepresentations(),i=o.map((e=>l.createElement(Wa.P,{key:e.id,onClick:()=>{this.props.video.SetVideoRepresentation(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})},bChecked:e.selected},e.displayName))),i.push(r),i.push(l.createElement(Wa.s,{key:"statsToggle",onClick:this.OnShowStats},(0,L.Xx)("#Broadcast_VideoContext_ToggleStats"),"\t")),s=0-(21*i.length+32)),this.state.bSubtitlesOpen){t=!0,i=[],i.push(l.createElement(Wa.P,{key:"none",onClick:()=>{this.props.video.SetSubtitles(null),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},className:"NoSubtitles",bChecked:!1},(0,L.Xx)("#Broadcast_None")));for(let e=0;e<this.props.video.ListSubtitles().length;e++){const t=this.props.video.ListSubtitles()[e];i.push(l.createElement(Wa.P,{key:t.language,onClick:()=>{this.props.video.SetSubtitles(t.language),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},bChecked:"showing"===t.mode},t.label))}s=-292}const c=this.props.video.BHasPlayer()&&this.props.video.BHasTimedText();return l.createElement("div",{className:"STV_BroadcastSettings"},c&&l.createElement("div",{className:"videoControlButton"+(c?" ClosedCaptionsActive":""),onClick:this.OnSubtitlesClick,ref:this.m_elSubtitlesButton},l.createElement(B.Vgm,null)),l.createElement("div",{className:"videoControlButton VideoSettings "+(e?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},l.createElement(B.Zrf,null)),l.createElement(ja,{video:a}),n&&n.map((e=>l.createElement("div",{key:e.key,className:"videoControlButton videoControlFitWidth"},e))),e&&l.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:s}},l.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},i)),t&&l.createElement("div",{ref:this.m_elSubtitlesPanel,className:"STV_BroadcastSettingsPanel SubtitlesMenu",style:{maxHeight:"260px",left:this.m_SubtitlesButtonPos[0],top:this.m_SubtitlesButtonPos[1],marginTop:s}},l.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},i)))}}(0,n.gn)([u.ak],Xa.prototype,"OnVideoControlClick",null),(0,n.gn)([u.ak],Xa.prototype,"OnSubtitlesClick",null),(0,n.gn)([u.ak],Xa.prototype,"OnMouseUp",null),(0,n.gn)([u.ak],Xa.prototype,"bindSettingsButton",null),(0,n.gn)([u.ak],Xa.prototype,"BindSettingsPanel",null),(0,n.gn)([u.ak],Xa.prototype,"OnShowStats",null);let ja=class extends l.Component{constructor(e){super(e),this.k_nHideSliderTimeout=1500,this.m_bShowSlider=true,this.m_schHideSlider=new h.Ar,this.m_bChildDragging=!1,this.m_bMouseOver=!1,(0,s.rC)(this)}componentWillUnmount(){this.m_schHideSlider.Cancel()}ToggleMute(){let e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)}OnMouseEnter(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()}OnMouseLeave(e){this.m_bMouseOver=!1,this.ScheduleHide()}OnChildDrag(e){this.m_bChildDragging=e,this.ScheduleHide()}ScheduleHide(){this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,(()=>this.m_bShowSlider=true))}render(){let e=this.props.video,t=e.IsMuted(),a=100*e.GetVolume(),n="videoControlButton";a>65?n+=" HighestVolume":a>45?n+=" HighVolume":a<46&&a>24?n+=" MedVolume":a<25&&(n+=" LowVolume");let o="BroadcastVolumeControl";return this.m_bShowSlider&&(o+=" ShowVolumeSlider"),t&&(o+=" muted"),l.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},l.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},l.createElement("div",{className:n,onClick:this.ToggleMute},l.createElement(B.ffh,null)),l.createElement(Za,{video:e,onDrag:this.OnChildDrag})))}};(0,n.gn)([s.LO],ja.prototype,"m_bShowSlider",void 0),(0,n.gn)([u.ak],ja.prototype,"ToggleMute",null),(0,n.gn)([u.ak],ja.prototype,"OnMouseEnter",null),(0,n.gn)([u.ak],ja.prototype,"OnMouseLeave",null),(0,n.gn)([u.ak],ja.prototype,"OnChildDrag",null),ja=(0,n.gn)([r.Pi],ja);let Za=class extends l.Component{constructor(e){super(e),this.m_elSlider=null,this.m_nVolumeStartOfDrag=0,(0,s.rC)(this)}OnMouseDown(e){let t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)}OnMouseMove(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)}OnMouseUp(e){if(!this.m_elSlider)return;this.SetVolumeWithCoord(this.m_elSlider,e.clientX);let t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}SetVolumeWithCoord(e,t){let a=e.getBoundingClientRect(),n=Pa.r4(t,a.left,a.right,0,1),o=Pa.Lh(n,0,1),i=this.props.video;i.SetMute(n<.01),i.SetVolume(o)}render(){let e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);let a={left:`${t}%`},n={width:`${t}%`};return l.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},l.createElement("div",{className:"BroadcastVolumeSlider_Track"}),l.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:n}),l.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:a}))}};(0,n.gn)([u.ak],Za.prototype,"OnMouseDown",null),(0,n.gn)([u.ak],Za.prototype,"OnMouseMove",null),(0,n.gn)([u.ak],Za.prototype,"OnMouseUp",null),(0,n.gn)([s.aD],Za.prototype,"SetVolumeWithCoord",null),Za=(0,n.gn)([r.Pi],Za);const za=15;let Ya=class extends l.Component{constructor(e){super(e),this.m_schHideControls=new h.Ar,this.m_schUnmountControls=new h.Ar,this.m_elVideo=null,this.m_elBroadcastPlayer=null,this.m_bMouseDown=!1,this.m_elMouseDown=null,this.m_listeners=new h.G_,this.m_cancelSignal=i().CancelToken.source(),this.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1}}StopVideo(){let e=this.state.video;e&&(m.BroadcastWatchStore.StopVideo(e),this.setState({video:null}))}IsMuted(){let e=this.state.video;return!e||e.IsMuted()}StopPlaybackTillUserInput(){let e=this.state.video;e&&e.StopPlaybackTillUserInput()}componentDidUpdate(e,t){!t.bMountControls&&this.state.bMountControls?setTimeout((()=>{this.setState((e=>({bControlsVisible:e.bMountControls})))}),15):t.bControlsVisible&&!this.state.bControlsVisible&&this.state.video&&!this.state.video.IsPaused()&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls),this.props.steamIDBroadcast!==e.steamIDBroadcast&&this.BindVideoRef(this.m_elVideo),!this.props.nAppIDVOD||void 0!==t.strInitialCapsuleImageUrl&&e.nAppIDVOD==this.props.nAppIDVOD||p.Z.Get().QueueAppRequest(this.props.nAppIDVOD,{include_assets:!0,include_trailers:!0}).then((()=>{const e=p.Z.Get().GetApp(this.props.nAppIDVOD),t=(null==e?void 0:e.GetAssets().GetMainCapsuleURL())||"";this.setState({strInitialCapsuleImageUrl:t})}))}componentWillUnmount(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()}BindBroadcastPlayerRef(e){this.m_listeners.Unregister(),this.m_elBroadcastPlayer=e,e&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))}BindVideoRef(e){let t;this.StopVideo(),this.props.steamIDBroadcast?e&&(t=m.BroadcastWatchStore.CreateBroadcastVideo(e,this.props.steamIDBroadcast,this.props.watchLocation,this.props.bWebRTC)):this.props.broadcastClipID?e&&(t=m.BroadcastWatchStore.CreateClipVideo(e,this.props.broadcastClipID,this.props.watchLocation)):this.props.nAppIDVOD&&e&&(t=m.BroadcastWatchStore.CreateVODVideo(e,this.props.nAppIDVOD,this.props.watchLocation),this.props.fnOnVideoEnd&&t.SetOnVideoCallback(this.props.fnOnVideoEnd)),t&&(this.props.bStartMuted&&t.SetMute(!0),this.props.bStartPaused?t.StopPlaybackTillUserInput():t.Play()),this.setState({video:t}),this.m_elVideo=e}OnMouseDown(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}OnMouseUp(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseMove(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseLeave(e){this.HideControls()}HideControls(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1})}UmountControls(){this.setState((e=>{if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}}))}ShowStatsView(){let e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))}OnContextMenu(e){this.state.bFullscreen||((0,c.yV)(l.createElement(_.xV,null,this.GetContextMenuItems()),e),e.preventDefault())}ToggleStatsView(e){let t=!this.state.bShowStats;this.setState({bShowStats:t});let a=this.state.video;a&&a.SetStatsViewIsVisible(t)}ShowStorePage(e){let t=this.state.video;if(!t||!this.props.onOpenLinkInNewWindow)return;let a=t.GetBroadcastInfo();if(!a)return;let n=(0,d.OL)(`${C.De.STORE_BASE_URL}app/${a.m_strAppId}`);this.props.onOpenLinkInNewWindow(e,n),e.stopPropagation()}GetContextMenuItems(){let e=[],t=this.state.video;if(!t)return e;let a=t.GetBroadcastInfo();return e.push(l.createElement(_.Td,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:e=>{this.ToggleStatsView(e)}},(0,L.Xx)("#Broadcast_VideoContext_ToggleStats"))),a&&"0"!=a.m_strAppId&&Number.parseInt(a.m_strAppId)!=m.k_nDefaultBroadcastAppID&&e.push(l.createElement(_.Zo,{key:"visitstore",onSelected:e=>{this.ShowStorePage(e)}},(0,L.Xx)("#Broadcast_VideoContext_OpenStore"))),e}CloseStats(){let e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))}OnToggleFullscreen(){this.m_elBroadcastPlayer&&((0,ee.h9)(this.m_elBroadcastPlayer)?(0,ee.mQ)(this.m_elBroadcastPlayer):(0,ee.RD)(this.m_elBroadcastPlayer,this.m_elVideo))}OnFullscreenChange(e){if(!this.m_elBroadcastPlayer)return;let t=(0,ee.h9)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}BHideVideoControls(){let e=this.state.video;return!e||(!!e.GetUserInputNeeded()||m.BroadcastWatchStore.GetBroadcastState(e)==m.EBroadcastWatchState.Error)}render(){const e=this.state.video,t=e&&e.IsPaused(),a=e&&e.BHasDASHStats()&&this.state.bShowStats,n=Boolean(e&&e.IsReplay()),o=this.state.bMountControls,i=this.state.bControlsVisible||t,s=e&&e.GetUserInputNeeded(),r=(null==e?void 0:e.IsBroadcastVOD())&&s&&this.state.strInitialCapsuleImageUrl;let c="videoContainer";i||(c+=" HidePlayerControls"),t&&(c+=" VideoPaused"),this.state.bFullscreen&&(c+=" fullscreenVideo"),this.props.classes&&(c+=" "+this.props.classes);let d=[];!this.state.bFullscreen&&this.props.actions&&(d=d.concat(this.props.actions)),!this.state.bFullscreen&&this.props.onTheaterMode&&d.push(l.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:(0,L.Xx)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),d.push(l.createElement("div",{key:"FullscreenToggle",title:(0,L.Xx)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));const m=o&&!this.BHideVideoControls(),p=o&&!this.state.bFullscreen,u=this.props.fnRenderBroadcastContext&&this.props.fnRenderBroadcastContext();return l.createElement("div",{ref:this.BindBroadcastPlayerRef,className:c,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},u&&l.createElement("div",{className:Oa().BroadcastContext},u),n&&l.createElement(xa,null),this.props.showVideoBackgroundBlur&&l.createElement(g,{className:"videoBlur",elementRef:this.m_elVideo,updateRate:33,width:320,height:180,reductionFactor:10,blurAmount:5}),l.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:!0,autoPlay:!0,playsInline:!0,controls:!1}),this.props.linkRegions?l.createElement(cn,{linkRegions:this.props.linkRegions,editMode:this.props.editMode,onSaveLinkRegions:this.props.onSaveLinkRegions}):null,this.props.linkElement,r&&l.createElement("img",{loading:"lazy",className:(0,k.Z)(Oa().BroadcastPlaceholderImg,"BroadcastPlaceholderImg"),src:this.state.strInitialCapsuleImageUrl}),m&&l.createElement(qa,{video:e,actions:d,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow,onShowStats:this.ToggleStatsView,bIncludeClipEditor:this.props.bIncludeClipEditor}),p&&l.createElement(Ja,{onClick:this.props.onRequestClose}),a&&l.createElement(Fa,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),l.createElement(Ha,{video:e}),s&&l.createElement(Va,{video:e}))}};(0,n.gn)([u.ak],Ya.prototype,"BindBroadcastPlayerRef",null),(0,n.gn)([u.ak],Ya.prototype,"BindVideoRef",null),(0,n.gn)([u.ak],Ya.prototype,"OnMouseDown",null),(0,n.gn)([u.ak],Ya.prototype,"OnMouseUp",null),(0,n.gn)([u.ak],Ya.prototype,"OnMouseMove",null),(0,n.gn)([u.ak],Ya.prototype,"OnMouseLeave",null),(0,n.gn)([u.ak],Ya.prototype,"HideControls",null),(0,n.gn)([u.ak],Ya.prototype,"UmountControls",null),(0,n.gn)([u.ak],Ya.prototype,"ShowStatsView",null),(0,n.gn)([u.ak],Ya.prototype,"OnContextMenu",null),(0,n.gn)([u.ak],Ya.prototype,"ToggleStatsView",null),(0,n.gn)([u.ak],Ya.prototype,"ShowStorePage",null),(0,n.gn)([u.ak],Ya.prototype,"CloseStats",null),(0,n.gn)([u.ak],Ya.prototype,"OnToggleFullscreen",null),(0,n.gn)([u.ak],Ya.prototype,"OnFullscreenChange",null),Ya=(0,n.gn)([r.Pi],Ya);const Qa=Ya;let qa=class extends l.Component{render(){const{video:e}=this.props;if(!e)return null;let t=e.has_segments;return l.createElement("div",{className:"videoControls"},l.createElement(rn,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0,bVerticalBroadcastChat:!0,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow}),l.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},l.createElement(sn,{video:e,bIncludeClipEditor:this.props.bIncludeClipEditor}),l.createElement("div",{className:"STV_BroadcastController"},l.createElement("div",{className:"videoControlsButtons LeftSpacer"}),l.createElement(Ka,{video:e}),l.createElement($a,{video:e}),l.createElement(Xa,{video:e,actions:this.props.actions,onShowStats:this.props.onShowStats}))))}};qa=(0,n.gn)([r.Pi],qa);class Ja extends l.PureComponent{render(){return this.props.onClick?l.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},l.createElement(B.pVO,null)):null}}class Ka extends l.Component{OnJumpBackward(){this.props.video.JumpTime(-15)}OnJumpForward(){this.props.video.JumpTime(za)}render(){let e=this.props.video,t=e.CanSeek();return l.createElement("div",{className:"videoControlsButtons PlayControls"},l.createElement(tn,{video:e}),t&&l.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},l.createElement(B.P9w,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),l.createElement("div",{className:"jumpAheadValue"},za)),l.createElement(en,{video:e}),t&&l.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},l.createElement(B.P9w,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),l.createElement("div",{className:"jumpAheadValue"},za)),t&&l.createElement(an,{video:e}))}}(0,n.gn)([u.ak],Ka.prototype,"OnJumpBackward",null),(0,n.gn)([u.ak],Ka.prototype,"OnJumpForward",null);const $a=(0,r.Pi)((e=>{if(e.video.IsBroadcastClip()||e.video.IsBroadcastVOD())return null;let t=e.video.IsOnLiveEdge();return l.createElement("div",{className:"videoControlsButtons GoLive"},l.createElement("div",{className:"videoControlButton videoControlGoLive"+(t?" isLiveEdge":""),onClick:t?null:t=>{e.video.JumpToLiveEdge()}},l.createElement(B.P9w,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),l.createElement("div",{className:"jumpGoLive"},(0,L.Xx)(t?"#DASHPlayerControls_IsLive":"#DASHPlayerControls_GoLive"))))}));let en=class extends l.Component{OnTogglePlayPause(){this.props.video.TogglePlayPause()}render(){let e=this.props.video.IsPaused();return l.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},e?l.createElement(B.shV,null):l.createElement(B.dzL,null))}};(0,n.gn)([u.ak],en.prototype,"OnTogglePlayPause",null),en=(0,n.gn)([r.Pi],en);let tn=class extends l.Component{constructor(e){super(e),this.video=void 0,(0,s.rC)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}get has_previous_marker(){return void 0!==this.GetPreviousMarkerTime()}GetPreviousMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=e.length-1;a>=0;a--)if(!(e[a].nTime>=t))return e[a].nTime}OnJumpToPreviousMarkerClicked(e){let t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)}render(){let e=this.props.video.BHasMarkersOrSegments();return l.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},l.createElement(B.P9w,{bHidePostArrow:!0,bFlipHorizontal:!0}))}};(0,n.gn)([s.LO],tn.prototype,"video",void 0),(0,n.gn)([s.Fl],tn.prototype,"has_previous_marker",null),(0,n.gn)([u.ak],tn.prototype,"OnJumpToPreviousMarkerClicked",null),tn=(0,n.gn)([r.Pi],tn);let an=class extends l.Component{constructor(e){super(e),this.video=void 0,(0,s.rC)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}get has_next_marker(){return void 0!==this.GetNextMarkerTime()}GetNextMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=0;a<e.length;a++)if(!(e[a].nTime<=t))return e[a].nTime}OnJumpToNextMarkerClicked(e){let t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)}render(){let e=this.props.video.BHasMarkersOrSegments();return l.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},l.createElement(B.P9w,{bHidePostArrow:!0,bFlipHorizontal:!1}))}};(0,n.gn)([s.LO],an.prototype,"video",void 0),(0,n.gn)([s.Fl],an.prototype,"has_next_marker",null),(0,n.gn)([u.ak],an.prototype,"OnJumpToNextMarkerClicked",null),an=(0,n.gn)([r.Pi],an);const nn=e=>l.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:()=>e.onMouseEnter(e.pos),onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown?e.onMouseDown:void 0},l.createElement("div",{className:"timelineMarkerIcon"},l.createElement(B.$06,null)));function on(e){let t=e.startPos,a=e.endPos,n="",o=1;return t<0&&(o=(a-t)/10,t=0,n=" hideFront"),l.createElement("div",{className:"STV_timelineSegment"+n,style:{left:t+"%",width:a-t+"%",opacity:o},onClick:e.onClick},l.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),l.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),l.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}let sn=class extends l.Component{constructor(e){super(e),this.m_elSlider=l.createRef(),this.m_rectSlider=void 0,this.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0,hoverX:0,bStartMouseDown:!1,bEndMouseDown:!1,thumbnailURL:""}}OnMouseDown(e,t){if(this.m_elSlider){e.persist(),this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();let a={};"start"===t?(a={bStartMouseDown:!0},e.stopPropagation()):"end"===t?(a={bEndMouseDown:!0},e.stopPropagation()):a={bGrabberMouseDown:!0},this.setState(a,(()=>this.AdjustSliderForClientX(e.clientX))),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}}OnMouseMove(e){this.AdjustSliderForClientX(e.clientX)}OnMouseUp(e){this.state.bStartMouseDown?this.setState({bStartMouseDown:!1}):this.state.bEndMouseDown?this.setState({bEndMouseDown:!1}):(this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nGrabberMouseDownTime:0})),this.m_elSlider.current&&(this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp))}OnKeyDown(e){37==e.keyCode?(this.props.video.JumpTime(-15),e.preventDefault()):39==e.keyCode&&(this.props.video.JumpTime(15),e.preventDefault())}AdjustSliderForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),n=t.GetTimelineStartPos()+t.GetTimelineDuration(),o=t.GetTimeAtMousePosition(e,this.m_rectSlider,a,n);if(this.state.bStartMouseDown){const e=Pa.Lh(o,a,t.m_editorEndTime-5);t.m_editorStartTime=e}else if(this.state.bEndMouseDown){const e=Pa.Lh(o,t.m_editorStartTime+5,n);t.m_editorEndTime=e}else o!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:o})}OnMouseHoverMove(e){this.AdjustHoverForClientX(e.clientX)}OnMouseHoverLeave(e){this.setState({hoverX:0})}AdjustHoverForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),n=t.GetTimelineStartPos()+t.GetTimelineDuration();this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();t.GetTimeAtMousePosition(e,this.m_rectSlider,a,n)}OnSegmentClick(e){this.props.video.Seek(e)}OnMarkerMouseEnter(e){this.setState({nHoverValue:e})}OnMarkerMouseLeave(){this.setState({nHoverValue:void 0})}render(){let e=this.props.video,t=this.state.bGrabberMouseDown,a=e.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,m.ETimelineRange.Timeline),n=e.GetPercentOffsetFromTime(e.GetPlaybackTime(),m.ETimelineRange.Timeline),o=e.GetPercentOffsetFromTime(e.GetVideoAvailableStartTime(),m.ETimelineRange.Timeline);o<.05&&(o=0);let i=Pa.Lh(a,0,100).toFixed(1)+"%",s=Pa.Lh(n,0,100).toFixed(1)+"%",r=Pa.Lh(o,0,100).toFixed(1)+"%",c={},d={},p={},u={};t?(u.left=i,c.width=i,d.width=s,p.width=r):(u.left=s,d.width=s,p.width=r);let h=(0,Ra.zB)(e.GetPlaybackTime()),g=(0,Ra.zB)(this.state.nHoverValue),_="STV_timelineContainer";this.state.bGrabberMouseDown&&(_+=" grabberDown"),e.IsTimelineMapActive()&&(_+=" minimapActive");let v="";a=t?a:n,a>100?v=" grabberOffScreenRight grabberOffscreen":a<0&&(v=" grabberOffScreenLeft grabberOffscreen");let S=[];e.GetTimelineMarkers().forEach(((t,a)=>{let n=e.GetPercentOffsetFromTime(t.nTime,m.ETimelineRange.Timeline);n<0||n>100||S.push(l.createElement(nn,{key:a,pos:n,label:t.strTemplateName,onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave}))}));let C=[];e.GetTimelineSegments().forEach(((t,a)=>{let n=e.GetPercentOffsetFromTime(t.nTimeStart,m.ETimelineRange.Timeline);if(n>100)return;let o=e.GetPercentOffsetFromTime(t.nTimeEnd,m.ETimelineRange.Timeline);o<0||C.push(l.createElement(on,{key:a,startPos:n,endPos:o,label:t.strTemplateName,color:t.color,onClick:e=>this.OnSegmentClick(t.nTimeStart)}))}));const b=e.GetPercentOffsetFromTime(e.m_editorStartTime,m.ETimelineRange.Timeline),w=e.GetPercentOffsetFromTime(e.m_editorEndTime,m.ETimelineRange.Timeline),f=this.props.bIncludeClipEditor?[l.createElement(nn,{key:"start",pos:b,label:(0,L.Xx)("#DASHPlayerControls_Start"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"start")}),l.createElement(nn,{key:"end",pos:w,label:(0,L.Xx)("#DASHPlayerControls_End"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"end")})]:[];return l.createElement("div",{className:"videoTimelineMain",tabIndex:0,onKeyDown:this.OnKeyDown},l.createElement("div",{className:_},l.createElement("div",{className:"DialogLabel"},h),l.createElement("div",{className:"STV_timelineSegmentsContainer"},C),l.createElement("div",{onMouseDown:this.OnMouseDown,onMouseMove:this.OnMouseHoverMove,onMouseLeave:this.OnMouseHoverLeave,ref:this.m_elSlider},l.createElement("div",{className:"VideoTimelineSlider"},l.createElement("div",{className:"STV_timelineValue",style:c}),l.createElement("div",{className:"STV_timelineGhostValue",style:d}),l.createElement("div",{className:"STV_timelineNoVideo",style:p}),S,f,Boolean(this.state.hoverX)&&l.createElement("div",{key:"grabbertime",style:{position:"absolute",left:this.state.hoverX-75,bottom:"30px"}},l.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center"}},this.state.thumbnailURL&&l.createElement("img",{style:{width:"150px"},src:this.state.thumbnailURL}),l.createElement("span",{className:"STV_timelineGrabberValue",style:{position:"absolute",bottom:"4px"}},g))),l.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:u},l.createElement("div",{className:"STV_timelineGrabber"+v},l.createElement("div",{className:"STV_timelineGrabberArrow"},l.createElement(B.tEX,null))))))))}};(0,n.gn)([u.ak],sn.prototype,"OnMouseDown",null),(0,n.gn)([u.ak],sn.prototype,"OnMouseMove",null),(0,n.gn)([u.ak],sn.prototype,"OnMouseUp",null),(0,n.gn)([u.ak],sn.prototype,"OnKeyDown",null),(0,n.gn)([u.ak],sn.prototype,"OnMouseHoverMove",null),(0,n.gn)([u.ak],sn.prototype,"OnMouseHoverLeave",null),(0,n.gn)([u.ak],sn.prototype,"AdjustHoverForClientX",null),(0,n.gn)([u.ak],sn.prototype,"OnSegmentClick",null),(0,n.gn)([u.ak],sn.prototype,"OnMarkerMouseEnter",null),(0,n.gn)([u.ak],sn.prototype,"OnMarkerMouseLeave",null),sn=(0,n.gn)([r.Pi],sn);let rn=class extends l.Component{constructor(){super(...arguments),this.state={info:null}}static getDerivedStateFromProps(e,t){if((!t.info||t.info.m_steamIDBroadcast!==e.steamID)&&(t.info&&(m.BroadcastWatchStore.StopInfo(t.info),t.info=null),e.steamID)){return{info:m.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&m.BroadcastWatchStore.StopInfo(this.state.info)}RenderStreamSwitcher(){const e=this.props.steamID;return Na.rr.stream[e]?l.createElement(ln,{value:e,options:Na.rr.stream,onChange:this.props.onLocalStreamChange}):null}render(){let{info:e}=this.state;if(!e)return null;let t="";e.m_nViewerCount&&(t=(0,Ga.AV)(e.m_nViewerCount));let a=Na.rr.bValid&&Na.rr.stream&&Na.rr.stream[e.m_steamIDBroadcast],n=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&(parseInt(e.m_strAppId)>0||a);const o=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&a&&Na.rr.gidEvent;return l.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&l.createElement(v.m,{className:"broadcastDetailsThumbBlur",src:e.m_strThumbnailUrl,draggable:!1,duration:2500}),l.createElement("div",{className:"BroadcastDetailsHeader"},e&&e.m_strAppTitle&&l.createElement("div",{className:"displayColumn"},l.createElement("div",{className:"Info"},l.createElement("span",{className:"AppTitle"},e.m_strAppTitle),e.m_strTitle&&l.createElement("span",{className:"BroadcastTitle"}," - ",e.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),t&&l.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},l.createElement(B.lsH,null),(0,L.kb)("#Broadcast_ViewerCount",t))),a&&this.props.onOpenLinkInNewWindow&&l.createElement("div",{className:"Actions"},l.createElement("div",{onClick:e=>this.props.onOpenLinkInNewWindow(e,Na.rr.link),className:"BroadcastLink"},Na.rr.linkName))),o&&l.createElement(ka,{gidEvent:Na.rr.gidEvent}),n&&l.createElement(ba,{id:Na.rr.bValid&&Na.rr.stream&&Na.rr.stream[e.m_steamIDBroadcast]?Na.rr.appID:parseInt(e.m_strAppId),type:"game"}))}};rn=(0,n.gn)([r.Pi],rn);class ln extends l.Component{showContextMenu(e){const{options:t,value:a,onChange:n}=this.props,o=Object.keys(t).map((e=>l.createElement(_.Td,{key:e,onSelected:()=>n(e),bChecked:e===a},(0,L.Xx)(t[e]))));(0,c.yV)(l.createElement(_.xV,null,o),e)}render(){const{value:e,options:t}=this.props,a=t[e];return l.createElement("div",{className:"BroadcastLanguage",onClick:this.showContextMenu},l.createElement("span",null," - ",(0,L.Xx)(a)),l.createElement("div",{className:"ContextMenuButton"},l.createElement(B.$gZ,null)))}}(0,n.gn)([u.ak],ln.prototype,"showContextMenu",null);let cn=class extends l.Component{constructor(e){super(e),this.state={sizableRegion:[]}}AddLinkRegion(){return(0,n.mG)(this,void 0,void 0,(function*(){let e=this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:2.5+e,yPosPct:2.5+e,widthPct:20,heightPct:15}),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}))}componentDidUpdate(e){0==e.linkRegions.length&&this.props.linkRegions.forEach(((e,t)=>{this.LoadLinkRegion(e,t)}))}LoadLinkRegion(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:e.left,yPosPct:e.top,widthPct:e.width,heightPct:e.height,link_url:e.url,link_description:e.link_description,link_index:e.link_index}),yield this.setState({sizableRegion:this.state.sizableRegion})}))}OnSaveRegions(){let e;e={links:[]};for(let t=0;t<this.state.sizableRegion.length;t++){let a;a={left:Math.floor(100*this.state.sizableRegion[t].xPosPct),top:Math.floor(100*this.state.sizableRegion[t].yPosPct),width:Math.floor(100*this.state.sizableRegion[t].widthPct),height:Math.floor(100*this.state.sizableRegion[t].heightPct),url:this.state.sizableRegion[t].link_url,link_description:this.state.sizableRegion[t].link_description,link_index:t},e.links.push(a)}this.props.onSaveLinkRegions(e)}DeleteRegion(e){return(0,n.mG)(this,void 0,void 0,(function*(){this.state.sizableRegion.splice(e,1),console.log("keys: ",this.state.sizableRegion.keys),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}))}UpdatePanel(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const a=[...this.state.sizableRegion];a[e]=t,this.setState({sizableRegion:a},(()=>this.OnSaveRegions()))}))}render(){return l.createElement("div",{className:"LinkOverlayContainer"},l.createElement("div",{className:"LinkOverlayValidRegion"},!this.props.editMode&&this.props.linkRegions?this.props.linkRegions.map((e=>{const t=(0,b.A)(e.url);return l.createElement(ze.ns,{key:e.link_index,href:e.url,bForceExternal:t,bUseLinkFilter:t},l.createElement("div",{className:"LinkRegion",style:{left:e.left+"%",top:e.top+"%",width:e.width+"%",height:e.height+"%"}},l.createElement("div",{className:"LinkRegionText"},e.link_description," ")))})):null,this.props.editMode&&this.state.sizableRegion.map(((e,t)=>l.createElement(Ta,{key:100*t+e.xPosPct,index:t,deleteFn:this.DeleteRegion,updateFn:this.UpdatePanel,xPosPct:e.xPosPct,yPosPct:e.yPosPct,widthPct:e.widthPct,heightPct:e.heightPct,link_url:e.link_url,link_description:e.link_description}))),this.props.editMode&&l.createElement("div",{className:"AddLinkRegion",onClick:this.AddLinkRegion},(0,L.Xx)("#SteamTV_AddLinkRegion"))),l.createElement("div",{className:"LinkOverlayInvalidRegion"},l.createElement("div",null,(0,L.Xx)("#SteamTV_LinkRegionReserved"))))}};(0,n.gn)([u.ak],cn.prototype,"AddLinkRegion",null),(0,n.gn)([u.ak],cn.prototype,"LoadLinkRegion",null),(0,n.gn)([u.ak],cn.prototype,"OnSaveRegions",null),(0,n.gn)([u.ak],cn.prototype,"DeleteRegion",null),(0,n.gn)([u.ak],cn.prototype,"UpdatePanel",null),cn=(0,n.gn)([r.Pi],cn)},45922:(e,t,a)=>{"use strict";a.d(t,{M:()=>l});var n=a(85556),o=a(83217),i=a(66866),s=a(14206),r=a.n(s);class l extends o.u{constructor(){super()}BInitialized(){return!0}GetServerTime(){return i.De.PAGE_TIMESTAMP+Math.floor(performance.now()/1e3)}RequestEmoticonListInternal(){return(0,n.mG)(this,void 0,void 0,(function*(){let e=[];try{let t=yield r().get(i.De.CHAT_BASE_URL+"actions/EmoticonData",{withCredentials:!0});if(t.data.emoticons)for(let a of t.data.emoticons){let t=a.name;if(t.startsWith("^"))e.push({name:t});else{let n={name:t.substr(1,t.length-2)},o=n.name.toLowerCase();o!=n.name&&(n.name_normalized=o),a.time_last_used&&(n.last_used=a.time_last_used),a.use_count&&(n.use_count=a.use_count),a.time_received&&(n.time_received=a.time_received),a.appid&&(n.appid=a.appid),e.push(n)}}}catch(e){console.error("error loading emoticon list",e)}this.OnEmoticonListReceived(e)}))}}new l}}]);