










/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
****/
(self.webpackChunk_steam_friendsui=self.webpackChunk_steam_friendsui||[]).push([[7653],{59054:e=>{e.exports={GreenButton:"storebuttons_GreenButton_H-pBU",GreyButton:"storebuttons_GreyButton_3ISWI",BlueButton:"storebuttons_BlueButton_1g4l9"}},32654:e=>{e.exports={BroadcastPlayerLite:"broadcastplayer_BroadcastPlayerLite_SAxf3",BroadcastPlayerLiteVideo:"broadcastplayer_BroadcastPlayerLiteVideo_yCd0z",BroadcastContext:"broadcastplayer_BroadcastContext_3TnYL",BroadcastPlaceholderImg:"broadcastplayer_BroadcastPlaceholderImg_3hxn9"}},31782:e=>{e.exports={GotSteamDialog:"gameactions_GotSteamDialog_2Qusm",DownloadSteamUrl:"gameactions_DownloadSteamUrl_10lP7",GameName:"gameactions_GameName_1_uzw",Buttons:"gameactions_Buttons_2_Obm",Button:"gameactions_Button_2nVaF",LeftButton:"gameactions_LeftButton_3WYyu",AnswerText:"gameactions_AnswerText_hCqVo",ActionText:"gameactions_ActionText_2s5Ns",Footer:"gameactions_Footer_3OKQs",Logo:"gameactions_Logo_2AEA_"}},15034:e=>{e.exports={"duration-app-launch":"800ms",BannerContainer:"deckverified_BannerContainer_29jK3",BannerHeader:"deckverified_BannerHeader_3yxJH",BannerContentDesktop:"deckverified_BannerContentDesktop_Cek1s",BannerContent:"deckverified_BannerContent_2dGPT",LearnMore:"deckverified_LearnMore_2gXzK",DeveloperBlockLinkDesktop:"deckverified_DeveloperBlockLinkDesktop_1lpfU",CategoryIcon:"deckverified_CategoryIcon_3qF71",LearnMoreCtn:"deckverified_LearnMoreCtn_2IcEu",LearnMorePC:"deckverified_LearnMorePC_CrSPf",DialogHeader:"deckverified_DialogHeader_ZEuE1",DialogTitle:"deckverified_DialogTitle_2WJTd",AppTitleCategory:"deckverified_AppTitleCategory_23sFZ",CompatibilityDetailsStillLearning:"deckverified_CompatibilityDetailsStillLearning_1WWwt",CompatibilityDetailsContainerDesktop:"deckverified_CompatibilityDetailsContainerDesktop_2ADsv",CompatibilityDetailsContainer:"deckverified_CompatibilityDetailsContainer_1-O8t",CompatibilityDetailsInterior_NoScroll:"deckverified_CompatibilityDetailsInterior_NoScroll_3oQPV",CompatibilityDetailsInterior_Scroll:"deckverified_CompatibilityDetailsInterior_Scroll_2uCLc",CompatibilityDetailsRow:"deckverified_CompatibilityDetailsRow_32fPp",CompatibilityDetailRatingSummary:"deckverified_CompatibilityDetailRatingSummary_mJGYS",Verified:"deckverified_Verified_ewmg-",Playable:"deckverified_Playable_1n8va",Unsupported:"deckverified_Unsupported_2Q0ld",CompatibilityDetailRatingDescription:"deckverified_CompatibilityDetailRatingDescription_3456E",CompatibilityDetailsSeparator:"deckverified_CompatibilityDetailsSeparator_2mwbd",CompatibilityDetailsResultIcon:"deckverified_CompatibilityDetailsResultIcon_-L3Xu",CompatabilityDetailsNoteContainer:"deckverified_CompatabilityDetailsNoteContainer_6_voo",CompatibilityNotes:"deckverified_CompatibilityNotes_1aoam",CompatibilityDetailsNoteRow:"deckverified_CompatibilityDetailsNoteRow_1Wu_j",DeveloperBlogYButton:"deckverified_DeveloperBlogYButton_3avWD",Divider:"deckverified_Divider_1ikdM",DeveloperComments_Anchor:"deckverified_DeveloperComments_Anchor__JTh9",DeveloperComments_Icon:"deckverified_DeveloperComments_Icon_2R6eC",DeveloperComments_LinkNoIcon:"deckverified_DeveloperComments_LinkNoIcon_1zjwW",DeveloperComments_LinkIcon:"deckverified_DeveloperComments_LinkIcon_3OZNU"}},25509:e=>{e.exports={AddToCartAnchorCtn:"addtocartbutton_AddToCartAnchorCtn_2ZqO4",Action:"addtocartbutton_Action_yoe6d",ActionOutOfStock:"addtocartbutton_ActionOutOfStock_3XwnF"}},15515:e=>{e.exports={DevSummaryCtn:"creatorhomeembed_DevSummaryCtn_1k0S-",LargeFormat:"creatorhomeembed_LargeFormat_1090T",CreatorDescCtn:"creatorhomeembed_CreatorDescCtn_3nKoQ",SmallFormat:"creatorhomeembed_SmallFormat_18tLe",DevSummaryWidgetCtn:"creatorhomeembed_DevSummaryWidgetCtn_A2B2V",DevSummaryBackground:"creatorhomeembed_DevSummaryBackground_1TsqA",DevSummaryContent:"creatorhomeembed_DevSummaryContent_23xa4",Avatar:"creatorhomeembed_Avatar_3Jepb",CreatorTitleCtn:"creatorhomeembed_CreatorTitleCtn_2T8Ub",CreatorNameName:"creatorhomeembed_CreatorNameName_8196l",CreatorTagline:"creatorhomeembed_CreatorTagline_NX5We",Title:"creatorhomeembed_Title_37vyV",Followers:"creatorhomeembed_Followers_2ZpFi",SocialFollowersCtn:"creatorhomeembed_SocialFollowersCtn_BT3Bj",VerticalFollowBtnCtn:"creatorhomeembed_VerticalFollowBtnCtn_3oN8F",FollowBtnCtn:"creatorhomeembed_FollowBtnCtn_2artm",FollowButton:"creatorhomeembed_FollowButton_1HwWX",FollowBtnText:"creatorhomeembed_FollowBtnText_1a5dj",SocialContainer:"creatorhomeembed_SocialContainer_1o1Ds",SocialImg:"creatorhomeembed_SocialImg_2v_K1",SocialLink:"creatorhomeembed_SocialLink_3eCVb",CuratorHoverCtn:"creatorhomeembed_CuratorHoverCtn_30j_R",AvatarLink:"creatorhomeembed_AvatarLink_1N0rY",MembersListLink:"creatorhomeembed_MembersListLink_3DO0N"}},74164:e=>{e.exports={DemoButton:"demobutton_DemoButton_3euSF",DisabledButton:"demobutton_DisabledButton_3Fsf5"}},39013:e=>{e.exports={"duration-app-launch":"800ms",HoverContentTransition:"gamehover_HoverContentTransition_3-pnC",Opening:"gamehover_Opening_3A24v",Open:"gamehover_Open_1rWYa",ItemHoverSource:"gamehover_ItemHoverSource_2ByoT",Selectable:"gamehover_Selectable_Hvshc",GameHoverCapsuleCtn:"gamehover_GameHoverCapsuleCtn_2jsr3",UseHidingBottomHalf:"gamehover_UseHidingBottomHalf_5hPHC",TrailerAnchorStoreLink:"gamehover_TrailerAnchorStoreLink_OxANH",TrailerCtn:"gamehover_TrailerCtn_1I27K",FullDivImage:"gamehover_FullDivImage_2jpCs",Transparent:"gamehover_Transparent_AZ9GL",Midline:"gamehover_Midline_Xwe3c",Price:"gamehover_Price_2Eh6G",CapsuleImageAnchorPoint:"gamehover_CapsuleImageAnchorPoint_1OMas",CapsuleImageCtn:"gamehover_CapsuleImageCtn_wm-2T",WithCornerShine:"gamehover_WithCornerShine_2kRKA",DemoButton:"gamehover_DemoButton_2V6ci",WishlistButton:"gamehover_WishlistButton_3notz",WishlistButtonText:"gamehover_WishlistButtonText_VI5mZ",WishlistLoadingText:"gamehover_WishlistLoadingText_7-s8T",WishlistButtonNotTop:"gamehover_WishlistButtonNotTop_3VcyY",BottomShelf:"gamehover_BottomShelf_oAqlZ",BottomShelfOffScreen:"gamehover_BottomShelfOffScreen_36zpR",TextContent:"gamehover_TextContent_2VvFL",GameTitle:"gamehover_GameTitle_405wj",TagRow:"gamehover_TagRow_2SWQM",Tags:"gamehover_Tags_fTGVi",Tag:"gamehover_Tag_1wO-t",PlatformDisplay:"gamehover_PlatformDisplay_2UG4_",ReviewsAndRelease:"gamehover_ReviewsAndRelease_1HFUC",ReleaseDate:"gamehover_ReleaseDate_35Bya",ReleasePrefix:"gamehover_ReleasePrefix_2ZKEX",ReviewScore:"gamehover_ReviewScore_3qvpp",ReviewScoreHeader:"gamehover_ReviewScoreHeader_2t-0j",ReviewScoreCount:"gamehover_ReviewScoreCount_1wXL_",ReviewScoreValue:"gamehover_ReviewScoreValue_3ZWs0",ReviewScoreDivider:"gamehover_ReviewScoreDivider_RjCBt",ReviewScoreNone:"gamehover_ReviewScoreNone_3TKyM",ReviewScoreLow:"gamehover_ReviewScoreLow_3nU5I",ReviewScoreMixed:"gamehover_ReviewScoreMixed_11Q2_",ReviewScoreHigh:"gamehover_ReviewScoreHigh_3wXHC",ReviewScorePercentage:"gamehover_ReviewScorePercentage_38dPa",ReviewScoreLabel:"gamehover_ReviewScoreLabel_2nuoO",GameHoverCreatorFollowButtonCtn:"gamehover_GameHoverCreatorFollowButtonCtn_1mQuB"}},45090:e=>{e.exports={"duration-app-launch":"800ms",narrowWidth:"500px",SaleSection:"partnersaledisplay_SaleSection_1cOoC",CarouselDisplay:"partnersaledisplay_CarouselDisplay_mntHD",SaleSectionCtn:"partnersaledisplay_SaleSectionCtn_i2PTz",SaleHeaderContainer:"partnersaledisplay_SaleHeaderContainer_W4mvn",SaleSectionTabs:"partnersaledisplay_SaleSectionTabs_1FPIV",SaleViewAll:"partnersaledisplay_SaleViewAll_1bsBz",SaleSectionLoginPrompt:"partnersaledisplay_SaleSectionLoginPrompt_2-dSB",LoginButton:"partnersaledisplay_LoginButton_3h6sH",SaleSectionLivePreview:"partnersaledisplay_SaleSectionLivePreview_2dBAh",Hover:"partnersaledisplay_Hover_15Ffa",JumpedTo:"partnersaledisplay_JumpedTo_d-8MO",JumpToSection:"partnersaledisplay_JumpToSection_tlI9r",JumpToButton:"partnersaledisplay_JumpToButton_eOemW",SaleOverlayCtn:"partnersaledisplay_SaleOverlayCtn_3GTIc",SaleOverlay:"partnersaledisplay_SaleOverlay_1sZo8",CarouselCapsuleBordered:"partnersaledisplay_CarouselCapsuleBordered_31OAy",CarouselCapsuleAnimated:"partnersaledisplay_CarouselCapsuleAnimated_3V1O5",AppSummaryWidgetCtn:"partnersaledisplay_AppSummaryWidgetCtn_2H8Bm",CarouselSalePageCapsule:"partnersaledisplay_CarouselSalePageCapsule_3r4Ny",SaleBroadcastCtn:"partnersaledisplay_SaleBroadcastCtn_1SFMh",SaleOuterContainer:"partnersaledisplay_SaleOuterContainer_150kd",CustomStyle_together:"partnersaledisplay_CustomStyle_together_1lAyg",SaleNewSizing:"partnersaledisplay_SaleNewSizing_1v-BV",SalePageLogoSet:"partnersaledisplay_SalePageLogoSet_JxIGH",SaleBackground:"partnersaledisplay_SaleBackground_2N8Se",SaleSectionTitleCtn:"partnersaledisplay_SaleSectionTitleCtn_bE2EA",SaleSectionSubtext:"partnersaledisplay_SaleSectionSubtext_17Fnl",SaleSectionContainer:"partnersaledisplay_SaleSectionContainer_W9_WA",vr_supported:"partnersaledisplay_vr_supported_1BDSJ",vr_required:"partnersaledisplay_vr_required_1P__h",preview_placeholder_section:"partnersaledisplay_preview_placeholder_section_3QLsj",LinkCapsule:"partnersaledisplay_LinkCapsule_2zVSa",fullscreen_bg:"partnersaledisplay_fullscreen_bg_j2ykT",fullscreen_bg_video:"partnersaledisplay_fullscreen_bg_video_3BU-y",SalePageBroadcastContextHover:"partnersaledisplay_SalePageBroadcastContextHover_hbVdl",AlbumCoverImage:"partnersaledisplay_AlbumCoverImage_2JfUA",AlbumTitle:"partnersaledisplay_AlbumTitle_keaMw",SaleSectionTabListContainer:"partnersaledisplay_SaleSectionTabListContainer_2VZtq",MobileTabSelector:"partnersaledisplay_MobileTabSelector_2fm5T",Visible:"partnersaledisplay_Visible_2Jmo5",MobileTabSelectorButton:"partnersaledisplay_MobileTabSelectorButton_1t4-3",MobileTabSelectorShortcut:"partnersaledisplay_MobileTabSelectorShortcut_1P5tc",DesktopTabs:"partnersaledisplay_DesktopTabs_2utXv",MobileTabSelectorDropDown:"partnersaledisplay_MobileTabSelectorDropDown_3KO7Y",MobileTabSelectorOption:"partnersaledisplay_MobileTabSelectorOption_GiTJl",TabContentsContainer:"partnersaledisplay_TabContentsContainer_2xJbu",HorizontalScrollInDragForceCursor:"partnersaledisplay_HorizontalScrollInDragForceCursor_nemO6",SaleBroadcastSection:"partnersaledisplay_SaleBroadcastSection_1u0IZ",CarouselPage:"partnersaledisplay_CarouselPage_Hlkuk",TabButtonsCtn:"partnersaledisplay_TabButtonsCtn_21-6t",TabButton:"partnersaledisplay_TabButton_1Gz4s",SaleTabLabel:"partnersaledisplay_SaleTabLabel_2mYMQ",DefaultCreatorCtn:"partnersaledisplay_DefaultCreatorCtn_3KzJ1",EventSectionViewAllCtn:"partnersaledisplay_EventSectionViewAllCtn_1B6gV",SaleSectionBackgroundImageGroupEdit:"partnersaledisplay_SaleSectionBackgroundImageGroupEdit_2a4me"}},6933:e=>{e.exports={"duration-app-launch":"800ms",narrowWidth:"500px",headerCapsuleImgWidth:"460",headerCapsuleImgHeight:"215",mainCapsuleImgWidth:"616",mainCapsuleImgHeight:"353",libraryAssetImgWidth:"300",libraryAssetImgHeight:"450",heroCapsuleImgWidth:"374",heroCapsuleImgHeight:"448",StoreSaleWidgetContainer:"salepreviewwidgets_StoreSaleWidgetContainer_2hhNO",LibraryAssetExpandedDisplay:"salepreviewwidgets_LibraryAssetExpandedDisplay_PZY_7",SaleItemDefaultCapsuleDisplay:"salepreviewwidgets_SaleItemDefaultCapsuleDisplay_37igg",MarketingMessage:"salepreviewwidgets_MarketingMessage_3_q87",StoreSaleWidgetRight:"salepreviewwidgets_StoreSaleWidgetRight_v9uRg",StoreSaleWidgetHalfLeft:"salepreviewwidgets_StoreSaleWidgetHalfLeft_111nf",StoreSaleWidgetTitle:"salepreviewwidgets_StoreSaleWidgetTitle_2ekpT",StoreSaleDiscountBox:"salepreviewwidgets_StoreSaleDiscountBox_cnkoF",StoreSaleWidgetLibraryAssetExtendedTop:"salepreviewwidgets_StoreSaleWidgetLibraryAssetExtendedTop_1uLNB",StoreSaleWidgetImage:"salepreviewwidgets_StoreSaleWidgetImage_yvqq8",CapsuleMicroTrailer:"salepreviewwidgets_CapsuleMicroTrailer_1M7n5",CapsulePlatform:"salepreviewwidgets_CapsulePlatform_2bCf9",StoreSaleWidgetContents:"salepreviewwidgets_StoreSaleWidgetContents_Agwfe",StoreMetaDataCtn:"salepreviewwidgets_StoreMetaDataCtn_2W2g3",StoreSaleItemRelease:"salepreviewwidgets_StoreSaleItemRelease_vCEpe",StoreSaleItemDev:"salepreviewwidgets_StoreSaleItemDev_3tIbO",StoreSaleItemReview:"salepreviewwidgets_StoreSaleItemReview_Kx5Nf",StoreSaleWidgetLeft:"salepreviewwidgets_StoreSaleWidgetLeft_3DkfN",TitleCtn:"salepreviewwidgets_TitleCtn_3rrH9",StoreSaleWidgetCrossCenterRight:"salepreviewwidgets_StoreSaleWidgetCrossCenterRight_oW0H1",CapsuleBottomBar:"salepreviewwidgets_CapsuleBottomBar_3lmdE",PlayNowButton:"salepreviewwidgets_PlayNowButton_38ePa",AddToLibraryButton:"salepreviewwidgets_AddToLibraryButton_1DrDh",StoreActionWidgetContainer:"salepreviewwidgets_StoreActionWidgetContainer_kW6m4",StoreSalePriceWidgetContainer:"salepreviewwidgets_StoreSalePriceWidgetContainer_2s-O5",StoreSaleWidgetBgTint:"salepreviewwidgets_StoreSaleWidgetBgTint_MvLJD",LibraryFallbackAssetImageContainer:"salepreviewwidgets_LibraryFallbackAssetImageContainer_1APLS",FallbackBackground:"salepreviewwidgets_FallbackBackground_3chRZ",SaleTagBlockCtn:"salepreviewwidgets_SaleTagBlockCtn_1ZqQL",StoreSaleWidgetCenter:"salepreviewwidgets_StoreSaleWidgetCenter_2asUT",StoreSaleWidgetReleaseAndTags:"salepreviewwidgets_StoreSaleWidgetReleaseAndTags_3wryh",Bundle:"salepreviewwidgets_Bundle_2GbhL",WidgetReleaseDateAndPlatformCtn:"salepreviewwidgets_WidgetReleaseDateAndPlatformCtn_3a6HR",SaleItemBrowserRow:"salepreviewwidgets_SaleItemBrowserRow_gASJ2",StoreSaleWidgetRelease:"salepreviewwidgets_StoreSaleWidgetRelease_1qvTF",StoreSaleWidgetTags:"salepreviewwidgets_StoreSaleWidgetTags_2bkP-",AppTag:"salepreviewwidgets_AppTag_3FJnZ",StoreSaleWidgetShortDesc:"salepreviewwidgets_StoreSaleWidgetShortDesc_3AsE5",LargeText:"salepreviewwidgets_LargeText_3FqDA",TagTitle:"salepreviewwidgets_TagTitle_v1i4W",TagBox:"salepreviewwidgets_TagBox_1lqaD",Tag:"salepreviewwidgets_Tag_33yqk",Categories:"salepreviewwidgets_Categories_2hr4J",SaleItemFullCapsuleDisplay:"salepreviewwidgets_SaleItemFullCapsuleDisplay_2sVvR",Category:"salepreviewwidgets_Category_2lQNY",CategoryIcon:"salepreviewwidgets_CategoryIcon_2RJxW",BundleContentPreview:"salepreviewwidgets_BundleContentPreview_jQ5Ga",StoreSaleBroadcastWidgetRight:"salepreviewwidgets_StoreSaleBroadcastWidgetRight_9VjYX",StoreSalePriceActionWidgetContainer:"salepreviewwidgets_StoreSalePriceActionWidgetContainer_1JuIp",Discounted:"salepreviewwidgets_Discounted_1g0B-",WishList:"salepreviewwidgets_WishList_1djkd",Action:"salepreviewwidgets_Action_2zssE",SingleLineMode:"salepreviewwidgets_SingleLineMode_1ZlGJ",StoreSaleDiscountedPriceCtn:"salepreviewwidgets_StoreSaleDiscountedPriceCtn_3NhLu",StoreSalePriceBox:"salepreviewwidgets_StoreSalePriceBox_3j4dI",StoreSaleNewItem:"salepreviewwidgets_StoreSaleNewItem_2_KY_",StoreOriginalPrice:"salepreviewwidgets_StoreOriginalPrice_3fFFs",PrePurchase:"salepreviewwidgets_PrePurchase_2f7BM",NewItem:"salepreviewwidgets_NewItem_2xCT1",PurchaseOptionDetails:"salepreviewwidgets_PurchaseOptionDetails_17_yn",InGameHover:"salepreviewwidgets_InGameHover_axjdi",StoreSalePrepurchaseLabel:"salepreviewwidgets_StoreSalePrepurchaseLabel_1Fru-",SingleLineOriginalPrice:"salepreviewwidgets_SingleLineOriginalPrice_t7Gt8",BaseDiscount:"salepreviewwidgets_BaseDiscount_3mInD",StoreSalePriceButton:"salepreviewwidgets_StoreSalePriceButton_1BejQ",OuterCapsuleContainer:"salepreviewwidgets_OuterCapsuleContainer_1dKR2",BottomBarPriceInfo:"salepreviewwidgets_BottomBarPriceInfo_1X3j2",CapsuleContainer:"salepreviewwidgets_CapsuleContainer_22Acx",Linked:"salepreviewwidgets_Linked_3b7bz",EventRow:"salepreviewwidgets_EventRow_1UMFn",Muted:"salepreviewwidgets_Muted_1HVwz",BottomCreatorRow:"salepreviewwidgets_BottomCreatorRow_1JrUu",CreatorLogo:"salepreviewwidgets_CreatorLogo_3Krfu",CreatorName:"salepreviewwidgets_CreatorName_Fmi-a",AddToCartButton:"salepreviewwidgets_AddToCartButton_2iWMR",AddToWishlistButton:"salepreviewwidgets_AddToWishlistButton_2YfaL",HeaderCapsuleImageContainer:"salepreviewwidgets_HeaderCapsuleImageContainer_2oW_y",MainCapsuleImageContainer:"salepreviewwidgets_MainCapsuleImageContainer_1vpxH",HeroCapsuleImageContainer:"salepreviewwidgets_HeroCapsuleImageContainer_vnhlb",DiscoveryQueueCtn:"salepreviewwidgets_DiscoveryQueueCtn_2uX2G",VerticalCapsule:"salepreviewwidgets_VerticalCapsule_3sy8X",ForceLibrarySizing:"salepreviewwidgets_ForceLibrarySizing_25KI3",CapsuleImage:"salepreviewwidgets_CapsuleImage_2eQ4m",LinkCapsuleImage:"salepreviewwidgets_LinkCapsuleImage_2xO8H",CapsuleParentInfo:"salepreviewwidgets_CapsuleParentInfo_2erfW",ParentType:"salepreviewwidgets_ParentType_3FCPP",Banner:"salepreviewwidgets_Banner_2gxv9",Blue:"salepreviewwidgets_Blue_2o-5t",LinesImg:"salepreviewwidgets_LinesImg_3LecB",CapsuleDecorators:"salepreviewwidgets_CapsuleDecorators_1xNQc",BundleContentsCtnTransition:"salepreviewwidgets_BundleContentsCtnTransition_24KNc",Expanding:"salepreviewwidgets_Expanding_38KIq",Expanded:"salepreviewwidgets_Expanded_hPc1l",Collapsing:"salepreviewwidgets_Collapsing_2NmI1",BundleContentsCtn:"salepreviewwidgets_BundleContentsCtn_34acu",BundleContentsTitle:"salepreviewwidgets_BundleContentsTitle_hhdk8",BundleShowButton:"salepreviewwidgets_BundleShowButton_2Vu78",ShowContentsButton:"salepreviewwidgets_ShowContentsButton_-VlK4",ShowContentsSection:"salepreviewwidgets_ShowContentsSection_fsPeL",BundleContentItem:"salepreviewwidgets_BundleContentItem_2sdNO",StoreSaleWidgetOuterContainer:"salepreviewwidgets_StoreSaleWidgetOuterContainer_1_P15",ContentsCount:"salepreviewwidgets_ContentsCount_353Lz",PreviewCtn:"salepreviewwidgets_PreviewCtn_1NM53",PreviewItem:"salepreviewwidgets_PreviewItem_2yhQb",DeckCompatIcon:"salepreviewwidgets_DeckCompatIcon_1Nju8",PreviewImg:"salepreviewwidgets_PreviewImg_1jx70",DemoLayoutPopup:"salepreviewwidgets_DemoLayoutPopup_2tmp2",FreeWeekendBar:"salepreviewwidgets_FreeWeekendBar_2SCof",FreeWeekendLabel:"salepreviewwidgets_FreeWeekendLabel_21B6L",RecommendationReason:"salepreviewwidgets_RecommendationReason_3Q_ta",LocalizationSpan:"salepreviewwidgets_LocalizationSpan_3bCSm",CapsuleName:"salepreviewwidgets_CapsuleName_31P1R",DiscountIconCtn:"salepreviewwidgets_DiscountIconCtn_3Qt9S",MaxActionButtonWidth:"salepreviewwidgets_MaxActionButtonWidth_3GOwB"}},82149:e=>{e.exports={bordered_live_stream_icon:"liveicon_bordered_live_stream_icon_2R1rY"}},53797:e=>{e.exports={RemoteOptions:"remoteaddtolibrary_RemoteOptions_VXRlK",InlineLink:"remoteaddtolibrary_InlineLink_2nbJa",GameName:"remoteaddtolibrary_GameName_3JEpW",DownloadStartedCtn:"remoteaddtolibrary_DownloadStartedCtn_3sIQP",LearnMoreCtn:"remoteaddtolibrary_LearnMoreCtn_1NnPh",ActionRow:"remoteaddtolibrary_ActionRow_27L3S",ClientSelector:"remoteaddtolibrary_ClientSelector_1qACT",ClientName:"remoteaddtolibrary_ClientName_2BCwR",Icon:"remoteaddtolibrary_Icon_n5UB1"}},95623:e=>{e.exports={Link:"salebanner_Link_-HlDB",Banner:"salebanner_Banner_2bT8i",Big:"salebanner_Big_sGy-b",Mobile:"salebanner_Mobile_mhii5"}},49434:e=>{e.exports={PopupScreenshotModal:"screenshotpopout_PopupScreenshotModal_yloqx",PopupScreenshotContainer:"screenshotpopout_PopupScreenshotContainer_1wwvw",PopupScreenshot:"screenshotpopout_PopupScreenshot_31XZu",ButtonCtn:"screenshotpopout_ButtonCtn_3Mysp",ButtonIcon:"screenshotpopout_ButtonIcon_1tCO1",Disabled:"screenshotpopout_Disabled_1a_f8"}},20516:e=>{e.exports={CompatIcon:"deckcompaticons_CompatIcon_3cEK5"}},48036:e=>{e.exports={ErrorDiv:"image_ErrorDiv_2FXME"}},83279:e=>{e.exports={PreviewCtn:"expandableimage_PreviewCtn_16Skn",SVG:"expandableimage_SVG_3Mns5"}},48988:e=>{e.exports={ClientSelectDropdown:"clientsessionselect_ClientSelectDropdown_36ai7",ClientListDropdownMenu:"clientsessionselect_ClientListDropdownMenu_bEY2j"}},73280:e=>{e.exports={LinkRegionDragBox:"linkregionbox_LinkRegionDragBox_Rtlc-",EdgeDown:"linkregionbox_EdgeDown_i9zrH",LinkRegionGridBox:"linkregionbox_LinkRegionGridBox_1Ob4A",LinkRegionEdge:"linkregionbox_LinkRegionEdge_2stP4",TopLeft:"linkregionbox_TopLeft_Clgi-",Top:"linkregionbox_Top_2Z9Vy",TopRight:"linkregionbox_TopRight_2-8Db",Left:"linkregionbox_Left_3ZwUw",Middle:"linkregionbox_Middle_1Heco",LinkRegionDelete:"linkregionbox_LinkRegionDelete_3Hb3w",LinkRegionSettings:"linkregionbox_LinkRegionSettings_VazMl",Right:"linkregionbox_Right_3h5fK",BottomLeft:"linkregionbox_BottomLeft_2CQe0",Bottom:"linkregionbox_Bottom_sIHlK",BottomRight:"linkregionbox_BottomRight_3lnwj",topleft:"linkregionbox_topleft_3W096",top:"linkregionbox_top_1iRW1",topright:"linkregionbox_topright_1Yrl7",left:"linkregionbox_left_2iBrm",right:"linkregionbox_right_15t6A",bottomleft:"linkregionbox_bottomleft_3SdBc",bottom:"linkregionbox_bottom_2kzZ9",bottomright:"linkregionbox_bottomright_2AKXk",middle:"linkregionbox_middle_1CS75",LinkRegionButtonContainer:"linkregionbox_LinkRegionButtonContainer_1ZJ42",DialogButton:"linkregionbox_DialogButton_nN2Q1",LinkRegionInfo:"linkregionbox_LinkRegionInfo_3TiV7",LinkText:"linkregionbox_LinkText_2TAc2"}},90890:e=>{e.exports={Loading:"loadingspinner_Loading_24C5l",LoadingSpinnerAmin:"loadingspinner_LoadingSpinnerAmin_15h2O",Small:"loadingspinner_Small_2FPxE",Medium:"loadingspinner_Medium_2FfWb",Large:"loadingspinner_Large_30IMo"}},33264:e=>{e.exports={strMaxMobileWidth:"700px",strMaxResponsiveWidth:"910px"}},94909:(e,t,a)=>{"use strict";a.d(t,{FF:()=>U,CBroadcastApp:()=>R});var n=a(34629),o=a(41993),s=a(51533),r=a(63696),i=a(77869),l=a(34124),c=a(25391),d=a(90573),m=a(87460),p=a(10659),u=a(58959),h=a(22946);const g=({group:e,onClick:t})=>{const a=e.watching_broadcast_steamid;return r.createElement("button",{className:"ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",onClick:t},r.createElement("div",{className:"ChatRoomListGroupItem_header"},r.createElement(u.I,{group:e,small:!0}),r.createElement("div",{className:"groupNameStatusContainer"},r.createElement("div",{className:"chatRoomName"},e.name),a&&r.createElement("div",{className:"chatRoomDetails"},(0,d.we)("#Broadcast_WatchParty_Viewers_NoneActive")))))};class _ extends r.Component{CreateWatchParty(e=!1){const{browserContext:t,ownerWindow:a,broadcastAccountId:n,initialFriend:s}=this.props;this.Close();const i=e&&s?[s.accountid]:[];!function(e,t,a,n){(0,l.HT)(r.createElement(m.zw,{browserContext:e,bHideChatNameEntry:!1,vecInvitePlayers:n,chatViewToReplace:void 0,creationOptions:{unBroadcastAccountId:a},strTitle:(0,d.we)("#Broadcast_CreateWatchParty")}),t,"CreateChatDialog",{strTitle:(0,d.we)("#Broadcast_CreateWatchParty"),popupWidth:450,popupHeight:600},(0,o.h8)(t))}(t,a||window,n,i)}WatchAlone(){this.Close()}UpgradeExisting(e){const{broadcastAccountId:t,browserContext:a,broadcastChannelID:n,broadcastTabId:o}=this.props;this.Close(),n?e.SetChatRoomGroupWatchingBroadcast(void 0,n):e.SetChatRoomGroupWatchingBroadcast(t);const r=s.xm.UIStore.ShowAndOrActivateChatRoomGroup(a,e,!0);o&&s.xm.UIStore.CloseTabByID(o),this.props.bIsNewSteamTVDialog||r.ShowBroadcast()}Close(){const{closeModal:e}=this.props;e&&e()}render(){const{closeModal:e,initialFriend:t}=this.props,a=s.xm.ChatStore.currentChatRoomGroups.filter((e=>e.BCanIAssociateBroadcast())),n=t;return r.createElement("div",{className:"chatModalCover"},r.createElement(l.x_,{onEscKeypress:e},r.createElement(c.UC,{className:"watchPartyDialog"},r.createElement(c.nB,null,r.createElement("div",{className:"watchPartyPrompt"},(0,d.we)("#Broadcast_WatchPrompt")),r.createElement(c.xz,null,!this.props.bIsNewSteamTVDialog&&r.createElement(c.$n,{svgicon:i.Gv$,className:"watchHowButton",onClick:this.WatchAlone},(0,d.we)("#Broadcast_WatchAlone")),n&&r.createElement(c.$n,{className:"watchHowButton",onClick:()=>this.CreateWatchParty(!0)},r.createElement(h.gv,{friend:n,context:null,bLarge:!1}),(0,d.PP)("#Broadcast_WatchWith",r.createElement("span",{className:"highlight"}," ",n.display_name))),0!==a.length&&r.createElement(r.Fragment,null,r.createElement(c.JU,null,(0,d.we)("#Broadcast_WatchWithExistingWatchParty")),a.map((e=>r.createElement(g,{key:e.unique_id,group:e,onClick:()=>this.UpgradeExisting(e)})))),r.createElement(c.$n,{className:"watchHowButton newWatchGroup",svgicon:i.u9R,onClick:()=>this.CreateWatchParty(!1)},(0,d.we)("#Broadcast_LinkBroadcastToGroup_New")))),r.createElement(c.wi,null))))}}(0,n.Cg)([p.oI],_.prototype,"WatchAlone",null),(0,n.Cg)([p.oI],_.prototype,"Close",null);var S=a(89193),C=a(41230),v=a(7470),w=a(28699),f=a(63437),b=a.n(f),y=a(36701),E=a(54069),I=a(28071),D=a(61737),A=a(94364),B=a(81416),k=a(59059),T=a(25552),P=a(14785),L=a(96290),G=a(18262),N=a(97621);class R{constructor(){(0,S.Gn)(this)}m_fnLaunchChat;m_iTimeoutLogin=void 0;m_eLogonState=0;m_bLogonDialogVisisible=!1;m_steamID=void 0;m_reactRoot;Init(e){this.m_fnLaunchChat=e,this.m_steamID=N.GP.steamid,window.addEventListener("message",this.HandlePostMessage),this.m_reactRoot=v.H(document.getElementById("friendslist-container")),this.m_reactRoot.render(r.createElement(M,{app:this})),this.m_iTimeoutLogin=window.setTimeout((()=>{0==this.m_eLogonState&&(this.m_eLogonState=1)}),2500)}LaunchChat(){this.m_reactRoot.unmount(),window.removeEventListener("message",this.HandlePostMessage),window.clearTimeout(this.m_iTimeoutLogin),(0,o.xT)(N.GP.steamid),this.m_fnLaunchChat()}GetLoginURL(){return`${N.TS.STORE_BASE_URL}login/?steamtv`}BIsPerformingLogonCheck(){return 0==this.m_eLogonState||1==this.m_eLogonState}BIsLogonDialogVisible(){return this.m_bLogonDialogVisisible}ShowLogonDialog(){this.m_bLogonDialogVisisible=!0}BReadyToRender(){return 0!=this.m_eLogonState}DismissLogonDialog(){this.m_bLogonDialogVisisible=!1}GetSteamIDWatched(){return this.m_steamID}ExtractOrigin(e){return e.replace(/^(https?:\/\/[^/]*).*$/,"$1")}HandlePostMessage(e){if(e.origin!=this.ExtractOrigin(N.TS.STORE_BASE_URL)&&e.origin!=this.ExtractOrigin(N.TS.CHAT_BASE_URL))return void console.warn(`Ignoring message from untrusted domain "${e.origin}"`);let t=e.data;if(t)if("OnLoginButtonClicked"==t.msg)console.log("Login button clicked"),this.m_bLogonDialogVisisible=!0;else if("LoginNeeded"==t.command)this.m_eLogonState=2;else if("LogonComplete"==t.command)return void this.LaunchChat()}}(0,n.Cg)([S.sH],R.prototype,"m_eLogonState",void 0),(0,n.Cg)([S.sH],R.prototype,"m_bLogonDialogVisisible",void 0),(0,n.Cg)([S.sH],R.prototype,"m_steamID",void 0),(0,n.Cg)([S.XI],R.prototype,"LaunchChat",null),(0,n.Cg)([S.XI.bound],R.prototype,"HandlePostMessage",null);let M=class extends r.Component{m_broadcastInfo=null;constructor(e){super(e),this.m_broadcastInfo=k.BroadcastWatchStore.StartInfo(this.props.app.GetSteamIDWatched()),this.state={bChatCollapsed:!1,bTheaterMode:!1}}componentWillUnmount(){this.m_broadcastInfo&&(k.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnShowLogin(){this.props.app.ShowLogonDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){this.setState({bTheaterMode:!this.state.bTheaterMode})}render(){const e=this.props.app;let t=this.m_broadcastInfo,a=W();return r.createElement(H,null,e.BReadyToRender()&&r.createElement("div",{className:"StandalonePlayer"+(this.state.bTheaterMode?" TheaterMode":"")},r.createElement(T.y,{className:"FullpageBroadcastBackdrop",src:t.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastTab"},r.createElement("div",{className:"StandalonePlayerHeader"},r.createElement("div",{className:"STV_Logo"},r.createElement(i.P7C,null)),r.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},r.createElement(x,{onClick:this.OnShowLogin}),r.createElement(V,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),r.createElement(z,{steamID:e.GetSteamIDWatched(),watchLocation:a,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},r.createElement(q,{app:e})))),r.createElement(F,{app:e}))}};function O(){const e=(0,N.Fd)("loyalty_webapi_token","application_config");return new B.D(N.TS.WEBAPI_BASE_URL,e)}function H(e){const{children:t}=e,a=r.useCallback((()=>s.xm?.CMInterface),[]),n=(0,p.bs)(r.useCallback((()=>new D.A),[])),o=(0,p.bs)(O);return r.createElement(G.s,null,r.createElement(N.ss,null,N.iA.logged_in?r.createElement(I.VQ,{useActiveCMInterface:a,useStorage:n},t):r.createElement(I.VQ,{useActiveSteamInterface:o,useStorage:n},t)))}(0,n.Cg)([p.oI],M.prototype,"OnShowLogin",null),(0,n.Cg)([p.oI],M.prototype,"ToggleChat",null),(0,n.Cg)([p.oI],M.prototype,"ToggleTheaterMode",null),M=(0,n.Cg)([C.PA],M);let F=(0,C.PA)((({app:e})=>e.BIsPerformingLogonCheck()?r.createElement("div",null,r.createElement("iframe",{style:{display:"none"},src:e.GetLoginURL()})):null));function x(e){return r.createElement("div",{className:"BroadcastButton WatchWithFriends",onClick:e.onClick},r.createElement(i.y_e,null),(0,d.we)("#Broadcast_WatchWithFriends"))}function V(e){return r.createElement("div",{className:"ToggleBroadcastChat",title:(0,d.we)("#Broadcast_ToggleChat"),onClick:e.onClick},r.createElement(i.K7s,{showChat:e.hideIcon}))}function W(){return N.TS.STEAM_TV?1:3}let U=class extends r.Component{m_broadcastInfo=null;constructor(e){super(e);let t=this.props.broadcastView.GetSteamID().ConvertTo64BitString();this.m_broadcastInfo=k.BroadcastWatchStore.StartInfo(t),this.state={bChatCollapsed:!1}}componentWillUnmount(){this.m_broadcastInfo&&(k.BroadcastWatchStore.StopInfo(this.m_broadcastInfo),this.m_broadcastInfo=null)}OnWatchWithFriends(){this.props.broadcastView.ShowWatchPromptDialog()}ToggleChat(){this.setState({bChatCollapsed:!this.state.bChatCollapsed})}ToggleTheaterMode(){s.xm.UIStore.SetTheaterMode(!s.xm.UIStore.GetTheaterMode())}render(){const{broadcastView:e,popup:t,style:a}=this.props,n=e.GetSteamID().ConvertTo64BitString();let o=W();const s=e.m_bShowWatchPromptDialog?r.createElement(_,{closeModal:()=>e.HideWatchPromptDialog(),broadcastAccountId:e.GetSteamID().GetAccountID(),broadcastTabId:e.GetUniqueID(),initialFriend:e.m_watchPromptInitialFriend,browserContext:A.m,ownerWindow:t}):null;return r.createElement("div",{className:"BroadcastTab",style:a},r.createElement(T.y,{className:"FullpageBroadcastBackdrop",src:this.m_broadcastInfo.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastTab_OverBackground"},r.createElement("div",{className:"BroadcastTabHeaderContainer"},r.createElement("div",{className:"BroadcastTab_HeaderRow"+(this.state.bChatCollapsed?" ChatCollapsed":"")},r.createElement(x,{onClick:this.OnWatchWithFriends}),r.createElement(V,{onClick:this.ToggleChat,hideIcon:this.state.bChatCollapsed}))),r.createElement(z,{steamID:n,watchLocation:o,bHideChat:this.state.bChatCollapsed,onTheaterMode:this.ToggleTheaterMode},s)))}};(0,n.Cg)([p.oI],U.prototype,"OnWatchWithFriends",null),(0,n.Cg)([p.oI],U.prototype,"ToggleChat",null),(0,n.Cg)([p.oI],U.prototype,"ToggleTheaterMode",null),U=(0,n.Cg)([C.PA],U);let z=class extends r.Component{m_strLocalSteamID="";m_refBroadcastContainer=r.createRef();m_elMainContent;constructor(e){super(e),(0,S.Gn)(this),this.state={info:null}}componentDidMount(){y.td.stream["76561198208088121"]&&"chinese"===N.TS.LANGUAGE?this.OnLocalStreamChange("76561198208088121"):y.td.stream["76561198207552741"]&&"russian"===N.TS.LANGUAGE&&this.OnLocalStreamChange("76561198207552741")}static getDerivedStateFromProps(e,t){if(!t.info||t.info.m_steamIDBroadcast!==e.steamID){t.info&&k.BroadcastWatchStore.StopInfo(t.info);return{info:k.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&k.BroadcastWatchStore.StopInfo(this.state.info)}OnLocalStreamChange(e){this.m_strLocalSteamID=e}SetMainContentRef(e){this.m_elMainContent=e}CalculateBroadcastSectionStyles(e){if(this.props.bHideChat)return{width:"100%",height:"100%"};let t,a;o.ZM&&(t=o.ZM.UIDisplayPrefs.nWatchPartyBroadcastHeightPercentage,a=o.ZM.UIDisplayPrefs.nWatchPartyBroadcastWidthPercentage);const n={};if(e){const e=t||66;if(n.height=`${e}%`,this.m_elMainContent){const{clientWidth:t,clientHeight:a}=this.m_elMainContent,o=9/16*t+50,s=(0,L.OQ)(e,1,o/a*100);n.height=`${s}%`}}else n.width=a?`${a}%`:"66%",n.minWidth=a?`${a}%`:"66%",n.maxWidth="calc( 100% - 316px )",n.overflowY="auto";return n}OnGrabberMouseDown(e){let t=e.currentTarget.ownerDocument.defaultView;t.addEventListener("mousemove",this.HandleMouseMove),t.addEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!0})}HandleMouseMove(e){e.preventDefault(),e.stopPropagation();let t=this.m_refBroadcastContainer.current.getBoundingClientRect(),a=this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect();const n=t.left,s=e.clientX,r=a.width,i=(0,L.OQ)((s-n)/r*100,1,100);o.ZM.SetUIDisplayPref("nWatchPartyBroadcastWidthPercentage",i)}UnregisterDragEvents(e){e.view.removeEventListener("mousemove",this.HandleMouseMove),e.view.removeEventListener("mouseup",this.UnregisterDragEvents),this.setState({bDraggingChatGrabber:!1})}render(){let{steamID:e,children:t}=this.props,a=this.m_strLocalSteamID||e,n=this.state.info.m_bIsOnline,o=null;const i=this.CalculateBroadcastSectionStyles(!1);i.flexGrow=this.props.bHideChat?1:null,y.td.bValid&&(o=r.createElement(j,{info:y.td}));const l=new R,c=r.createElement("div",{className:"LoginDiv"},r.createElement("a",{onClick:()=>l.ShowLogonDialog(),className:b().ChatLoginButton,href:"#"},(0,d.we)("#BroadcastChat_Login")),r.createElement(q,{app:l})),m=k.BroadcastWatchStore.GetBroadcast(a)?k.BroadcastWatchStore.GetBroadcast(a).m_ulBroadcastID:"0";return r.createElement("div",{className:"BroadcastContainer"},r.createElement("div",{className:"BroadcastContainerSection",ref:this.m_refBroadcastContainer,style:i},r.createElement("div",{className:"BroadcastContainerSectionVideoContainer"},n&&r.createElement(E.default,{key:a,steamIDBroadcast:a,watchLocation:this.props.watchLocation,onTheaterMode:this.props.onTheaterMode}),!n&&o,r.createElement("div",{className:"videoContainerSizer"})),t,r.createElement("div",{className:"BroadcastDetailsSection"},r.createElement(E.BroadcastDetails,{steamID:a,onLocalStreamChange:this.OnLocalStreamChange,bVerticalBroadcastChat:!0}))),!this.props.bHideChat&&r.createElement("div",{className:"BroadcastChatDivider horizontal",onMouseDown:this.OnGrabberMouseDown}),r.createElement("div",{className:"BroadcastChatDiv",style:{display:this.props.bHideChat?"none":"flex",flexDirection:"column",width:"100%",minWidth:"300px"}},r.createElement(w.I,{emoticonStore:s.xm?s.xm.ChatStore.EmoticonStore:null,broadcastID:m,steamID:a,watchLocation:this.props.watchLocation,hidden:this.props.bHideChat}),N.iA&&N.iA.logged_in?null:c))}};function j(e){let t=`url( "${N.TS.CHAT_BASE_URL+e.info.offlineImage}" )`;return r.createElement("div",{style:{backgroundImage:t},className:"BroadcastOffline"})}(0,n.Cg)([S.sH],z.prototype,"m_strLocalSteamID",void 0),(0,n.Cg)([p.oI],z.prototype,"OnLocalStreamChange",null),(0,n.Cg)([p.oI],z.prototype,"SetMainContentRef",null),(0,n.Cg)([p.oI],z.prototype,"OnGrabberMouseDown",null),(0,n.Cg)([p.oI],z.prototype,"HandleMouseMove",null),(0,n.Cg)([p.oI],z.prototype,"UnregisterDragEvents",null),z=(0,n.Cg)([C.PA],z);class X extends r.Component{Dismiss(){this.props.app.DismissLogonDialog()}render(){return r.createElement(P.x_,{onEscKeypress:this.Dismiss},r.createElement(c.UC,{className:"SteamTVLoginDialog"},r.createElement("iframe",{className:"steamTVLogin",src:this.props.app.GetLoginURL()})))}}(0,n.Cg)([p.oI],X.prototype,"Dismiss",null);let q=class extends r.Component{render(){if(!this.props.app.BIsLogonDialogVisible())return null;let e=r.createElement(X,{app:this.props.app});return r.createElement("div",{className:"FullModalOverlay"},r.createElement("div",{className:"ModalOverlayContent ModalOverlayBackground"}),r.createElement("div",{className:"ModalOverlayContent active"},e))}};q=(0,n.Cg)([C.PA],q)},21638:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(34629),o=a(63696),s=a(94909),r=a(41230),i=a(6790);let l=class extends o.Component{render(){let e=this.props.broadcastView;if(!(e&&e instanceof i.w))return null;let t={};return this.props.isActive||(t.display="none"),o.createElement(s.FF,{style:t,broadcastView:e,popup:this.props.popup})}};l=(0,n.Cg)([r.PA],l);const c=l},62393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(63696),o=a(54069),s=a(68282);const r=n.forwardRef((function({steamID:e,localSteamID:t,watchLocation:a,bWebRTC:r,style:i,onRequestClose:l,actions:c,onTheaterMode:d,onLocalStreamChange:m,bVerticalBroadcastChat:p},u){const h=t||e;return n.createElement("div",{ref:u,style:{display:"flex",flexDirection:"column",...i}},n.createElement("div",{className:"BroadcastSection"},n.createElement(o.default,{key:h,steamIDBroadcast:h,watchLocation:a,bWebRTC:r,onRequestClose:l,actions:c,onTheaterMode:d,onOpenLinkInNewWindow:s.EP}),n.createElement("div",{className:"videoContainerSizer"})),n.createElement("div",{className:"BroadcastDetailsSection"},n.createElement(o.BroadcastDetails,{steamID:h,onLocalStreamChange:m,bVerticalBroadcastChat:p})))}))},54069:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BroadcastDetails:()=>_o,LinkOverlay:()=>Co,default:()=>oo});var n=a(34629),o=a(89193),s=a(41230),r=a(63696),i=a(51359),l=a(2553),c=a(59059),d=a(4230),m=a(10659),p=a(97894);class u extends r.Component{m_elCanvas;m_Context;m_schUpdate=new p.LU;m_bSetupComplete=!1;componentDidMount(){0==this.props.updateRate&&this.updateCanvas()}componentWillUnmount(){this.m_schUpdate.Cancel()}componentDidUpdate(){this.updateCanvas()}BindCanvasRef(e){this.m_elCanvas=e}updateCanvas(){if(null==this.props.elementRef||null==this.m_elCanvas||this.m_bSetupComplete)return;let e=this.props.scaleFactor||[1,1],t=this.props.elementRef,a=this.props.updateRate;this.m_Context=this.m_elCanvas.getContext("2d");let n=Math.floor(this.m_elCanvas.clientWidth/this.props.reductionFactor),o=Math.floor(this.m_elCanvas.clientHeight/this.props.reductionFactor);this.m_elCanvas.width=n,this.m_elCanvas.height=o,this.props.blurAmount>0&&(this.m_Context.filter="blur("+this.props.blurAmount+"px)");let s=()=>{this.m_Context.drawImage(t,0,0,n*e[0],o*e[1]),a>0&&this.m_schUpdate.Schedule(a,s)};s(),this.m_bSetupComplete=!0}render(){return r.createElement("canvas",{id:this.props.id,className:this.props.className,ref:this.BindCanvasRef,width:this.props.width,height:this.props.height})}}(0,n.Cg)([m.oI],u.prototype,"BindCanvasRef",null),(0,n.Cg)([m.oI],u.prototype,"updateCanvas",null);var h=a(81241),g=a(25552),_=a(67949),S=a(97192),C=a(50870),v=a(97621);function w(e,t){return(0,_.p)(e,function(e){return[e?.jsondata?.read_more_link?(0,C.wm)(e.jsondata.read_more_link).toLocaleLowerCase():void 0]}(t))}function f(e,t){return e=w(e,t)?(v.TS.IN_CLIENT?"steam://openurl_external/":"")+(0,_.E)(e):(0,C.NT)(e)}var b=a(60889),y=a(11611),E=a(6474),I=a(48342),D=a(76416),A=a(77869),B=a(75223),k=a(90573);r.createContext({bShowCompatInfo:!1});const T=e=>{const t=(a=e.category,P[a]||A.WX$);var a;return r.createElement("div",{className:(0,D.A)(B.SteamDeckCompatInfo,e.className)},r.createElement(A.lRD,null),r.createElement(t,{className:B.SteamDeckCompatIcon}))},P={1:A.jIP,2:A.aVR,3:A.o5Q,0:A.WX$};var L=a(12440),G=a(20018),N=a(29514),R=a(34381),M=a(39013),O=a.n(M),H=a(6933),F=a.n(H),x=a(85952),V=a(5849),W=a(33969),U=a(61416);const z=r.createContext({eAdultOnlyMediaBehavior:"masked"});function j(){const{eAdultOnlyMediaBehavior:e}=r.useContext(z),t=function(){const{data:e}=(0,U.I)({queryKey:["AOWarningCookie"],queryFn:()=>Q(),placeholderData:()=>Q(),staleTime:0});return e&&e>Date.now()/1e3}();return function(){const e=(0,W.VY)("forceallages");return!!e&&"0"!==e}()||"masked"==e&&(x.iA.excluded_content_descriptors.includes(4)||x.iA.excluded_content_descriptors.includes(3))?"blocked":"masked"==e&&t?"allowed":e}function X(){return"allowed"!=j()}const q="bDisableAOWarning";V.Kp.PerDay;function Q(){const e=(0,W.VY)(q),t=e?parseInt(e):0;return 0!=t?t:null}function Z(e){const{appInfo:t}=e,a=(0,r.useRef)({include_trailers:!0}),[n]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),a.current),o=X();if(!n)return null;const s=n.GetMicroTrailer(o);return s?r.createElement("video",{className:(0,D.A)(F().CapsuleMicroTrailer,"CapsuleMicroTrailer"),loop:!0,muted:!0,autoPlay:!0,key:"mtv-"+s.strMP4URL},r.createElement("source",{src:s.strWebMURL,type:"video/webm"}),!v.TS.IN_CLIENT&&r.createElement("source",{src:s.strMP4URL,type:"video/mp4"})):!n.GetParentAppID()||1!=n.GetAppType()&&12!=n.GetAppType()?null:r.createElement(Z,{appInfo:{id:n.GetParentAppID(),type:"game"}})}function K(e){const{item:t,strClassName:a,bMinimizePlatforms:n}=e,[o]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),{include_platforms:!0});if(!o)return null;const s=o.GetPlatforms();if(n){let e=s.windows&&r.createElement("span",{title:(0,k.we)("#Platform_Windows")},r.createElement(A.Xz0,null));return(0,v.Pr)()&&s.mac?e=r.createElement("span",{title:(0,k.we)("#Platform_Mac")},r.createElement(A.kPc,null)):((0,v.CI)()||(0,v.Hn)()||(0,v.rf)())&&s.steamos_linux&&(e=r.createElement("span",{title:(0,k.we)("#Platform_Linux")},r.createElement(A.Qte,null))),e?r.createElement("span",{className:(0,D.A)(F().CapsulePlatform,a)},e):null}return r.createElement("span",{className:(0,D.A)(F().CapsulePlatform,a)},s.windows&&r.createElement("span",{title:(0,k.we)("#Platform_Windows")},r.createElement(A.Xz0,null)),s.mac&&r.createElement("span",{title:(0,k.we)("#Platform_Mac")},r.createElement(A.kPc,null)),s.steamos_linux&&r.createElement("span",{title:(0,k.we)("#Platform_Linux")},r.createElement(A.Qte,null)),s.vr_support?.vrhmd&&r.createElement("span",{title:(0,k.we)("#Platform_VR")},r.createElement(A.VR,null)))}var Y=a(83957),J=a.n(Y),$=a(81158),ee=a(77259),te=a(21023),ae=a(41959);var ne;function oe(e){switch(e){case"primary":return ne.k_ePrimary;case"featured":return ne.k_eFeatured;case"default_featured":return ne.k_eDefaultFeatured;default:return ne.k_eGeneral}}!function(e){e[e.k_ePrimary=3]="k_ePrimary",e[e.k_eFeatured=2]="k_eFeatured",e[e.k_eDefaultFeatured=1]="k_eDefaultFeatured",e[e.k_eGeneral=0]="k_eGeneral"}(ne||(ne={}));class se{constructor(){(0,o.Gn)(this)}accountid;steamid;hub_popular;popular;relay_broadcast_id;rowversion;thumbnail_http_address;nAppIDVOD;title=void 0;viewer_count=void 0;whitelist_rank;gamedata_subtitle=void 0;store_title;left_panel;right_panel;snr;broadcast_chat_visibility;default_selection_priority=ne.k_eGeneral;current_selection_priority=ne.k_eGeneral}(0,n.Cg)([o.sH],se.prototype,"title",void 0),(0,n.Cg)([o.sH],se.prototype,"viewer_count",void 0),(0,n.Cg)([o.sH],se.prototype,"gamedata_subtitle",void 0),(0,n.Cg)([o.sH],se.prototype,"current_selection_priority",void 0);function re(e){return Boolean(e&&e.thumbnail_http_address)}class ie{constructor(){(0,o.Gn)(this)}static s_GlobalStore;m_inFlightRequests=new Map;m_lookupKeyToEmbedStreamDef=new Map;m_lookupStreams=new Map;m_playReadyStream=new Map;m_bMapHasStartedVideo=new Map;m_mapBroadcastChecked=new Map;m_pageChatStatus="hide";m_streamChatStatus="hide";m_bUserChatExpanded=void 0;m_bUserPreferenceHideBroadcastByDefault=void 0;m_bCollapsed=void 0;m_setStreamChangedListeners=new Set;m_bUseFakeData=!1;m_onLoadContextCall=new Map;BHasStreams(e){const t=this.GetStreams(e);return Boolean(t&&t.length>0)}AddCallbackOnNewContext(e,t,a){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),{name:t,fnCallback:a})}ClearCallbackOnNewContext(e){this.m_onLoadContextCall.set(this.GetStreamsLookupKeyFromDef(e),null)}GetPlayReadyStream(e){let t=this.GetStreamsLookupKeyFromDef(e);return this.m_playReadyStream.get(t)}BIsEmbeddedBroadcastHiddenByDefaultUserSettings(){return Boolean(this.m_bUserPreferenceHideBroadcastByDefault)}BIsEmbeddedStreamCollapsed(){return Boolean(this.m_bCollapsed)}SetEmbeddedStreamCollapsed(e){this.m_bCollapsed!=e&&(this.m_bCollapsed=e)}GetConcurrentStreams(e){const t=this.GetStreams(e);return t?t.filter((e=>re(e))).length:0}GetChatVisibility(){return"remove"===this.m_pageChatStatus||"remove"===this.m_streamChatStatus?"remove":void 0!==this.m_bUserChatExpanded?this.m_bUserChatExpanded?"show":"hide":"show"===this.m_pageChatStatus?"show":"hide"===this.m_pageChatStatus||"hide"===this.m_streamChatStatus?"hide":"show"}ToggleChatVisibility(){const e=this.GetChatVisibility();"remove"!==e&&(this.m_bUserChatExpanded="hide"===e)}DebugDumpContextAndAvailableContext(e){console.log("Requested context",this.GetStreamsLookupKeyFromDef(e)),console.log("Available context count: ",this.m_lookupStreams.size),this.m_lookupStreams.forEach(((e,t)=>{console.log(t,e.length)}))}GetStreams(e){const t=this.GetStreamsLookupKeyFromDef(e);return this.m_lookupStreams.get(t)}GetBroadcastURL(e){let t=null;return t=e.steamid?new $.b(e.steamid):$.b.InitFromAccountID(e.accountid),v.TS.COMMUNITY_BASE_URL+"broadcast/watch/"+t.ConvertTo64BitString()}BIsAppStreaming(e){let t=!1;return this.m_lookupStreams.forEach((a=>{t||(t=Boolean(a)&&a.some((t=>c.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID===e)))})),t}GetStreamsForAppID(e){const t=new Array;return this.m_lookupStreams.forEach((a=>{a?.forEach((a=>{c.BroadcastWatchStore.GetOrCreateBroadcastInfo(a.steamid).m_nAppID===e&&t.push(a)}))})),t}AddStreamChangedListener(e){this.m_setStreamChangedListeners.add(e)}RemoveStreamChangedListener(e){this.m_setStreamChangedListeners.delete(e)}async LoadBIsEmbeddedBroadcastHidden(e){if(void 0===this.m_bUserPreferenceHideBroadcastByDefault){let t=(0,v.Tc)("broadcastuser","application_config");if(!t)try{let a=v.TS.STORE_BASE_URL+"broadcast/ajaxgetuserbroadcastpreferences",n=await J().get(a,{params:{},cancelToken:e.token});t=n.data}catch(e){console.log("LoadBIsEmbeddedBroadcastHidden: "+(0,ae.H)(e).strErrorMsg),t={bHideStoreBroadcast:!1}}(0,o.h5)((()=>{this.m_bUserPreferenceHideBroadcastByDefault=t.bHideStoreBroadcast,this.m_bCollapsed=t.bHideStoreBroadcast}))}return this.m_bUserPreferenceHideBroadcastByDefault}async SetupEmbeddableVOD(e,t){this.m_bUseFakeData=!1,this.m_streamChatStatus="remove",await d.A.Get().QueueAppRequest(e.nAppIDVOD,{include_assets:!0,include_trailers:!0});const a=d.A.Get().GetApp(e.nAppIDVOD),n=new se;if(n.accountid=0,n.nAppIDVOD=e.nAppIDVOD,n.default_selection_priority=ne.k_ePrimary,n.current_selection_priority=ne.k_ePrimary,n.thumbnail_http_address=a?.GetAssets().GetHeaderURL()||"",n.title=a?.GetName()||"",this.GetStreams(e).unshift(n),t){const t=this.GetStreamsLookupKeyFromDef(e);this.m_playReadyStream.set(t,n)}}async HintLoadEmbeddablePreviewStreams(e){let t=null,a={eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0};try{return t=await J().get(v.TS.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpreview",{params:a}),this.HandleHintLoadBroadcastResponse(e,t.data)}catch(e){let t=(0,ae.H)(e);console.error("HintLoadEmbeddablePreviewStreams hit error loading: "+t.strErrorMsg,t)}return[]}async HintLoadEmbeddableStreams(e){let t=this.MapEmbeddableStreamToRequest(e),a=this.GetStreamsLookupKeyFromParam(t);if(!this.m_inFlightRequests.has(a)){this.m_lookupKeyToEmbedStreamDef.set(a,e);const n=this.InternalHintLoadEmbeddableStreams(e,t);this.m_inFlightRequests.set(a,n)}return this.m_inFlightRequests.get(a)}ValidateBroadcastPageStreamers(e){const t=e;return!!(t&&"number"==typeof t.success&&t.filtered&&Array.isArray(t.filtered)&&t.broadcast_chat_visibility)&&(0==t.filtered.length||"string"==typeof t.filtered[0].accountid)}async InternalHintLoadEmbeddableStreams(e,t){let a=(0,v.Tc)("broadcast_available_for_page","application_config");if(this.ValidateBroadcastPageStreamers(a))return this.HandleHintLoadBroadcastResponse(e,a);try{let a=null;return a=await J().get(v.TS.STORE_BASE_URL+"broadcast/ajaxgetstreamersforpage",{params:t}),this.HandleHintLoadBroadcastResponse(e,a.data)}catch(e){let t=(0,ae.H)(e);console.error("HintLoadEmbeddableStreams hit error loading: "+t.strErrorMsg,t)}return[]}async HandleHintLoadBroadcastResponse(e,t){this.m_bUseFakeData=!1,e.bIsPreview&&(t?.filtered?.length>0?this.ExtractBroadcastPrioritiesFromPartnerEventForPreview(e.event,t.filtered):(t={filtered:[{}],success:1,total_count:1,err_msg:"",broadcast_chat_visibility:"hide"},this.m_bUseFakeData=!0)),t.broadcast_chat_visibility&&(this.m_pageChatStatus=t.broadcast_chat_visibility);const a=new Array;(0,o.h5)((()=>{t.filtered.forEach((e=>{if(!e.steamid){const t=$.b.InitFromAccountID(e.accountid);e.steamid=t.ConvertTo64BitString()}const t=c.BroadcastWatchStore.GetOrCreateBroadcastInfo(e.steamid),n=e.appid?Number(e.appid):c.fO;t.m_nAppID=n,t.m_strAppId=""+n,void 0===e.current_selection_priority&&(e.current_selection_priority=e.default_selection_priority),n!=c.fO&&a.push(n)}))}));const n=this.GetStreamsLookupKeyFromDef(e);if(this.m_lookupStreams.set(n,t.filtered),this.m_onLoadContextCall.has(n)){const e=this.m_onLoadContextCall.get(n);e?("dev"==v.TS.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller using callback to "+e.name),e.fnCallback()):"dev"==v.TS.WEB_UNIVERSE&&console.log("CBroadcastEmbeddableStore initialized after caller, however callback is since cleared")}const s=this.GetStreams(e);return await this.AutoStartVideoStream(e,s),s}ExtractBroadcastPrioritiesFromPartnerEventForPreview(e,t){const a=Array.from(e.jsondata.broadcast_whitelist??[]),n=Array.from(e.jsondata.broadcast_priority??[]),o=new Map;for(let e=0;e<a.length&&!(e>=n.length);e++)o.set(a[e],oe(n[e]));t.forEach((e=>{const t=Number(e.accountid);o.has(t)&&(e.current_selection_priority=o.get(t))}))}async AutoStartVideoStream(e,t){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.get(a))return null;if(this.m_bUseFakeData){if(!this.m_playReadyStream.get(a)){const e={accountid:0,thumbnail_http_address:"",default_selection_priority:ne.k_eGeneral,current_selection_priority:ne.k_eGeneral};this.m_playReadyStream.set(a,e)}return this.m_playReadyStream}return this.PlayFromAvailableStreams(e,t)}async PlayFromAvailableStreams(e,t,a=!1){const n=new Set;for(;;){const o=t.filter((e=>!(n.has(e)||a&&e.nAppIDVOD))),s=this.GetAutoStartStream(o);if(!s)return null;if(await this.AttemptToPlayStream(e,s))return s;n.add(s)}}async AttemptToPlayStream(e,t){let a=this.GetStreamsLookupKeyFromDef(e);if(this.m_bMapHasStartedVideo.set(a,!0),this.m_mapBroadcastChecked.has(t.accountid)||this.m_mapBroadcastChecked.set(t.accountid,this.InternalAttemptToPlayStream(e,t)),t.nAppIDVOD)this.m_playReadyStream.set(a,t);else{const n=await this.m_mapBroadcastChecked.get(t.accountid);if(1!=n?.success)return null;t.steamid=n.steamid,this.m_playReadyStream.set(a,t),this.GetConcurrentStreams(e)>1?this.m_streamChatStatus="hide":this.m_streamChatStatus=t.broadcast_chat_visibility,this.m_setStreamChangedListeners.forEach((e=>e(t)));!async function(e,t,a){if(e>0&&7!=e&&a){let n=new URLSearchParams;n.append("page_action",""+t),n.append("snr",a),J().post(v.TS.STORE_BASE_URL+"ajaxreportproductaction/"+e+"/",n)}}(c.BroadcastWatchStore.GetOrCreateBroadcastInfo(t.steamid).m_nAppID,1,t.snr)}return t}async InternalAttemptToPlayStream(e,t){this.GetStreamsLookupKeyFromDef(e);let a=null;try{const e=v.TS.STORE_BASE_URL+"broadcast/ajaxcheckbroadcast";let n={broadcastaccountid:t.accountid,viewer_token:c.BroadcastWatchStore.GetViewerToken(),origin:self.origin};return a=await J().get(e,{params:n}),a.data}catch(e){let t=(0,ae.H)(e);console.error("Broadcast.AttemptToPlayStream: "+t.strErrorMsg,t)}return null}GetAutoStartStream(e){if(!e)return null;const t=e.filter((e=>re(e))),a=t.reduce(((e,t)=>Math.max(e,le(t))),0),n=t.filter((e=>le(e)===a));if(0===n.length)return null;return n[Math.floor(Math.random()*n.length)]}MapEmbeddableStreamToRequest(e){return{appid:e.appid,promotionName:e.bIsPreview?"preview":e.promotionName,clanid:e.clanid?e.clanid:e.event?e.event.clanSteamID.GetAccountID():void 0,listid:e.listid,subid:e.subid,bundleid:e.bundleid,eventid:e.event?e.event.GID:void 0,previewAccounts:Boolean(e.bIsPreview&&e.accountIDs)?e.accountIDs.slice().sort().join(","):void 0,test:false,cc:v.TS.COUNTRY,l:v.TS.LANGUAGE,hubtype:e.event?.GetContentHubType(),hubcategory:e.event?.GetContentHubCategory(),hubtagid:e.event?.GetContentHubTag(),tabuniqueid:e.tabuniqueid,tabfilter:e.tabfilter,rt_now_override_test:ee.HD.BHasTimeOverride()?ee.HD.GetTimeNowWithOverride():void 0}}GetStreamsLookupKeyFromDef(e){return this.GetStreamsLookupKeyFromParam(this.MapEmbeddableStreamToRequest(e))}GetStreamsLookupKeyFromParam(e){return JSON.stringify(e)}static Get(){return ie.s_GlobalStore||(ie.s_GlobalStore=new ie,"dev"==v.TS.WEB_UNIVERSE&&(window.g_BroadcastEmbeddableStore=ie.s_GlobalStore),ie.s_GlobalStore.Init()),ie.s_GlobalStore}Init(){}}function le(e){return e.current_selection_priority||ne.k_eGeneral}(0,n.Cg)([o.sH],ie.prototype,"m_lookupStreams",void 0),(0,n.Cg)([o.sH],ie.prototype,"m_playReadyStream",void 0),(0,n.Cg)([o.sH],ie.prototype,"m_pageChatStatus",void 0),(0,n.Cg)([o.sH],ie.prototype,"m_streamChatStatus",void 0),(0,n.Cg)([o.sH],ie.prototype,"m_bUserChatExpanded",void 0),(0,n.Cg)([o.sH],ie.prototype,"m_bUserPreferenceHideBroadcastByDefault",void 0),(0,n.Cg)([o.sH],ie.prototype,"m_bCollapsed",void 0),(0,n.Cg)([o.XI],ie.prototype,"HintLoadEmbeddablePreviewStreams",null),(0,n.Cg)([o.XI],ie.prototype,"AttemptToPlayStream",null);new te.T;var ce,de=a(60513),me=a(28726);!function(e){e[e.AnyController=0]="AnyController",e[e.XboxController=1]="XboxController",e[e.Ps3Controller=2]="Ps3Controller",e[e.Ps4Controller=3]="Ps4Controller",e[e.Ps5Controller=4]="Ps5Controller",e[e.SwitchController=5]="SwitchController",e[e.SteamController=6]="SteamController",e[e.SteamDeckNeptune=7]="SteamDeckNeptune",e[e.SteamDeckGalileo=8]="SteamDeckGalileo"}(ce||(ce={}));const pe={any_controller:ce.AnyController,xbox_controller:ce.XboxController,ps3_controller:ce.Ps3Controller,ps4_controller:ce.Ps4Controller,ps5_controller:ce.Ps5Controller,switch_controller:ce.SwitchController,steam_controller:ce.SteamController,steam_deck_neptune:ce.SteamDeckNeptune,steam_deck_galileo:ce.SteamDeckGalileo},ue="unUserdataVersion";class he{m_setWishList=new Set;m_wishlistInOrder=Array();m_setOwnedPackages=new Set;m_setOwnedApps=new Set;m_setFollowedApps=new Set;m_setExcludedTagsIds=new Set;m_setExcludedContentDescriptors=new Set(v.iA.excluded_content_descriptors);m_setRecommendedApps=new Set;m_recAppInOrder=new Array;m_mapIgnoredApps=new Map;m_mapIgnoredPackages=new Map;m_setCuratorsFollowed=new Set;m_setCuratorsIgnored=new Set;m_bShowFilteredUserReviewScores=!0;m_setPreferredPlatforms=new Set;m_bAllowAppImpressions=!1;m_primaryLanguage=-1;m_secondaryLanguages=new Set;m_rgRecommendedTags=[];m_mapRecommendingCuratorsForApp=new Map;m_setPackagesInCart=new Set;m_setAppsInCart=new Set;m_nCartLineItemCount=0;m_rgHardwareUsed=new Set;m_bIsLoaded=!1;m_promise;m_bAjaxInFlight=!1;BIsLoaded(){return this.m_bIsLoaded}GetWishlistGamesInUserOrder(){return this.m_wishlistInOrder}GetWishlistGameCount(){return this.m_setWishList.size}GetRecommendedGamesInIRPriorityOrder(){return this.m_recAppInOrder}GetFollowedCuratorCount(){return this.m_setCuratorsFollowed.size}GetFollowedCuratorsAccountID(){return Array.from(this.m_setCuratorsFollowed)}GetPackagesInCartCount(){return this.m_setPackagesInCart.size}GetAppInCartCount(){return this.m_setAppsInCart.size}GetCartLineItemCount(){return this.m_nCartLineItemCount}GetIgnoredAppsCount(){return this.m_mapIgnoredApps.size}BIsFollowingCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsFollowed.has(t)}BIsFollowingCreator(e){return this.BIsFollowingCurator(e)}BIsIgnoringCurator(e){const t="object"==typeof e&&"GetAccountID"in e?e.GetAccountID():e;return this.m_setCuratorsIgnored.has(t)}get ExcludedContentDescriptor(){return Array.from(this.m_setExcludedContentDescriptors)}BExcludesTag(e){return e.some((e=>this.m_setExcludedTagsIds.has(Number(e.tagid))))}BExcludeTagIDs(e){return e.some((e=>this.m_setExcludedTagsIds.has(e)))}GetExcludedTagsSortedByID(){return Array.from(this.m_setExcludedTagsIds).sort()}BExcludesContentDescriptor(e){return e.some((e=>this.m_setExcludedContentDescriptors.has(e)))}BIncludesContentDescriptor(e){return!this.m_setExcludedContentDescriptors.has(e)}BIsGameWishlisted(e){return this.m_setWishList.has(Number(e))}BIsGameRecommended(e){return this.m_setRecommendedApps.has(Number(e))}BIsGameIgnored(e){return this.m_mapIgnoredApps&&this.m_mapIgnoredApps.has(e)}BIsPackageIgnored(e){return this.m_mapIgnoredPackages?.has(e)}BIsGameOwned(e){return this.m_setOwnedApps.has(Number(e))}BOwnsApp(e){return Boolean(e)&&this.m_setOwnedApps.has(Number(e))}BFollowsApp(e){return this.m_setFollowedApps.has(Number(e))}BOwnsPackage(e){return this.m_setOwnedPackages.has(Number(e))}BHasUsedHardware(e){return this.m_rgHardwareUsed.has(e)}BShowFilteredUserReviewScores(){return this.m_bShowFilteredUserReviewScores}BAppImpressionsAllowed(){return this.m_bAllowAppImpressions}GetPrimaryLanguage(){return this.m_primaryLanguage}GetSecondaryLanguages(){return this.m_secondaryLanguages}BIsAnyLanguageEnabled(e){return null==this.m_primaryLanguage||(this.m_primaryLanguage<=-1||31<=this.m_primaryLanguage||e.some((e=>this.m_primaryLanguage===e||this.m_secondaryLanguages.has(e))))}GetRecommendedTags(){return this.m_rgRecommendedTags}BIsAjaxInFlight(){return this.m_bAjaxInFlight}BIsAppRecommendedBySomeCurator(e){return this.m_mapRecommendingCuratorsForApp.has(e)}GetRecommendingCuratorsForApp(e){return this.m_mapRecommendingCuratorsForApp.get(e)}GetOwnedApps(){return this.m_setOwnedApps}GetWishlistedApps(){return this.m_setWishList}async HintLoad(){return this.m_promise||(this.m_promise=this.InternalLoad()),this.m_promise}async InternalLoad(){let e=window.localStorage.getItem(ue)||"0",t={v:"0"==e?void 0:e,id:""+v.iA.accountid,cc:""+v.TS.COUNTRY,origin:self.origin},a=v.TS.STORE_BASE_URL+"dynamicstore/userdata/";try{let e=await J().get(a,{params:t,withCredentials:!0});e&&200==e.status&&(0,o.h5)((()=>{if(this.m_bIsLoaded=!0,e.data.rgCurators){this.m_setCuratorsFollowed=new Set;for(const t in e.data.rgCurators)this.m_setCuratorsFollowed.add(Number(t))}if(e.data.rgCuratorsIgnored&&(this.m_setCuratorsIgnored=new Set(e.data.rgCuratorsIgnored.map((e=>Number(e))))),e.data.rgWishlist&&(this.m_wishlistInOrder=e.data.rgWishlist.map((e=>Number(e))),this.m_setWishList=new Set(e.data.rgWishlist.map((e=>Number(e))))),e.data.rgFollowedApps&&(this.m_setFollowedApps=new Set(e.data.rgFollowedApps.map((e=>Number(e))))),e.data.rgOwnedApps&&(this.m_setOwnedApps=new Set(e.data.rgOwnedApps.map((e=>Number(e))))),e.data.rgOwnedPackages&&(this.m_setOwnedPackages=new Set(e.data.rgOwnedPackages.map((e=>Number(e))))),e.data.rgIgnoredApps){const t=e.data.rgIgnoredApps;this.m_mapIgnoredApps=new Map;for(const e in t)this.m_mapIgnoredApps.set(Number(e),Number(t[e]))}if(e.data.rgIgnoredPackages){const t=e.data.rgIgnoredPackages;this.m_mapIgnoredPackages=new Map;for(const e in t)this.m_mapIgnoredPackages.set(Number(e),Number(t[e]))}if(e.data.rgExcludedTags&&(this.m_setExcludedTagsIds=new Set(e.data.rgExcludedTags.map((e=>Number(e.tagid))))),he.BConfirmedAdultContentAgeGate()?this.m_setExcludedContentDescriptors=new Set:this.m_setExcludedContentDescriptors=new Set(e.data.rgExcludedContentDescriptorIDs.map((e=>Number(e)))),e.data.rgRecommendedApps&&(this.m_recAppInOrder=e.data.rgRecommendedApps.map((e=>Number(e))),this.m_setRecommendedApps=new Set(e.data.rgRecommendedApps.map((e=>Number(e))))),e.data.rgPreferredPlatforms&&(this.m_setPreferredPlatforms=new Set(e.data.rgPreferredPlatforms)),e.data.bAllowAppImpressions&&(this.m_bAllowAppImpressions=e.data.bAllowAppImpressions),this.m_bShowFilteredUserReviewScores=!!e.data.bShowFilteredUserReviewScores,void 0!==e.data.rgPrimaryLanguage&&(this.m_primaryLanguage=e.data.rgPrimaryLanguage),e.data.rgSecondaryLanguages&&(this.m_secondaryLanguages=new Set(e.data.rgSecondaryLanguages)),e.data.rgRecommendedTags&&(this.m_rgRecommendedTags=e.data.rgRecommendedTags.map((e=>e.tagid))),e.data.rgAppsInCart&&(this.m_setAppsInCart=new Set(e.data.rgAppsInCart)),e.data.rgPackagesInCart&&(this.m_setPackagesInCart=new Set(e.data.rgPackagesInCart)),e.data.nCartLineItemCount&&(this.m_nCartLineItemCount=e.data.nCartLineItemCount),e.data.rgCurations)for(const t of Object.keys(e.data.rgCurations)){const a=[];for(const n of Object.keys(e.data.rgCurations[t]))0===e.data.rgCurations[t][n]&&a.push(Number(n));this.m_mapRecommendingCuratorsForApp.set(Number(t),a)}if(e.data.rgHardwareUsed)for(const t of e.data.rgHardwareUsed){const e=pe[t];e&&this.m_rgHardwareUsed.add(e)}}))}catch(e){let t=(0,ae.H)(e);console.error("CDynamicStore.InternalLoad",t.strErrorMsg,t)}return this}async UpdateFollowOrIgnoreCurator(e,t,a){let n=v.TS.STORE_BASE_URL+"curators/"+(t?"ajaxfollow/":"ajaxignore/");const o=e.GetAccountID(),s=new FormData;s.append("clanid",""+o),s.append("sessionid",v.TS.SESSIONID),s.append(t?"follow":"ignore",a?"1":"0");let r=await J().post(n,s,{withCredentials:!0});if(r&&200==r.status){this.InvalidateCache();const e=t?this.m_setCuratorsFollowed:this.m_setCuratorsIgnored;a?e.add(o):e.delete(o)}return r.data}async UpdateAppIgnore(e,t,a,n=0){let s=v.TS.STORE_BASE_URL+"recommended/ignorerecommendation";const r=new FormData;r.append("sessionid",v.TS.SESSIONID),r.append("appid",""+e),r.append("remove",t?"0":"1"),r.append("snr",a),r.append("ignore_reason",""+n);try{this.m_bAjaxInFlight=!0;let a=await J().post(s,r,{withCredentials:!0});return a&&200==a.status&&(0,o.h5)((()=>{this.InvalidateCache(),t?this.m_mapIgnoredApps.set(e,n):this.m_mapIgnoredApps.delete(e)})),this.m_bAjaxInFlight=!1,a.data}catch(e){let t=(0,ae.H)(e);console.error("UpdateAppIgnore",t.strErrorMsg,t)}return this.m_bAjaxInFlight=!1,{success:2}}async UpdateGameWishlist(e,t,a,n){let o=v.TS.STORE_BASE_URL+"api/"+(t?"addtowishlist":"removefromwishlist");const s=new FormData;s.append("appid",""+e),s.append("sessionid",v.TS.SESSIONID),a&&s.append("snr",a);const r=this.m_setWishList.has(e)?this.m_wishlistInOrder.findIndex((t=>t==e)):-1;this.ApplyWishlistUpdate(e,t),this.m_bAjaxInFlight=!0;let i=await J().post(o,s,{withCredentials:!0,cancelToken:n?n.token:void 0});return this.m_bAjaxInFlight=!1,n&&n.token.reason?{success:52}:(i.data.success=1==i.data.success?1:2,1!=i.data.success&&this.ApplyWishlistUpdate(e,-1!=r,r),i.data)}ApplyWishlistUpdate(e,t,a=-1){if(this.InvalidateCache(),e=Number(e),t)this.m_setWishList.has(e)||(-1==a?this.m_wishlistInOrder.push(e):this.m_wishlistInOrder.splice(a,0,e)),this.m_setWishList.add(e);else{if(this.m_setWishList.has(e)){const t=this.m_wishlistInOrder.findIndex((t=>t==e));-1!=t&&this.m_wishlistInOrder.splice(t,1)}this.m_setWishList.delete(e)}}async AddToCart(e,t,a,n,o,s,r){if(void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart){let e;return o&&(e=me.A.ParseSNR(o)),window.AddItemToCart(t,s,e),!0}const i=new FormData;i.append("action","add_to_cart"),s?i.append("bundleid",s.toString()):i.append("subid",""+t),o&&i.append("snr",o),i.append("sessionid",v.TS.SESSIONID),i.append("quantity","1");const l=(0,de.uX)(e);e.preventDefault();try{await J().post(a,i,{withCredentials:!0}),this.InvalidateCache(),r?.fnSetURL?r.fnSetURL(n):l.location.href=n}catch(e){return console.log("HandleOnAddToCart",e),!1}return!0}async AddLicenseForFreeGame(e){if(this.BOwnsApp(e))return 1;try{const t=new FormData;t.append("sessionid",v.TS.SESSIONID),t.append("appid",""+e),t.append("cc",v.TS.COUNTRY);let a=v.TS.STORE_BASE_URL+"actions/addappformastersubscription",n=await J().post(a,t,{withCredentials:!0});if(this.InvalidateCache(),!n.data.success||1!==n.data.success)return n.data.success?n.data.success:2;this.m_setOwnedApps.add(Number(e))}catch(e){let t=(0,ae.H)(e);return console.log("AddLicense request failed:",t.strErrorMsg,t),2}return 1}async UpdateFollowingApp(e,t){try{const a=v.TS.STORE_BASE_URL+"explore/followgame",n=new FormData;n.append("appid",""+e),n.append("sessionid",v.TS.SESSIONID),t||n.append("unfollow","1");const o=await J().post(a,n,{withCredentials:!0});if(!o.data)return 2;this.InvalidateCache(),t?this.m_setFollowedApps.add(Number(e)):this.m_setFollowedApps.delete(Number(e))}catch(e){return console.log("Follow game request failed"),2}return 1}BHasPlatformPreferenceSet(){return this.m_setPreferredPlatforms.size>0&&this.m_setPreferredPlatforms.size<3}BIsPreferredPlatform(e){return this.m_setPreferredPlatforms.has(e)}InvalidateCache(){window.localStorage.setItem(ue,(Number.parseInt(window.localStorage.getItem(ue)||"0")+1).toString())}static s_globalSingletonStore;static Get(){return he.s_globalSingletonStore||(he.s_globalSingletonStore=new he,"dev"==v.TS.WEB_UNIVERSE&&(window.DUS=he.s_globalSingletonStore)),he.s_globalSingletonStore}static BConfirmedAdultContentAgeGate(){return(0,W.VY)("wants_mature_content")}constructor(){(0,o.Gn)(this)}}function ge(){const[e,t]=(0,r.useState)(!he.Get().BIsLoaded());return(0,r.useEffect)((()=>{e&&he.Get().HintLoad().finally((()=>t(!he.Get().BIsLoaded())))}),[e]),[e,he.Get()]}function _e(e){const[t,a]=ge();return!t&&a.BOwnsApp(e)}(0,n.Cg)([o.sH],he.prototype,"m_setWishList",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setOwnedPackages",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setOwnedApps",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setFollowedApps",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setExcludedTagsIds",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setExcludedContentDescriptors",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setRecommendedApps",void 0),(0,n.Cg)([o.sH],he.prototype,"m_mapIgnoredApps",void 0),(0,n.Cg)([o.sH],he.prototype,"m_mapIgnoredPackages",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setCuratorsFollowed",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setCuratorsIgnored",void 0),(0,n.Cg)([o.sH],he.prototype,"m_bShowFilteredUserReviewScores",void 0),(0,n.Cg)([o.sH],he.prototype,"m_primaryLanguage",void 0),(0,n.Cg)([o.sH],he.prototype,"m_secondaryLanguages",void 0),(0,n.Cg)([o.sH],he.prototype,"m_rgRecommendedTags",void 0),(0,n.Cg)([o.sH],he.prototype,"m_mapRecommendingCuratorsForApp",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setPackagesInCart",void 0),(0,n.Cg)([o.sH],he.prototype,"m_setAppsInCart",void 0),(0,n.Cg)([o.sH],he.prototype,"m_nCartLineItemCount",void 0),(0,n.Cg)([o.sH],he.prototype,"m_rgHardwareUsed",void 0),(0,n.Cg)([o.sH],he.prototype,"m_bAjaxInFlight",void 0),(0,n.Cg)([o.EW],he.prototype,"ExcludedContentDescriptor",null),(0,n.Cg)([o.XI],he.prototype,"UpdateAppIgnore",null);var Se=a(82149);function Ce(){return r.createElement("div",{className:Se.bordered_live_stream_icon},(0,k.we)("#home_page_live_broadcast"))}const ve=(0,s.PA)((function(e){const{appids:t,hide_status_banners:a}=e,n=t.every((e=>he.Get().BOwnsApp(e))),o=t.every((e=>he.Get().BIsGameWishlisted(e))),s=t.some((e=>{const t=d.A.Get().GetApp(e);return t&&function(e,t){if(t||e){const a=t||e;return a&&ie.Get().BIsAppStreaming(a)}return!1}(e,t?.GetParentAppID())})),i=n&&!a,l=o&&!a;return r.createElement("div",{className:(0,D.A)(F().CapsuleDecorators,"CapsuleDecorators")},i&&r.createElement("span",{className:(0,D.A)(F().Banner,F().Blue)},r.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUNDNzBFNTUyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUNDNzBFNTYyMUM0MTFFNDk1REVFODRBNUU5RjA2MUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Q0M3MEU1MzIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Q0M3MEU1NDIxQzQxMUU0OTVERUU4NEE1RTlGMDYxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv3vUKAAAAAlSURBVHjaYvz//z8DsYARpFhISAivjnfv3jGSp3jUGeQ4AyDAADZHNe2nyOBrAAAAAElFTkSuQmCC",className:F().LinesImg}),(0,k.we)("#Sale_InLibrary")),l&&r.createElement("span",{className:F().Banner},r.createElement(A.qnF,{className:F().LinesImg}),(0,k.we)("#Sale_OnWishlist")),s&&r.createElement(Ce,null))}));const we={include_assets:!0,include_release:!0,include_platforms:!0,include_tag_count:20,include_basic_info:!0,include_trailers:!0,include_reviews:!0,include_screenshots:!0,include_supported_languages:!0};function fe(e){return"game"===e||"dlc"===e||"software"===e||"music"===e||"application"===e||"demo"===e||"hardware"===e||"mod"===e||"video"==e||"beta"===e||"advertising"===e}var be=a(68744);const ye=r.createContext({AddImpression:()=>{console.log("Impression Tracking not enabled")},BIsValid:()=>!1});var Ee=a(92790),Ie=a(72837);function De(e){const{appID:t,feature:a,depth:n,children:o}=e,s=(0,be.ru)(a,n),i=r.useContext(ye),[l,c]=r.useState(void 0),d=r.useCallback((e=>{e.isIntersecting&&c((e=>e?.appID==t&&e.snr==s?e:{appID:t,snr:s}))}),[t,s]);(0,r.useEffect)((()=>{l&&i.AddImpression(l.appID,l.snr)}),[i,l]);const m=(0,Ee.BL)(d),p=t&&(!l||l.appID!=t&&l.snr!=s),u=(0,Ie.Ue)(o.ref,p?m:void 0);return r.cloneElement(o,{ref:u})}function Ae(e){return"bundle"==e?"bundle":"sub"==e?"sub":fe(e)?"app":null}const Be=e=>{const{appid:t}=e,a=r.createElement("div",{className:"ImpressionTrackedElement"},e.children);return t?r.createElement(De,{appID:t},a):a};class ke{static instance_count=0}class Te{m_mapAppResults=new Map;m_mapAppCallbackList=new Map;m_mapAppResultsPromises=new Map;GetCompatabilityResultForApp(e){return this.m_mapAppResults.get(e)}BHasCompatabilityResultForApp(e){return this.m_mapAppResults.has(e)}GetCallbackForAppList(e){return this.m_mapAppCallbackList.has(e)||this.m_mapAppCallbackList.set(e,new p.lu),this.m_mapAppCallbackList.get(e)}AddCompatabilityResult(e){this.m_mapAppResults.set(e.appid,e),this.GetCallbackForAppList(e.appid).Dispatch(e)}async LoadAppCompabitilityResult(e){return!!this.m_mapAppResults.has(e)||(this.m_mapAppResultsPromises.has(e)||this.m_mapAppResultsPromises.set(e,this.InternalLoadAppCompatability(e)),this.m_mapAppResultsPromises.get(e))}async InternalLoadAppCompatability(e){let t=null;try{const a={nAppID:e,l:v.TS.LANGUAGE,cc:v.TS.COUNTRY};let n=v.TS.STORE_BASE_URL+"saleaction/ajaxgetdeckappcompatibilityreport";const o=await J().get(n,{params:a,withCredentials:!0});if(200==o?.status&&1==o.data?.success&&o.data?.results)return this.AddCompatabilityResult(o.data.results),!0;t=(0,ae.H)(o)}catch(e){t=(0,ae.H)(e)}return console.error("CDeckVerifiedDetailsStore.InternalLoadAppCompatability failed: "+t?.strErrorMsg,t),!1}static s_Singleton;static Get(){return Te.s_Singleton||(Te.s_Singleton=new Te,"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||(window.g_DeckVerifiedDetailStores=Te.s_Singleton)),Te.s_Singleton}constructor(){if(document.getElementById("application_config")){let e=(0,v.Tc)("deckcompatibility","application_config");Te.ValidateCompatabilityResult(e)&&(this.AddCompatabilityResult(e),"dev"==v.TS.WEB_UNIVERSE&&console.log("CDeckCompatibilityDetailsStore compatability loaded: ",e))}}static ValidateCompatabilityResult(e){const t=e;return t&&"number"==typeof t.appid&&"number"==typeof t.resolved_category&&"object"==typeof t.resolved_items}}(0,n.Cg)([m.oI],Te.prototype,"LoadAppCompabitilityResult",null);var Pe=a(25391),Le=a(14785),Ge=a(15034),Ne=a.n(Ge),Re=a(23289),Me=a(99992),Oe=a(51707);function He(e){const{results:t,appName:a,buttonProps:n,autoFocus:o,onOpenBlogPost:s}=e,[i,l]=r.useState(!1),c=r.useCallback((()=>i),[i]),d=r.useRef(),m=(0,v.Qn)();if(r.useEffect((()=>{l(d?.current?.scrollHeight>d?.current?.clientHeight)}),[]),!t)return null;const p=()=>{s?s():window.location.href=t.steam_deck_blog_url};let u=n??{},h=null;t.steam_deck_blog_url&&(u.onOptionsActionDescription=(0,k.we)("#SteamDeckVerified_ViewDeveloperPost"),u.onOptionsButton=p,h=r.createElement(Fe,{blogURL:t.steam_deck_blog_url}));const g=-1!==t.resolved_items?.findIndex((e=>1==e.display_type));return t.resolved_items?.length?r.createElement(y.Z,{className:m?Ne().CompatibilityDetailsContainer:Ne().CompatibilityDetailsContainerDesktop,...u},r.createElement("div",null,r.createElement("div",{className:Ne().DialogHeader},r.createElement("div",{className:Ne().DialogTitle},(0,k.we)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),r.createElement("div",{className:Ne().AppTitleCategory},r.createElement(Xe,{category:t.resolved_category}))),r.createElement(qe,{category:t.resolved_category,appName:a})),h,r.createElement("div",{className:Ne().CompatibilityDetailsSeparator}),r.createElement(Re.Qg,{ref:d,className:c()?Ne().CompatibilityDetailsInterior_Scroll:Ne().CompatibilityDetailsInterior_NoScroll},r.createElement(y.Z,{autoFocus:o,focusableIfNoChildren:o||c(),noFocusRing:!0},t.resolved_items.filter((e=>1!==e.display_type)).map((e=>r.createElement("div",{key:e.loc_token+e.display_type,className:Ne().CompatibilityDetailsRow},r.createElement(xe,{displaytype:e.display_type}),r.createElement("span",null,(0,k.we)(e.loc_token))))),g&&r.createElement("div",{className:Ne().CompatibilityNotes},t.resolved_items.filter((e=>1==e.display_type)).map((e=>r.createElement("div",{key:e.loc_token+e.display_type,className:Ne().CompatibilityDetailsNoteRow},r.createElement("span",null,(0,k.we)(e.loc_token))))))))):r.createElement(y.Z,{autoFocus:o,focusableIfNoChildren:o,noFocusRing:!0,className:Ne().CompatibilityDetailsContainer,...u},r.createElement("div",null,r.createElement("div",{className:Ne().DialogHeader},r.createElement("div",{className:Ne().DialogTitle},(0,k.we)("#SteamDeckVerified_Store_CompatSectionHeader_GamepadUI")),r.createElement("div",{className:Ne().AppTitleCategory},r.createElement(Xe,{category:t.resolved_category}))),r.createElement(qe,{category:t.resolved_category,appName:a}),h))}function Fe(e){const{blogURL:t}=e,a=(0,v.Qn)();return t?a?r.createElement("div",{className:Ne().CompatibilityDetailRatingSummary},(0,k.we)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog"),r.createElement("div",{className:Ne().DeveloperBlogYButton},r.createElement(Me.$m,{button:Oe.g4.Y,type:Me.wt.Knockout}))):r.createElement("div",{className:Ne().CompatibilityDetailRatingSummary},(0,k.we)("#SteamDeckVerified_DescriptionHeader_DeveloperBlog_Desktop"),r.createElement("a",{href:t,className:Ne().DeveloperBlockLinkDesktop},(0,k.we)("#SteamDeckVerified_ViewDeveloperPost"))):null}function xe(e){const{displaytype:t}=e;switch(t){case 4:return r.createElement(A.o5Q,{className:Ne().CompatibilityDetailsResultIcon});case 3:return r.createElement(A.aVR,{className:Ne().CompatibilityDetailsResultIcon});case 2:return r.createElement(A.jIP,{className:Ne().CompatibilityDetailsResultIcon});case 0:return r.createElement(A.WX$,{className:Ne().CompatibilityDetailsResultIcon});case 1:return"dev"==v.TS.WEB_UNIVERSE&&console.error("deck verified banner shouldn't try to display the information display type for appid"),null}}var Ve=a(43500),We=a(94224),Ue=a(34124);function ze(e){const{storeItem:t}=e;if(0!==t.GetStoreItemType())return null;const a=t.GetPlatforms()?.steam_deck_compat_category||0;return r.createElement("div",{className:(0,D.A)(Ne().LearnMoreCtn,"LearnMoreCtn")},r.createElement(T,{category:a}),r.createElement(b.Ii,{onClick:e=>{var a,n;e.preventDefault(),e.stopPropagation(),a=(0,de.uX)(e),n=t.GetAppID(),(0,Ue.pg)(r.createElement(je,{nAppID:n}),a)}},r.createElement("span",{className:Ne().LearnMorePC},(0,k.we)("#SteamDeckVerified_Store_CompatSectionHeader_Desktop"))))}function je(e){const{nAppID:t,closeModal:a}=e,n=function(e){const[t,a]=r.useState(Te.Get().GetCompatabilityResultForApp(e));return(0,m.hL)(Te.Get().GetCallbackForAppList(e),a),r.useEffect((()=>{Te.Get().BHasCompatabilityResultForApp(e)||Te.Get().LoadAppCompabitilityResult(e).then((()=>a(Te.Get().GetCompatabilityResultForApp(e))))}),[e]),t}(t);return r.createElement(Le.eV,{modalClassName:"DeckVerifiedModalDialog",closeModal:a,onCancel:a},r.createElement(Pe.nB,null,r.createElement(y.Z,{focusable:!1,"flow-children":"column"},Boolean(n)?r.createElement(He,{results:n}):r.createElement(Ve.t,{size:"medium",position:"center",string:(0,k.we)("#Loading")}))))}function Xe(e){const{category:t}=e;switch(t){case 3:return r.createElement(A.o5Q,{className:Ne().CategoryIcon});case 2:return r.createElement(A.aVR,{className:Ne().CategoryIcon});case 1:return r.createElement(A.jIP,{className:Ne().CategoryIcon});case 0:return r.createElement(A.WX$,{className:Ne().CategoryIcon})}}function qe(e){const{category:t,appName:a,descriptionToken:n}=e;if(0==t)return r.createElement("div",{className:Ne().CompatibilityDetailRatingSummary},a?(0,k.PP)("#SteamDeckVerified_DescriptionHeader_Unknown_WithAppName",r.createElement("b",null,(0,We.EK)(a))):(0,k.we)("#SteamDeckVerified_DescriptionHeader_Unknown"));let o="",s=null;switch(t){case 3:o="#SteamDeckVerified_DescriptionHeader_Verified",s=Ne().Verified;break;case 2:o="#SteamDeckVerified_DescriptionHeader_Playable",s=Ne().Playable;break;case 1:o="#SteamDeckVerified_DescriptionHeader_Unsupported",s=Ne().Unsupported}const i=r.createElement("span",{className:s},(0,k.we)(Qe(t))),l=r.createElement("span",{className:Ne().CompatibilityDetailRatingSummary},(0,k.we)(n||o)),c=a?(0,k.PP)("#SteamDeckVerified_DescriptionHeader_WithAppName",r.createElement("b",null,(0,We.EK)(a)),i,l):(0,k.PP)("#SteamDeckVerified_DescriptionHeader",i,l);return r.createElement("div",{className:Ne().CompatibilityDetailRatingSummary},c)}function Qe(e){switch(e){case 3:return"#SteamDeckVerified_Category_Verified";case 2:return"#SteamDeckVerified_Category_Playable";case 1:return"#SteamDeckVerified_Category_Unsupported";default:return"#SteamDeckVerified_Category_Unknown"}}const Ze=(0,r.createContext)({}),Ke=()=>(0,r.useContext)(Ze);var Ye=a(80075),Je=a(28071),$e=a(24968),et=a(58933);const tt={high_pending_orders:!1,inventory_available:!0};function at(e){const t=(0,Je.rW)(),a=(0,U.I)({queryKey:[e?.GetID()||$e.sc,e?.GetStoreItemType()||"invalid"],queryFn:()=>async function(e,t){if(!e||1!==e.GetStoreItemType()||10!==e.GetAppType())return tt;const a=Ye.w.Init(et.MV);a.Body().set_packageid(e.GetID()),a.Body().set_country_code(x.iA.country_code);const n=await et.Hh.CheckInventoryAvailableByPackage(t,a);if(1!==n.GetEResult())throw console.error("Received error from FetchPhysicalGoodsStock",n.GetEResult()),new Error(`Error from FetchPhysicalGoodsStock: ${n.GetEResult()}`);return n.Body().toObject()}(e,t),enabled:Boolean(e?.GetID()&&10===e.GetAppType())});return a.isLoading?null:a.data}var nt=a(68282),ot=a(25509),st=a.n(ot);function rt(e){const{info:t,className:a}=e,n=(0,be.n9)(),[o]=(0,R.G6)(t.id,(0,N.SW)(t.type),{}),s=at(o);(0,r.useEffect)((()=>{he.Get().HintLoad()}),[]);const i=(0,r.useCallback)((()=>{(0,nt.Id)(window,`steam://run/${o?.GetAppIDToRun()}`)}),[o]);if(!o||8==o.GetAppType())return null;const c=o.GetBestPurchaseOption(),d=o.BIsFree()||"0"==o.GetBestPurchasePriceFormatted()||o.GetBestPurchaseOption().discount_pct>=100;if(1==o.GetStoreItemType())if(10==o.GetAppType()){if(!s)return r.createElement(Ve.t,{size:"small",position:"center"});if(!s.inventory_available)return r.createElement("div",{className:(0,D.A)(st().ActionOutOfStock,a)},r.createElement("span",null," ",(0,k.we)("#Sale_ReserveExhausted")))}else if(d&&o.GetIncludedAppIDs().length>1)return null;if(0==o.GetStoreItemType()){if(o.BIsComingSoon()&&!c?.packageid)return null;const e=he.Get().BOwnsApp(o.GetAppID());if(e&&10===o.GetAppType())return null;if(!e&&c?.is_free_to_keep){if(v.TS.IN_CLIENT||"store"!=(0,v.yK)()){const e=(0,l.wJ)(`${v.TS.IN_CLIENT?"steam://openurl/":""}${o.GetStorePageURL()}`,n);return r.createElement("div",{onClick:t=>(0,nt.Id)(t,e),className:(0,D.A)(st().Action,a)},r.createElement("span",null,(0,k.we)("#EventDisplay_CallToAction_VisitStore")))}{const e=(0,l.wJ)(`${v.TS.STORE_BASE_URL}freelicense/addfreelicense`,n);return r.createElement("form",{action:e,method:"POST"},r.createElement("input",{type:"hidden",name:"subid",value:c.packageid}),r.createElement("input",{type:"hidden",name:"sessionid",value:v.TS.SESSIONID}),r.createElement("button",{className:(0,D.A)(st().Action,a),type:"submit"},(0,k.we)("#EventDisplay_CallToAction_AddToAccount")))}}if((e||d)&&!o.BIsComingSoon()){let t=(0,k.we)("#EventDisplay_CallToAction_PlayNowForFree");return e?t=(0,k.we)("#EventDisplay_CallToAction_PlayNow"):o.BIsFreeTemporary()&&(t=(0,k.we)("#EventDisplay_CallToAction_AddToAccount")),r.createElement("div",{className:(0,D.A)(st().Action,a),onClick:i},r.createElement("span",null,t))}if(""==o.GetBestPurchasePriceFormatted()){const e=(0,l.wJ)(o.GetStorePageURL(),n);return r.createElement("a",{href:e,className:(0,D.A)(st().Action,a)},(0,k.we)("#EventDisplay_CallToAction_VisitStore"))}}return r.createElement(it,{className:a,storeItem:o,info:t})}function it(e){const{className:t,storeItem:a,info:n}=e,o=(0,be.n9)(),s=Ke(),i=(0,r.useCallback)((e=>{let t,r;if(2==a?.GetStoreItemType()||a?.GetBestPurchaseOption().bundleid?t=2==a?.GetStoreItemType()?n.id:a?.GetBestPurchaseOption().bundleid:r=a?.GetBestPurchaseOption().packageid,void 0!==window.g_bUseNewCartAPI&&window.g_bUseNewCartAPI&&"function"==typeof window.AddItemToCart)return window.AddItemToCart(r,t,(0,be.pn)(o)),!0;{const a=`${v.TS.STORE_BASE_URL}cart/addtocart`,n=`${v.TS.STORE_BASE_URL}cart`,i=(0,l.L3)(o);he.Get().AddToCart(e,r,a,n,i,t,s)}return!0}),[a,o,n.id,s]);return r.createElement("div",{className:(0,D.A)(st().Action,t),onClick:i},r.createElement("span",null,(0,k.we)("#Store_AddToCart")))}var lt=a(31782),ct=a.n(lt);async function dt(e){v.TS.IN_CLIENT?(console.log(`Running game ${e} locally.`),window.location.href="steam://run/"+e):(console.log(`Cannot identify local client. Prompting user to launch ${e}.`),async function(e){await d.A.Get().QueueAppRequest(e,{});const t=d.A.Get().GetApp(e),a=t?.GetName()||"";console.log("prompting for",a);const n=v.TS.STORE_BASE_URL+"about/";(0,Ue.mK)(r.createElement(mt,{appid:e,strGameName:a,strDownloadSteamUrl:n}),window)}(e))}const mt=e=>{const t=()=>e.closeModal&&e.closeModal();return r.createElement(Le.x_,{onEscKeypress:t,className:ct().GotSteamDialog},r.createElement(Pe.UC,null,r.createElement(Pe.Y9,null," ",(0,k.we)("#GotSteam_Title")," "),r.createElement(Pe.nB,null,r.createElement(Pe.a3,null,(0,k.PP)("#GotSteam_PromptWithDownloadLink",r.createElement("a",{href:e.strDownloadSteamUrl,className:ct().DownloadSteamUrl},(0,k.we)("#GotSteam_DownloadLinkText")),r.createElement("span",{className:ct().GameName},e.strGameName))),r.createElement("div",{className:ct().Buttons},r.createElement("a",{href:"steam://run/"+e.appid,onClick:t,className:(0,D.A)(ct().Button,ct().LeftButton)},r.createElement("div",{className:ct().AnswerText}," ",(0,k.we)("#GotSteam_Yes")," "),r.createElement("div",{className:ct().ActionText}," ",(0,k.we)("#GotSteam_Yes_Play")," ")),r.createElement("a",{href:e.strDownloadSteamUrl,onClick:t,className:ct().Button},r.createElement("div",{className:ct().AnswerText}," ",(0,k.we)("#GotSteam_No")," "),r.createElement("div",{className:ct().ActionText}," ",(0,k.we)("#GotSteam_No_Download")," "))),r.createElement("div",{className:ct().Footer},r.createElement(A.Qte,{className:ct().Logo}),(0,k.we)("#GotSteam_Blurb")))))};var pt=a(74164),ut=a.n(pt),ht=a(19643),gt=a(80542),_t=a(67775),St=a(47915),Ct=a(18397),vt=a(3715);function wt(e){return["AccountOwnedApps",e??0]}function ft(e){const t=(0,Je.KV)(),a=function(){const e=(0,vt.jE)(),t=x.iA.accountid;return a=>{e.setQueryData(wt(t),(e=>{if(e)return new Set([...e.values(),...a])}))}}();return(0,Ct.n)({mutationFn:()=>async function(e,t){const a=Ye.w.Init(_t.lO);a.Body().set_item_id(St.O4.fromObject(t));const n=await _t._o.AddFreeLicense(e,a);return[n.GetEResult(),n.Body().toObject()]}(t,e),onSuccess(e){const[t,{packageids_added:n,appids_added:o,purchase_result_detail:s}]=e;o&&a(o)}})}var bt,yt=a(55359),Et=a(77263),It=a(59054);function Dt(e){const{children:t,...a}=e;return r.createElement(b.fu,{className:It.GreenButton,type:"button",...a},r.createElement("span",null,t))}!function(e){e[e.k_EPlatformTypeUnknown=0]="k_EPlatformTypeUnknown",e[e.k_EPlatformTypeWin32=1]="k_EPlatformTypeWin32",e[e.k_EPlatformTypeWin64=2]="k_EPlatformTypeWin64",e[e.k_EPlatformTypeLinux64=3]="k_EPlatformTypeLinux64",e[e.k_EPlatformTypeOSX=4]="k_EPlatformTypeOSX",e[e.k_EPlatformTypePS3=5]="k_EPlatformTypePS3",e[e.k_EPlatformTypeLinux32=6]="k_EPlatformTypeLinux32",e[e.k_EPlatformTypeAndroid32=7]="k_EPlatformTypeAndroid32",e[e.k_EPlatformTypeAndroid64=8]="k_EPlatformTypeAndroid64",e[e.k_EPlatformTypeIOS32=9]="k_EPlatformTypeIOS32",e[e.k_EPlatformTypeIOS64=10]="k_EPlatformTypeIOS64",e[e.k_EPlatformTypeTVOS=11]="k_EPlatformTypeTVOS",e[e.k_EPlatformTypeEmbeddedClient=12]="k_EPlatformTypeEmbeddedClient",e[e.k_EPlatformTypeBrowser=13]="k_EPlatformTypeBrowser",e[e.k_EPlatformTypeMax=14]="k_EPlatformTypeMax"}(bt||(bt={}));var At=a(18144),Bt=a(86636),kt=(a(99874),a(3227));const Tt="RemoteDownload_OnlineClient",Pt="RemoteDownload_ClientAppList",Lt="RemoteDownload_ClientAppData";class Gt extends Error{constructor(e,t){super(e),this.result=t}result}function Nt(){const e=(0,Je.KV)(),t=(0,Bt.LH)();return(0,U.I)({queryKey:[Tt,t],queryFn:async()=>{const t=Ye.w.Init(kt.BR),a=await kt.Jo.GetAllClientLogonInfo(e,t);if(1!==a.GetEResult())throw console.error("Received error from GetAllClientLogonInfo",a.GetEResult(),a.Hdr().transport_error()),new Error(`Error from GetAllClientLogonInfo: ${a.GetEResult()}`);const n=[];for(const e of a.Body().sessions())e.device_type()!==yt.zm.k_EGamingDeviceType_Unknown&&n.push(e.toObject());return{sessions:n,refetchInterval:a.Body().refetch_interval_sec()||300}},staleTime:3e5,refetchInterval:e=>1e3*(e.state.data?.refetchInterval||300)})}class Rt{constructor(e){Object.assign(this,e.toObject()),this.bytes_to_download=parseInt(e.bytes_to_download())||0,this.bytes_downloaded=parseInt(e.bytes_downloaded())||0,this.bytes_staged=parseInt(e.bytes_staged())||0,this.bytes_to_stage=parseInt(e.bytes_to_stage())||0,this.bytes_required=parseInt(e.bytes_required())||0}appid;app;category;app_type;num_downloading;bytes_download_rate;bytes_downloaded;bytes_to_download;favorite;auto_update;installed;download_paused;changing;available_on_platform;bytes_staged;bytes_to_stage;bytes_required;source_buildid;target_buildid;estimated_seconds_remaining;queue_position;uninstalling;rt_time_scheduled;update_percentage;BIsDownloading(){return this.num_downloading>0}SetDownloading(){this.num_downloading=1,this.download_paused=!1}SetPaused(e){this.download_paused=e,this.num_downloading=e?0:1}BIsAtTopOfQueue(){return 0===this.queue_position}BIsPaused(){return this.download_paused&&(this.bytes_downloaded<this.bytes_to_download||this.bytes_staged<this.bytes_to_stage||-1!=this.queue_position)}BHasPendingUpdate(){return!this.BIsDownloading()&&!this.download_paused&&(this.bytes_downloaded<this.bytes_to_download||this.bytes_staged<this.bytes_to_stage)}GetPercentComplete(){return this.update_percentage?this.update_percentage:this.bytes_to_download?Math.floor(100*this.bytes_downloaded/this.bytes_to_download):0}}async function Mt(e,t,a){const n=t.client_instanceid,o=Ye.w.Init(kt.aX);o.Body().set_fields("games"),o.Body().set_filters(a),o.Body().set_client_instanceid(n),o.Body().set_include_client_info(!0);const s=await kt.Jo.GetClientAppList(e,o);if(1!==s.GetEResult())throw console.error("Received error from GetClientAppList",s.GetEResult(),s.Hdr().transport_error()),new Gt(`Error from GetClientAppList: ${s.GetEResult()}`,s.GetEResult());const r=new Map;for(const e of s.Body().apps()){const t=new Rt(e);r.set(e.appid(),t)}return{session:t,mapApps:r,clientInfo:s.Body().client_info().toObject(),refetchIntervals:{full:s.Body().refetch_interval_sec_full()||3600,changing:s.Body().refetch_interval_sec_changing()||60,updating:s.Body().refetch_interval_sec_updating()||10}}}function Ot(e,t,a){return[Pt,e,t,a]}function Ht(e,t=!0){const a=Nt(),n=(0,Je.KV)(),o=(0,Bt.LH)(),s=e=>{t&&(21!=e.result&&16!=e.result||a.refetch())},i=(0,At.E)({queries:(a.data?.sessions||[]).map((e=>({queryKey:Ot(o,e.client_instanceid,"none"),queryFn:async()=>Mt(n,e,"none"),staletime:36e5,refetchInterval:e=>1e3*(e.state.data?.refetchIntervals.full||3600),enabled:a.isSuccess&&!a.isFetching,onError:s,retry:t})))}),l=(0,r.useCallback)((t=>{if(!e)return t;const a=new Map(Array.from(t.mapApps.entries()).filter(e));return{...t,mapApps:a}}),[e]),c=(0,vt.jE)(),d=(0,At.E)({queries:(a.data?.sessions||[]).map(((e,a)=>({queryKey:Ot(o,e.client_instanceid,"changing"),queryFn:async()=>async function(e,t,a,n){if(!n)return;const o=await Mt(e,t,a);for(const[e,t]of o.mapApps)n.mapApps.set(e,t);return{...o,mapApps:n.mapApps}}(n,e,"changing",i[a].data),enabled:i[a].isSuccess&&!i[a].isFetching,staletime:1e4,select:l,refetchInterval:e=>{const t=e.state.data;if(!t)return 6e4;let a=!1;for(const e of t.mapApps.values())if(e.BIsDownloading()||e.uninstalling){a=!0;break}const n=t.refetchIntervals;return 1e3*(a?n.updating:n.changing)},onError:s,retry:t})))});return{rgQueries:d.map(((e,t)=>i[t].isError&&!i[t].isFetching?i[t]:e)),refetch:()=>{for(const e of a.data?.sessions||[]){const t=Ot(o,e.client_instanceid,"changing");c.removeQueries({queryKey:t})}for(const e of i)e.refetch()}}}function Ft(e,t){return[Lt,e,t]}function xt(e,t=!0){const a=(0,Bt.LH)(),{rgQueries:n}=Ht(void 0,t);return(0,U.I)({queryKey:Ft(a,e),queryFn:()=>{const t=new Map;for(const a of n)if(a.isSuccess){const n=a.data?.session.client_instanceid,o=a.data?.mapApps,s=o.get(e);s&&t.set(n,{session:a.data.session,app:s,clientInfo:a.data.clientInfo})}return t},enabled:n.reduce(((e,t)=>e&&t.isSuccess&&!t.isFetching),!0),staleTime:0,gcTime:0})}var Vt=a(48988),Wt=a.n(Vt);const Ut={bFitToWindow:!0,bOverlapHorizontal:!0,bMatchWidth:!1,bShiftToFitWindow:!0,bDisablePopTop:!0};function zt(e){const{setRemoteClientID:t,rgSessions:a}=e,n=(0,r.useCallback)((e=>{a?.length>0&&(0,i.lX)(r.createElement(jt,{sessions:a,setRemoteDownloadClientId:t}),e,Ut)}),[t,a]);return a?.length>1?r.createElement("button",{onClick:n,className:Wt().ClientSelectDropdown},r.createElement(Xt,null)):null}function jt({sessions:e,setRemoteDownloadClientId:t}){return r.createElement("ul",{className:Wt().ClientListDropdownMenu},e.map((e=>r.createElement(h.kt,{onSelected:()=>{t(e.client_instanceid)},key:e.client_instanceid},(0,k.we)("#GamesList_Client_Indicator",function(e){switch(e){case yt.zm.k_EGamingDeviceType_StandardPC:return(0,k.we)("#Library_DeviceType_PC");case yt.zm.k_EGamingDeviceType_SteamDeck:return(0,k.we)("#Library_DeviceType_SteamDeck");default:return}}(e.device_type),e.machine_name)))))}function Xt(e){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 8",fill:"none",...e},r.createElement("path",{fill:"currentColor",d:"M12.6128 1.7121C12.7616 1.56087 12.8428 1.3684 12.8428 1.14155C12.8428 0.687862 12.491 0.323534 12.0446 0.323534C11.8214 0.323534 11.6184 0.419772 11.4628 0.577877L6.83601 5.38975L2.22271 0.577877C2.06712 0.419772 1.85743 0.323534 1.64097 0.323534C1.19452 0.323534 0.842773 0.687862 0.842773 1.14155C0.842773 1.3684 0.923946 1.56087 1.07276 1.71211L6.21369 7.06016C6.38956 7.25264 6.60602 7.342 6.84277 7.34888C7.07953 7.34888 7.28246 7.25264 7.4651 7.06016L12.6128 1.7121Z"}))}var qt=a(53797),Qt=a.n(qt);const Zt={include_platforms:!0};function Kt(e){const{appid:t}=e,[a]=(0,R.t7)(t,Zt),[n,o,s]=(0,Et.uD)(!1),{mutateAsync:i}=ft({appid:t}),[l,c]=(0,r.useState)(!1),d=_e(t);return a?d?null:r.createElement(r.Fragment,null,r.createElement(Dt,{onClick:async()=>{try{c(!0),await i(),he.Get().InvalidateCache(),c(!1),o()}catch(e){c(!1),console.error("Error AddToLibraryActionWithRemoteInstall",e)}}},l&&r.createElement(Ve.t,{size:"small"}),(0,k.we)("#Sale_AddToLibrary_NoPlus")),r.createElement(gt.tH,null,r.createElement(Le.EN,{active:n},r.createElement(Le.o0,{strTitle:(0,k.we)("#Sale_AddedToLibrary"),strDescription:(0,k.PP)("#Sale_AddToLibrary_DialogDesc",r.createElement("span",{className:Qt().GameName},a.GetName())),closeModal:s,bAlertDialog:!0},r.createElement(Yt,{appid:t,storeItem:a}))))):null}function Yt(e){const{appid:t,storeItem:a}=e,n=Nt(),[o,s]=(0,r.useState)(0),[i,l]=(0,r.useState)(!1);if(x.TS.IN_CLIENT)return;const c=a.GetPlatforms(),d=n.data?.sessions?.filter((e=>{switch(e.device_type){default:case yt.zm.k_EGamingDeviceType_StandardPC:{const t=function(e){switch(e){case 0:return"Windows";case 1:return"Windows 3.11";case 2:return"Windows 95";case 3:return"Windows 98";case 4:return"Windows ME";case 5:return"Windows NT";case 6:return"Windows 2000";case 7:return"Windows XP";case 8:return"Windows 2003";case 9:return"Windows Vista";case 10:return"Windows 7";case 11:return"Windows 2008";case 12:return"Windows 2012";case 15:return"Windows 2012 R2";case 13:return"Windows 8";case 14:return"Windows 8.1";case 16:return"Windows 10";case 17:return"Windows 2016";case 18:return"Windows 2019";case 19:return"Windows 2022";case 20:return"Windows 11";case-102:return"Mac OS";case-101:return"MacOS 10.4";case-100:return"MacOS 10.5";case-99:return"MacOS 10.5.8";case-95:return"MacOS 10.6";case-94:return"MacOS 10.6.3";case-93:return"MacOS 10.6.4 with Apple's Snow Leopard Graphics Update";case-92:return"MacOS 10.6.7";case-90:return"MacOS 10.7";case-89:return"MacOS 10.8";case-88:return"MacOS 10.9";case-87:return"MacOS 10.10";case-86:return"MacOS 10.11";case-85:return"MacOS 10.12";case-84:return"MacOS 10.13";case-83:return"MacOS 10.14";case-82:return"MacOS 10.15";case-81:return"MacOS 11 (as 10.16)";case-75:return"MacOS 12 (as 10.17)";case-70:return"MacOS 13 (as 10.18)";case-80:return"MacOS 11";case-79:return"MacOS 11.1";case-74:return"MacOS 12";case-69:return"MacOS 13";case-68:return"MacOS 14";case-67:return"MacOS 15";case-203:return"Linux";case-202:return"Linux 2.2";case-201:return"Linux 2.4";case-200:return"Linux 2.6";case-199:return"Linux 3.2";case-198:return"Linux 3.5";case-197:return"Linux 3.6";case-196:return"Linux 3.10";case-195:return"Linux 3.16";case-194:return"Linux 3.18";case-193:return"Linux 3.x";case-191:return"Linux 4.1";case-190:return"Linux 4.4";case-189:return"Linux 4.9";case-188:return"Linux 4.14";case-187:return"Linux 4.19";case-192:return"Linux 4.x";case-186:return"Linux 5.x";case-185:return"Linux 5.4";case-184:return"Linux 6.x";case-183:return"Linux 7.x";case-182:return"Linux 5.10";case-300:return"PS3";case-700:return"Web Client";case-500:return"Android";case-499:return"Android 6.x";case-498:return"Android 7.x";case-497:return"Android 8.x";case-496:return"Android 9.x";case-600:return"iOS";case-599:return"iOS 1";case-598:return"iOS 2";case-597:return"iOS 3";case-596:return"iOS 4";case-595:return"iOS 5";case-594:return"iOS 6";case-593:return"iOS 6.1";case-592:return"iOS 7";case-591:return"iOS 7.1";case-590:return"iOS 8";case-589:return"iOS 8.1";case-588:return"iOS 8.2";case-587:return"iOS 8.3";case-586:return"iOS 8.4";case-585:return"iOS 9";case-584:return"iOS 9.1";case-583:return"iOS 9.2";case-582:return"iOS 9_.3";case-581:return"iOS 10";case-580:return"iOS 10.1";case-579:return"iOS 10.2";case-578:return"iOS 10.3";case-577:return"iOS 11";case-576:return"iOS 11.1";case-575:return"iOS 11.2";case-574:return"iOS 11.3";case-573:return"iOS 11.4";case-572:return"iOS 12";case-571:return"iOS 12.1";default:return"Unknown"}}(e.os_type);if(c.windows&&t.includes("Windows"))return!0;if(c.mac&&t.includes("Mac"))return!0;if(c.steamos_linux&&t.includes("Linux"))return!0}break;case yt.zm.k_EGamingDeviceType_SteamDeck:return c.windows||c.steamos_linux}return!1}));if(d?.length>0){const e=d[o];return r.createElement("div",{className:Qt().RemoteOptions},Boolean(i)?r.createElement($t,{session:e}):r.createElement(r.Fragment,null,r.createElement(Jt,{rgAcceptableSession:d,session:e,setSessionIndex:s}),r.createElement("div",{className:Qt().ActionRow},r.createElement(ea,{appid:t,session:e,setRemoteDownloadRequested:l}))))}return null}function Jt(e){const{rgAcceptableSession:t,session:a,setSessionIndex:n}=e;return r.createElement(r.Fragment,null,r.createElement("div",null,(0,k.we)("#Sale_AddToLibrary_RemoteDownload")),r.createElement("div",{className:Qt().ClientSelector},r.createElement("span",{className:Qt().ClientName},a.machine_name),r.createElement(zt,{rgSessions:t,setRemoteClientID:e=>{const a=t.findIndex((t=>t.client_instanceid===e));a>=0&&n(a)}})))}function $t(e){const{session:t}=e;return r.createElement("div",{className:Qt().DownloadStartedCtn},(0,k.we)("#Sale_AddToLibrary_DownloadStarted"),r.createElement("br",null),r.createElement("a",{href:`${x.TS.COMMUNITY_BASE_URL}my/games?tab=all&clientid=${t.client_instanceid}`},(0,k.we)("#Sale_AddToLibrary_SeeDownloadProgress")))}function ea(e){const{appid:t,session:a,setRemoteDownloadRequested:n}=e,o=function(e,t,a){const n=(0,Je.KV)(),o=xt(e),s=(0,Bt.LH)(),r=(0,vt.jE)();return(0,Ct.n)({mutationFn:async()=>{const a=Ye.w.Init(kt.f6);a.Body().set_appid(e),a.Body().set_client_instanceid(t);const i=await kt.Jo.InstallClientApp(n,a);if(1!=i.GetEResult())throw console.error("Received error from InstallClientApp",i.GetEResult()),new Error(`Error from InstallClientApp: ${i.GetEResult()}`);const l=o?.data;l&&l.get(t)&&l.get(t).app.SetDownloading(),r.setQueryData(Ft(s,e),l),o.refetch()},onSuccess:a})}(t,a.client_instanceid);return r.createElement(r.Fragment,null,r.createElement(Dt,{onClick:()=>{o.mutateAsync(),n(!0)}},r.createElement(A.f5X,null),(0,k.we)("#Button_StartDownload")),r.createElement("div",{className:Qt().LearnMoreCtn},r.createElement("a",{href:"https://help.steampowered.com/faqs/view/1025-BD94-12FC-3409",className:Qt().InlineLink},(0,k.we)("#Button_Learn"))))}function ta(e){const{info:t,className:a}=e,n=(0,r.useRef)({include_release:!0}),[o]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),n.current),s=o?.BHasDemo(),i=s||1===o?.GetAppType(),l=i?(0,k.we)("#Sale_InstallDemo_ttip",o?.GetName()):s?(0,k.we)("#Sale_CannotInstallDemo_ttip",o?.GetName()):(0,k.we)("#Loading");if((0,ht.$W)()){if(o&&i&&s){const e=1===o?.GetAppType()?o.GetAppID():o.GetDemoAppIDs()[0];return r.createElement(Kt,{appid:e})}return null}return!i&&s&&o?.BIsFree()?r.createElement(rt,{info:t,className:a}):r.createElement(S.he,{toolTipContent:l,onClick:e=>{e.preventDefault(),e.stopPropagation(),i&&dt(1===o?.GetAppType()?o.GetAppID():o.GetDemoAppIDs()[0])},className:(0,D.A)(a,ut().DemoButton,!i&&ut().DisabledButton)},i?(0,k.we)("#Sale_InstallDemo"):(0,k.we)("#Sale_DemoNotFound"))}var aa=a(3742),na=a(76133);const oa=(0,s.PA)((e=>{const{info:t,bShowDemoButton:a,bShowPurchaseOptionsButton:n,fnOnPurchaseOptionsClick:o,bHidePrice:s,bHideWishlistButton:i,bShowDeckCompatibilityDialog:l,className:c,bShowCartButton:d}=e,m=(0,r.useRef)({include_release:!0}),[p]=(0,R.G6)(t.id,(0,N.SW)(t.type),m.current),u=_e(p?.GetAppID());if(!p)return null;const h=1===p.GetAppType()&&p.BIsReleased()||p.BHasDemo(),g=fe(t.type),_=a&&g&&h;let S=null;if(!u&&p?.GetBestPurchaseOption().is_free_to_keep&&p?.GetBestPurchaseOption().free_to_keep_ends){const e=p.GetBestPurchaseOption().free_to_keep_ends,t=(0,k.we)("#Sale_default_label_Free_Promo_Description_Short",(0,k.$z)(e)+" @ "+(0,na.KC)(e,{bForce24HourClock:!1}));S=r.createElement("div",{className:F().PurchaseOptionDetails},t,r.createElement(aa.o,{tooltip:(0,k.we)("#Sale_default_Tooltip_Free_Promo_Limitation")}))}return r.createElement("div",{className:(0,D.A)(F().StoreActionWidgetContainer,c)},S,r.createElement("div",{className:F().StoreSalePriceActionWidgetContainer},Boolean(_)&&r.createElement(ta,{info:t,className:F().Action}),Boolean(!s)&&1!==p?.GetAppType()&&r.createElement(r.Fragment,null,Boolean(n&&!p.BIsFree())&&r.createElement(sa,{fnOnPurchaseOptionsClick:o}),Boolean(d&&!p.BIsFree())&&r.createElement(rt,{info:t,className:"CartBtn"})),Boolean(!s)&&r.createElement(ra,{info:t}),Boolean(l)&&r.createElement(ze,{storeItem:p})))}));function sa(e){return r.createElement("div",{className:F().Action,onClick:e.fnOnPurchaseOptionsClick},r.createElement("span",null,(0,k.we)("#EventDisplay_CallToAction_ShowPurchaseOptions_Button")))}function ra(e){const{info:t,...a}=e,[n]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),{include_release:!0});return r.createElement(la,{...a,storeItem:n})}const ia=7;function la(e){const{bSingleLineMode:t,storeItem:a,onlyOneDiscountPct:n}=e,o=(0,ee.f1)();if(!a)return null;const s=!a.BIsComingSoon()&&a.GetReleaseDateRTime()+ia*V.Kp.PerDay>o,i=(0,D.A)(F().StoreSalePriceWidgetContainer,t&&F().SingleLineMode,"StoreSalePriceWidgetContainer",s&&F().NewItem);if(e.bShowInLibrary)return r.createElement("div",{className:i},r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_InLibrary")));if(a.BIsComingSoon()&&!a.GetBestPurchaseOption()?.packageid)return r.createElement("div",{className:i},r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_ComingSoon")));if(a.BIsFree()){if(!a.BIsFreeTemporary())return 0==a.GetStoreItemType()&&1==a.GetAppType()?r.createElement("div",{className:i},s&&r.createElement("div",{className:F().StoreSaleNewItem},(0,k.we)("#Flag_New")),r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_FreeDemo"))):r.createElement("div",{className:i},s&&r.createElement("div",{className:F().StoreSaleNewItem},(0,k.we)("#Flag_New")),r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_FreeToPlay")));if(a.GetBestPurchaseOption()?.is_free_to_keep&&!a.GetBestPurchaseOption()?.formatted_original_price)return r.createElement("div",{className:i},r.createElement("div",{className:F().StoreSalePriceBox},(0,k.we)("#EventDisplay_CallToAction_Free")))}const l=a.GetBestPurchaseOption();if(!l||!l.formatted_final_price)return null;let c=l.discount_pct,d=n||2!=a.GetStoreItemType()?void 0:l.bundle_discount_pct,m=l.formatted_final_price;return r.createElement(ca,{bSingleLineMode:t,nBaseDiscountPercentage:d,nDiscountPercentage:c,bIsPrePurchase:a.BIsPrePurchase(),strBestPurchaseOriginalPriceFormatted:l.formatted_original_price,strBestPurchasePriceFormatted:m,bHideDiscountPercentForCompliance:l.hide_discount_pct_for_compliance,bShowNewFlag:s})}function ca(e){const{bSingleLineMode:t,nDiscountPercentage:a,bIsPrePurchase:n,nBaseDiscountPercentage:o,strBestPurchaseOriginalPriceFormatted:s,strBestPurchasePriceFormatted:i,bHideDiscountPercentForCompliance:l,bShowNewFlag:c}=e,d=l;return r.createElement("div",{className:(0,D.A)({[F().StoreSalePriceWidgetContainer]:!0,[F().SingleLineMode]:t,StoreSalePriceWidgetContainer:!0,[F().Discounted]:Boolean(a),Discounted:Boolean(a),[F().PrePurchase]:Boolean(n),[F().NewItem]:Boolean(c)})},Boolean(n)&&r.createElement("div",{className:(0,D.A)(F().StoreSalePriceBox,F().StoreSalePrepurchaseLabel)},r.createElement("span",null,(0,k.we)("#EventDisplay_CallToAction_Prepurchase_Short"))),Boolean(!n&&c)&&r.createElement("div",{className:F().StoreSaleNewItem},(0,k.we)("#Flag_New")),Boolean(o&&a&&!d)&&r.createElement("span",{className:(0,D.A)(F().BaseDiscount)},`-${o}%`),Boolean(a&&!d)&&r.createElement("div",{className:F().StoreSaleDiscountBox},`-${a}%`),Boolean(d)&&r.createElement("div",{className:F().DiscountIconCtn},r.createElement(A.XH_,null)),Boolean(a&&s&&!d)?r.createElement("div",{className:(0,D.A)(F().StoreSaleDiscountedPriceCtn)},r.createElement("div",{className:(0,D.A)({[F().SingleLineOriginalPrice]:t,[F().StoreOriginalPrice]:!t})},s),r.createElement("div",{className:(0,D.A)({[F().StoreSalePriceBox]:!0,[F().SingleLineMode]:t})},i)):r.createElement("div",{className:F().StoreSalePriceBox},i))}var da=a(75774);function ma(e,t,a,n,o,s){if(!a)return;var r;if(!(2==(r=e.GetStoreItemType())?"bundle":1==r?"sub":0==r?"app":null))return void(0,da.w)(!1,"StoreItemWidgetSalePageAction: unexpected type: "+e.GetStoreItemType());const i=(0,l.wJ)(`${e.GetStorePageURL(n)}${o?`?${o}`:""}`,t);return{onClick:e=>{let t=(0,de.uX)(e)||window;s?s(void 0):i.startsWith("steam://")||(t.location.href=(0,C.NT)(i))},onOKActionDescription:(0,k.we)("#Sale_Gamepad_Action_Select")}}var pa=a(85797);function ua(e){const t=(0,Je.TR)(),a=(0,Je.rX)();return(0,U.I)(ha(t.GetAnonymousServiceTransport(),a,e))}function ha(e,t,a){return{queryKey:["LocalizedTagNames",a],queryFn:async()=>{const n=`LocalizedTagNames2_${a}`,o=await t.GetObject(n),s=Ye.w.Init(pa.Gr);s.Body().set_language(a),o?.version_hash&&s.Body().set_have_version_hash(o.version_hash);const r=await pa.nd.GetTagList(e,s);let i;if(1==r.GetEResult())i=r.Body().toObject(),t&&t.StoreObject(n,i);else if(29==r.GetEResult())i=o||void 0;else{if(!o)throw r.GetErrorMessage();console.warn("Couldn't load updated tag localization, will continue with what we have from storage."),i=o}const l={};return(i?.tags||[]).forEach((({tagid:e,name:t})=>l[e]=t)),l},staleTime:36e5}}a(45090);function ga(e){const{className:t,url:a,style:n,children:o,bSkipForcingStoreLink:s}=e,i=s?a:(0,C.Ps)(a,v.TS.STORE_BASE_URL),l=(0,be.aL)(i);return l?r.createElement(b.Ii,{href:l,target:v.TS.IN_CLIENT?void 0:"_blank",className:t,style:n},o):r.createElement("span",{style:n,className:t},o)}function _a(e){const{tagid:t,className:a}=e,n=function(e,t){const{data:a}=ua(t);return a&&a[e]}(t,v.TS.LANGUAGE);if(!n)return null;const o=(0,yt.ww)((0,yt.sf)(v.TS.LANGUAGE)),s=`${v.TS.STORE_BASE_URL}tags/${o}/${n}`;return r.createElement(ga,{url:s,className:(0,D.A)(F().Tag,"WidgetTag",a)},n)}const Sa=(0,s.PA)((e=>{const{appid:t,bIsMuted:a}=e,n=he.Get().BOwnsApp(t),o=(0,D.A)(F().CapsuleBottomBar,a&&F().Muted,n?F().PlayNowButton:F().AddToLibraryButton);return r.createElement("div",{onClick:e=>{e.preventDefault(),n?dt(t):he.Get().AddLicenseForFreeGame(t)},className:o},(0,k.we)(n?"#Sale_PlayNow":"#Sale_AddToLibrary"))}));a(48036),a(95383);function Ca(e,t,a,n){r.useEffect((()=>{const o=o=>{o.key===e&&(t(o),a&&o.preventDefault(),n&&o.stopPropagation())};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)}),[e,t,a,n])}var va=a(49434),wa=a.n(va);function fa(e){const{closeModal:t,rgImageURL:a}=e,[n,o]=r.useState(0),s=r.useCallback((()=>{o(0==n?a.length-1:n-1)}),[n,a.length]),i=r.useCallback((()=>{n+1>=a.length?o(0):o(n+1)}),[n,a.length]);return r.createElement(Le.eV,{bAllowFullSize:!0,bOKDisabled:!0,closeModal:t,bHideCloseIcon:!0,modalClassName:wa().PopupScreenshotModal},r.createElement(ba,{index:n,numElements:a.length,fnForward:i,fnBackwards:s,fnClose:t,bCircular:!0}),r.createElement("div",{className:wa().PopupScreenshotContainer},r.createElement("img",{className:wa().PopupScreenshot,src:a[n]})))}function ba(e){const{index:t,numElements:a,fnForward:n,fnBackwards:o,fnClose:s,bCircular:i}=e;Ca("ArrowLeft",o,!0,!0),Ca("Left",o,!0,!0),Ca("ArrowRight",n,!0,!0),Ca("Right",n,!0,!0),Ca("Escape",(()=>s&&s()),!0,!0),Ca("Esc",(()=>s&&s()),!0,!0);let l=a>1;return r.createElement("div",{className:wa().ButtonCtn},l&&r.createElement(r.Fragment,null,r.createElement("div",{className:(0,D.A)(wa().ButtonIcon,0!==t||i?null:wa().Disabled),onClick:o},r.createElement(A.V5W,{angle:270})),r.createElement("div",{className:(0,D.A)(wa().ButtonIcon,t!==a-1||i?null:wa().Disabled),onClick:n},r.createElement(A.V5W,{angle:90}))),r.createElement("div",{className:wa().ButtonIcon,onClick:s},r.createElement(A.X,null)))}var ya=a(33264),Ea=a.n(ya);var Ia=a(83279);function Da(e){const[t,a]=(0,r.useState)(!1),[n,o]=(0,r.useState)({naturalWidth:0,naturalHeight:0,displayWidth:0,displayHeight:0}),s=(0,r.useRef)(),[i,l]=function(){const[e,t]=r.useState(void 0),a=r.useCallback((()=>t(void 0)),[]),n=r.createElement(Le.EN,{active:void 0!==e},r.createElement(fa,{closeModal:a,rgImageURL:e}));return[t,n]}();return(0,r.useEffect)((()=>{if(n.naturalWidth>1.3*n.displayWidth&&n.naturalHeight>1.3*n.displayHeight&&n.naturalWidth>256){n.naturalWidth/n.naturalHeight<3&&a(!0)}}),[n]),t?r.createElement("span",{className:Ia.PreviewCtn},l,r.createElement("span",{className:Ia.SVG},r.createElement(A.YNO,null)),r.createElement("img",{...e,className:(0,D.A)({[e.className]:Boolean(e.className),[Ia.ExpandableHover]:!0}),onClick:t=>i([e.src])})):r.createElement("img",{...e,ref:s,onLoad:e=>{if(!(e.currentTarget.closest("a")||window.innerWidth<parseInt(Ea().strMaxMobileWidth))){const{naturalWidth:t,naturalHeight:a,width:n,height:s}=e.currentTarget;o({naturalWidth:t,naturalHeight:a,displayWidth:n,displayHeight:s})}}})}function Aa(e){const{className:t,srcs:a,lazyLoad:n,width:o,height:s,alt:i,crossOrigin:l}=e,[c,d]=r.useState(a.length),[m,p]=r.useState(0);r.useEffect((()=>{c!=a.length&&(d(a.length),p(0))}),[c,a.length]);const u=r.useCallback((()=>{e.onImageError&&e.onImageError(e.srcs[m]),m+1<e.srcs.length&&p(m+1)}),[m,e]);return 0==a.length?null:r.createElement("img",{className:t,src:a[m],crossOrigin:l,onError:u,loading:n?"lazy":void 0,width:o,height:s,alt:i})}function Ba(e){const{info:t,bPreferLibrary:a}=e,[n]=(0,R.G6)(t.id,(0,N.SW)(t.type),{include_assets:!0}),[o,s]=r.useState(0);if(!n)return r.createElement("div",{className:F().HeroCapsuleImageContainer});let i=n.GetAssets().GetHeroCapsuleURL(),l=n.GetAssets().GetLibraryCapsuleURL();if(n.GetIncludedAppIDs()?.length>0&&!i){const e=d.A.Get().GetApp(n.GetIncludedAppIDs()[0]);e&&(i||(i=e.GetAssets().GetHeroCapsuleURL()),l||(l=e.GetAssets().GetLibraryCapsuleURL()))}if(i&&(!a||!l))return r.createElement("div",{className:(0,D.A)(F().HeroCapsuleImageContainer,"HeroCapsuleImageContainer")},r.createElement("img",{src:i,className:F().CapsuleImage,alt:n.GetName()}));if(l)return r.createElement("div",{className:(0,D.A)(F().LibraryFallbackAssetImageContainer,F().VerticalCapsule,a?F().ForceLibrarySizing:"")},r.createElement("div",{className:F().FallbackBackground,style:{backgroundImage:`url(${l})`}}),r.createElement("img",{src:l,className:F().CapsuleImage,alt:n.GetName()}));const c=ka(n,!0),m=c.length-1,p=e=>{const t=c.indexOf(e);t>=m&&t<c.length-1&&s(t+1)};if(o<c.length){const e=c[o];return r.createElement("div",{className:F().LibraryFallbackAssetImageContainer},r.createElement("div",{className:F().FallbackBackground,style:{backgroundImage:`url(${e})`}}),r.createElement(Aa,{lazyLoad:!0,srcs:c,className:F().CapsuleImage,alt:n.GetName(),onImageError:p}))}return r.createElement("div",{className:F().HeroCapsuleImageContainer})}function ka(e,t){let a=[];return e.GetAssets()&&(t?a.push(e.GetAssets().GetHeaderURL(),e.GetAssets().GetMainCapsuleURL()):a.push(e.GetAssets().GetMainCapsuleURL(),e.GetAssets().GetHeaderURL())),a.filter((e=>!!e))}var Ta=a(20516);function Pa(e){const{bAllowOutsideOfDeck:t}=e;if(!(0,v.Qn)()&&!t)return null;let a="unknown";switch(e.eDeckCompatibilityCategory){case 3:a="verified";break;case 2:a="playable";break;case 1:a="unsupported"}return r.createElement("div",{className:(0,D.A)(Ta.CompatIcon,"ds_steam_deck_compat",a,e.className)})}a(78325);a(10218);var La=a(37863),Ga=(a(71857),a(90095)),Na=a(42689),Ra=a.n(Na),Ma=a(7460),Oa=a(910),Ha=a(56271);class Fa{m_HomeView;BHasHomeView(){return Boolean(this.m_HomeView)}GetHomeView(){return this.m_HomeView?.home}static s_globalSingletonStore;static Get(){return Fa.s_globalSingletonStore||(Fa.s_globalSingletonStore=new Fa,"dev"==v.TS.WEB_UNIVERSE&&(window.g_HomeViewSetting=Fa.s_globalSingletonStore)),Fa.s_globalSingletonStore}constructor(){"dev"===v.TS.WEB_UNIVERSE&&(window.g_HomeViewStore=this);const e=(0,v.Tc)("home_view_setting","application_config");this.ValidateHomeViewData(e)&&this.SetHomeViewSetting(e);const t=(0,v.Tc)("home_view_setting_override","application_config");this.ValidateHomeViewDataOverride(t)&&this.SetHomeViewSettingOverride(t)}ValidateHomeViewData(e){const t=e;return t&&"object"==typeof t.home&&"object"==typeof t.main_cluster}SetHomeViewSetting(e){this.m_HomeView=e}ValidateHomeViewDataOverride(e){const t=e;return t&&(!t.all||"object"==typeof t.all)&&(!t.maincap||"object"==typeof t.maincap)}SetHomeViewSettingOverride(e){this.m_HomeView.home={...this.m_HomeView.home,...e?.all,...e?.maincap}}}var xa=a(15547);const Va={include_tag_count:20,include_basic_info:!0,include_supported_languages:!0};function Wa(e){const t=he.Get();(0,xa.w)(t.BIsLoaded(),"Dynamic Store not loaded");const a=e?.GetAllLanguagesWithSomeSupport()||[],n=Fa.Get().GetHomeView()?.localized;return!e||0==e.GetStoreItemType()&&(t.BIsGameIgnored(e.GetAppID())||t.BIsGameIgnored(e.GetParentAppID()))||t.BExcludesContentDescriptor(e.GetContentDescriptorIDs())||t.BExcludeTagIDs(e.GetTagIDs())||e.GetAllCreatorClanIDs().some((e=>t.BIsIgnoringCurator(e)))||n&&!(0==a.length||e.BHasSomeLanguageSupport(0)||t.BIsAnyLanguageEnabled(a))}var Ua,za=a(68689),ja=a(71079),Xa=a(89736);a(94314);!function(e){e.Default="default",e.Upcoming="upcoming",e.Featured="featured",e.Press="press",e.Steam="steam",e.Halloween="halloween",e.Dev_All="all",e.Dev_AssociatedPress="associated_press",e.Dev_Sales="associated_sales"}(Ua||(Ua={}));new Map;class qa{constructor(){(0,o.Gn)(this)}m_mapBlockedAppIds=new Map;m_mapBlockedClanIds=new Map;static s_globalSingletonStore;static Get(){return qa.s_globalSingletonStore||(qa.s_globalSingletonStore=new qa,qa.s_globalSingletonStore.Init()),qa.s_globalSingletonStore}GetMutedSourceCount(){return this.m_mapBlockedAppIds.size+this.m_mapBlockedClanIds.size}Init(){const e=(0,v.Tc)("mutedcomminfo","application_config");this.ValidateStoreDefault(e)&&("dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.log("DEV_DEBUG: CMutedCommunicationStore loading bundles payload: "+JSON.stringify(e)),e.appids&&e.appids.forEach((e=>this.m_mapBlockedAppIds.set(e,!0))),e.clanids&&e.clanids.forEach((e=>this.m_mapBlockedClanIds.set(e,!0))))}ValidateStoreDefault(e){const t=e;return!(!t||"object"!=typeof t)&&(Array.isArray(t.appids)&&t.appids.length>0||Array.isArray(t.clanids)&&t.clanids.length>0)}BIsEventBlocked(e){return e.appid?this.m_mapBlockedAppIds.has(e.appid):!!e.clanInfo&&this.m_mapBlockedClanIds.has(e.clanInfo.clanid)}BIsMutedAppID(e){return this.m_mapBlockedAppIds.has(e)}BIsMutedClanID(e){return this.m_mapBlockedClanIds.has(e)}async UpdateCommunitionSetting(e,t,a){const n=v.TS.STORE_BASE_URL+"account/optoutappcommunication/",o=new FormData;if(o.append("sessionid",v.TS.SESSIONID),o.append("allowCommunication",e?"1":"0"),t){if(!e&&this.m_mapBlockedAppIds.has(t)||e&&!this.m_mapBlockedAppIds.has(t))return!0;e?this.m_mapBlockedAppIds.delete(t):this.m_mapBlockedAppIds.set(t,!0),o.append("appId",t.toString())}else{if(!a)return(0,da.w)(!1,"BlockEventsFromCalenderEvent: Invalid AppID and ClanID"),!1;if(!e&&this.m_mapBlockedClanIds.has(a)||e&&!this.m_mapBlockedClanIds.has(a))return!0;e?this.m_mapBlockedClanIds.delete(a):this.m_mapBlockedClanIds.set(a,!0),o.append("clanId",a.toString())}try{return 1==(await J().post(n,o)).data.success}catch(e){return console.error("Blocking app id hit error "+(0,ae.H)(e).strErrorMsg),!1}}}(0,n.Cg)([o.sH],qa.prototype,"m_mapBlockedAppIds",void 0),(0,n.Cg)([o.sH],qa.prototype,"m_mapBlockedClanIds",void 0);function Qa(e,t,a,n){return{strId:"section-"+t,strSectionLabel:t,rtSectionStart:a,rtSectionEnd:n,bIsFutureSection:a>=e,nRenderedHeight:2500,nTopOffset:0}}class Za{m_nForwardStuckCount=0;m_nBackwardStuckCount=0;m_mapCalendarAppsByID=new Map;m_mapCalendarClansByID=new Map;m_mapCalendarEventsByGid=new Map;m_rgSortedCalendarEvents=new Array;m_visibilityStore;m_currentView=o.sH.box(null);m_bFinishedSearchingForward=!1;m_bFinishedSearchingBackward=!1;m_rgCalendarSections=[];m_rgFutureSections=[];m_dtInitTime;m_forwardRequestInFlight;m_backwardRequestInFlight;m_key;m_collectionMetaData=void 0;constructor(e,t){(0,o.Gn)(this),this.m_key=e,this.m_visibilityStore=new Xa.vJ(t),he.Get().HintLoad()}GetNumEventsLoaded(){return this.m_mapCalendarEventsByGid.size}BIsGlobalCalendar(){return!(this.m_key.appids||this.m_key.clanaccountids||this.m_key.collectionid||this.m_key.saleid)}BIsShowingFeaturedFeed(){return Boolean(this.GetCollectionID()===Ua.Featured||this.BIsGlobalCalendar()&&!v.iA.accountid)}BIsSingleSourceCalendar(){return Boolean(this.BIsSingleGroupCalendar()?!this.BIsSingleAppCalendar():this.BIsSingleAppCalendar())}GetKey(){return this.m_key}BEventMatchCalendarSingleSource(e){return this.BIsSingleAppCalendar()&&this.m_key.appids[0]==e.appid||this.BIsSingleGroupCalendar()&&this.m_key.clanaccountids[0]==e.clanid}BIsSingleSourceMuted(){return!!this.BIsSingleSourceCalendar()&&(this.BIsSingleAppCalendar()?qa.Get().BIsMutedAppID(this.GetSingleAppID()):qa.Get().BIsMutedClanID(this.GetSingleGroupID()))}BIsSingleGroupCalendar(){return Boolean(this.m_key.clanaccountids&&1==this.m_key.clanaccountids.length)}GetSingleGroupID(){return this.m_key.clanaccountids[0]}BIsSingleAppCalendar(){return Boolean(this.m_key.appids&&1==this.m_key.appids.length)}GetSingleAppID(){return this.m_key.appids[0]}BIsCollectionCalendar(){return!!this.m_key.collectionid}GetCollectionID(){return this.m_key.collectionid}BIsSaleCalendar(){return!!this.m_key.saleid}GetSaleID(){return this.m_key.saleid}BIsCalendarEndTimeSet(){return!!this.m_key.rtCalendarEnd}GetCalendarEndTime(){return this.m_key.rtCalendarEnd}SetCollectionMetaData(e){this.m_collectionMetaData=e}GetCollectionMetaData(){return this.m_collectionMetaData}BHasCollectionMetaData(){return Boolean(this.m_collectionMetaData)}ValidateCollectionMetadata(e){const t=e;return t&&"object"==typeof t&&t.clanid&&"number"==typeof t.clanid&&t.clan_event_gid&&"string"==typeof t.clan_event_gid}SetFilteredView(e,t){const a=this.m_currentView.get();a&&a.dispose();const n=this.BIsSingleSourceMuted(),o=new Ka((()=>this.m_rgSortedCalendarEvents),this.LoadAdditionalEvents,this.BHitEventHorizon,e,t,n);this.m_currentView.set(o)}BIsFilteredViewEmpty(){return!!this.m_currentView.get()?.BIsViewEmpty()}GetCalendarItemsInTimeRange(e,t){const a=this.m_currentView.get();return a?a.GetCalendarItemsInTimeRange(e,t):(console.error("calendar view not yet initialized"),{rgCalendarItems:[],bIsComplete:!1})}GetActiveEventsAt(e){const t=this.m_currentView.get();return t?t.GetActiveEventsAt(e):(console.error("calendar view not yet initialized"),[])}GetCurrentlyLoadedEventCount(e,t){return this.m_currentView.get()?.GetCurrentlyLoadedEventCount(e,t)}GetCurrentlyLoadedItemsForStats(){return this.m_currentView.get()?.GetCurrentlyLoadedEvents()||[]}GetCalendarSections(e){return e?this.m_rgFutureSections:this.m_rgCalendarSections}GetStoreInitializationTimestamp(){return this.m_dtInitTime||(this.m_dtInitTime=ee.HD.GetTimeNowWithOverrideAsDate()),this.m_dtInitTime}InitCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[],a=e.getTime()/1e3;t.push(Qa(a,(0,k.we)("#EventCalendar_FutureEventsHeader"),a));const n=new Date(e);n.setHours(0,0,0,1);let o=n.getTime()/1e3;t.push(Qa(a,(0,k.we)("#Time_Today"),o,a)),n.setDate(n.getDate()-1);let s=o;o=n.getTime()/1e3,t.push(Qa(a,(0,k.we)("#Time_Yesterday"),o,s));const r=this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1],i=r?r.start_time:a;let l=i>o;for(let e=0;e<5&&!l;e++)n.setDate(n.getDate()-1),s=o,o=n.getTime()/1e3,t.push(Qa(a,(0,k.cc)(n),o,s)),l=i>o;const c=new Date(n);let d=o;for(;c.getMonth()==e.getMonth()&&1!=c.getDate()&&!l;){c.setDate(c.getDate()-7);const e=c.getTime()/1e3;t.push(Qa(a,(0,k.lQ)(d-1),e,d)),l=i>e,d=e}const m=new Date(e);m.setHours(0,0,0,1),m.setDate(1);let p=d;for(let n=1;!l;n++){const o=new Date(m);o.setMonth(e.getMonth()-n,1);const s=o.getTime()/1e3;t.push(Qa(a,(0,k.lQ)(s),s,p)),l=i>s,p=s}this.m_rgCalendarSections.length>t.length?this.m_rgCalendarSections.splice(t.length,this.m_rgCalendarSections.length):t.splice(this.m_rgCalendarSections.length,t.length).forEach((e=>this.m_rgCalendarSections.push(e)))}InitFutureCalendarSections(){const e=this.GetStoreInitializationTimestamp(),t=[];let a;this.m_key.rtCalendarEnd&&(a=this.m_key.rtCalendarEnd);const n=this.m_rgSortedCalendarEvents.length>0&&this.m_rgSortedCalendarEvents[0];n&&(a=n.start_time),a||(a=e.getTime()/1e3);const o=e.getTime()/1e3,s=new Date(e);s.setHours(24,0,0,0);let r=s.getTime()/1e3;t.push(Qa(o,(0,k.we)(this.m_key.bSectionByDay?"#Time_UpNext":"#Time_Today"),o,r));let i=a<=r,l=r;s.setDate(s.getDate()+1),r=s.getTime()/1e3,i||t.push(Qa(o,(0,k.we)("#Time_Tomorrow"),l,r)),i=a<=r;const c=6-Ra()(e).weekday();for(let e=2;e<=c&&!i;e++){l=r;const e=(0,k.cc)(s);s.setDate(s.getDate()+1),r=s.getTime()/1e3,t.push(Qa(o,e,l,r)),i=a<=r}if(this.m_key.bSectionByDay)for(;!i;){l=r;const e=(0,k.$w)(s);s.setDate(s.getDate()+1),r=s.getTime()/1e3,t.push(Qa(o,e,l,r)),i=a<=r}else{const n=new Date(s);let l=r;const c=Ra()(e).daysInMonth();if(n.getMonth()==e.getMonth()&&n.getDate()!=c&&!i){n.setDate(n.getDate()+7);const e=n.getTime()/1e3;t.push(Qa(o,(0,k.we)("#EventCalendar_NextWeek"),l,e)),i=a<=e,l=e}const d=new Date(e);let m;if(d.setMonth(d.getMonth()+1),d.setDate(1),d.setHours(0,0,0,0),n<d&&!i){const e=d.getTime()/1e3;t.push(Qa(o,(0,k.we)("#EventCalendar_LaterThisMonth"),l,e)),i=a<=e,m=e}else m=l;for(let n=2;!i;n++){const s=new Date(d);s.setMonth(e.getMonth()+n);const r=s.getTime()/1e3;t.push(Qa(o,(0,k.lQ)(m),m,r)),i=a<=r,m=r}}this.m_rgFutureSections.length>t.length?this.m_rgFutureSections.splice(t.length,this.m_rgFutureSections.length):t.splice(this.m_rgFutureSections.length,t.length).forEach((e=>this.m_rgFutureSections.push(e)))}async RegisterCalendarEventsAndModels(e){await he.Get().HintLoad(),(0,o.h5)((()=>{this.RegisterCalendarApps(e.apps),this.RegisterCalendarClans(e.clans),this.RegisterCalendarEvents(e.documents),Ha.O3.RegisterClanEvents(e.events),this.RegisterReadEvents(e.events_read),this.RegisterEventVotes(e.event_votes),e.forwardComplete&&(this.m_bFinishedSearchingForward=!0),e.backwardComplete&&(this.m_bFinishedSearchingBackward=!0),this.InitCalendarSections(),this.InitFutureCalendarSections(),this.SetCollectionMetaData(this.ValidateCollectionMetadata(e.metadatainfo)?e.metadatainfo:null)}))}RegisterCalendarApps(e){if(e)for(const t of e){if(this.m_mapCalendarAppsByID.has(t.appid))continue;const e=new Ma.dF;e.appid=t.appid,e.source=t.source,e.playtime=t.playtime,e.last_played=t.last_played,e.wishlist_added=t.wishlist_added,this.m_mapCalendarAppsByID.set(t.appid,e),t.hidden&&this.m_visibilityStore.SetAppVisibility(t.appid,!1)}}RegisterCalendarClans(e){if(e)for(const t of e)if(!this.m_mapCalendarClansByID.has(t.clanid)){const e=new Ma.w2;e.clanid=t.clanid,e.source=t.source,this.m_mapCalendarClansByID.set(t.clanid,e),t.hidden&&this.m_visibilityStore.SetClanVisibility(t.clanid,!1)}}RegisterReadEvents(e){if(!e)return;const t=Oa.KN.Get();for(const a of e)t.SetEventAsRead(a)}RegisterEventVotes(e){if(!e)return;const t=Oa.KN.Get();for(const a of e){const e=void 0===a.vote?void 0:Boolean(a.vote);t.SetVote(a.id,e)}}RegisterCalendarEvents(e){if(e){let t=!1;for(const a of e)this.BInternalInsertCalendarEventItem(a)&&(t=!0);t&&this.RebuildSortedCalendarEventList()}}BHitEventHorizon(e){return"forward"==e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward}GetTimeEdgeForDirection(e,t=void 0){return"forward"===e?this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[0].start_time:t:this.m_rgSortedCalendarEvents.length>0?this.m_rgSortedCalendarEvents[this.m_rgSortedCalendarEvents.length-1].start_time:t}UpdateStuckCounters(e,t){const a="forward"===e?this.m_bFinishedSearchingForward:this.m_bFinishedSearchingBackward,n=this.GetTimeEdgeForDirection(e,void 0);return a||n!==t?("forward"==e?this.m_nForwardStuckCount=0:this.m_nBackwardStuckCount=0,!1):("forward"==e?this.m_nForwardStuckCount++:this.m_nBackwardStuckCount++,!0)}GetRequestInFlight(e){return"forward"===e?this.m_forwardRequestInFlight:this.m_backwardRequestInFlight}SetRequestInFlight(e,t){(0,da.w)(!t||!this.GetRequestInFlight(e),"Already have a request in flight for",e),"forward"===e?this.m_forwardRequestInFlight=t:this.m_backwardRequestInFlight=t}async LoadAdditionalEvents(e,t){if(this.BHitEventHorizon(e))return 1;let a=this.GetRequestInFlight(e);if(a)return a;const n=v.TS.STORE_BASE_URL+"events/ajaxgetusereventcalendarrange/",o="forward"===e?this.m_nForwardStuckCount:this.m_nBackwardStuckCount,s=o<3?o:0,r=o>=3?1:0,i=("dev"===v.TS.WEB_UNIVERSE?50:250)+50*s,l=this.GetTimeEdgeForDirection(e,ee.HD.GetTimeNowWithOverride()),c={minTime:0,maxTime:0,ascending:!0,maxResults:i,populateEvents:15,appTypes:this.m_visibilityStore.GetGameSources().join(","),eventTypes:Array.from(this.m_visibilityStore.enabledEventTypeSet).join(","),appIdFilter:Boolean(this.m_key.appids&&this.m_key.appids.length>0)?this.m_key.appids.sort().join(","):void 0,clanIdFilter:Boolean(this.m_key.clanaccountids&&this.m_key.clanaccountids.length>0)?this.m_key.clanaccountids.sort().join(","):void 0,collectionID:this.m_key.collectionid,saleID:this.m_key.saleid,hubtype:this.m_key.hubtype,category_or_language:this.m_key.category_or_language,tag_name:this.m_key.tag_name,tags:this.m_key.rgTags?this.m_key.rgTags.slice().sort().join(","):void 0};"forward"===e?(c.minTime=Math.floor(l+r),c.ascending=!0):(c.maxTime=Math.floor(l-r),c.ascending=!1);return a=J().get(n,{params:c,cancelToken:t?t.token:void 0,withCredentials:!0}).then((async a=>{if(this.SetRequestInFlight(e,null),1==a.data.success){if(await this.RegisterCalendarEventsAndModels(a.data),this.UpdateStuckCounters(e,l))return this.LoadAdditionalEvents(e,t)}else console.error("LoadAdditionalEvents was not successful: Msg"+a.data.msg);return a.data.success})).catch((t=>{this.SetRequestInFlight(e,null);let a=(0,ae.H)(t);return console.error("LoadAdditionalEvents hit error "+a.strErrorMsg,a),"forward"==e?this.m_bFinishedSearchingForward=!0:this.m_bFinishedSearchingBackward=!0,2})),this.SetRequestInFlight(e,a),a}BInternalInsertCalendarEventItem(e){if(!e.unique_id)return(0,da.w)(!1,"Attmpted to register a calendar event item with an invalid unique id!"),!1;if(this.m_mapCalendarEventsByGid.has(e.unique_id))return!1;const t=this.m_mapCalendarAppsByID.get(e.appid),a=this.m_mapCalendarClansByID.get(e.clanid);if(!t&&!a)return console.log("No AppInfo or ClanInfo For: ",e),!1;const n=new Ma.NK;return n.clanid=e.clanid,n.unique_id=e.unique_id,n.event_type=e.event_type,n.appid=e.appid,n.start_time=e.start_time,n.score=e.score,n.appInfo=t,n.clanInfo=a,this.m_rgSortedCalendarEvents.push(n),this.m_mapCalendarEventsByGid.set(n.unique_id,n),!0}GetCalendarAppInfoForAppID(e){return this.m_mapCalendarAppsByID.get(e)}RebuildSortedCalendarEventList(){const e=this.m_rgSortedCalendarEvents.slice();this.m_rgSortedCalendarEvents=e.sort(((e,t)=>t.start_time-e.start_time))}async UpdateEventBlockFromCalendarEvent(e,t){let a=e.appInfo?e.appid:void 0,n=e.clanInfo?e.clanInfo.clanid:void 0;null!=a||null!=n?(await qa.Get().UpdateCommunitionSetting(t,a,n),ja.V.RecordAppInteractionEvent(a,ja.E.k_eMuted)):(0,da.w)(!1,"Both clan id and account id are missing, cannot change communication status")}GetAllClans(){return Array.from(this.m_mapCalendarClansByID.keys())}GetAllApps(){return Array.from(this.m_mapCalendarAppsByID.keys())}}(0,n.Cg)([o.sH],Za.prototype,"m_mapCalendarAppsByID",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_mapCalendarClansByID",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_mapCalendarEventsByGid",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_rgSortedCalendarEvents",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_bFinishedSearchingForward",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_bFinishedSearchingBackward",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_rgCalendarSections",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_rgFutureSections",void 0),(0,n.Cg)([o.sH],Za.prototype,"m_collectionMetaData",void 0),(0,n.Cg)([o.XI],Za.prototype,"InitCalendarSections",null),(0,n.Cg)([o.XI],Za.prototype,"InitFutureCalendarSections",null),(0,n.Cg)([o.XI],Za.prototype,"RegisterCalendarEventsAndModels",null),(0,n.Cg)([o.XI],Za.prototype,"RegisterCalendarApps",null),(0,n.Cg)([o.XI],Za.prototype,"RegisterCalendarClans",null),(0,n.Cg)([o.XI],Za.prototype,"RegisterReadEvents",null),(0,n.Cg)([o.XI],Za.prototype,"RegisterEventVotes",null),(0,n.Cg)([o.XI],Za.prototype,"RegisterCalendarEvents",null),(0,n.Cg)([za.o],Za.prototype,"BHitEventHorizon",null),(0,n.Cg)([o.XI.bound],Za.prototype,"LoadAdditionalEvents",null),(0,n.Cg)([o.XI],Za.prototype,"UpdateEventBlockFromCalendarEvent",null);class Ka{m_rgLoadedEventsBox=o.sH.box([]);m_lastLoadLatch=null;m_fnGetUnfilteredEvents;m_fnLoadAdditionalEvents;m_fnBHitEventHorizon;m_fnBIsEventInView;m_bSkipStorePreferenceCheck;m_bAllowMutedAndIgnoredSources;m_rgAutorunDisposer;constructor(e,t,a,n,s,r){(0,o.Gn)(this),this.m_fnGetUnfilteredEvents=e,this.m_fnLoadAdditionalEvents=t,this.m_fnBHitEventHorizon=a,this.m_fnBIsEventInView=n,this.m_bSkipStorePreferenceCheck=s,this.m_bAllowMutedAndIgnoredSources=r,this.m_rgAutorunDisposer=(0,o.fm)((async()=>{const e=this.viewFilteredEvents.slice();if(!this.m_bSkipStorePreferenceCheck){const t=Array.from(new Set(e.map((e=>e.appid)).filter(Boolean))).sort();if(this.m_lastLoadLatch=e,await d.A.Get().QueueMultipleAppRequests(t,{...Va,include_assets:!0}),this.m_lastLoadLatch!=e)return;this.m_lastLoadLatch=null}this.m_rgLoadedEventsBox.set(e)}))}dispose(){this.m_rgAutorunDisposer()}get viewFilteredEvents(){return this.m_fnGetUnfilteredEvents().filter((e=>this.m_fnBIsEventInView(e)))}get filteredAndCheckedEvents(){return this.m_rgLoadedEventsBox.get().filter((e=>{if(e.appid){if(!this.m_bAllowMutedAndIgnoredSources&&(qa.Get().BIsMutedAppID(e.appid)||he.Get().BIsGameIgnored(e.appid)))return!1;if(!this.m_bSkipStorePreferenceCheck&&Wa(d.A.Get().GetApp(e.appid)))return!1}else if(!this.m_bAllowMutedAndIgnoredSources&&(qa.Get().BIsMutedClanID(e.clanid)||he.Get().BIsIgnoringCurator($.b.InitFromClanID(e.clanid))))return!1;return!0}))}BIsCompleteThroughTime(e,t){if(this.m_fnBHitEventHorizon(e))return!0;const a=this.m_fnGetUnfilteredEvents();return"forward"===e?t&&a.length>0&&a[0].start_time>t:a.length>0&&a[a.length-1].start_time<t}async EnsureRangeIsLoaded(e,t){for(let e=0;e<100&&!this.BIsCompleteThroughTime("forward",t);e++)await this.m_fnLoadAdditionalEvents("forward");for(let t=0;t<100&&!this.BIsCompleteThroughTime("backward",e);t++)await this.m_fnLoadAdditionalEvents("backward")}GetCalendarItemsInTimeRange(e,t){this.EnsureRangeIsLoaded(e,t);const a=this.filteredAndCheckedEvents.filter((a=>a.start_time>=e&&(!t||a.start_time<t))),n=this.BIsCompleteThroughTime("forward",t),o=this.BIsCompleteThroughTime("backward",e);return{rgCalendarItems:a,bIsComplete:n&&o}}GetCurrentlyLoadedEvents(){return this.filteredAndCheckedEvents}GetCurrentlyLoadedEventCount(e,t){let a=0;this.filteredAndCheckedEvents.forEach((n=>{n.start_time>=e&&(!t||n.start_time<t)&&a++}));const n=this.BIsCompleteThroughTime("forward",t),o=this.BIsCompleteThroughTime("backward",e);return{nCount:a,bIsComplete:n&&o}}BIsViewEmpty(){return this.filteredAndCheckedEvents.length>0}GetActiveEventsAt(e){return this.filteredAndCheckedEvents.map((e=>Ha.O3.GetClanEventModel(e.unique_id))).filter((t=>{if(t){const a=t.endTime||t.startTime+3600;return e>=t.startTime&&e<a}return!1}))}}(0,n.Cg)([o.EW.struct],Ka.prototype,"viewFilteredEvents",null),(0,n.Cg)([o.EW.struct],Ka.prototype,"filteredAndCheckedEvents",null);const Ya=o.sH.box(null),Ja=new Map;function $a(){return null==Ya.get()&&function(e,t){let a="";e.appids&&e.appids.length>0&&(a+="appids:"+e.appids.sort().join(",")),e.clanaccountids&&e.clanaccountids.length>0&&(a+="clanids:"+e.clanaccountids.sort().join(",")),e.collectionid&&(a+="collection:"+e.collectionid),e.saleid&&(a+="sale:"+e.saleid),e.bSectionByDay&&(a+="_sectionbyday"),e.rtCalendarEnd&&(a+="_end:"+e.rtCalendarEnd),e.rgTags&&e.rgTags.length>0&&(a+="_tags:"+e.rgTags.slice().sort().join(",")),e.hubtype&&(a+="_hubtype:"+e.hubtype+"_"+e.category_or_language+"_"+e.tag_name),Ya.get()!==a&&(Ya.set(a),Ja.has(a)||Ja.set(a,new Za(e,t)))}({}),Ja.get(Ya.get())}window.g_EventCalendarMap=Ja;var en=a(90890);function tn(e){const{size:t,color:a,trackColor:n}=e,o={borderColor:n,borderLeftColor:a};if("number"==typeof t){const e=`${t}px`;o.width=e,o.height=e,o.minHeight=e,o.minWidth=e,o.borderWidth=t/10+"px"}return r.createElement("div",{className:(0,D.A)(en.Loading,"small"==t&&en.Small,("medium"==t||!t)&&en.Medium,"large"==t&&en.Large),style:o})}var an=a(15515);const nn=e=>{let t=v.TS.HELP_BASE_URL+"wizard/HelpWithLimitedAccount";return r.createElement(Le.o0,{strTitle:(0,k.we)("#Informational_Message"),onCancel:e.closeModal,onOK:e.closeModal,bAlertDialog:!0},r.createElement("div",null,(0,k.PP)(e.strTokenOverride||"#User_LimitedAccount",r.createElement("a",{href:t,target:v.TS.IN_CLIENT?void 0:"_blank"},(0,k.we)("#User_LimitedAccount_UrlInfo")))))};var on=a(23568),sn=a(67311);const rn=(0,s.PA)((e=>{const{closeModal:t}=e;return r.createElement(Le.o0,{strTitle:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_Title"),strDescription:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_Description"),strOKButtonText:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_OKButton"),strCancelButtonText:(0,k.we)("#EventCalendar_GameSource_UnhideCuratorsDialog_CancelButton"),onOK:()=>{$a().m_visibilityStore.SetGameSourceAllowed(Xa.FD.k_ECurator,!0),t()},onCancel:()=>{$a().m_visibilityStore.SetCuratorUnhideOnFollowDialogDismissed(!0),t()}})}));function ln(e){e||null!==Ya&&($a().m_visibilityStore.BCuratorUnhideOnFollowDialogDismissed()||$a().m_visibilityStore.BIsGameSourceAllowed(Xa.FD.k_ECurator)||(0,Ue.pg)(r.createElement(rn,null),window))}function cn(){return!!Oa.KN.Get().BIsUserLoggedIn()||((0,Ue.pg)(r.createElement(Le.o0,{strTitle:(0,k.we)("#EventDisplay_Share_NotLoggedIn"),strDescription:(0,k.we)("#EventDisplay_Share_NotLoggedIn_Description"),strOKButtonText:(0,k.we)("#MobileLogin_SignIn"),onOK:()=>(0,sn.vg)()}),window),!1)}function dn(e){const t=$.b.InitFromClanID(e),a=Oa.KN.Get().GetPartnerEventPermissions(t);return!a||!a.limited_user||((0,Ue.pg)(r.createElement(nn,null),window),!1)}const mn=e=>{const{className:t,bIgnored:a,bApplyingFollowing:n,bFollowing:o,onFollowClick:s}=e;return ee.HD.bIsFollowingEnabled?r.createElement(S.Gq,{toolTipContent:a||o?void 0:(0,k.we)("#CreatorHome_Follow_tooltip")},r.createElement(b.ml,{className:(0,D.A)(on.Button,an.FollowButton,"FollowButton",t,o?"Followed":""),onClick:s},n&&r.createElement(tn,{size:15}),!n&&(o||a)&&r.createElement(A.Jlk,null),r.createElement("div",{className:an.FollowBtnText},!n&&(o?(0,k.we)("#Button_Followed"):a?(0,k.we)("#Button_Ignored"):(0,k.we)("#Button_Follow"))))):null},pn=e=>{const[t,a]=r.useState(!1),{clanAccountID:n,className:o}=e,s=$.b.InitFromClanID(n),i=(0,Ga.q3)((()=>he.Get().BIsFollowingCurator(s))),l=(0,Ga.q3)((()=>!i&&he.Get().BIsIgnoringCurator(s)));return r.createElement(mn,{className:o,bIgnored:l,bFollowing:i,bApplyingFollowing:t,onFollowClick:()=>{const{clanAccountID:t}=e;cn()&&dn(t)&&(a(!0),(()=>{const{clanAccountID:t,creatorID:n}=e,o=$.b.InitFromClanID(t),s=he.Get().BIsFollowingCurator(o),r=!s&&he.Get().BIsIgnoringCurator(o);he.Get().UpdateFollowOrIgnoreCurator(o,!r,!(r||s)).then((e=>{if(n){let e=La.pF.GetCreatorHomeByID(n);r||e.AdjustFollower(s?-1:1)}a(!1)})).then((()=>{ln(s)})).catch((e=>{a(!1);let t=(0,ae.H)(e);console.error("CuratorFollowButton hit error: "+t.strErrorMsg,t)}))})())}})};var un=a(51848);a(35848);const hn=r.createContext({});function gn(){return r.useContext(hn)}const _n="DEBUG_UseNewGameHover";window.SetHoverPresentation=function(e){window.sessionStorage.setItem(_n,e)};const Sn=5500,Cn=2e3,vn=10;function wn(e,t,a,n){const s=[];if(1==e.length){const t=d.A.Get().GetApp(e[0]);t.GetMicroTrailer(n)&&s.push({rctImage:r.createElement(Z,{appInfo:{id:t.GetID(),type:"game"}}),nDurationMs:Sn});t.GetScreenshots(n).slice(0,vn).forEach(((e,t)=>{s.push({rctImage:r.createElement("img",{key:e,className:O().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:Cn})}))}if(0==s.length)for(const t of e){const e=d.A.Get().GetApp(t),a=e?.GetAssets()?.GetMainCapsuleURL();a&&s.push({rctImage:r.createElement("img",{key:"fallback",className:O().FullDivImage,loading:"lazy",src:a,alt:e.GetName()}),nDurationMs:Cn})}s.length>0?(t(s),a(!0)):"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: GameHoverImages for id/type no images: (might be not age safe screenshots)",(0,o.HO)(e))}function fn(e){const{info:t}=e,a=(0,r.useRef)({include_assets:!0,include_trailers:!0,include_screenshots:!0}),[n,o]=(0,R.G6)(t.id,(0,N.SW)(t.type),a.current),s=(0,r.useRef)(n),[i,l]=(0,r.useState)([]),c=(0,r.useRef)(0),u=(0,m.CH)(),[h]=r.useState(new p.LU),g=X(),_=(0,r.useCallback)(((e=!1)=>{if(e&&(c.current=0),i?.length>0){const e=i[c.current].nDurationMs;h.Schedule(e,(()=>{const e=c.current;c.current=(c.current+1)%i.length,e!=c.current&&(_(),u())}))}}),[i,h,u]);return(0,r.useEffect)((()=>(!n||i&&0!=i.length&&s.current===n?2==o&&0==i.length?l([{rctImage:r.createElement("img",{key:"default",className:O().FullDivImage,loading:"lazy",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXsAAADXCAIAAAB09WZ9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA26SURBVHhe7d1JjyPHEYbhIfkrvAiWLI32BfIGnwwfbNgHAwJsQBfDJ5/8/6/TRUcVE8LMsPL7OBWdUezp91GpWVTkxmJlzHQ7mj788J//vUg4HA7tbI2OHo/HdrZG9w22wWZ63HN77DLXpD1uMe4l7+t8thdVUZ3dyKmJ3cr1+6X7ZqJhmqZ29u704NMU8W6DCD08PLQna9SeB4DHRcYBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pBxANTZM+PYKia8hSt2jSvytJw++/Z37fTdJUtgM92HVt+am9hNPXBlI1/1UHFJxRGp9NJsA99TDr594kXmzwDd1448dOqI948l3BEhXe58+vSb37bTNXZj6wbjosE2GMQvrD2u236b2Kn790Gz0xUL4h4daq95L5K36I4XTcxsV6Ub8HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOqdPv7E1x90qpsPB1Dj5YrlhNWnjRg5DB9dSE++37OdJ3CdLlZ2qlNPRJDd1O9lGD356+bWqOU7f4ar7jvs2467TzdO8pEN3V8aO215LLiy6ixGSg09n9VsOfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQ5/Ty69+00yumfm8+ZIOR5X+ZwZNTa0MHxzaZkjbR177Xdt5BC7Oi76Cp53GnCHcbqL/j6DVFbG4wP/SPPj24ZdaWiCYNHRwb2JtBa+3W6KhlB9dau46I6+Ptrfr6IempL2ubk07nGPhdVbyudgbsJG7+doYq+przcxwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgDhkHQB3zqaOmeFc3mCPd6A2luapFdDdrS0SThg6Oa3dbdGMXNmjhMWz6mqjuevBpUp86evrkq+5vOXjLvm/nV/S+G3Stb5HMCGSrDYYmhXGDJ0fW3SMoGrjtYxbmptbdI95tEBEZvWhPrw38rsq8qP2o67G3e14bHtfdvtduYWbZujc/xwFQh4wDoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+PuP/22na3Th42HRnlxZQqq/6HsLu7Z2dmVedGLqTN+h7nZhQReVPdlaOEPX++fGNh/qO6UuuIpHTIQj9OrVq/ZkzcC/44hl7etuF5b0vr6uJ2rs2zF07JGD810VgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHf85x7KQNWKZ4t35y+V8A11he3AjqwZuUfdc3XufqE6stOPVjqmnSc1++vhLlXHG7awY2e3bgbtaTz0nI1LKoxq6B3b8A0C9rogMe9HzwPKS6guejIpwBKcH9bsdfFcFoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhDxgFQZ7eMcz4vpUTz1/VjIFcwFvO3M2Any+7omhvIY5x58Nc36luHc/r4y+/b6bs7LNqTd5csFdXd52jvsFProO7rXG6XXSRXjmLiVrF3UeY2M30jLBemP0+e76oA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq7JlxdKGRjiZlhs4sbOiLQrWRb+Zet1n2FnW9T7/+4rulVe9IMWXB8W+8vM6RKZCNnrqzKTl+T2tzh76uZ5pM5YuO+7idrZkv2Gs3/PUhOievtu5+mXz5unLYyak5xnDmHnyWYnu2s577vWhqYclVk3EA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXuOONQ4oH7xg26wemjz7+Lrb163CJa9Q5T2Btc5W876XprwtcOM7AZmZpjXOjKxmWbzC1Wj7nBFC3e/K+vH/OX5WFNN3AbvfJpmuaVd9kX3o3GuG3o5SVcH+rvOMvE7XyVDJpFj6WX7Ra258rx3rC3mdlAu9H3f3L78HMcAHXIOADqkHEA1CHjAKhDxgFQh4wDoA4ZB0AdMg6AOnPNcTt9bKbC1Rf+tpOO7QW0rmfEtw69SHYf524XNpQvxOtb+nYbRNQUy7XHIYbW6Ymo7Wg+5zh6bz60mPut9m8cOrockom/Ps5bxyQvWTRZxMP6gSck+X493TshVqcOufrlRV91eeP46Rq8fSxxhe+qANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1yDgA6pia46VItVuoepjjqozVRGUF7Dy4bmAqaHVUrW0Z2XTvMYtqg+/jWdYcm4K0s4lrqc4ZlyK9rjms4+3k0cW8uub49OFn37bTdeYeTd3CsvMN215F9e7S42aMey+DzuCzxAuz+UjfxBk7jmzj7XFN9B23cr32iOipM1FdlL/07TaIoPkth/YIAOORcQDUIeMAqEPGAVCHjAOgDhkHQB0yDoA6ZBwAdU4f+prjniXYb6HryQ6XgrN+o6WBGkNXrJloe1y3zKybKK7r9pF11/lypcZWnZcPlLxTsmAtbeTgYuUR0nV62nna2PeGbqa6cJqiQbfF6Vem5lg4L7do9zZ1Sz+nUkYqJ5jBU0Pv6ezWPe51mXc7E7bJTm+A9rjJvHNSAyixM9vZmnnX9l/YHBBRl61yUdUgXtTDw0N7sobvqoA+tfV2JZPCPSPjAKhDxgFQh4wDoA4ZB0AdMg6AOmQcAHXIOADq3G/G0WVIz5O+JM/zej3R2+Tp3t7JlR/+9I9/t9Nrrq53qdzttojoUfY/HlW+Ox5V31y9sn5ZpnvGPPKosWeZladXpm5ElysHbj+/QbZuoejmynPNyKKBHVmPrUe+aM+vLL+lYLq3J1fOS82xaCD/jhO9uh1n/WEXJpwiXlLIRIfacerB7vR1+ev9/G4G/8dSbmH6dfFzHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnD15+PX9uaefQpUKmkEgXGs0FzaqBq1LKOveP+aVnJAp/ndFXZTNzxfQVdZd7+9tx0zu59e2eZEdb4Kcb2KgeXofnlXcaxH/VY5+Xzu3JlQiKwcOccdrpmrjBVfF75AydNfrRiGzuO1xyYcNWbqfOzWw7i/vQ2N7zBmp/WLKz2dauge2uie6ZgaNrjCwGmKNi6uWfnohM09SerOG7KgB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDqnDz75qp2u0Z99qyvGXLmaibtyNBfv0xNHVA89F1D1j9Hk0tvjTtSrz5XChWGDy86XSrjecWmwPHapsJ26H78E1dFv0Lq7lQuq71JzLBpExlE1x/NNLDbgvDvlFuhHl4FVXzXvwnwSeD8YFyM5tbAM3s47tg9uLrc1bGHL6+6LYOL+zjHz6vBcsJ+gOyejOmX4qGjg+oqi4whN00N7sobvqgC8QeWbNDIOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6DObhnnvJQStSdrZPDZGnpRRg3OO7nCXhTdILE99L4b7fDHv/3YTtccj6rMdY7JIlgdjcHb2ZrDQWXD6DlyahW1xnW3A7upUwtTm8Ddw5l4ZoPY3eUayIXZtcnwNMnB55V1G8xRObUO648itn1Fgwi9evWqPVnDd1UA6pBxANQh4wCoQ8YBUIeMA6AOGQdAHTIOgDpkHAB1UhnHFCE5rndqcC238N3suuynecmGSlwS+1aK8r+k5LbV7OCnX378ZTvtmD8QtW9u0HcZYRvd+xKMr73D1N7K2tzMwvetV96NvGQ3XE7ZPfF2jL0J56zQb7FEI7x+tH+7lmC3ga1Xbmdrlq3ZbXCJCsvUorspaI6Mo/6/HPTGtdtDN8hEteg7cvB20pMZPOS661fdTjq2z6tu8BvIDeLFNmhnj80P3G8QEd3dj627y/C4qI1HUmpna/g5DoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVCHjAOgzuCMY/53/fb4+ExBga04UBJd8V6xdSntZJPMLarpkZPz2u6HP/z1X+10hSkns1V2R/FZxYcXKhpkPdoNU8sGRzW1nNlPLfrrkYMe3Ep2H2rgFmqP6/y8/QYR2bw/I7C5b4ioaSDLjidZhqcH19Eg4hF4eHiIx/b8yukX5rcczB0sbvElI6nuZnu4vSOndszUKmyW7RrYtdnxhUzfofQdPI6dVzewUdEgArZ7O1uTiQb16xfpqfXk+rcc+DkOgDpkHAB1yDgA6pBxANQh4wCoQ8YBUIeMA6AOGQdAncPv//LPdrrOFLMdjt0Gh0V7skZHj7IsOIjuZmHzP9sXZl6V795O1um+7XGdW9eeTNFYgh3Y1LPZSrl+fC6F6w8eARG9UN31shftyRpdhqf6LmXWosEkoxFaao67Tj//6It2usbcwiPv8Hljb95Cru/2kS9S3RN93bqzr2srcQvewvV2YRnXa9ND698kiJjurtmLpje27p6MigY2ulvNsVgWurhmj4qbcAP9974kfo4DoA4ZB0AdMg6AOmQcAHXIOADqkHEA1CHjAKhz+tlHn7fTd6c+0bdVo9kG24nuemo7rV5YZtm+r576py/3J1P4kqya0d3N0Km5B44dfUX3OdQfeykbbuerXFg1iJCNhvb8yuH7P//QTte4vacaROggPzv92P9FhOCmnrUnV2y0nXXoBr57e1xnurupzdxPk7hBg9wci0R3PbXuHV11d119q0VfMfgc6s8cET21WViM3p/6lt9y6C9t5HdV8r3Yk7he+7vntT1BO17Nu77NpOTKdWd+jgOgDhkHQB0yDoA6ZBwAdcg4AOqQcQDUIeMAqEPGAVDlxYv/A7Ox9ZVdSuKwAAAAAElFTkSuQmCC",alt:"default"}),nDurationMs:Cn}]):i?.length&&_():(s.current=n,2==n.GetStoreItemType()||1==n.GetStoreItemType()?((0,da.w)(n.GetIncludedAppIDs().length>0,"expected included apps "+n.GetID()+" "+n.GetStoreItemType()),d.A.Get().QueueMultipleAppRequests(n.GetIncludedAppIDs(),{include_assets:!0}).then((()=>wn(n.GetIncludedAppIDs(),l,_,g)))):1==n.GetAppType()&&n.GetParentAppID()&&!n.GetAllTrailers().BHasTrailers(g)?d.A.Get().QueueAppRequest(n.GetParentAppID(),a.current).then((()=>function(e,t,a,n,o){const s=[],i=d.A.Get().GetApp(t);i.GetMicroTrailer(o)&&s.push({rctImage:r.createElement(Z,{appInfo:{id:i.GetID(),type:"game"}}),nDurationMs:Sn});const l=d.A.Get().GetApp(e).GetScreenshots(o);l.slice(0,vn).forEach(((e,t)=>{s.push({rctImage:r.createElement("img",{key:e,className:O().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:Cn})})),vn-l.length>0&&i.GetScreenshots(o).slice(0,vn).forEach(((e,t)=>{s.push({rctImage:r.createElement("img",{key:e,className:O().FullDivImage,loading:"lazy",src:e,alt:"screenshot "+(t+1)}),nDurationMs:Cn})})),s.length>0?(a(s),n(!0)):"dev"!=v.TS.WEB_UNIVERSE&&"beta"!=v.TS.WEB_UNIVERSE||console.error("DEV ONLY OUTPUT: Demo GameHoverImages for id/type no images: (might be not age safe screenshots)",e,t)}(n.GetID(),n.GetParentAppID(),l,_,g))):wn([n.GetID()],l,_,g)),()=>h.Cancel())),[i,n,o,h,_,s,g]),r.createElement("div",{className:O().TrailerCtn},i?.map(((e,a)=>r.createElement("div",{key:"e-"+a+"-"+t.id+"_"+t.type,className:(0,D.A)(O().FullDivImage,a!=c.current&&O().Transparent)},e.rctImage))))}function bn(e){const{rgTagIDs:t}=e;return r.createElement("div",{className:O().TagRow},r.createElement("div",{className:O().Tags},t.map((e=>r.createElement(_a,{key:"tag_"+e,tagid:e,className:O().Tag})))))}function yn(e){const{appInfo:t,bTruncateTotalReviews:a,bShowTooltip:n}=e,[o]=(0,R.G6)(t?.id,(0,N.SW)(t?.type),{include_reviews:!0});if(!o)return null;const s=he.Get().BShowFilteredUserReviewScores()?o.GetFilteredReviewSummary():o.GetUnfilteredReviewSummary();if(!s||0==s.review_score)return null;let i=O().ReviewScoreNone;i=s.review_score>0&&s.review_score<5?O().ReviewScoreLow:5==s.review_score?O().ReviewScoreMixed:O().ReviewScoreHigh;const l=`${v.TS.STORE_BASE_URL}app/${t.id}/#app_reviews_hash`,c=r.createElement("div",{className:(0,D.A)(O().ReviewScoreValue,i)},r.createElement("div",{className:O().ReviewScoreLabel},s.review_score_label),r.createElement("div",{className:O().ReviewScoreCount},a?"("+s.review_count.toLocaleString()+")":(0,k.we)("#GameHover_UserReviewCount",s.review_count.toLocaleString())),!a&&r.createElement("div",{className:O().ReviewScoreHeader}," ",(0,k.we)("#GameHover_UserReviewsHeader")));let d="#ReviewScore_PercentPositive";if(2===o.GetStoreItemType())d="#ReviewScore_PercentPositive_bundle";else if(0===o.GetStoreItemType())switch(o.GetAppType()){case 6:d="#ReviewScore_PercentPositive_software";break;case 7:d="#ReviewScore_PercentPositive_video";break;case 10:d="#ReviewScore_PercentPositive_hardware";break;case 8:d="#ReviewScore_PercentPositive_series"}return r.createElement(ga,{url:l,className:(0,D.A)(O().ReviewScore,"ReviewScore")},n&&null!=s.percent_positive&&null!=s.review_count&&Boolean(d)?r.createElement(S.he,{bTopmost:!0,toolTipContent:(0,k.we)(d,s.percent_positive,s.review_count)},c):c)}const En=(0,s.PA)((e=>{const{appID:t,snr:a,classOverride:n}=e,[o]=(0,R.t7)(t,{}),[s,i]=(0,r.useState)((()=>!o||1!=o?.GetAppType()&&12!=o?.GetAppType()?t:o.GetParentAppID()||t)),l=s&&he.Get().BIsGameWishlisted(s),c=s&&he.Get().BOwnsApp(s),[d,m]=(0,r.useState)(!1),p=(0,un.m)("GameHoverWishlistButton");if((0,r.useEffect)((()=>{1!=o?.GetAppType()&&12!=o?.GetAppType()||i(o.GetParentAppID()||t)}),[t,o]),c)return null;return r.createElement("div",{className:(0,D.A)(O().WishlistButton,n),onClick:async e=>{e.preventDefault(),e.stopPropagation(),v.iA.logged_in?(m(!0),await he.Get().UpdateGameWishlist(s,!l,a),p.token.reason||m(!1)):(0,sn.vg)()}},l?r.createElement(A.qnF,null):r.createElement(A.T4m,null),r.createElement("div",{className:(0,D.A)(O().WishlistButtonText,d&&O().WishlistLoadingText)},(0,k.we)(l?"#Sale_RemoveFromWishlist":"#Sale_AddToWishlist")))})),In=e=>{const{nCreatorAccountID:t}=e,[a,n]=(0,G.TB)(t),o=(0,La.FV)(t);return r.createElement("div",{className:O().GameHoverCreatorFollowButtonCtn},r.createElement("a",{href:o?.GetCreatorHomeURL("developer")},r.createElement("img",{src:a?(0,I.t)(null,"medium"):n.avatar_medium_url})),r.createElement(pn,{clanAccountID:t}))},Dn=(0,s.PA)((e=>{const{info:t,displayInfo:a,name:n,strStoreUrl:o,elElementToAppend:s,bShowDemoButton:i,bHideBottomHalf:l,bHidePrice:c,bShowDeckCompatibilityDialog:d,bUseSubscriptionLayout:m,nCreatorAccountID:p,bPreventNavigation:u}=e,[h,g]=(0,r.useState)(!1),[_,S]=(0,r.useState)(""),[C]=(0,R.G6)(t.id,(0,N.SW)(t.type),{include_release:!0,include_platforms:!0,include_reviews:!0,include_tag_count:20}),[w]=(0,R.G6)(a.id,(0,N.SW)(a.type),{include_assets:!0}),f=!m&&!i&&!s,b=0==C?.GetStoreItemType();return r.createElement("div",{className:O().BottomShelf,style:{transform:l&&h?_:""},onMouseEnter:()=>g(!0),onFocus:()=>g(!0),onMouseLeave:()=>g(!1),onBlur:()=>g(!1)},r.createElement("a",{href:u?null:o,target:v.TS.IN_CLIENT?void 0:"_blank",className:O().Midline},Boolean(w)&&r.createElement("div",{className:O().CapsuleImageAnchorPoint},r.createElement("div",{className:(0,D.A)(O().CapsuleImageCtn,O().WithCornerShine)},r.createElement("img",{loading:"lazy",src:w?.GetAssets().GetHeaderURL(),alt:C?.GetName()}))),Boolean(!c&&!m)&&r.createElement("div",{className:O().Price},r.createElement(ra,{info:t,onlyOneDiscountPct:!0}))),r.createElement("div",{className:O().BottomShelfOffScreen,ref:e=>S(`translateY( -${e?.clientHeight||0}px )`)},r.createElement("div",{className:O().TextContent},r.createElement("a",{href:u?null:o,target:v.TS.IN_CLIENT?void 0:"_blank"},r.createElement("div",{className:O().GameTitle},C?.GetName()||n)),Boolean(C)&&r.createElement(bn,{rgTagIDs:C.GetTagIDs()}),Boolean(!d&&C)&&r.createElement(yn,{appInfo:t}),Boolean(!d&&f)&&r.createElement("div",{className:O().ReviewsAndRelease},r.createElement(K,{item:t,strClassName:O().PlatformDisplay}),Boolean(C?.GetFormattedSteamReleaseDate())&&r.createElement("div",{className:O().ReleaseDate},C?.GetFormattedSteamReleaseDate())),i&&r.createElement(ta,{info:t,className:O().DemoButton}),Boolean(d&&b)&&r.createElement(ze,{storeItem:C}),Boolean(s)&&s,Boolean(m&&b)&&r.createElement(Sa,{appid:t.id,bIsMuted:!1}),p&&r.createElement(In,{nCreatorAccountID:p}))))}));(0,s.PA)((e=>{r.useEffect((()=>{he.Get().HintLoad()}),[]);const{info:t,displayInfo:a,strStoreUrl:n,bHideBottomHalf:o,bShowDeckCompatibilityDialog:s,bShowWishlistButton:i=!0}=e;let l;return t.overrideNavigation&&(l=e=>t.overrideNavigation()),r.createElement("div",{className:(0,D.A)(O().GameHoverCapsuleCtn,F().InGameHover,o&&O().UseHidingBottomHalf),onClick:l},r.createElement("a",{href:l?null:n,target:v.TS.IN_CLIENT?void 0:"_blank",className:O().TrailerAnchorStoreLink},Boolean(i&&!s&&!l)&&r.createElement(En,{appID:a.id,snr:e.strSNR}),r.createElement(fn,{info:a})),r.createElement(Dn,{...e,bPreventNavigation:Boolean(l)}))}));function An(e){const{type:t,id:a,hoverClassName:n,fnGetIDOverride:o,fnHoverState:s,children:i}=e,l=r.useRef(null),c=r.useCallback((e=>{"clan"!=t&&(s&&s(!0),window.GameHover&&window.GameHover(o?o():l.current,e,"global_hover",{type:t,id:a,v6:1}))}),[t,s,o,a]),d=r.useCallback((e=>{"clan"!=t&&(s&&e.relatedTarget&&s(!1),window.HideGameHover&&window.HideGameHover(o?o():l.current,e,"global_hover"))}),[t,s,o]);return"dev"==v.TS.WEB_UNIVERSE&&(0,da.w)("store"==(0,v.yK)(),"StoreGameHoverAnchorSource only works on Store web properties"),r.createElement("div",{ref:l,className:n,onMouseEnter:c,onMouseLeave:d,onFocus:c,onBlur:d},i)}function Bn(e){const{id:t,type:a,strExtraParams:n}=e,o=(0,be.n9)(),s=gn(),i="clan"==a?(0,l.It)(`${v.TS.STORE_BASE_URL}curator/${t}${n?`?${n}`:""}`,o,s):(0,l.It)(`${v.TS.STORE_BASE_URL}${a}/${t}${n?`?${n}`:""}`,o,s);return r.createElement(An,{...e},r.createElement(b.Ii,{className:e.className,href:i,target:v.TS.IN_CLIENT?void 0:"_blank",rel:"noopener noreferrer"},e.children))}const kn=(0,s.PA)((e=>{const{bIsHovered:t,setIsHovered:a,displayStoreItem:n,baseGameStoreItem:o,displayInfo:s,fallbackStoreItem:i}=function(e,t){const a=(0,r.useRef)(J().CancelToken.source()),{id:n,type:o}=e,s=t?{...we,...t}:we,i=(0,r.useMemo)((()=>({id:n,type:o})),[n,o]),[l]=(0,R.G6)(n,(0,N.SW)(o),s),c=l?.GetIncludedAppIDs()?.length>0?{id:l.GetIncludedAppIDs()[0],type:0}:void 0,[d]=(0,R.G6)(c?.id,c?.type,s),m=(0,r.useMemo)((()=>({id:l?.GetParentAppID()!=l?.GetID()?l?.GetParentAppID():void 0,type:"game"})),[l]),[p]=(0,R.t7)(m.id,s),[u]=(0,r.useState)(++ke.instance_count),[h,g]=(0,r.useState)(!1),_=Ae(o),S=n;return(0,r.useEffect)((()=>()=>a?.current.cancel("StoreSalePreviewWidget: unmounting")),[]),{myInstance:u,bIsHovered:h,setIsHovered:g,displayInfo:i,displayStoreItem:l,baseGameStoreItem:p,baseGameInfo:m,hoverType:_,nHoverId:S,fallbackStoreItem:d}}(e),{bShowDemoButton:c,bPreferDemoStorePage:d,bHidePrice:m,bUseSubscriptionLayout:p,bHidePlatforms:u,bHideContainedApps:h,bAllowTwoLinesForHeader:g,bShowReviewSummary:_,bShowDeckCompatibilityDialog:S,bAutoFocus:C,fnOnClickOverride:w,bIsMarketingMessage:I}=e,A=(0,be.n9)(),B=gn(),P=r.useMemo((()=>n?.GetIncludedAppIDsOrSelf()),[n]),L=(0,r.useRef)(null),[G,M]=(0,r.useState)(!1),H=(0,v.Qn)();if((0,r.useEffect)((()=>{L.current&&M(L.current.offsetWidth<370)}),[L]),!n)return null;const x=n.GetBestPurchaseOption().discount_pct,V=n.GetIncludedAppIDs().length,W=(0,l.L3)(A),U=f(n.GetStorePageURL(d)),z=Boolean(!h&&V>1),j=n.BHasTags()?n.GetTagIDs():o?.BHasTags()?o.GetTagIDs():[],X=1==n.GetStoreItemType()&&1==V,q=0==n.GetStoreItemType()||X,Q=X&&i?i.GetID():s.id,Y=(0,l.It)(U,A,B),$=(0,ht.Ae)(),ee=n.GetName()?.length>0?n.GetName():i.GetName(),te=n.GetFormattedSteamReleaseDate()?.length>0?n.GetFormattedSteamReleaseDate():i?.GetFormattedSteamReleaseDate();let ae=n.GetShortDescription();(2==n.GetStoreItemType()||1==n.GetStoreItemType()&&!X)&&(ae=x?(0,k.we)("#Sale_BundleSave_WithDiscount",x,V):(0,k.we)("#Sale_BundleSave",V)),ae=ae?.length>0?ae:i?.GetShortDescription();const ne=H||n.BIsReleased()||n.BIsPrePurchase();return r.createElement(Be,{appid:q?n.GetAppID():void 0},r.createElement(y.Z,{className:(0,D.A)({[F().StoreSaleWidgetOuterContainer]:!0,[F().AllowTwoLineHeader]:g}),onMouseEnter:()=>!$&&a(!0),onMouseLeave:()=>!$&&a(!1),"flow-children":"grid",navEntryPreferPosition:E.iU.PREFERRED_CHILD,autoFocus:C,navKey:"preview_widget_"+n.GetID()},r.createElement(b.ml,{onClick:I?w:null,className:(0,D.A)(F().StoreSaleWidgetContainer,F().SaleItemDefaultCapsuleDisplay,I?F().MarketingMessage:""),...ma(n,A,H,d,void 0,w),preferredFocus:z},r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetHalfLeft)},r.createElement("a",{href:w?void 0:Y,target:v.TS.IN_CLIENT||w?void 0:"_blank",onClick:w},r.createElement("div",{className:F().StoreSaleWidgetImage},r.createElement(ve,{appids:P}),r.createElement(Gn,{info:s,imageType:"header"}),r.createElement(Pa,{eDeckCompatibilityCategory:n.GetPlatforms()?.steam_deck_compat_category}),Boolean(s&&t)&&r.createElement(Z,{appInfo:s})))),r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetRight,z?F().Bundle:"")},Boolean(q&&!w)&&r.createElement(En,{appID:Q,classOverride:(0,D.A)(O().WishlistButtonNotTop,"WishlistButton"),snr:W}),r.createElement("div",{className:F().TitleCtn},r.createElement("a",{href:w?void 0:Y,target:v.TS.IN_CLIENT?void 0:"_blank",onClick:w},r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetTitle,"StoreSaleWidgetTitle")},ee))),r.createElement("div",{className:F().StoreSaleWidgetReleaseAndTags},j&&r.createElement("div",{className:F().StoreSaleWidgetTags},j.map((e=>r.createElement(_a,{key:"tag_"+e,tagid:e,className:F().AppTag})))),r.createElement("div",{className:F().WidgetReleaseDateAndPlatformCtn,ref:L},q&&r.createElement("div",{className:F().StoreSaleWidgetRelease},te),!u&&r.createElement(r.Fragment,null,r.createElement(K,{item:s,bMinimizePlatforms:G}),Boolean(S&&0==n?.GetStoreItemType()&&n.GetPlatforms())&&r.createElement(T,{className:F().DeckCompatIcon,category:n.GetPlatforms().steam_deck_compat_category}))),_&&r.createElement(yn,{appInfo:s})),z&&r.createElement(Pn,{info:s}),Boolean(q&&ae)&&r.createElement("div",{className:(0,D.A)(F().StoreSaleWidgetShortDesc,"StoreSaleWidgetShortDesc")},Boolean(ae.startsWith("#")&&-1==ae.indexOf(" "))?r.createElement("span",{className:F().LocalizationSpan},(0,k.oW)(ae,r.createElement("i",null),r.createElement("i",null),r.createElement("i",null),r.createElement("i",null))):ae),Boolean(!w)?r.createElement(r.Fragment,null,Boolean(p&&q)?r.createElement(Sa,{appid:Q,bIsMuted:t}):r.createElement(oa,{info:s,bShowDemoButton:c,bHidePrice:m,bHideWishlistButton:ne,bShowDeckCompatibilityDialog:S})):r.createElement("div",{className:F().StoreActionWidgetContainer},r.createElement("div",{className:F().StoreSalePriceActionWidgetContainer},r.createElement(ra,{info:s}))),r.createElement("div",{className:F().StoreSaleWidgetBgTint},r.createElement(Gn,{info:s,imageType:"header"}))))),Boolean(e.strReason)&&e.strReason.length>0&&r.createElement("div",{className:F().RecommendationReason},e.strReason))})),Tn=6;function Pn(e){const{info:t}=e,[a]=(0,R.G6)(t.id,(0,N.SW)(t.type),{}),[n,o]=r.useState(null);return r.useEffect((()=>{a&&(1==a.GetStoreItemType()||2==a.GetStoreItemType()?o(a.GetIncludedAppIDs().map((e=>({id:e,type:"game"})))):console.error("ContentsPreviewList unexpected store item type: ",a.GetStoreItemType()))}),[a]),n?r.createElement("div",{className:F().BundleContentPreview},r.createElement("div",{className:F().ContentsCount},(0,k.Yp)("#Sale_ContentPreview",n.length)),r.createElement("div",{className:F().PreviewCtn},n.slice(0,Tn).map((e=>r.createElement(Ln,{key:`preview${e.id}_${e.type}`,info:e}))))):null}function Ln(e){const{info:t}=e,[a]=(0,R.mZ)(t.id,(0,N.SW)(t.type),{include_assets:!0}),n=a?.GetAssets().GetSmallCapsuleURL();return r.createElement(Bn,{type:Ae(t.type),id:t.id,hoverClassName:F().PreviewItem},r.createElement("img",{src:n,className:F().PreviewImg,loading:"lazy",alt:a?.GetName()}))}function Gn(e){const{info:t,imageType:a}=e,[n]=(0,R.G6)(t.id,(0,N.SW)(t.type),{include_assets:!0});let o;n&&1==n.GetIncludedAppIDs().length&&!function(e,t){const a=e?.GetAssets();if(!a)return!1;switch(t){case"header":return!!a.GetHeaderURL();case"main":return!!a.GetMainCapsuleURL();case"library":return!!a.GetHeroCapsuleURL()||!!a.GetLibraryCapsuleURL();default:return(0,xa.z)(t,`Unhandled imageType: ${t}`),!1}}(n,a)&&[1,2].includes(n.GetStoreItemType())&&(o=n.GetIncludedAppIDs()[0]);const[s]=(0,R.t7)(o,{include_assets:!0}),i=s?.BIsVisible()?s:n;if(!i)return r.createElement(Ve.t,{size:"small",position:"center",string:(0,k.we)("#Loading")});if("library"===a)return r.createElement(Ba,{info:t});let l,c,d=ka(i,"header"===a),m="";if("main"===a)l=F().mainCapsuleImgWidth,c=F().mainCapsuleImgHeight,m=F().MainCapsuleImageContainer;else l=F().headerCapsuleImgWidth,c=F().headerCapsuleImgHeight,m=F().HeaderCapsuleImageContainer;return r.createElement("div",{className:(0,D.A)(m,"CapsuleImageCtn")},r.createElement(Aa,{lazyLoad:!0,srcs:d,className:(0,D.A)(F().CapsuleImage),width:l,height:c,alt:i.GetName()}))}(0,s.PA)((e=>{const t=k.NT.GetWithFallback(e.link.localized_link_capsule,e.language);return r.createElement(ga,{url:e.link.url,className:e.strClassName?e.strClassName:void 0,bSkipForcingStoreLink:!0},r.createElement("div",{className:(0,D.A)(F().CapsuleContainer,e.link.url?F().Linked:"")},Boolean(e.link.localized_link_capsule)&&r.createElement(Da,{className:F().LinkCapsuleImage,src:`${(0,L.mJ)()}${e.clanAccountID}/${t}`}),Boolean(e.link.materialized_link_capsule)&&r.createElement("img",{className:F().LinkCapsuleImage,src:e.link.materialized_link_capsule})))}));var Nn=a(16340),Rn=a(95623);function Mn(e){const{gidEvent:t}=e,a=(0,Nn.RR)(t),[n,o]=(0,r.useMemo)((()=>{if(a?.jsondata?.localized_sale_product_banner?.length>0&&a?.jsondata?.localized_sale_product_mobile_banner?.length>0){const e=(0,yt.sf)(v.TS.LANGUAGE),t=k.NT.GetWithFallback(a.jsondata.localized_sale_product_banner,e),n=k.NT.GetWithFallback(a.jsondata.localized_sale_product_mobile_banner,e);if(t?.length>0&&n?.length>0){const e=a.clanSteamID.GetAccountID();return[`${(0,L.mJ)()}${e}/${t}`,`${(0,L.mJ)()}${e}/${n}`]}}return[null,null]}),[a]);return n?.length>0&&o?.length>0?r.createElement("a",{href:(0,C.k2)(a.GetSaleURL()),className:Rn.Link},r.createElement("img",{src:n,className:(0,D.A)(Rn.Banner,Rn.Big)}),r.createElement("img",{src:o,className:(0,D.A)(Rn.Banner,Rn.Mobile)})):null}var On,Hn=a(73280),Fn=a.n(Hn),xn=a(96290);!function(e){e.topleft="topleft",e.top="top",e.topright="topright",e.left="left",e.middle="middle",e.right="right",e.bottomleft="bottomleft",e.bottom="bottom",e.bottomright="bottomright"}(On||(On={}));let Vn=class extends r.Component{m_rectLinkRegion;m_elLinkRegionBox;m_nLocalOffsetXPct;m_nLocalOffsetYPct;m_fnMouseUp=null;m_fnMouseMove=null;m_listeners=new p.Ji;m_strDescription="";m_aspectRatio=1;componentWillUnmount(){this.m_listeners.Unregister()}constructor(e){super(e),this.state={curLeftPosPct:this.props.xPosPct,curTopPosPct:this.props.yPosPct,curRightPosPct:100-(this.props.widthPct+this.props.xPosPct),curBottomPosPct:100-(this.props.yPosPct+this.props.heightPct),curWidthPct:this.props.widthPct,curHeightPct:this.props.heightPct,EdgeDown:null,text_link_url:this.props.link_url,text_link_description:this.props.link_description,bEditingLink:!1,valid_link:this.validateUrl(this.props.link_url)},this.m_strDescription=this.props.link_description,this.m_aspectRatio=this.props.heightPct>0&&this.props.widthPct>0?this.props.widthPct/this.props.heightPct:1}LinkRegionBoxRef(e){this.m_elLinkRegionBox=e}OnMouseDown(e,t){this.m_fnMouseUp=e=>{this.OnMouseUp(e,t)},this.m_fnMouseMove=e=>{this.OnMouseMove(e,t)},this.setState({EdgeDown:t}),this.m_rectLinkRegion=this.m_elLinkRegionBox.parentElement.getBoundingClientRect(),this.m_nLocalOffsetXPct=(e.clientX-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.state.curLeftPosPct,this.m_nLocalOffsetYPct=(e.clientY-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.state.curTopPosPct,this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mousemove",this.m_fnMouseMove),this.m_listeners.AddEventListener(this.m_elLinkRegionBox.ownerDocument.defaultView,"mouseup",this.m_fnMouseUp),e.preventDefault(),e.stopPropagation()}OnMouseMove(e,t){if(void 0!==this.state.EdgeDown){switch(e.shiftKey&&this.m_fnMouseUp(),t){case On.left:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case On.right:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX)});break;case On.top:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY)});break;case On.bottom:this.UpdateState({curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case On.topleft:this.UpdateState({curTopPosPct:this.CalcBottomEdge(e.clientY),curLeftPosPct:this.CalcLeftEdge(e.clientX)});break;case On.topright:this.UpdateState({curTopPosPct:this.CalcTopEdge(e.clientY),curRightPosPct:this.CalcRightEdge(e.clientX)});break;case On.bottomleft:this.UpdateState({curLeftPosPct:this.CalcLeftEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case On.bottomright:this.UpdateState({curRightPosPct:this.CalcRightEdge(e.clientX),curBottomPosPct:this.CalcBottomEdge(e.clientY)});break;case On.middle:{const t=(0,xn.OQ)(this.CalcLeftEdge(e.clientX),0,100-this.state.curWidthPct),a=100-(t+this.state.curWidthPct),n=(0,xn.OQ)(this.CalcTopEdge(e.clientY),0,100-this.state.curHeightPct),o={curLeftPosPct:t,curRightPosPct:a,curTopPosPct:n,curBottomPosPct:100-(n+this.state.curHeightPct)};this.setState(o);break}}e.preventDefault(),e.stopPropagation()}}IsValidPct(e){return e>=0&&e<=100}UpdateState(e){let t=void 0!==e.curTopPosPct?e.curTopPosPct:this.state.curTopPosPct,a=void 0!==e.curBottomPosPct?e.curBottomPosPct:this.state.curBottomPosPct,n=void 0!==e.curLeftPosPct?e.curLeftPosPct:this.state.curLeftPosPct,o=void 0!==e.curRightPosPct?e.curRightPosPct:this.state.curRightPosPct,s=(0,xn.OQ)(100-o-n,this.props.widthMinPct||0,this.props.widthMaxPct||100),r=(0,xn.OQ)(100-a-t,this.props.heightMinPct||0,this.props.heightMaxPct||100);this.props.bLockAspectRatio&&(void 0!==e.curLeftPosPct||void 0!==e.curRightPosPct?r=s/this.m_aspectRatio:s=r*this.m_aspectRatio),void 0!==e.curLeftPosPct?n=100-o-s:o=100-(n+s),void 0!==e.curTopPosPct?t=100-a-r:a=100-(t+r);const i=100-o-n,l=100-a-t;this.IsValidPct(n)&&this.IsValidPct(o)&&this.IsValidPct(t)&&this.IsValidPct(a)&&this.IsValidPct(i)&&this.IsValidPct(l)&&this.setState({curLeftPosPct:n,curRightPosPct:o,curTopPosPct:t,curBottomPosPct:a})}GetXPercent(e){return(e-this.m_rectLinkRegion.left)/(this.m_rectLinkRegion.right-this.m_rectLinkRegion.left)*100-this.m_nLocalOffsetXPct}GetYPercent(e){return(e-this.m_rectLinkRegion.top)/(this.m_rectLinkRegion.bottom-this.m_rectLinkRegion.top)*100-this.m_nLocalOffsetYPct}CalcLeftEdge(e){return(0,xn.OQ)(this.GetXPercent(e),0,100)}CalcRightEdge(e){return(0,xn.OQ)(100-(this.GetXPercent(e)+this.state.curWidthPct),0,100)}CalcTopEdge(e){return(0,xn.OQ)(this.GetYPercent(e),0,100)}CalcBottomEdge(e){return(0,xn.OQ)(100-(this.GetYPercent(e)+this.state.curHeightPct),0,100)}OnMouseUp(e,t){this.setState({curWidthPct:100-this.state.curRightPosPct-this.state.curLeftPosPct}),this.setState({curHeightPct:100-this.state.curBottomPosPct-this.state.curTopPosPct}),this.setState({EdgeDown:void 0}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description}),this.m_listeners.Unregister()}async HandleDelete(){this.props.deleteFn&&this.props.deleteFn(this.props.index)}OnSetLinkURLChange(e){this.setState({text_link_url:e.target.value,valid_link:this.validateUrl(e.target.value)})}OnSetLinkDescriptionChange(e){this.setState({text_link_description:e.target.value})}validateUrl(e){return/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/i.test(e)}OnSaveLink(){this.m_strDescription=this.state.text_link_description,this.setState({bEditingLink:!this.state.bEditingLink}),this.props.updateFn(this.props.index,{xPosPct:this.state.curLeftPosPct,yPosPct:this.state.curTopPosPct,widthPct:this.state.curWidthPct,heightPct:this.state.curHeightPct,link_url:this.state.text_link_url,link_description:this.state.text_link_description})}OnEditLink(){this.setState({bEditingLink:!this.state.bEditingLink})}render(){let e={left:this.state.curLeftPosPct+"%",top:this.state.curTopPosPct+"%",right:this.state.curRightPosPct+"%",bottom:this.state.curBottomPosPct+"%"},t=Fn().LinkRegionDragBox;return null!==this.state.EdgeDown&&(t+=` ${Fn().EdgeDown} `+Fn()[this.state.EdgeDown]),r.createElement("div",{className:t,style:e,ref:this.LinkRegionBoxRef,draggable:!1},r.createElement("div",{className:Fn().LinkRegionGridBox},r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().TopLeft}`,onMouseDown:e=>{this.OnMouseDown(e,On.topleft)},draggable:!1}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().Top}`,onMouseDown:e=>{this.OnMouseDown(e,On.top)}}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().TopRight}`,onMouseDown:e=>{this.OnMouseDown(e,On.topright)},draggable:!1}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().Left}`,onMouseDown:e=>{this.OnMouseDown(e,On.left)},draggable:!1}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().Middle}`,onMouseDown:e=>{this.OnMouseDown(e,On.middle)},draggable:!1},this.props.deleteFn&&r.createElement("div",{className:Fn().LinkRegionDelete,onClick:this.HandleDelete},r.createElement(A.sED,null)),!this.props.bDisableLink&&r.createElement("div",{className:Fn().LinkRegionSettings,onClick:this.OnEditLink},r.createElement(A.xv8,null)),r.createElement("div",{className:Fn().LinkText}," ",this.m_strDescription," ")),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().Right}`,onMouseDown:e=>{this.OnMouseDown(e,On.right)},draggable:!1}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().BottomLeft}`,onMouseDown:e=>{this.OnMouseDown(e,On.bottomleft)},draggable:!1}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().Bottom}`,onMouseDown:e=>{this.OnMouseDown(e,On.bottom)},draggable:!1}),r.createElement("div",{className:`${Fn().LinkRegionEdge} ${Fn().BottomRight}`,onMouseDown:e=>{this.OnMouseDown(e,On.bottomright)},draggable:!1})),this.state.bEditingLink&&r.createElement("div",{className:Fn().LinkRegionInfo},r.createElement(Pe.pd,{className:Fn().LinkRegionInput,type:"text",name:"link_url",value:this.state.text_link_url,label:(0,k.we)("#SteamTV_LinkURL"),placeholder:"https://www.example.com",onChange:this.OnSetLinkURLChange,mustBeURL:!0}),r.createElement(Pe.pd,{className:Fn().LinkRegionInput,type:"text",name:"link_description",value:this.state.text_link_description,label:(0,k.we)("#SteamTV_LinkDescription"),placeholder:(0,k.we)("#SteamTV_LinkDescription_Placeholder"),onChange:this.OnSetLinkDescriptionChange}),r.createElement("div",{className:Fn().LinkRegionButtonContainer},r.createElement(Pe.$n,{disabled:!this.state.valid_link,onClick:this.OnSaveLink}," ",(0,k.we)("#Button_OK")," "),r.createElement(Pe.$n,{onClick:this.OnEditLink}," ",(0,k.we)("#Button_Cancel")))))}};(0,n.Cg)([m.oI],Vn.prototype,"LinkRegionBoxRef",null),(0,n.Cg)([m.oI],Vn.prototype,"OnMouseDown",null),(0,n.Cg)([m.oI],Vn.prototype,"OnMouseMove",null),(0,n.Cg)([m.oI],Vn.prototype,"OnMouseUp",null),(0,n.Cg)([m.oI],Vn.prototype,"HandleDelete",null),(0,n.Cg)([m.oI],Vn.prototype,"OnSetLinkURLChange",null),(0,n.Cg)([m.oI],Vn.prototype,"OnSetLinkDescriptionChange",null),(0,n.Cg)([m.oI],Vn.prototype,"OnSaveLink",null),(0,n.Cg)([m.oI],Vn.prototype,"OnEditLink",null),Vn=(0,n.Cg)([s.PA],Vn);var Wn=a(92173),Un=a(36701),zn=a(24642),jn=a(32654),Xn=a.n(jn);function qn(){return r.createElement("div",{className:"STV_ReplayBanner"},(0,k.we)("#DASHPlayerControls_IsReplay"))}const Qn=(0,s.PA)((e=>{let t=e.video;if(t&&(t.IsBroadcastClip()||t.IsBroadcastVOD()))return null;let a=c.fK.Loading,n="";if(t){a=t.GetBroadcastState(),n=t.GetBroadcastStateDescription();let e=t.IsBuffering();a==c.fK.Unlocking&&(a=c.fK.Loading,n=""),a==c.fK.Ready&&e&&(a=c.fK.Loading,n="")}if(t&&a!=c.fK.Error&&t.GetUserInputNeeded())return null;if(a==c.fK.Ready)return null;let o=a==c.fK.Loading;return r.createElement("div",{className:"BroadcastVideoWatchState",style:{filter:"hue-rotate(40deg)"}},o&&r.createElement(Ve.t,null),!o&&r.createElement("div",{className:"BroadcastVideoWatchState_Text"},n))}));class Zn extends r.Component{OnClick(){c.BroadcastWatchStore.UserInputClickVideo(this.props.video)}render(){return r.createElement("div",{className:"BroadcastVideoUserInputNeeded",onClick:this.OnClick},r.createElement(A.jGG,null),r.createElement("span",null,(0,k.we)("#DASHPlayerControls_ClickToPlay")))}}(0,n.Cg)([m.oI],Zn.prototype,"OnClick",null);let Kn=class extends r.Component{constructor(e){super(e)}HideStats(){this.props.closeStats&&this.props.closeStats()}render(){let e=this.props.stats;return r.createElement("div",{className:"dash_video_stats"},r.createElement("button",{className:"dash_stat_close_button",onClick:this.HideStats},r.createElement(A.sED,null)),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BufferingResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBufferingResolutionToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_PlaybackResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPlaybackResolutionToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_HtmlResolution")," ",r.createElement("span",{className:"videoStatsValue"},e.GetHTMLVideoResolutionToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_ContentServer")," ",r.createElement("span",{className:"videoStatsValue"},e.GetContentServerToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_StallEvents")," ",r.createElement("span",{className:"videoStatsValue"},e.GetStalledEventsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_FailedDownloads")," ",r.createElement("span",{className:"videoStatsValue"},e.GetFailedDownloadsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_TimeToFirstFrame")," ",r.createElement("span",{className:"videoStatsValue"},e.GetTimeToFirstFrameToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_PlaybackRate")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPlaybackRateForDisplay())),r.createElement(Yn,{stats:e}))}};(0,n.Cg)([m.oI],Kn.prototype,"HideStats",null),Kn=(0,n.Cg)([s.PA],Kn);let Yn=class extends r.Component{constructor(e){super(e)}createBufferedRange(e){let t=this.props.stats,a=[],n=e?"vidbuf":"audbuf",o=e?t.GetNumBufferedVideoRanges():t.GetNumBufferedAudioRanges();if(o>0)for(let s=0;s<o;++s){let o=(0,k.we)(e?"#DASHPlayerStats_VideoBufferRange":"#DASHPlayerStats_AudioBufferRange",s),i=e?t.GetBufferedVideoSegmentForDisplay(s):t.GetBufferedAudioSegmentForDisplay(s);a.push(r.createElement("div",{key:n+s},o," ",r.createElement("span",{className:"videoStatsValue"},i)))}else{let t=(0,k.we)(e?"#DASHPlayerStats_VideoNoRangeInformation":"#DASHPlayerStats_AudioNoRangeInformation");a.push(r.createElement("div",{key:n+"none"},t))}return a}render(){let e=this.props.stats;return r.createElement("div",{className:"dash_video_quick_stats"},r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BytesReceived")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBytesReceivedToDisplay())),this.props.stats.BHasFrameInformation()&&r.createElement("div",null,(0,k.we)("#DASHPlayerStats_DroppedFrames")," ",r.createElement("span",{className:"videoStatsValue"},e.GetDroppedFramesToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_VideoBuffered")," ",r.createElement("span",{className:"videoStatsValue"},e.GetVideoBufferedToDisplay()," ")),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_AudioBuffered")," ",r.createElement("span",{className:"videoStatsValue"},e.GetAudioBufferedToDisplay()," ")),this.createBufferedRange(!0),this.createBufferedRange(!1),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BandwidthRequired")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwidthRequiredToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BandwidthVideo")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwithVideoToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_BandwidthNums")," ",r.createElement("span",{className:"videoStatsValue"},e.GetBandwidthStatsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_DownloadNums")," ",r.createElement("span",{className:"videoStatsValue"},e.GetDownloadTimeStatsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_ActiveDownloads")," ",r.createElement("span",{className:"videoStatsValue"},e.GetActiveDownloadsToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_VideoDownloadProgress")," ",r.createElement("span",{className:"videoStatsValue"},e.GetVideoDownloadProgressToDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_DroppingFrames")," ",r.createElement("span",{className:"videoStatsValue"},e.GetPersistentFrameDropsForDisplay())),r.createElement("div",null,(0,k.we)("#DASHPlayerStats_CurrentFPS")," ",r.createElement("span",{className:"videoStatsValue"},e.GetCurrentFPSForDisplay())))}};Yn=(0,n.Cg)([s.PA],Yn);var Jn=a(24530);class $n extends r.Component{m_elSettingsButton;m_SettingsButtonPos;m_elClickListener;m_elSettingsPanel;m_elSubtitlesButton=r.createRef();m_elSubtitlesPanel=r.createRef();m_SubtitlesButtonPos;constructor(e){super(e),this.state={bSettingsOpen:!1,bSubtitlesOpen:!1}}OnVideoControlClick(e){this.setState({bSettingsOpen:!this.state.bSettingsOpen}),this.m_SettingsButtonPos=[this.m_elSettingsButton.offsetLeft,this.m_elSettingsButton.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnSubtitlesClick(e){this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen}),this.m_SubtitlesButtonPos=[this.m_elSubtitlesButton.current.offsetLeft,this.m_elSubtitlesButton.current.offsetTop],this.m_elClickListener=e.currentTarget.ownerDocument.defaultView,this.m_elClickListener.addEventListener("mouseup",this.OnMouseUp,!0)}OnMouseUp(e){this.m_elClickListener.removeEventListener("mouseup",this.OnMouseUp,!0),(0,de.id)(this.m_elSettingsPanel,e.target)||this.setState({bSettingsOpen:!1}),(0,de.id)(this.m_elSubtitlesPanel.current,e.target)||this.setState({bSubtitlesOpen:!1})}bindSettingsButton(e){this.m_elSettingsButton=e}BindSettingsPanel(e){this.m_elSettingsPanel=e}OnShowStats(e){this.props.onShowStats(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})}render(){let e=!1,t=!1;const{video:a,actions:n}=this.props;let o,s,i=0,l=r.createElement("div",{key:"separator",className:"settingsMenuSeparator"});if(this.state.bSettingsOpen&&(e=!0,o=this.props.video.GetVideoRepresentations(),s=o.map((e=>r.createElement(Jn.n,{key:e.id,onClick:()=>{this.props.video.SetVideoRepresentation(e),this.setState({bSettingsOpen:!this.state.bSettingsOpen})},bChecked:e.selected},e.displayName))),s.push(l),s.push(r.createElement(Jn.D,{key:"statsToggle",onClick:this.OnShowStats},(0,k.we)("#Broadcast_VideoContext_ToggleStats"),"\t")),i=0-(21*s.length+32)),this.state.bSubtitlesOpen){t=!0,s=[],s.push(r.createElement(Jn.n,{key:"none",onClick:()=>{this.props.video.SetSubtitles(null),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},className:"NoSubtitles",bChecked:!1},(0,k.we)("#Broadcast_None")));for(let e=0;e<this.props.video.ListSubtitles().length;e++){const t=this.props.video.ListSubtitles()[e];s.push(r.createElement(Jn.n,{key:t.language,onClick:()=>{this.props.video.SetSubtitles(t.language),this.setState({bSubtitlesOpen:!this.state.bSubtitlesOpen})},bChecked:"showing"===t.mode},t.label))}i=-292}const c=this.props.video.BHasPlayer()&&this.props.video.BHasTimedText();return r.createElement("div",{className:"STV_BroadcastSettings"},c&&r.createElement("div",{className:"videoControlButton"+(c?" ClosedCaptionsActive":""),onClick:this.OnSubtitlesClick,ref:this.m_elSubtitlesButton},r.createElement(A.N8C,null)),r.createElement("div",{className:"videoControlButton VideoSettings "+(e?" VideoSettingsOpen":""),onClick:this.OnVideoControlClick,ref:this.bindSettingsButton},r.createElement(A.wB_,null)),r.createElement(eo,{video:a}),n&&n.map((e=>r.createElement("div",{key:e.key,className:"videoControlButton videoControlFitWidth"},e))),e&&r.createElement("div",{ref:this.BindSettingsPanel,className:"STV_BroadcastSettingsPanel",style:{left:this.m_SettingsButtonPos[0],top:this.m_SettingsButtonPos[1],marginTop:i}},r.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},s)),t&&r.createElement("div",{ref:this.m_elSubtitlesPanel,className:"STV_BroadcastSettingsPanel SubtitlesMenu",style:{maxHeight:"260px",left:this.m_SubtitlesButtonPos[0],top:this.m_SubtitlesButtonPos[1],marginTop:i}},r.createElement("div",{className:"STV_BroadcastSettingsMenuItems"},s)))}}(0,n.Cg)([m.oI],$n.prototype,"OnVideoControlClick",null),(0,n.Cg)([m.oI],$n.prototype,"OnSubtitlesClick",null),(0,n.Cg)([m.oI],$n.prototype,"OnMouseUp",null),(0,n.Cg)([m.oI],$n.prototype,"bindSettingsButton",null),(0,n.Cg)([m.oI],$n.prototype,"BindSettingsPanel",null),(0,n.Cg)([m.oI],$n.prototype,"OnShowStats",null);let eo=class extends r.Component{constructor(e){super(e),(0,o.Gn)(this)}k_nHideSliderTimeout=1500;m_bShowSlider=true;m_schHideSlider=new p.LU;m_bChildDragging=!1;m_bMouseOver=!1;componentWillUnmount(){this.m_schHideSlider.Cancel()}ToggleMute(){let e=this.props.video,t=e.IsMuted();e.SetMute(!t),e.GetVolume()<.01&&e.SetVolume(.5)}OnMouseEnter(e){this.m_bShowSlider=!0,this.m_bMouseOver=!0,this.m_schHideSlider.Cancel()}OnMouseLeave(e){this.m_bMouseOver=!1,this.ScheduleHide()}OnChildDrag(e){this.m_bChildDragging=e,this.ScheduleHide()}ScheduleHide(){this.m_bMouseOver||this.m_bChildDragging||this.m_schHideSlider.Schedule(this.k_nHideSliderTimeout,(()=>this.m_bShowSlider=true))}render(){let e=this.props.video,t=e.IsMuted(),a=100*e.GetVolume(),n="videoControlButton";a>65?n+=" HighestVolume":a>45?n+=" HighVolume":a<46&&a>24?n+=" MedVolume":a<25&&(n+=" LowVolume");let o="BroadcastVolumeControl";return this.m_bShowSlider&&(o+=" ShowVolumeSlider"),t&&(o+=" muted"),r.createElement("div",{className:o,onMouseEnter:this.OnMouseEnter,onMouseLeave:this.OnMouseLeave},r.createElement("div",{className:"BroadcastVolumeControl_FixedLayout"},r.createElement("div",{className:n,onClick:this.ToggleMute},r.createElement(A.fSs,null)),r.createElement(to,{video:e,onDrag:this.OnChildDrag})))}};(0,n.Cg)([o.sH],eo.prototype,"m_bShowSlider",void 0),(0,n.Cg)([m.oI],eo.prototype,"ToggleMute",null),(0,n.Cg)([m.oI],eo.prototype,"OnMouseEnter",null),(0,n.Cg)([m.oI],eo.prototype,"OnMouseLeave",null),(0,n.Cg)([m.oI],eo.prototype,"OnChildDrag",null),eo=(0,n.Cg)([s.PA],eo);let to=class extends r.Component{constructor(e){super(e),(0,o.Gn)(this)}m_elSlider=null;m_nVolumeStartOfDrag=0;OnMouseDown(e){let t=e.currentTarget;this.m_elSlider=t,this.m_nVolumeStartOfDrag=this.props.video.GetVolume(),this.SetVolumeWithCoord(t,e.clientX),t.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),t.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp),this.props.onDrag(!0)}OnMouseMove(e){this.m_elSlider&&this.SetVolumeWithCoord(this.m_elSlider,e.clientX)}OnMouseUp(e){if(!this.m_elSlider)return;this.SetVolumeWithCoord(this.m_elSlider,e.clientX);let t=this.props.video;t.IsMuted()&&t.SetVolume(this.m_nVolumeStartOfDrag),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_nVolumeStartOfDrag=0,this.m_elSlider=null,this.props.onDrag(!1)}SetVolumeWithCoord(e,t){let a=e.getBoundingClientRect(),n=xn.Fu(t,a.left,a.right,0,1),o=xn.OQ(n,0,1),s=this.props.video;s.SetMute(n<.01),s.SetVolume(o)}render(){let e=this.props.video,t=100*e.GetVolume();e.IsMuted()&&(t=0);let a={left:`${t}%`},n={width:`${t}%`};return r.createElement("div",{className:"BroadcastVolumeSlider",onMouseDown:this.OnMouseDown},r.createElement("div",{className:"BroadcastVolumeSlider_Track"}),r.createElement("div",{className:"BroadcastVolumeSlider_Fill",style:n}),r.createElement("div",{className:"BroadcastVolumeSlider_Thumb",style:a}))}};(0,n.Cg)([m.oI],to.prototype,"OnMouseDown",null),(0,n.Cg)([m.oI],to.prototype,"OnMouseMove",null),(0,n.Cg)([m.oI],to.prototype,"OnMouseUp",null),(0,n.Cg)([o.XI],to.prototype,"SetVolumeWithCoord",null),to=(0,n.Cg)([s.PA],to);const ao=15;let no=class extends r.Component{m_schHideControls=new p.LU;m_schUnmountControls=new p.LU;m_elVideo=null;m_elBroadcastPlayer=null;m_bMouseDown=!1;m_elMouseDown=null;m_listeners=new p.Ji;constructor(e){super(e),this.state={bMountControls:!1,bControlsVisible:!1,bShowStats:!1,video:null,nResizedHeight:null,bFullscreen:!1}}StopVideo(){let e=this.state.video;e&&(c.BroadcastWatchStore.StopVideo(e),this.setState({video:null}),this.props.fnSetBroadcastVideo?.(null))}IsMuted(){let e=this.state.video;return!e||e.IsMuted()}StopPlaybackTillUserInput(){let e=this.state.video;e&&e.StopPlaybackTillUserInput()}componentDidUpdate(e,t){!t.bMountControls&&this.state.bMountControls?setTimeout((()=>{this.setState((e=>({bControlsVisible:e.bMountControls})))}),15):t.bControlsVisible&&!this.state.bControlsVisible&&this.state.video&&!this.state.video.IsPaused()&&this.m_schUnmountControls.Schedule(2e3,this.UmountControls),this.props.steamIDBroadcast!==e.steamIDBroadcast&&this.BindVideoRef(this.m_elVideo),!this.props.nAppIDVOD||void 0!==t.strInitialCapsuleImageUrl&&e.nAppIDVOD==this.props.nAppIDVOD||d.A.Get().QueueAppRequest(this.props.nAppIDVOD,{include_assets:!0,include_trailers:!0}).then((()=>{const e=d.A.Get().GetApp(this.props.nAppIDVOD),t=e?.GetAssets().GetMainCapsuleURL()||"";this.setState({strInitialCapsuleImageUrl:t})}))}componentWillUnmount(){this.m_listeners.Unregister(),this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.StopVideo()}BindBroadcastPlayerRef(e){this.m_listeners.Unregister(),this.m_elBroadcastPlayer=e,e&&(this.m_listeners.AddEventListener(e,"fullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"mozfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"webkitfullscreenchange",this.OnFullscreenChange),this.m_listeners.AddEventListener(e,"msfullscreenchange",this.OnFullscreenChange))}BindVideoRef(e){let t;this.StopVideo(),this.props.steamIDBroadcast?e&&(t=c.BroadcastWatchStore.CreateBroadcastVideo(e,this.props.steamIDBroadcast,this.props.watchLocation,this.props.bWebRTC)):this.props.broadcastClipID?e&&(t=c.BroadcastWatchStore.CreateClipVideo(e,this.props.broadcastClipID,this.props.watchLocation)):this.props.nAppIDVOD&&e&&(t=c.BroadcastWatchStore.CreateVODVideo(e,this.props.nAppIDVOD,this.props.watchLocation),this.props.fnOnVideoEnd&&t.SetOnVideoCallback(this.props.fnOnVideoEnd)),t&&(this.props.bStartMuted&&t.SetMute(!0),this.props.bStartWithSubtitles&&t.SetStartWithSubtitles(!0),this.props.bStartPaused?t.StopPlaybackTillUserInput():t.Play()),this.setState({video:t}),this.props.fnSetBroadcastVideo?.(t),this.m_elVideo=e}OnMouseDown(e){this.m_bMouseDown=!0,this.m_elMouseDown=e.currentTarget,this.m_elMouseDown.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}OnMouseUp(e){this.m_bMouseDown=!1,this.m_elMouseDown.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseMove(e){this.m_schHideControls.Cancel(),this.m_schUnmountControls.Cancel(),this.state.bMountControls?this.state.bControlsVisible||this.setState({bControlsVisible:!0}):this.setState({bMountControls:!0}),this.m_schHideControls.Schedule(3200,this.HideControls)}OnMouseLeave(e){this.HideControls()}HideControls(){this.state.bControlsVisible&&!this.m_bMouseDown&&this.setState({bControlsVisible:!1})}UmountControls(){this.setState((e=>{if(!e.bControlsVisible&&e.bMountControls)return{bMountControls:!1}}))}ShowStatsView(){let e=this.state.video;e&&(this.state.bShowStats||(this.setState({bShowStats:!0}),e.SetStatsViewIsVisible(!0)))}OnContextMenu(e){this.state.bFullscreen||((0,i.lX)(r.createElement(h.tz,null,this.GetContextMenuItems()),e),e.preventDefault())}ToggleStatsView(e){let t=!this.state.bShowStats;this.setState({bShowStats:t});let a=this.state.video;a&&a.SetStatsViewIsVisible(t)}ShowStorePage(e){let t=this.state.video;if(!t||!this.props.onOpenLinkInNewWindow)return;let a=t.GetBroadcastInfo();if(!a)return;let n=(0,l.k2)(`${v.TS.STORE_BASE_URL}app/${a.m_strAppId}`);this.props.onOpenLinkInNewWindow(e,n),e.stopPropagation()}GetContextMenuItems(){let e=[],t=this.state.video;if(!t)return e;let a=t.GetBroadcastInfo();return e.push(r.createElement(h.IK,{key:"togglestats",bChecked:this.state.bShowStats,onSelected:e=>{this.ToggleStatsView(e)}},(0,k.we)("#Broadcast_VideoContext_ToggleStats"))),a&&"0"!=a.m_strAppId&&Number.parseInt(a.m_strAppId)!=c.fO&&e.push(r.createElement(h.kt,{key:"visitstore",onSelected:e=>{this.ShowStorePage(e)}},(0,k.we)("#Broadcast_VideoContext_OpenStore"))),e}CloseStats(){let e=this.state.video;e&&this.state.bShowStats&&(this.setState({bShowStats:!1}),e.SetStatsViewIsVisible(!1))}OnToggleFullscreen(){this.m_elBroadcastPlayer&&((0,de.ww)(this.m_elBroadcastPlayer)?(0,de.MS)(this.m_elBroadcastPlayer):(0,de.tl)(this.m_elBroadcastPlayer,this.m_elVideo))}OnFullscreenChange(e){if(!this.m_elBroadcastPlayer)return;let t=(0,de.ww)(this.m_elBroadcastPlayer);this.setState({bFullscreen:t})}BHideVideoControls(){let e=this.state.video;return!e||(!!e.GetUserInputNeeded()||c.BroadcastWatchStore.GetBroadcastState(e)==c.fK.Error)}render(){const e=this.state.video,t=e&&e.IsPaused(),a=e&&e.BHasDASHStats()&&this.state.bShowStats,n=Boolean(e&&e.IsReplay()),o=this.state.bMountControls,s=this.state.bControlsVisible||t,i=e&&e.GetUserInputNeeded(),l=e?.IsBroadcastVOD()&&i&&this.state.strInitialCapsuleImageUrl;let c="videoContainer";s||(c+=" HidePlayerControls"),t&&(c+=" VideoPaused"),this.state.bFullscreen&&(c+=" fullscreenVideo"),this.props.classes&&(c+=" "+this.props.classes);let d=[];!this.state.bFullscreen&&this.props.actions&&(d=d.concat(this.props.actions)),!this.state.bFullscreen&&this.props.onTheaterMode&&d.push(r.createElement("div",{key:"ChatPosToggle ChatTheaterToggle",onClick:this.props.onTheaterMode,title:(0,k.we)("#Broadcast_View_Theater"),className:"BroadcastTheaterToggle"})),d.push(r.createElement("div",{key:"FullscreenToggle",title:(0,k.we)("#Broadcast_View_Fullscreen"),onClick:this.OnToggleFullscreen,className:"BroadcastFullscreenToggle"}));const m=o&&!this.BHideVideoControls(),p=o&&!this.state.bFullscreen,h=this.props.fnRenderBroadcastContext&&this.props.fnRenderBroadcastContext();return r.createElement("div",{ref:this.BindBroadcastPlayerRef,className:c,onMouseMove:this.OnMouseMove,onClick:this.OnMouseMove,onMouseLeave:this.OnMouseLeave,onContextMenu:this.OnContextMenu,onMouseDown:this.OnMouseDown},h&&r.createElement("div",{className:Xn().BroadcastContext},h),n&&r.createElement(qn,null),this.props.showVideoBackgroundBlur&&r.createElement(u,{className:"videoBlur",elementRef:this.m_elVideo,updateRate:33,width:320,height:180,reductionFactor:10,blurAmount:5}),r.createElement("video",{className:"videoSrc",ref:this.BindVideoRef,muted:this.props.bMuted??!0,autoPlay:!0,playsInline:!0,controls:!1,onVolumeChange:this.props.fnVolumeChanged,onClick:this.props.fnVideoClick}),this.props.linkRegions?r.createElement(Co,{linkRegions:this.props.linkRegions,editMode:this.props.editMode,onSaveLinkRegions:this.props.onSaveLinkRegions}):null,this.props.linkElement,l&&r.createElement("img",{loading:"lazy",className:(0,D.A)(Xn().BroadcastPlaceholderImg,"BroadcastPlaceholderImg"),src:this.state.strInitialCapsuleImageUrl}),m&&r.createElement(so,{video:e,actions:d,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow,onShowStats:this.ToggleStatsView,bIncludeClipEditor:this.props.bIncludeClipEditor}),p&&r.createElement(ro,{onClick:this.props.onRequestClose}),a&&r.createElement(Kn,{stats:e.GetDASHPlayerStats(),closeStats:this.CloseStats}),r.createElement(Qn,{video:e}),i&&r.createElement(Zn,{video:e}))}};(0,n.Cg)([m.oI],no.prototype,"BindBroadcastPlayerRef",null),(0,n.Cg)([m.oI],no.prototype,"BindVideoRef",null),(0,n.Cg)([m.oI],no.prototype,"OnMouseDown",null),(0,n.Cg)([m.oI],no.prototype,"OnMouseUp",null),(0,n.Cg)([m.oI],no.prototype,"OnMouseMove",null),(0,n.Cg)([m.oI],no.prototype,"OnMouseLeave",null),(0,n.Cg)([m.oI],no.prototype,"HideControls",null),(0,n.Cg)([m.oI],no.prototype,"UmountControls",null),(0,n.Cg)([m.oI],no.prototype,"ShowStatsView",null),(0,n.Cg)([m.oI],no.prototype,"OnContextMenu",null),(0,n.Cg)([m.oI],no.prototype,"ToggleStatsView",null),(0,n.Cg)([m.oI],no.prototype,"ShowStorePage",null),(0,n.Cg)([m.oI],no.prototype,"CloseStats",null),(0,n.Cg)([m.oI],no.prototype,"OnToggleFullscreen",null),(0,n.Cg)([m.oI],no.prototype,"OnFullscreenChange",null),no=(0,n.Cg)([s.PA],no);const oo=no;let so=class extends r.Component{render(){const{video:e}=this.props;if(!e)return null;let t=e.has_segments;return r.createElement("div",{className:"videoControls"},r.createElement(_o,{steamID:this.props.video.GetBroadcastSteamID(),bHideThumbnail:!0,bVerticalBroadcastChat:!0,onOpenLinkInNewWindow:this.props.onOpenLinkInNewWindow}),r.createElement("div",{className:"videoControlsBottom"+(t?"":" noSegments")},r.createElement(go,{video:e,bIncludeClipEditor:this.props.bIncludeClipEditor}),r.createElement("div",{className:"STV_BroadcastController"},r.createElement("div",{className:"videoControlsButtons LeftSpacer"}),r.createElement(io,{video:e}),r.createElement(lo,{video:e}),r.createElement($n,{video:e,actions:this.props.actions,onShowStats:this.props.onShowStats}))))}};so=(0,n.Cg)([s.PA],so);class ro extends r.PureComponent{render(){return this.props.onClick?r.createElement("div",{className:"STV_BroadcastClose",onClick:this.props.onClick},r.createElement(A.sED,null)):null}}class io extends r.Component{OnJumpBackward(){this.props.video.JumpTime(-15)}OnJumpForward(){this.props.video.JumpTime(ao)}render(){let e=this.props.video,t=e.CanSeek();return r.createElement("div",{className:"videoControlsButtons PlayControls"},r.createElement(mo,{video:e}),t&&r.createElement("div",{className:"videoControlButton videoControlJump controlFlip",onClick:this.OnJumpBackward},r.createElement(A.tID,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!0}),r.createElement("div",{className:"jumpAheadValue"},ao)),r.createElement(co,{video:e}),t&&r.createElement("div",{className:"videoControlButton videoControlJump",onClick:this.OnJumpForward},r.createElement(A.tID,{bHidePostArrow:!0,bHidePreArrow:!0,bShowJumpAheadBox:!0,bFlipHorizontal:!1}),r.createElement("div",{className:"jumpAheadValue"},ao)),t&&r.createElement(po,{video:e}))}}(0,n.Cg)([m.oI],io.prototype,"OnJumpBackward",null),(0,n.Cg)([m.oI],io.prototype,"OnJumpForward",null);const lo=(0,s.PA)((e=>{if(e.video.IsBroadcastClip()||e.video.IsBroadcastVOD())return null;let t=e.video.IsOnLiveEdge();return r.createElement("div",{className:"videoControlsButtons GoLive"},r.createElement("div",{className:"videoControlButton videoControlGoLive"+(t?" isLiveEdge":""),onClick:t?null:t=>{e.video.JumpToLiveEdge()}},r.createElement(A.tID,{bHidePreArrow:!0,bHidePostArrow:!0,bFlipHorizontal:!1}),r.createElement("div",{className:"jumpGoLive"},(0,k.we)(t?"#DASHPlayerControls_IsLive":"#DASHPlayerControls_GoLive"))))}));let co=class extends r.Component{OnTogglePlayPause(){this.props.video.TogglePlayPause()}render(){let e=this.props.video.IsPaused();return r.createElement("div",{className:"videoControlButton buttonPlayPause",onClick:this.OnTogglePlayPause},e?r.createElement(A.jGG,null):r.createElement(A.vRz,null))}};(0,n.Cg)([m.oI],co.prototype,"OnTogglePlayPause",null),co=(0,n.Cg)([s.PA],co);let mo=class extends r.Component{constructor(e){super(e),(0,o.Gn)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}video=void 0;get has_previous_marker(){return void 0!==this.GetPreviousMarkerTime()}GetPreviousMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=e.length-1;a>=0;a--)if(!(e[a].nTime>=t))return e[a].nTime}OnJumpToPreviousMarkerClicked(e){let t=this.GetPreviousMarkerTime();void 0!==t&&this.props.video.Seek(t-.2)}render(){let e=this.props.video.BHasMarkersOrSegments();return r.createElement("div",{className:"videoControlButton jumpToMarker controlFlip"+(e?"":" noMarkersOrSegments")+(this.has_previous_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToPreviousMarkerClicked},r.createElement(A.tID,{bHidePostArrow:!0,bFlipHorizontal:!0}))}};(0,n.Cg)([o.sH],mo.prototype,"video",void 0),(0,n.Cg)([o.EW],mo.prototype,"has_previous_marker",null),(0,n.Cg)([m.oI],mo.prototype,"OnJumpToPreviousMarkerClicked",null),mo=(0,n.Cg)([s.PA],mo);let po=class extends r.Component{constructor(e){super(e),(0,o.Gn)(this),this.video=e.video}componentDidUpdate(){this.video=this.props.video}video=void 0;get has_next_marker(){return void 0!==this.GetNextMarkerTime()}GetNextMarkerTime(){if(!this.video.has_markers)return;let e=this.video.GetTimelineMarkers(),t=this.video.GetPlaybackTime();for(let a=0;a<e.length;a++)if(!(e[a].nTime<=t))return e[a].nTime}OnJumpToNextMarkerClicked(e){let t=this.GetNextMarkerTime();void 0!==t&&this.props.video.Seek(t)}render(){let e=this.props.video.BHasMarkersOrSegments();return r.createElement("div",{className:"videoControlButton jumpToMarker"+(e?"":" noMarkersOrSegments")+(this.has_next_marker?"":" noMarkersInDirection"),onClick:this.OnJumpToNextMarkerClicked},r.createElement(A.tID,{bHidePostArrow:!0,bFlipHorizontal:!1}))}};(0,n.Cg)([o.sH],po.prototype,"video",void 0),(0,n.Cg)([o.EW],po.prototype,"has_next_marker",null),(0,n.Cg)([m.oI],po.prototype,"OnJumpToNextMarkerClicked",null),po=(0,n.Cg)([s.PA],po);const uo=e=>r.createElement("div",{className:"timelineMarker",title:e.label,style:{left:e.pos+"%"},onMouseEnter:()=>e.onMouseEnter(e.pos),onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown?e.onMouseDown:void 0},r.createElement("div",{className:"timelineMarkerIcon"},r.createElement(A.Dp6,null)));function ho(e){let t=e.startPos,a=e.endPos,n="",o=1;return t<0&&(o=(a-t)/10,t=0,n=" hideFront"),r.createElement("div",{className:"STV_timelineSegment"+n,style:{left:t+"%",width:a-t+"%",opacity:o},onClick:e.onClick},r.createElement("div",{className:"STV_timelineSegmentFrontFill",style:{borderColor:"rgb("+e.color+")"}}),r.createElement("div",{className:"STV_timelineSegmentLabel",style:{color:"rgb("+e.color+")"}},e.label),r.createElement("div",{className:"STV_timelineSegmentBackFill",style:{borderColor:"rgb("+e.color+")"}}))}let go=class extends r.Component{m_elSlider=r.createRef();m_rectSlider=void 0;constructor(e){super(e),this.state={nGrabberMouseDownTime:0,bGrabberMouseDown:!1,nHoverValue:void 0,hoverX:0,bStartMouseDown:!1,bEndMouseDown:!1,thumbnailURL:""}}OnMouseDown(e,t){if(this.m_elSlider){e.persist(),this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();let a={};"start"===t?(a={bStartMouseDown:!0},e.stopPropagation()):"end"===t?(a={bEndMouseDown:!0},e.stopPropagation()):a={bGrabberMouseDown:!0},this.setState(a,(()=>this.AdjustSliderForClientX(e.clientX))),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.addEventListener("mouseup",this.OnMouseUp)}}OnMouseMove(e){this.AdjustSliderForClientX(e.clientX)}OnMouseUp(e){this.state.bStartMouseDown?this.setState({bStartMouseDown:!1}):this.state.bEndMouseDown?this.setState({bEndMouseDown:!1}):(this.props.video.Seek(this.state.nGrabberMouseDownTime),this.setState({bGrabberMouseDown:!1,nGrabberMouseDownTime:0})),this.m_elSlider.current&&(this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mousemove",this.OnMouseMove),this.m_elSlider.current.ownerDocument.defaultView.removeEventListener("mouseup",this.OnMouseUp))}OnKeyDown(e){37==e.keyCode?(this.props.video.JumpTime(-15),e.preventDefault()):39==e.keyCode&&(this.props.video.JumpTime(15),e.preventDefault())}AdjustSliderForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),n=t.GetTimelineStartPos()+t.GetTimelineDuration(),o=t.GetTimeAtMousePosition(e,this.m_rectSlider,a,n);if(this.state.bStartMouseDown){const e=xn.OQ(o,a,t.m_editorEndTime-5);t.m_editorStartTime=e}else if(this.state.bEndMouseDown){const e=xn.OQ(o,t.m_editorStartTime+5,n);t.m_editorEndTime=e}else o!=this.state.nGrabberMouseDownTime&&this.setState({nGrabberMouseDownTime:o})}OnMouseHoverMove(e){this.AdjustHoverForClientX(e.clientX)}OnMouseHoverLeave(e){this.setState({hoverX:0})}AdjustHoverForClientX(e){let t=this.props.video,a=t.GetTimelineStartPos(),n=t.GetTimelineStartPos()+t.GetTimelineDuration();this.m_rectSlider=this.m_elSlider.current&&this.m_elSlider.current.getBoundingClientRect();t.GetTimeAtMousePosition(e,this.m_rectSlider,a,n)}OnSegmentClick(e){this.props.video.Seek(e)}OnMarkerMouseEnter(e){this.setState({nHoverValue:e})}OnMarkerMouseLeave(){this.setState({nHoverValue:void 0})}render(){let e=this.props.video,t=this.state.bGrabberMouseDown,a=e.GetPercentOffsetFromTime(this.state.nGrabberMouseDownTime,c.a0.Timeline),n=e.GetPercentOffsetFromTime(e.GetPlaybackTime(),c.a0.Timeline),o=e.GetPercentOffsetFromTime(e.GetVideoAvailableStartTime(),c.a0.Timeline);o<.05&&(o=0);let s=xn.OQ(a,0,100).toFixed(1)+"%",i=xn.OQ(n,0,100).toFixed(1)+"%",l=xn.OQ(o,0,100).toFixed(1)+"%",d={},m={},p={},u={};t?(u.left=s,d.width=s,m.width=i,p.width=l):(u.left=i,m.width=i,p.width=l);let h=(0,zn.ap)(e.GetPlaybackTime()),g=(0,zn.ap)(this.state.nHoverValue),_="STV_timelineContainer";this.state.bGrabberMouseDown&&(_+=" grabberDown"),e.IsTimelineMapActive()&&(_+=" minimapActive");let S="";a=t?a:n,a>100?S=" grabberOffScreenRight grabberOffscreen":a<0&&(S=" grabberOffScreenLeft grabberOffscreen");let C=[];e.GetTimelineMarkers().forEach(((t,a)=>{let n=e.GetPercentOffsetFromTime(t.nTime,c.a0.Timeline);n<0||n>100||C.push(r.createElement(uo,{key:a,pos:n,label:t.strTemplateName,onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave}))}));let v=[];e.GetTimelineSegments().forEach(((t,a)=>{let n=e.GetPercentOffsetFromTime(t.nTimeStart,c.a0.Timeline);if(n>100)return;let o=e.GetPercentOffsetFromTime(t.nTimeEnd,c.a0.Timeline);o<0||v.push(r.createElement(ho,{key:a,startPos:n,endPos:o,label:t.strTemplateName,color:t.color,onClick:e=>this.OnSegmentClick(t.nTimeStart)}))}));const w=e.GetPercentOffsetFromTime(e.m_editorStartTime,c.a0.Timeline),f=e.GetPercentOffsetFromTime(e.m_editorEndTime,c.a0.Timeline),b=this.props.bIncludeClipEditor?[r.createElement(uo,{key:"start",pos:w,label:(0,k.we)("#DASHPlayerControls_Start"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"start")}),r.createElement(uo,{key:"end",pos:f,label:(0,k.we)("#DASHPlayerControls_End"),onMouseEnter:this.OnMarkerMouseEnter,onMouseLeave:this.OnMarkerMouseLeave,onMouseDown:e=>this.OnMouseDown(e,"end")})]:[];return r.createElement("div",{className:"videoTimelineMain",tabIndex:0,onKeyDown:this.OnKeyDown},r.createElement("div",{className:_},r.createElement("div",{className:"DialogLabel"},h),r.createElement("div",{className:"STV_timelineSegmentsContainer"},v),r.createElement("div",{onMouseDown:this.OnMouseDown,onMouseMove:this.OnMouseHoverMove,onMouseLeave:this.OnMouseHoverLeave,ref:this.m_elSlider},r.createElement("div",{className:"VideoTimelineSlider"},r.createElement("div",{className:"STV_timelineValue",style:d}),r.createElement("div",{className:"STV_timelineGhostValue",style:m}),r.createElement("div",{className:"STV_timelineNoVideo",style:p}),C,b,Boolean(this.state.hoverX)&&r.createElement("div",{key:"grabbertime",style:{position:"absolute",left:this.state.hoverX-75,bottom:"30px"}},r.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"center"}},this.state.thumbnailURL&&r.createElement("img",{style:{width:"150px"},src:this.state.thumbnailURL}),r.createElement("span",{className:"STV_timelineGrabberValue",style:{position:"absolute",bottom:"4px"}},g))),r.createElement("div",{className:"STV_timelineGrabber_Wrapper",style:u},r.createElement("div",{className:"STV_timelineGrabber"+S},r.createElement("div",{className:"STV_timelineGrabberArrow"},r.createElement(A.apU,null))))))))}};(0,n.Cg)([m.oI],go.prototype,"OnMouseDown",null),(0,n.Cg)([m.oI],go.prototype,"OnMouseMove",null),(0,n.Cg)([m.oI],go.prototype,"OnMouseUp",null),(0,n.Cg)([m.oI],go.prototype,"OnKeyDown",null),(0,n.Cg)([m.oI],go.prototype,"OnMouseHoverMove",null),(0,n.Cg)([m.oI],go.prototype,"OnMouseHoverLeave",null),(0,n.Cg)([m.oI],go.prototype,"AdjustHoverForClientX",null),(0,n.Cg)([m.oI],go.prototype,"OnSegmentClick",null),(0,n.Cg)([m.oI],go.prototype,"OnMarkerMouseEnter",null),(0,n.Cg)([m.oI],go.prototype,"OnMarkerMouseLeave",null),go=(0,n.Cg)([s.PA],go);let _o=class extends r.Component{state={info:null};static getDerivedStateFromProps(e,t){if((!t.info||t.info.m_steamIDBroadcast!==e.steamID)&&(t.info&&(c.BroadcastWatchStore.StopInfo(t.info),t.info=null),e.steamID)){return{info:c.BroadcastWatchStore.StartInfo(e.steamID)}}return null}componentWillUnmount(){this.state.info&&c.BroadcastWatchStore.StopInfo(this.state.info)}RenderStreamSwitcher(){const e=this.props.steamID;return Un.td.stream[e]?r.createElement(So,{value:e,options:Un.td.stream,onChange:this.props.onLocalStreamChange}):null}render(){let{info:e}=this.state;if(!e)return null;let t="";e.m_nViewerCount&&(t=(0,Wn.Dq)(e.m_nViewerCount));let a=Un.td.bValid&&Un.td.stream&&Un.td.stream[e.m_steamIDBroadcast],n=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&(parseInt(e.m_strAppId)>0||a);const o=!this.props.bHideThumbnail&&this.props.bVerticalBroadcastChat&&a&&Un.td.gidEvent;return r.createElement("div",{className:"BroadcastDetails"},!this.props.bHideThumbnail&&r.createElement(g.y,{className:"broadcastDetailsThumbBlur",src:e.m_strThumbnailUrl,draggable:!1,duration:2500}),r.createElement("div",{className:"BroadcastDetailsHeader"},e&&e.m_strAppTitle&&r.createElement("div",{className:"displayColumn"},r.createElement("div",{className:"Info"},r.createElement("span",{className:"AppTitle"},e.m_strAppTitle),e.m_strTitle&&r.createElement("span",{className:"BroadcastTitle"}," - ",e.m_strTitle),this.props.onLocalStreamChange&&this.RenderStreamSwitcher()),t&&r.createElement("div",{className:"BroadcastDetailsHeader_ViewerCount"},r.createElement(A.y_e,null),(0,k.Yp)("#Broadcast_ViewerCount",t))),a&&this.props.onOpenLinkInNewWindow&&r.createElement("div",{className:"Actions"},r.createElement("div",{onClick:e=>this.props.onOpenLinkInNewWindow(e,Un.td.link),className:"BroadcastLink"},Un.td.linkName))),o&&r.createElement(Mn,{gidEvent:Un.td.gidEvent}),n&&r.createElement(kn,{id:Un.td.bValid&&Un.td.stream&&Un.td.stream[e.m_steamIDBroadcast]?Un.td.appID:parseInt(e.m_strAppId),type:"game"}))}};_o=(0,n.Cg)([s.PA],_o);class So extends r.Component{showContextMenu(e){const{options:t,value:a,onChange:n}=this.props,o=Object.keys(t).map((e=>r.createElement(h.IK,{key:e,onSelected:()=>n(e),bChecked:e===a},(0,k.we)(t[e]))));(0,i.lX)(r.createElement(h.tz,null,o),e)}render(){const{value:e,options:t}=this.props,a=t[e];return r.createElement("div",{className:"BroadcastLanguage",onClick:this.showContextMenu},r.createElement("span",null," - ",(0,k.we)(a)),r.createElement("div",{className:"ContextMenuButton"},r.createElement(A.GB9,null)))}}(0,n.Cg)([m.oI],So.prototype,"showContextMenu",null);let Co=class extends r.Component{constructor(e){super(e),this.state={sizableRegion:[]}}async AddLinkRegion(){let e=this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:2.5+e,yPosPct:2.5+e,widthPct:20,heightPct:15}),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}componentDidUpdate(e){0==e.linkRegions.length&&this.props.linkRegions.forEach(((e,t)=>{this.LoadLinkRegion(e,t)}))}async LoadLinkRegion(e,t){this.state.sizableRegion.length;this.state.sizableRegion.push({xPosPct:e.left,yPosPct:e.top,widthPct:e.width,heightPct:e.height,link_url:e.url,link_description:e.link_description,link_index:e.link_index}),await this.setState({sizableRegion:this.state.sizableRegion})}OnSaveRegions(){let e;e={links:[]};for(let t=0;t<this.state.sizableRegion.length;t++){let a;a={left:Math.floor(100*this.state.sizableRegion[t].xPosPct),top:Math.floor(100*this.state.sizableRegion[t].yPosPct),width:Math.floor(100*this.state.sizableRegion[t].widthPct),height:Math.floor(100*this.state.sizableRegion[t].heightPct),url:this.state.sizableRegion[t].link_url,link_description:this.state.sizableRegion[t].link_description,link_index:t},e.links.push(a)}this.props.onSaveLinkRegions(e)}async DeleteRegion(e){this.state.sizableRegion.splice(e,1),console.log("keys: ",this.state.sizableRegion.keys),this.setState({sizableRegion:this.state.sizableRegion},(()=>this.OnSaveRegions()))}async UpdatePanel(e,t){const a=[...this.state.sizableRegion];a[e]=t,this.setState({sizableRegion:a},(()=>this.OnSaveRegions()))}render(){return r.createElement("div",{className:"LinkOverlayContainer"},r.createElement("div",{className:"LinkOverlayValidRegion"},!this.props.editMode&&this.props.linkRegions?this.props.linkRegions.map((e=>{const t=(0,_.p)(e.url);return r.createElement(nt.uU,{key:e.link_index,href:e.url,bForceExternal:t,bUseLinkFilter:t},r.createElement("div",{className:"LinkRegion",style:{left:e.left+"%",top:e.top+"%",width:e.width+"%",height:e.height+"%"}},r.createElement("div",{className:"LinkRegionText"},e.link_description," ")))})):null,this.props.editMode&&this.state.sizableRegion.map(((e,t)=>r.createElement(Vn,{key:100*t+e.xPosPct,index:t,deleteFn:this.DeleteRegion,updateFn:this.UpdatePanel,xPosPct:e.xPosPct,yPosPct:e.yPosPct,widthPct:e.widthPct,heightPct:e.heightPct,link_url:e.link_url,link_description:e.link_description}))),this.props.editMode&&r.createElement("div",{className:"AddLinkRegion",onClick:this.AddLinkRegion},(0,k.we)("#SteamTV_AddLinkRegion"))),r.createElement("div",{className:"LinkOverlayInvalidRegion"},r.createElement("div",null,(0,k.we)("#SteamTV_LinkRegionReserved"))))}};(0,n.Cg)([m.oI],Co.prototype,"AddLinkRegion",null),(0,n.Cg)([m.oI],Co.prototype,"LoadLinkRegion",null),(0,n.Cg)([m.oI],Co.prototype,"OnSaveRegions",null),(0,n.Cg)([m.oI],Co.prototype,"DeleteRegion",null),(0,n.Cg)([m.oI],Co.prototype,"UpdatePanel",null),Co=(0,n.Cg)([s.PA],Co)},21023:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var n=a(55607),o=a(97621),s=a(83957),r=a.n(s);class i extends n.p{constructor(){super()}BInitialized(){return!0}GetServerTime(){return o.TS.PAGE_TIMESTAMP+Math.floor(performance.now()/1e3)}async RequestEmoticonListInternal(){let e=[];try{let t=await r().get(o.TS.CHAT_BASE_URL+"actions/EmoticonData",{withCredentials:!0});if(t.data.emoticons)for(let a of t.data.emoticons){let t=a.name;if(t.startsWith("^"))e.push({name:t});else{let n={name:t.substr(1,t.length-2)},o=n.name.toLowerCase();o!=n.name&&(n.name_normalized=o),a.time_last_used&&(n.last_used=a.time_last_used),a.use_count&&(n.use_count=a.use_count),a.time_received&&(n.time_received=a.time_received),a.appid&&(n.appid=a.appid),e.push(n)}}}catch(e){console.error("error loading emoticon list",e)}this.OnEmoticonListReceived(e)}}new i}}]);